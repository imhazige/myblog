<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v6.6.1 <https://qwtel.com/hydejack/>
--><head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="format-detection" content="telephone=no"> <meta http-equiv="x-ua-compatible" content="ie=edge"> <title>Ka's Blog &middot; Ka's Blog</title> <meta name="description" content="Ka’s blog description… "> <link rel="canonical" href="http://localhost:4000/page-43/"> <link rel="alternate" type="application/atom+xml" title="Ka's Blog Feed" href="http://localhost:4000/feed.xml"> <link rel="apple-touch-icon" href="/apple-touch-icon.png"> <!-- Place favicon.ico in the root directory --> <link rel="stylesheet" href="/assets/style.css"> <link id="_katexJS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.js"> <link id="_katexCSS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css"> <!--[if gt IE 8]><!----> <script> WebFontConfig = { google: { families: 'Roboto+Slab:700|Noto+Sans:400,400i,700,700i'.split('|') }, custom: { families: ['icomoon'], urls: ['/assets/icomoon/style.css'] } }; </script> <!--<![endif]--> <script> !function(n,e){function t(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function o(n,e){n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,n))}}n._loaded=!1,n.loadJSDeferred=function(a,d){function r(){n._loaded=!0;var r=e.createElement("script");r.src=a,d&&(("onload"in r?t:o)(r,d),r.onload||t(r,d));var l=e.getElementsByTagName("script")[0];l.parentNode.insertBefore(r,l)}n._loaded?r():n.addEventListener?n.addEventListener("load",r,!1):n.attachEvent?n.attachEvent("onload",r):n.onload=r}}(window,document); !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); window.disablePushState = false; window.disableDrawer = false; </script> <!--[if lt IE 9]> <script src="/assets/bower_components/html5shiv/dist/html5shiv.min.js"></script> <![endif]--> <!--[if gt IE 8]><!----> <style> article, aside, dialog, figcaption, figure, footer, header, hgroup, main, nav, section { display: block; } mark { background: #FF0; color: #000; } * { box-sizing: border-box; } html, body { margin: 0; padding: 0; } html { font-size: 16px; line-height: 1.75; } body { color: #333; background-color: #fff; overflow-y: scroll; } a { text-decoration: none; } .lead { margin-left: -1rem; margin-right: -1rem; } img, .img { display: block; max-width: 100%; margin-bottom: 1rem; border: none; } img.lead, .img.lead { max-width: calc(100% + 2rem); width: calc(100% + 2rem); } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-weight: bold; text-rendering: optimizeLegibility; } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 { margin: 3rem 0 1rem; line-height: 1.6; } h1, .h1 { font-size: 2rem; line-height: 1.25; } h2, .h2 { font-size: 1.5rem; } h3, .h3 { font-size: 1.17em; } p { margin-top: 0; margin-bottom: 1rem; } p.lead { font-size: 1.25rem; font-weight: 300; padding: 0 1rem; } ul, ol, dl { margin-top: 0; margin-bottom: 1rem; } ul, ol { padding-left: 1.25rem; } hr { position: relative; margin: 1.5rem 0; border: 0; border-top: 1px solid #eee; } .hr { padding-bottom: .5rem; border-bottom: 1px solid #eee; margin-bottom: 1.5rem; } h4, h5, h6, .h4, .h5, .h6 { margin-bottom: 0.5rem; font-size: 1rem; } table { margin-bottom: 1rem; width: 100%; width: calc(100% + 2rem); margin-left: -1rem; border: 1px solid #e5e5e5; border-collapse: collapse; border-spacing: 0; } td, th { padding: .25rem .5rem; border: 1px solid #e5e5e5; } td:first-child, th:first-child { padding-left: 1rem; } td:last-child, th:last-child { padding-right: 1rem; } thead + tbody, tbody + tbody, tfoot { border-top: 3px double #e5e5e5; } tbody tr:nth-child(odd) td, tbody tr:nth-child(odd) th { background-color: #f9f9f9; } footer { margin-bottom: 2rem; } .page, .post { margin-bottom: 3em; } .page li + li, .post li + li { margin-top: .25rem; } .page > header, .post > header { margin-bottom: 2rem; } .page-title, .post-title { margin-top: 0; } .post-date { display: block; margin-top: -0.5rem; margin-bottom: 1rem; color: #9a9a9a; } .related-posts { padding-left: 0; list-style: none; } .related-posts > li, .related-posts > li + li { margin-top: 1rem; } .related-posts > li > small, .related-posts > li + li > small { font-size: 75%; color: #9a9a9a; } .message { margin-bottom: 1rem; padding: 1rem; color: #787878; background-color: #f9f9f9; margin-left: -1rem; margin-right: -1rem; } /* * Global resets * * Update the foundational and global aspects of the page. */ body, main { /* Prevent side-scrolling on mobile */ position: relative; overflow-x: hidden; } @media screen { body::before { content: ''; width: .5rem; background: #e5e5e5; position: absolute; left: 0; top: 0; bottom: 0; } } @media screen and (min-width: 40em) { html { font-size: 17px; } } @media screen and (min-width: 54em) { html { font-size: 16px; } } @media screen and (min-width: 72em) { html { font-size: 17px; } } @media screen and (min-width: 125em) { html { font-size: 18px; } } .sr-only { display: none; } .clearfix, .sidebar-social::after, .clearafter::after { content: ""; display: table; clear: both; } a, .a { position: relative; padding-bottom: .15rem; border-bottom: 1px solid; } .img { overflow: hidden; background-color: #f9f9f9; } .img > img { margin: 0; width: 100%; height: 100%; } .sixteen-nine { position: relative; } .sixteen-nine::before { display: block; content: ""; width: 100%; padding-top: 56.25%; } .sixteen-nine > * { position: absolute; top: 0; left: 0; right: 0; bottom: 0; } h1 + hr, h2 + hr, h3 + hr, h4 + hr, h5 + hr, h6 + hr { margin-top: 0; } .fade-in { animation-duration: 500ms; animation-name: fade-in; animation-fill-mode: forwards; } @keyframes fade-in { from { transform: translateY(-2rem); opacity: 0; } 50% { transform: translateY(-2rem); opacity: 0; } to { transform: translateY(0); opacity: 1; } } .mb6 { margin-bottom: 6rem; } .sidebar { color: rgba(255, 255, 255, 0.75); text-align: left; /* Sidebar links */ } .sidebar::before { /* make sidebar slightly darker to increase text readability (when using a background image) */ content: ""; position: absolute; z-index: 2; top: 0; left: 0; bottom: 0; right: 0; background: linear-gradient(to bottom, rgba(32, 32, 32, 0) 0%, rgba(32, 32, 32, 0.5) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */ } .sidebar a { color: #fff; border-bottom-color: rgba(255, 255, 255, 0.2); } #_yDrawer { position: relative; padding: 1rem 0; } @media screen { #_yDrawer { padding: 2rem 1rem; min-height: 640px; min-height: 100vh; } } @media screen and (min-width: 54em) { #_yDrawer { position: fixed; top: 0; left: 0; bottom: 0; width: 18rem; margin-left: 0; } } @media screen and (min-width: 97.5em) { #_yDrawer { width: calc(50% - 28rem); } } @media screen { #_yDrawer.loaded { min-height: 0; padding: 0; } } .sidebar-bg { position: absolute; top: 0; right: 0; bottom: 0; left: 0; background: #202020 center / cover; } .sidebar-sticky { position: relative; z-index: 3; } @media screen { .sidebar-sticky { position: absolute; right: 2rem; bottom: 1rem; left: auto; max-width: 14rem; } } @media print { .sidebar-sticky { padding: 0 2rem; } } /* About section */ .sidebar-about > h1 { color: #fff; font-size: 2rem; } .sidebar-nav > ul { list-style: none; padding-left: 0; margin-bottom: .5rem; } a.sidebar-nav-item { font-weight: bold; display: block; line-height: 1.75; padding: .25rem 0; border-bottom: 1px solid rgba(255, 255, 255, 0.2); } @media screen { .y-drawer-scrim { z-index: 2; } .y-drawer-content { width: 18rem; left: -17.5rem; z-index: 3; } } @media screen and (min-width: 97.5em) { .y-drawer-content { width: calc(50% - 28rem); } } .sidebar-social { margin-bottom: .5rem; } .sidebar-social > ul { list-style: none; padding-left: 0; margin: 0 -.25rem; } .sidebar-social > ul > li { float: left; margin: 0 .25rem; } .sidebar-social > ul > li > a { display: inline-block; text-align: center; font-size: 1.6rem; line-height: 3rem; width: 3.1249rem; height: 4rem; padding: .5rem 0; } .sidebar-social > ul li + li { margin-top: 0; } .fixed-top { position: fixed; top: 0; left: 0; width: 100%; z-index: 1; } .navbar > .content { padding-top: 0; padding-bottom: 0; min-height: 0; height: 0; } .menu { display: inline-block; padding: 1.75rem 1.5rem; border-bottom: none; margin-left: -1.5rem; color: #9a9a9a !important; } .menu::after { content: "\2630"; } @media screen and (min-width: 54em) { .menu { padding: 1.25rem 1.5rem; position: absolute; left: -9999px; } .menu:focus { position: static; } } .animation-main { pointer-events: none; } .loading { display: none; } @media print { .menu { display: none; } } .animation-main { opacity: 0; will-change: opacity; } .loading { position: absolute; top: 0; right: 0; padding: 5.25rem 4.5rem; transform-origin: top right; transform: scale(0.33); } .content { position: relative; margin-left: auto; margin-right: auto; padding: 5rem 1rem 12rem; } @media screen { .content { max-width: 38rem; padding-left: 1.5rem; min-height: 100vh; } } @media screen and (min-width: 54em) { .content { max-width: 42rem; padding: 4rem 1rem 12rem; margin-left: 22rem; margin-right: 4rem; } } @media screen and (min-width: 72em) { .content { margin-left: 22rem; margin-right: 4rem; } } @media screen and (min-width: 92em) { .content { max-width: 48rem; } } @media screen and (min-width: 97.5em) { .content { margin: auto; } } .me { float: right; width: 6.5rem; height: 6.5rem; margin-left: 1rem; margin-bottom: .5rem; border-radius: 100%; position: relative; } @media screen and (min-width: 40em) { .me { width: 7rem; height: 7rem; } } @media screen and (min-width: 54em) { .me { width: 6.5rem; height: 6.5rem; } } @media screen and (min-width: 60em) { .me { width: 7rem; height: 7rem; } } main > footer { position: absolute; bottom: 0; left: 0; right: 0; padding: 0 1rem; color: #9a9a9a; font-size: smaller; text-align: center; } main > footer > p { margin-bottom: 0; } /* .card, .pagination-item { border-radius: 0!important; } */ /* @media screen { .sidebar-sticky { left: 2rem; max-width: none; } } */ html { font-family: Helvetica, Arial, sans-serif; } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: Helvetica, Arial, sans-serif; } </style> <link id="_stylePreload" rel="preload" as="style" href="/assets/css/hydejack.css?v=6.6.1"> <script>document.getElementById('_stylePreload').onload=function(){this.rel='stylesheet'}</script> <!-- NOTE: These styles interact with JavsScript, so they MUST NOT be changed --> <style id="_pageStyle"> .content a { color: #4f86aa; border-color: rgba(79, 134, 170, 0.2); } .content a:hover { border-color: #4f86aa; } :focus { outline-color: #4f86aa; } ::selection { color: #fff; background: #4f86aa; } ::-moz-selection { color: #fff; background: #4f86aa; } </style> <noscript> <link rel="stylesheet" href="/assets/css/hydejack.css?v=6.6.1"> <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|Noto+Sans:400,400i,700,700i"> <style> html { font-family: 'Noto Sans', Helvetica, Arial, sans-serif } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: 'Roboto Slab', Helvetica, Arial, sans-serif } </style> <link rel="stylesheet" href="/assets/icomoon/style.css"> </noscript> <!--<![endif]--> <!--[if gt IE 8]><!----> <script async src="/assets/bower_components/webfontloader/webfontloader.js"></script> <!--<![endif]--> </head> <body> <div class="navbar fixed-top"> <div class="content"> <span class="sr-only">Jump to:</span> <a id="_menu" class="menu no-hover" href="#_title"> <span class="sr-only">Menu</span> </a> </div> </div> <div id="_yPushState"> <div class="fade-in"> <main id="_main" class="content" role="main" data-color="#4f86aa" data-image=""> <article id="post-java/2011/07/11/maven%e6%89%93%e5%8c%85%ef%bc%8c%e5%9c%a8manifest-mf%e9%87%8c%e9%9d%a2%e5%8a%a0%e5%85%a5%e6%97%b6%e9%97%b4%e6%88%b3" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/2011/07/11/maven-e6-89-93-e5-8c-85-ef-bc-8c-e5-9c-a8manifest-mf-e9-87-8c-e9-9d-a2-e5-8a-a0-e5-85-a5-e6-97-b6-e9-97-b4-e6-88-b3.html" data-flip="title"> maven打包，在manifest.mf里面加入时间戳 </a> </h1> <p class="post-date heading"> <time datetime="2011-07-11T22:52:12+08:00">11 Jul 2011</time> in <span>Java</span> on <span>Maven</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>我不得不再次痛恨一番maven，用起来真是恶心：</p> <p>今天遇到这么个问题，我想在war包里面的manifest.mf文件中加入时间戳。怎么写pom?</p> <p>首先maven文档说，可以用那个maven-antrun-plugin来加入时间啊,照着它说的做:</p> <p><a href="http://maven.apache.org/plugin-developers/cookbook/add-build-time-to-manifest.html" title="http://maven.apache.org/plugin-developers/cookbook/add-build-time-to-manifest.html">http://maven.apache.org/plugin-developers/cookbook/add-build-time-to-manifest.html</a>&nbsp;（不推荐）</p> <p>打jar包倒没问题，可我要打war包就不行了。</p> <p>然后看到这么个插件buildnumber-maven-plugin:</p> <p>需要添加配置:</p> <div><pre><span style="color: #0000ff">&lt;</span><span style="color: #800000">plugin</span><span style="color: #0000ff">&gt;</span>
				<span style="color: #0000ff">&lt;</span><span style="color: #800000">groupId</span><span style="color: #0000ff">&gt;</span>org.codehaus.mojo<span style="color: #0000ff">&lt;/</span><span style="color: #800000">groupId</span><span style="color: #0000ff">&gt;</span>
				<span style="color: #0000ff">&lt;</span><span style="color: #800000">artifactId</span><span style="color: #0000ff">&gt;</span>buildnumber-maven-plugin<span style="color: #0000ff">&lt;/</span><span style="color: #800000">artifactId</span><span style="color: #0000ff">&gt;</span>
				<span style="color: #0000ff">&lt;</span><span style="color: #800000">executions</span><span style="color: #0000ff">&gt;</span>
					<span style="color: #0000ff">&lt;</span><span style="color: #800000">execution</span><span style="color: #0000ff">&gt;</span>
						<span style="color: #0000ff">&lt;</span><span style="color: #800000">phase</span><span style="color: #0000ff">&gt;</span>validate<span style="color: #0000ff">&lt;/</span><span style="color: #800000">phase</span><span style="color: #0000ff">&gt;</span>
						<span style="color: #0000ff">&lt;</span><span style="color: #800000">goals</span><span style="color: #0000ff">&gt;</span>
							<span style="color: #0000ff">&lt;</span><span style="color: #800000">goal</span><span style="color: #0000ff">&gt;</span>create<span style="color: #0000ff">&lt;/</span><span style="color: #800000">goal</span><span style="color: #0000ff">&gt;</span>
						<span style="color: #0000ff">&lt;/</span><span style="color: #800000">goals</span><span style="color: #0000ff">&gt;</span>
					<span style="color: #0000ff">&lt;/</span><span style="color: #800000">execution</span><span style="color: #0000ff">&gt;</span>
				<span style="color: #0000ff">&lt;/</span><span style="color: #800000">executions</span><span style="color: #0000ff">&gt;</span>
				<span style="color: #0000ff">&lt;</span><span style="color: #800000">configuration</span><span style="color: #0000ff">&gt;</span>
					<span style="color: #0000ff">&lt;</span><span style="color: #800000">format</span><span style="color: #0000ff">&gt;</span>{0,date,yyyyMMdd-HHmmss}<span style="color: #0000ff">&lt;/</span><span style="color: #800000">format</span><span style="color: #0000ff">&gt;</span>
					<span style="color: #0000ff">&lt;</span><span style="color: #800000">items</span><span style="color: #0000ff">&gt;</span>
						<span style="color: #0000ff">&lt;</span><span style="color: #800000">item</span><span style="color: #0000ff">&gt;</span>timestamp<span style="color: #0000ff">&lt;/</span><span style="color: #800000">item</span><span style="color: #0000ff">&gt;</span>
					<span style="color: #0000ff">&lt;/</span><span style="color: #800000">items</span><span style="color: #0000ff">&gt;</span>
					<span style="color: #0000ff">&lt;</span><span style="color: #800000">buildNumberPropertyName</span><span style="color: #0000ff">&gt;</span>
						current.timestamp
					<span style="color: #0000ff">&lt;/</span><span style="color: #800000">buildNumberPropertyName</span><span style="color: #0000ff">&gt;</span>
				<span style="color: #0000ff">&lt;/</span><span style="color: #800000">configuration</span><span style="color: #0000ff">&gt;</span>
			<span style="color: #0000ff">&lt;/</span><span style="color: #800000">plugin</span><span style="color: #0000ff">&gt;</span></pre></div> <p>然后在maven-war-plugin中添加入口:</p> <div><pre></pre><p><span style="color: #0000ff">&lt;</span><span style="color: #800000">plugin</span><span style="color: #0000ff">&gt;</span> <span style="color: #0000ff">&lt;</span><span style="color: #800000">groupId</span><span style="color: #0000ff">&gt;</span>org.apache.maven.plugins<span style="color: #0000ff">&lt;/</span><span style="color: #800000">groupId</span><span style="color: #0000ff">&gt;</span> <span style="color: #0000ff">&lt;</span><span style="color: #800000">artifactId</span><span style="color: #0000ff">&gt;</span>maven-war-plugin<span style="color: #0000ff">&lt;/</span><span style="color: #800000">artifactId</span><span style="color: #0000ff">&gt;</span> <span style="color: #0000ff">&lt;</span><span style="color: #800000">configuration</span><span style="color: #0000ff">&gt;</span> <span style="color: #0000ff">&lt;</span><span style="color: #800000">warName</span><span style="color: #0000ff">&gt;xxxxx</span><span style="color: #0000ff">&lt;/</span><span style="color: #800000">warName</span><span style="color: #0000ff">&gt;</span> <span style="color: #0000ff">&lt;</span><span style="color: #800000">archive</span><span style="color: #0000ff">&gt;</span> <span style="color: #0000ff">&lt;</span><span style="color: #800000">manifestEntries</span><span style="color: #0000ff">&gt;</span> <span style="color: #0000ff">&lt;</span><span style="color: #800000">Project</span>-<span style="color: #ff0000">name</span><span style="color: #0000ff">&gt;</span>${project.name}<span style="color: #0000ff">&lt;/</span><span style="color: #800000">Project</span>-name<span style="color: #0000ff">&gt;</span> <span style="color: #0000ff">&lt;</span><span style="color: #800000">Project</span>-<span style="color: #ff0000">version</span><span style="color: #0000ff">&gt;</span> ${project.version} <span style="color: #0000ff">&lt;/</span><span style="color: #800000">Project</span>-version<span style="color: #0000ff">&gt;</span> <span style="color: #0000ff">&lt;</span><span style="color: #800000">Build</span>-<span style="color: #ff0000">Time</span><span style="color: #0000ff">&gt;</span> <em><strong>${current.timestamp}</strong></em> <span style="color: #0000ff">&lt;/</span><span style="color: #800000">Build</span>-Time<span style="color: #0000ff">&gt;</span> <span style="color: #0000ff">&lt;/</span><span style="color: #800000">manifestEntries</span><span style="color: #0000ff">&gt;</span> <span style="color: #0000ff">&lt;/</span><span style="color: #800000">archive</span><span style="color: #0000ff">&gt;</span></p> <blockquote> <p><span style="color: #0000ff">&hellip;&hellip;</span></p> </blockquote> </div> <p>&nbsp;</p> <div>这样写还没完，直接打包会报错误：</div> <p>&nbsp;</p> <p>java.lang.NullPointerException: The scm url cannot be null. &nbsp;&nbsp;&nbsp; at org.apache.maven.scm.manager.AbstractScmManager.makeScmRepository(AbstractScmManager.java:183)</p> <p>&nbsp;</p> <p>查了查，说是要加个没用的scm节点才行:</p> <p>&nbsp;</p> <div><pre><span style="color: #0000ff">&lt;</span><span style="color: #800000">scm</span><span style="color: #0000ff">&gt;</span>
		<span style="color: #0000ff">&lt;</span><span style="color: #800000">connection</span><span style="color: #0000ff">&gt;</span>scm:svn:http://127.0.0.1/none<span style="color: #0000ff">&lt;/</span><span style="color: #800000">connection</span><span style="color: #0000ff">&gt;</span>
		<span style="color: #0000ff">&lt;</span><span style="color: #800000">developerConnection</span><span style="color: #0000ff">&gt;</span>
			scm:svn:https://127.0.0.1/none
		<span style="color: #0000ff">&lt;/</span><span style="color: #800000">developerConnection</span><span style="color: #0000ff">&gt;</span>
		<span style="color: #0000ff">&lt;</span><span style="color: #800000">tag</span><span style="color: #0000ff">&gt;</span>HEAD<span style="color: #0000ff">&lt;/</span><span style="color: #800000">tag</span><span style="color: #0000ff">&gt;</span>
		<span style="color: #0000ff">&lt;</span><span style="color: #800000">url</span><span style="color: #0000ff">&gt;</span>http://127.0.0.1/isaynone<span style="color: #0000ff">&lt;/</span><span style="color: #800000">url</span><span style="color: #0000ff">&gt;</span>
	<span style="color: #0000ff">&lt;/</span><span style="color: #800000">scm</span><span style="color: #0000ff">&gt;</span></pre></div> <p>这里面的url都是无用，瞎写都可以。直接复制过去也可。</p> <p>这样就可以加入时间戳到manifest.mf里面去了。</p> <p>&nbsp;</p> <p>不过我真服了这样的解决办法。maven有多恶心就多恶心了！ <br /> &nbsp;</p> <p>&nbsp;</p> <p>----------</p> <p>这里补充一下jar包的情形：</p> <p>不要使用官方<a href="http://maven.apache.org/plugin-developers/cookbook/add-build-time-to-manifest.html" title="http://maven.apache.org/plugin-developers/cookbook/add-build-time-to-manifest.html">http://maven.apache.org/plugin-developers/cookbook/add-build-time-to-manifest.html</a></p> <p>这个办法容易遇到m2e的老问题 http://ljhzzyx.blog.163.com/blog/static/383803122013440345857/</p> <p>所以还是推荐使用buildnumber-maven-plugin的方式，大部分一样针对<span class="s3">maven</span>-jar-<span class="s3">plugin修改</span></p> <p class="p1"><span class="s1">&lt;</span>plugin<span class="s1">&gt;</span></p> <p class="p2"><span class="s1">&lt;</span><span class="s2">groupId</span><span class="s1">&gt;</span>org.apache.maven.plugins<span class="s1">&lt;/</span><span class="s2">groupId</span><span class="s1">&gt;</span></p> <p class="p2"><span class="s1">&lt;</span><span class="s2">artifactId</span><span class="s1">&gt;</span><span class="s3">maven</span>-jar-<span class="s3">plugin</span><span class="s1">&lt;/</span><span class="s2">artifactId</span><span class="s1">&gt;</span></p> <p class="p1"><span class="s1">&lt;</span>version<span class="s1">&gt;</span><span class="s4">2.2</span><span class="s1">&lt;/</span>version<span class="s1">&gt;</span></p> <p class="p1"><span class="s1">&lt;</span>configuration<span class="s1">&gt;</span></p> <p class="p1"><span class="s1">&lt;</span>archive<span class="s1">&gt;</span></p> <p class="p1"><span class="s1">&lt;</span>manifestEntries<span class="s1">&gt;</span></p> <p class="p2"><span class="s1">&lt;</span><span class="s2">Copyright</span><span class="s1">&gt;kzg</span>&nbsp;2013<span class="s1">&lt;/</span><span class="s2">Copyright</span><span class="s1">&gt;</span></p> <p class="p1"><span class="s1">&lt;</span>Project-name<span class="s1">&gt;</span><span class="s4">${project.name}</span><span class="s1">&lt;/</span>Project-name<span class="s1">&gt;</span></p> <p class="p1"><span class="s1">&lt;</span>Project-version<span class="s1">&gt;</span><span class="s4">${project.version}</span><span class="s1">&lt;/</span>Project-version<span class="s1">&gt;</span></p> <p class="p2"><span class="s1">&lt;</span><span class="s2">Build-Time</span><span class="s1">&gt;</span>${current.timestamp}<span class="s1">&lt;/</span><span class="s2">Build-Time</span><span class="s1">&gt;</span></p> <p class="p1"><span class="s1">&lt;/</span>manifestEntries<span class="s1">&gt;</span></p> <p class="p1"><span class="s1">&lt;/</span>archive<span class="s1">&gt;</span></p> <p class="p2"><span class="s1">&lt;</span><span class="s2">skip</span><span class="s1">&gt;</span>true<span class="s1">&lt;/</span><span class="s2">skip</span><span class="s1">&gt;</span></p> <p class="p1"><span class="s1">&lt;/</span>configuration<span class="s1">&gt;</span></p> <p>&nbsp;</p> <p class="p1"><span class="s1">&lt;/</span>plugin<span class="s1">&gt;</span></p> <p><span><br /> </span></p> <p>&nbsp;</p> <p>还有个方法：</p> <p>http://m.oschina.net/blog/95181</p> <p class="read-more">Continue reading <a class="heading" href="/java/2011/07/11/maven-e6-89-93-e5-8c-85-ef-bc-8c-e5-9c-a8manifest-mf-e9-87-8c-e9-9d-a2-e5-8a-a0-e5-85-a5-e6-97-b6-e9-97-b4-e6-88-b3.html" data-flip="title">maven打包，在manifest.mf里面加入时间戳</a></p> </article> <article id="post-apple/2011/07/11/%e9%bb%91%e8%8b%b9%e6%9e%9c%e5%ae%89%e8%a3%85%e6%89%8b%e8%ae%b0" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/apple/2011/07/11/e9-bb-91-e8-8b-b9-e6-9e-9c-e5-ae-89-e8-a3-85-e6-89-8b-e8-ae-b0.html" data-flip="title"> 黑苹果安装手记 </a> </h1> <p class="post-date heading"> <time datetime="2011-07-11T03:24:23+08:00">11 Jul 2011</time> in <span>Apple</span> on <span>Iphone</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>这两天倒腾了下macos,安装在我的leveo g550上。目的是想在上面开发iphone。最后倒是安装成功了，但是上不了网，没声音，显卡驱动估计也不对，因为界面看起来灰蒙蒙的。我就倒腾这个驱动啊，哎呀我的神呀，搞得我头昏眼花的，还是搞不定。这期间看诸多论坛，都是不推荐黑苹果和虚拟机，要开发iphone那还得整个mac book。</p> <p>我也颇有同感，这黑苹果安装成功的本就少，你要找个驱动那就难上加难了。出了什么问题也没有什么资料，大把的时间倒是花在倒腾山寨去了。即使安装成功，遇到个什么升级啊，你只能干咽口水。</p> <p>还是记录下过程：</p> <p>照着这篇文档：<a title="http://bbs.weiphone.com/read-htm-tid-517742.html" href="http://bbs.weiphone.com/read-htm-tid-517742.html">http://bbs.weiphone.com/read-htm-tid-517742.html</a></p> <p>他整的比较详细，我按照上面的来就安成功了。我下的是<a href="//|file|%5B%E8%8B%B9%E6%9E%9C%E9%9B%AA%E8%B1%B9%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%AD%A3%E5%BC%8F%E7%89%88%5D.snowleopard_10a432_userdvd.dmg|6586892984|cfbd9bf61eea3d358e19c57b96435fee|/" target="_blank">very cd</a>上的安装文件。</p> <p>主要注意安装好后活动分区被修改的问题，教程说使用winpe什么的，但有个前提，要将bios里面修改硬盘模式为ide（compatible）再启动winpe或其他。活动分区修复后又得再将硬盘模式改回 sata（ahci）。否则winpe什么的都运行不正常。或者mac os启动不了。</p> <p>我遇到的问题主要就是驱动：网卡，声卡。在<a href="http://www.kexts.com">www.kexts.com</a>上找了些，下载了都不行，改了权限还是不行。错误的驱动还导致无法关闭mac os。</p> <p>上不了网可最麻烦了，没有声音写程序不好调试。</p> <p>&#160;</p> <p>这期间还遇到奇怪的问题，一在google上差英文苹果,就被土啬了，不知这怎么也成敏+ 感+ 词了。不知道谷歌还能撑几天……</p> <p class="read-more">Continue reading <a class="heading" href="/apple/2011/07/11/e9-bb-91-e8-8b-b9-e6-9e-9c-e5-ae-89-e8-a3-85-e6-89-8b-e8-ae-b0.html" data-flip="title">黑苹果安装手记</a></p> </article> <article id="post-apple/2011/07/09/beginning-iphone-games-development-%e8%af%bb%e4%b9%a6%e7%ac%94%e8%ae%b0" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/apple/2011/07/09/beginning-iphone-games-development-e8-af-bb-e4-b9-a6-e7-ac-94-e8-ae-b0.html" data-flip="title"> Beginning.iPhone.Games.Development 读书笔记 </a> </h1> <p class="post-date heading"> <time datetime="2011-07-09T00:39:50+08:00">09 Jul 2011</time> in <span>Apple</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>第二章：</p> <p>UIKit:也可用来开发简单的游戏，如果不要求达到60fps,它是可行的。</p> <p>Quartz 2D and Core Animation：它也可以开发游戏，但是有点慢。Core Animation可以为UIKit的元素创建动画，而且是硬件加速的。</p> <p>OpenGL ES(6-8章):则是首要工具了，可以绘制3D,2D.</p> <p>Audio APIs(9-12章):openAL提供声音API.</p> <p>Networking(13-16章):sockets,streams, Bonjour, servers, clients, Bluetooth, and Wi-Fi.</p> <p>矩阵类型？</p> <p>绘制基础：</p> <p>EAGLView.包装了CAEAGLLayer.</p> <p>暂且打住（没有mac book），先熟悉下webGL.……</p> <p class="read-more">Continue reading <a class="heading" href="/apple/2011/07/09/beginning-iphone-games-development-e8-af-bb-e4-b9-a6-e7-ac-94-e8-ae-b0.html" data-flip="title">Beginning.iPhone.Games.Development 读书笔记</a></p> </article> <article id="post-%E8%8B%B1%E8%AF%AD/2011/07/09/it-e-49-program-debugging-and-program-maintenance" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E8%8B%B1%E8%AF%AD/2011/07/09/it-e-49-program-debugging-and-program-maintenance.html" data-flip="title"> it-e-49 Program Debugging and Program Maintenance </a> </h1> <p class="post-date heading"> <time datetime="2011-07-09T00:06:46+08:00">09 Jul 2011</time> in <span>英语</span> on <span>English</span>, <span>It</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>If your program exits abnormally, then there is almost certainly a logical error (a bug) in <br />your program. 99% of programming is finding and removing these bugs. Here are some tips to <br />help you get started. <br />Before going on, it is necessary to reiterate the standard <font color="#0000ff">OLC</font> policy on program debugging: <br />Do *NOT* ask OLC for help debugging a program.[1] This stock answer is intended to give you <br />some tips on how to get started in this area; however, in general, program debugging requires <br />more time and effort than consultants are usually able to provide. <br />The first step is to find the exact line where the program exits. One way of doing this is with <br />print statements scattered through your code. For example, you might do something like this in <br />your source code: <br />myplot(int x, int y) <br />{ printf(&quot;Entering myplot()\n&quot;); fflush(stdout); <br />---- lots of code here ------ <br />printf(&quot;Exiting myplot()\n&quot;); fflush(stdout); <br />return; } <br />The fflush() command in C ensures that the print statement is sent to your screen immediately, <br />and you should use it if you're using printf() for debugging purposes. <br />[2] Once you have <font color="#0000ff">narrowed down the line where your bug occurs</font>, the next step is to find out <br />the value of your variables at that time. You will probably find that one of your variables <br />contains very strange values. This is the time to check that you have not done the following <br />things: <br />Assigned an integer value to a pointer variable; or <br />Written to a subscript that is beyond the end of an array (remember that in C array <br />subscripts go from 0 to N-1, not from 1 to N.) <br />Other mistakes also cause bugs. Make sure that your loops test correctly for their end conditions, <br />for example. <br />Other kinds of bugs (programs not exiting, incorrect output) are debugged using similar <br />methods. Again, find the line where the first error occurs, and then check the values of your <br />variables. Once you fix a bug, recompile your program, run it again, and then debug it again as <br />necessary.</p> <p>Using printf() is a primitive method of debugging, but sometimes it's the only one that will <br />work . If your program is too big for a debugger (such as Saber or Ddbx) or if you are working <br />on a non-Athena platform, you may not have a debugger available. Usually, though, it is quicker <br />and easier to use a debugger. Athena has several sophisticated debugging tools available. Saber is <br />the tool of choice for C programmers. Gdb and Dbx may also come in handy, and both of these <br />work with Fortran as well as with C. There are stock answers that introduce Saber and Dbx, and <br />Saber even comes with a tutorial. <br />It is a fact of life in program design but there seems to be always one last bug or error to be <br />corrected. We can broadly classify the errors as: <br /> Syntax errors this class of error means that a mistake is made in the language used to <br />state the algorithm. <br /> Logic errors the algorithm is syntactically correct but doesn't do what is intended. <br /> Data range and data type errors the algorithm is syntactically correct and logically <br />correct but can be threatened by the wrong kind of data or by values which are out of <br />range. <br />[3] The syntax errors aren't a serious issue during the program design phase since in practice, <br />after designing and testing the design, the program will be implemented in a computer program <br />language and it is at this point that syntax errors become a problem. Even so syntax errors are a <br />minor problem since the process of building the program will capture the errors. The program <br />simply won't build until all the syntax errors are removed. <br />The logic errors are a much more serious problem since there is no way to eliminate these <br />other than rigorously testing the program design. <br />The data errors are also serious errors and in some respects are harder to deal with than logic <br />errors. <br />Once launched, the program needs to be maintained. Definition for program maintenance is <br />that updating programs from time to time keeps abreast of changes in an organization's needs or its <br />hardware and software. Based on the maintenance tasks needed to be performed, the program <br />administrators should determine on-going financial and <font color="#0000ff">staffing</font> needs and how they will be met. <br />Program maintenance represents a major portion of the total <font color="#0000ff">expenditures </font>on application programs.</p> <p>&#160;</p> <p>OLCThe Online Learning Center</p> <p>1, expenditures&#160;&#160; <br />n. 开支，支出（expenditure复数形式） </p> <p>2, staff&#160; [stɑ:f] <br />n. 全体人员,同事 <br />n. 杆,棒 <br />vt. 配备员工 </p> <p class="read-more">Continue reading <a class="heading" href="/%E8%8B%B1%E8%AF%AD/2011/07/09/it-e-49-program-debugging-and-program-maintenance.html" data-flip="title">it-e-49 Program Debugging and Program Maintenance</a></p> </article> <article id="post-%E8%8B%B1%E8%AF%AD/2011/07/08/it-e-48-oop-is-much-better-in-theory-than-in-practice" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E8%8B%B1%E8%AF%AD/2011/07/08/it-e-48-oop-is-much-better-in-theory-than-in-practice.html" data-flip="title"> it-e-48 OOP Is Much Better in Theory Than in Practice </a> </h1> <p class="post-date heading"> <time datetime="2011-07-08T00:25:59+08:00">08 Jul 2011</time> in <span>英语</span> on <span>English</span>, <span>It</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>Like many ideas that sound good in theory but are clumsy in practice, object-oriented <br />programming (OOP) offers benefits only in a specialized context—namely, group programming. <br />And even in that circumstance the benefits are <font color="#0000ff">dubious</font>, though the <font color="#0000ff">proponents</font> of OOP would <br />have you believe otherwise. Some shops claim OOP success, but many I've spoken with are still <br />&quot;working on it.&quot; Still trying to get OOP right after ten years? Something strange is going on here. <br />Certainly for the great majority of programmers—amateurs working alone to create <br />programs such as a quick sales tax utility for a small business or a geography <font color="#0000ff">quiz</font> for <br />Junior—the machinery of OOP is almost always far more trouble than it's worth. OOP just <br />introduces an unnecessary layer of complexity to procedure-oriented design. That's why very few <br />programming books I've read use OOP techniques (classes, etc.) in their code examples. The <br />examples are written as functions, not as methods within objects. Programming books are trying <br />to teach programming—not the primarily <font color="#0000ff">clerical</font> and taxonomic <font color="#0000ff">essence</font> of OOP. Those few <br />books that do superimpose the OOP mechanisms on their code are, not surprisingly, teaching <br />about the mysteries of OOP itself. <br />Of course professional gang programming has specialized requirements. Chief among them <br />is that the programmers don't step on each other's toes. For instance, a friend who programs for <br />one of the world's largest software companies told me he knows precisely what he'll be working <br />on in one year. Obviously, OOP makes sense in such a <font color="#0000ff">bureaucratic</font> system because it needs to be <br />intensely clerical. Helping to manage large-scale, complex-programming jobs like the one in <br />which my friend is involved is the primary value of OOP. It's a clerical system with some built-in <br />security features. In my view, confusing OOP with programming is a mistake. <br />Contradiction Leads to Confusion <br />Consider the profound contradiction between the OOP practices of encapsulation and <br />inheritance. To keep your code bug-free, encapsulation hides procedures (and sometimes even <br />data) from other programmers and doesn't allow them to edit it. Inheritance then asks these same <br />programmers to inherit, modify, and reuse this code that they cannot see—they see what goes in <br />and what comes out, but they must remain ignorant of what's going on inside. In effect, a <br />programmer with no knowledge of the specific inner workings of your encapsulated class is <br />asked to reuse it and modify its members. True, OOP includes features to help deal with this <br />problem, but why does OOP generate problems it must then deal with later? <br />All this leads to the familiar granularity paradox in OOP: should you create only extremely <br />small and simple classes for stability (some computer science professors say yes), or should you <br />make them large and abstract for flexibility (other professors say yes). Which is it? <br />A frequent argument for OOP is it helps with code reusability, but one can reuse code <br />without OOP—often by simply copying and pasting. There's no need to superimpose some <br />elaborate structure of interacting, instantiated objects, with all the messaging and fragility that it</p> <p>introduces into a program. Further, most programming is done by individuals. Hiding code from <br />oneself just seems weird. Obviously, some kind of structure must be imposed on people <br />programming together in groups, but is OOP—with all its baggage and inefficiency—the right <br />solution?</p> <p>1, dubious&#160; ['dju:bjəs] <br />a. 怀疑的,可疑的 </p> <p>2, proponents&#160;&#160; <br />n. 支持者；建议者（proponent的复数） </p> <p>3, quiz&#160; [kwiz] <br />n. 小考,随堂测验,恶作剧 <br />v. 简单测验,恶作剧 </p> <p>4, clerical&#160; ['klerikəl] <br />n. 牧师 <br />a. 书记的,事务上的,抄写员的 </p> <p>5, essence&#160; ['esns] <br />n. 本质,精髓 </p> <p>6, bureaucratic&#160; [,bjurəu'krætik] <br />adj. 官僚的；官僚政治的 </p> <p>7, intensely&#160;&#160; <br />ad. 强烈地(一心一意地) </p> <p class="read-more">Continue reading <a class="heading" href="/%E8%8B%B1%E8%AF%AD/2011/07/08/it-e-48-oop-is-much-better-in-theory-than-in-practice.html" data-flip="title">it-e-48 OOP Is Much Better in Theory Than in Practice</a></p> </article> <article id="post-web%E5%89%8D%E7%AB%AF/2011/07/07/link-css-%e5%8a%a0%e8%bd%bd%e5%88%a4%e6%96%ad%e8%a7%a3%e5%86%b3%e4%b8%8d%e4%ba%86%e7%9a%84%e9%97%ae%e9%a2%98%ef%bc%9f" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/2011/07/07/link-css-e5-8a-a0-e8-bd-bd-e5-88-a4-e6-96-ad-e8-a7-a3-e5-86-b3-e4-b8-8d-e4-ba-86-e7-9a-84-e9-97-ae-e9-a2-98-ef-bc-9f.html" data-flip="title"> link css 加载判断,解决不了的问题？ </a> </h1> <p class="post-date heading"> <time datetime="2011-07-07T23:45:04+08:00">07 Jul 2011</time> in <span>Web前端</span> on <span>Javascript web 前端</span>, <span>Web html css 前端</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>先看原理: </p> <p> Chrome / Safari: <br />&#160;&#160;&#160; linkNode.sheet 在 css 文件下载完成并解析好后才有值，之前为 undefined <br />&#160;&#160;&#160; linkNode.sheet.cssRules 同域时返回 CSSRuleList, 跨域时返回 null </p> <p><font color="#0000ff">&#160;&#160;&#160; chrome还是不一样</font> </p> <p>&#160; Firefox: <br />&#160;&#160;&#160; linkNode.sheet 在 css 插入 DOM 中后立刻有值，插入前为 undefined <br />&#160;&#160;&#160; linkNode.sheet.cssRules 在文件还未下好时，抛出 NS_ERROR_DOM_INVALID_ACCESS_ERR <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 在文件下载并解析好后， <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 同域时返回 cssRuleList <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <font color="#0000ff"> 只要是跨域(不管对错)</font>抛出 NS_ERROR_DOM_SECURITY_ERR </p> <p>&#160; IE6-9 / Opera: <br />&#160;&#160;&#160; linkNode.sheet 和 cssRules 在 css 插入 DOM 后都立刻可访问，cssRules 为 [] <br />&#160;&#160;&#160; 当文件下载完成时，cssRules 为 cssRuleList <br />&#160;&#160;&#160; IE 下，无论成功失败，都会触发 onload <br />&#160;&#160;&#160; Opera 只在成功时才触发 onload,<font color="#0000ff">跨域时访问cssRules 会抛异常。 </font></p> <p>&#160; 缺陷：Opera 遇到 404 时，需要降级到 timeout</p> <p></p> <p>这样的写法: </p> <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:bbcb8ae0-d775-42ad-8a06-36703ed85267" class="wlWriterEditableSmartContent">name="code" class="js:firstline[1]">function checkcss(link) { try { if (link.sheet &amp;&amp; link.sheet.cssRules.length &gt; 0) return true; else if (link.styleSheet &amp;&amp; link.styleSheet.cssText.length &gt; 0) return true; else if (link.innerHTML &amp;&amp; link.innerHTML.length &gt; 0) return true; } <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/2011/07/07/link-css-e5-8a-a0-e8-bd-bd-e5-88-a4-e6-96-ad-e8-a7-a3-e5-86-b3-e4-b8-8d-e4-ba-86-e7-9a-84-e9-97-ae-e9-a2-98-ef-bc-9f.html" data-flip="title">link css 加载判断,解决不了的问题？</a></p> </article> <article id="post-web/2011/07/07/%e4%bd%bf%e7%94%a8%e5%8f%8d%e5%90%91%e4%bb%a3%e7%90%86%e9%97%ae%e9%a2%98" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web/2011/07/07/e4-bd-bf-e7-94-a8-e5-8f-8d-e5-90-91-e4-bb-a3-e7-90-86-e9-97-ae-e9-a2-98.html" data-flip="title"> 使用反向代理问题 </a> </h1> <p class="post-date heading"> <time datetime="2011-07-07T18:43:45+08:00">07 Jul 2011</time> in <span>Web</span> on <span>Java</span>, <span>Web</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>之前写了函数如下:</p> <div><pre><span style="color: #0000ff">public</span> <span style="color: #0000ff">static</span> String buildUrl(String strHost, String strContext, String argAbsolutePath)
	{
		<span style="color: #0000ff">if</span> (!argAbsolutePath.startsWith(&quot;<span style="color: #8b0000">/</span>&quot;))
		{
			argAbsolutePath = &quot;<span style="color: #8b0000">/</span>&quot; + argAbsolutePath;
		}
		<span style="color: #0000ff">return</span> MessageFormat.format(&quot;<span style="color: #8b0000">http://{0}{1}{2}</span>&quot;, <span style="color: #0000ff">new</span> Object[] { strHost, strContext, argAbsolutePath });
	}</pre></div> <p>什么意思大家应该懂，以前一直都没问题，现在用上反向代理后，就出问题了。</p> <p>从请求头获得的host居然是相对于反向代理服务器的地址。</p> <p>使用的是apache，发现可以通过设置ProxyPreserveHost 为On来不改变原始host值。</p> <p>当然即使不开ProxyPreserveHost 选项apache也会加个<code>X-Forwarded-Host</code>来获得原始host,不过这个头不是标准http头。</p> <p>这样的话还是有问题的，你只获得了host还有后面的原始context部分怎么得呢？</p> <p>这就要求使用相对定位来安排资源。 </p> <p class="read-more">Continue reading <a class="heading" href="/web/2011/07/07/e4-bd-bf-e7-94-a8-e5-8f-8d-e5-90-91-e4-bb-a3-e7-90-86-e9-97-ae-e9-a2-98.html" data-flip="title">使用反向代理问题</a></p> </article> <article id="post-%E8%8B%B1%E8%AF%AD/2011/07/07/it-e-47-object-orienta-tion" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E8%8B%B1%E8%AF%AD/2011/07/07/it-e-47-object-orienta-tion.html" data-flip="title"> it-e-47 Object Orienta tion </a> </h1> <p class="post-date heading"> <time datetime="2011-07-07T00:28:40+08:00">07 Jul 2011</time> in <span>英语</span> on <span>English</span>, <span>It</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>OO can model a complex reality in a very natural way. <br />An example is &quot;the cup of coffee&quot;. This shows interaction between customer, waiter and <br />kitchen. <br /> Customer and kitchen don't know each other. The waiter is the <font color="#0000ff">intermediary</font>. (Encapsulation). <br /> Waiter and kitchen act differently to the request &quot;a black coffee&quot; (Polymorphism) <br /> Both waiter and kitchen supply coffee (Inheritance). <br />The benefits of OO are higher for complex business processes. The more complex the better. <br />Different responsibilities, lots of exceptions, and processes that &quot;look alike&quot;. Those are the ideal <br />ingredients for an OO approach.</p> <p>Encapsulation means as much as shielding. Each <br />OO object has a shield around it. Objects can't &quot;see&quot; each <br />other. They can exchange things though, as if they are <br />interconnected through a <font color="#0000ff">hatch</font>. <br />Customer, waiter and kitchen are three shielded objects <br />in the &quot;cup of coffee&quot; example. Customer and kitchen do not <br />know each other. The waiter is the intermediary between <br />those two. Objects can't see each other in an Object-oriented <br />world. The 'hatch' enables them to communicate and exchange coffee and money. <br />Encapsulation keeps computer systems flexible. The business process can change easily. <br />The customer does not care about the coffee brew process. Even the waiter does not care. This <br />allows the kitchen to be reconstructed, is only the &quot;hatch&quot; remains the same. It is even possible to <br />change the entire business process. Suppose the waiter will brew coffee himself. The customer <br />won't notice any difference. <br />Encapsulation enables OO experts to build flexible systems. Systems that can extend as your <br />business extends. Every module of the system can change independently, no impact to the other <br />modules. <br />Objects can respond differently to the same message. Both waiter as kitchen respond to&quot;a <br />black coffee&quot;. <br />The actions are different though. <br /> The waiter passes the message to the <br />kitchen, waits for response, delivers <br />coffee and settles the account. <br /> The kitchen brews fresh coffee and <br />passes it to the waiter. <br />The same message with different <br />implementations, that is polymorphism. <br />Polymorphism makes Object-oriented systems extremely suitable for various exceptions and <br />exceptions to exceptions. <br />Inheritance <br />Similar, but just a little bit different. The world is full of exceptions and similarities. Object <br />Orientation places everything perfectly in a class tree. <br /> Both waiter and cook are employees. So they both <br />have an employee number. This generic <br />employee number gets a generic place in <br />Employee. <br /> Both return a cup of coffee to the question &quot;A <br />cup of coffee please&quot;. That similar behavior</p> <p>also gets a generic place in Employee. <br /> There are some exceptions. Waiter and <br />Cook have different methods to get a <br />cup of <br />coffee. Those specific methods get a <br />specific place, reusing the more generic <br />part in Employee. <br />No matter how complex your business <br />situation is, Object Orientation can cope with <br />it.</p> <p>&#160;</p> <p>1, intermediary&#160; [,intə'mi:diəri] <br />adj. 中间的；媒介的；中途的 <br />n. 中间人；仲裁者；调解者；媒介物 </p> <p>2, hatch&#160; [hætʃ] <br />n. 孵化；舱口 <br />vt. 孵；策划 <br />vi. 孵化 </p> <p>3, cope&#160; [kəup] <br />v. (with)竞争,对抗,对付,妥善处理 <br />vi. 对付,妥善处理 </p> <p class="read-more">Continue reading <a class="heading" href="/%E8%8B%B1%E8%AF%AD/2011/07/07/it-e-47-object-orienta-tion.html" data-flip="title">it-e-47 Object Orienta tion</a></p> </article> <article id="post-web%E5%89%8D%E7%AB%AF/2011/07/06/%e6%88%91%e7%9a%84resize-%e5%ae%9e%e7%8e%b0-javascript" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/2011/07/06/e6-88-91-e7-9a-84resize-e5-ae-9e-e7-8e-b0-javascript.html" data-flip="title"> 我的resize 实现 javascript </a> </h1> <p class="post-date heading"> <time datetime="2011-07-06T22:01:02+08:00">06 Jul 2011</time> in <span>Web前端</span> on <span>Javascript web 前端</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <div>>var c = 0; <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/2011/07/06/e6-88-91-e7-9a-84resize-e5-ae-9e-e7-8e-b0-javascript.html" data-flip="title">我的resize 实现 javascript</a></p> </article> <article id="post-web%E5%89%8D%E7%AB%AF/2011/07/06/setcapture%e8%bf%99%e4%b8%aa%e4%ba%8b" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/2011/07/06/setcapture-e8-bf-99-e4-b8-aa-e4-ba-8b.html" data-flip="title"> setCapture这个事,move,drag </a> </h1> <p class="post-date heading"> <time datetime="2011-07-06T20:39:35+08:00">06 Jul 2011</time> in <span>Web前端</span> on <span>Javascript web 前端</span>, <span>Web css javascript</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>setCapture一般用在drag move,resize的实现上。它只能在IE上使用，目的是为了捕获onclick, ondblclick, onmousedown, onmouseup, onmousemove, onmouseout, 和onmouseover这类鼠标事件，不让目标节点失去捕获。</p> <p>又是你可能会看到像dragmove这样的实现将mousemove这样的事件监听到document上面，这样的做法是过时的。在IE下只要你调用了setCapture,就不会出现鼠标移出目标节点就捕获不到事件的事情了。对于非IE浏览器或者IE9之后的IE,只要使用addEventListener就可以达到同样的效果。但是当鼠标快速移动时，IE里面还是要表现好很多,特别是有iframe的情况，IE根本不受鼠标移到iframe上的影响。而其他浏览器则由于鼠标事件属于iframe的dom造成移动停止。</p> <p>改进方案是按照extjs的做法,移动时将原来的element隐藏，而只构建一个与原来element同样大小，位置的element.对此element进行移动，再将新的位置结果赋值给原来的element。</p> <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/2011/07/06/setcapture-e8-bf-99-e4-b8-aa-e4-ba-8b.html" data-flip="title">setCapture这个事,move,drag</a></p> </article> <h2 class="sr-only">Pagination</h2> <nav class="pagination heading" role="navigation"> <ul> <li class="pagination-item older" > <a rel="next" href="/page-44/">Older</a> </li> <li class="pagination-item newer" > <a rel="prev" href="/page-42/">Newer</a> </li> </ul> </nav> <footer> <hr/> <p>© 2011 - 2017. All rights reserved.</p> <p> <code>Powered by <a href="https://qwtel.com/hydejack/">Hydejack</a> v<span id="_version">6.6.1</span></code> </p> </footer> </main> </div> <div id="_yDrawer"> <div id="_sidebar" class="sidebar"> <div class="sidebar-bg" style="background-color:#4f86aa;background-image:url()"></div> <header class="sidebar-sticky" role="banner"> <div class="sidebar-about"> <img src="https://avatars0.githubusercontent.com/u/4122902?v=4&s=460" class="me" /> </div> <div class="sidebar-about"> <h1><a id="_title" href="/">Ka's Blog</a></h1> <p>Ka’s blog description…</p> </div> <nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span> <ul> <li> <a class="sidebar-nav-item" href="/categories.html">Categories</a> </li> <li> <a class="sidebar-nav-item" href="/archive.html">Archive</a> </li> <li> <a class="sidebar-nav-item" href="/tags.html">Tags</a> </li> <li> <a class="sidebar-nav-item" href="/about.html">About</a> </li> </ul> </nav> <div class="sidebar-social"> <span class="sr-only">Social:</span> <ul> <li> <a href="https://twitter.com/imhazige" title="Twitter"> <span class="icon-twitter"></span> <span class="sr-only">Twitter</span> </a> </li> <li> <a href="https://github.com/imhazige" title="GitHub"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a> </li> <li> <a href="mailto:imhazige@gmail.com" title="Email"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a> </li> <li> <a href="https://imhazige.github.io/myblog/feed.xml" title="RSS"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a> </li> </ul> </div> </header> </div> </div> </div> <!--[if gt IE 9]><!----> <script>loadJSDeferred('/assets/js/hydejack.js?v=6.6.1');</script> <!--<![endif]--> </body>
</html>
