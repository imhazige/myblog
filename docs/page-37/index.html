<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v6.6.1 <https://qwtel.com/hydejack/>
--><head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="format-detection" content="telephone=no"> <meta http-equiv="x-ua-compatible" content="ie=edge"> <title>Ka's Blog &middot; Ka's Blog</title> <meta name="description" content="Ka’s blog description… "> <link rel="canonical" href="http://localhost:4000/page-37/"> <link rel="alternate" type="application/atom+xml" title="Ka's Blog Feed" href="http://localhost:4000/feed.xml"> <link rel="apple-touch-icon" href="/apple-touch-icon.png"> <!-- Place favicon.ico in the root directory --> <link rel="stylesheet" href="/assets/style.css"> <link id="_katexJS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.js"> <link id="_katexCSS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css"> <!--[if gt IE 8]><!----> <script> WebFontConfig = { google: { families: 'Roboto+Slab:700|Noto+Sans:400,400i,700,700i'.split('|') }, custom: { families: ['icomoon'], urls: ['/assets/icomoon/style.css'] } }; </script> <!--<![endif]--> <script> !function(n,e){function t(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function o(n,e){n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,n))}}n._loaded=!1,n.loadJSDeferred=function(a,d){function r(){n._loaded=!0;var r=e.createElement("script");r.src=a,d&&(("onload"in r?t:o)(r,d),r.onload||t(r,d));var l=e.getElementsByTagName("script")[0];l.parentNode.insertBefore(r,l)}n._loaded?r():n.addEventListener?n.addEventListener("load",r,!1):n.attachEvent?n.attachEvent("onload",r):n.onload=r}}(window,document); !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); window.disablePushState = false; window.disableDrawer = false; </script> <!--[if lt IE 9]> <script src="/assets/bower_components/html5shiv/dist/html5shiv.min.js"></script> <![endif]--> <!--[if gt IE 8]><!----> <style> article, aside, dialog, figcaption, figure, footer, header, hgroup, main, nav, section { display: block; } mark { background: #FF0; color: #000; } * { box-sizing: border-box; } html, body { margin: 0; padding: 0; } html { font-size: 16px; line-height: 1.75; } body { color: #333; background-color: #fff; overflow-y: scroll; } a { text-decoration: none; } .lead { margin-left: -1rem; margin-right: -1rem; } img, .img { display: block; max-width: 100%; margin-bottom: 1rem; border: none; } img.lead, .img.lead { max-width: calc(100% + 2rem); width: calc(100% + 2rem); } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-weight: bold; text-rendering: optimizeLegibility; } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 { margin: 3rem 0 1rem; line-height: 1.6; } h1, .h1 { font-size: 2rem; line-height: 1.25; } h2, .h2 { font-size: 1.5rem; } h3, .h3 { font-size: 1.17em; } p { margin-top: 0; margin-bottom: 1rem; } p.lead { font-size: 1.25rem; font-weight: 300; padding: 0 1rem; } ul, ol, dl { margin-top: 0; margin-bottom: 1rem; } ul, ol { padding-left: 1.25rem; } hr { position: relative; margin: 1.5rem 0; border: 0; border-top: 1px solid #eee; } .hr { padding-bottom: .5rem; border-bottom: 1px solid #eee; margin-bottom: 1.5rem; } h4, h5, h6, .h4, .h5, .h6 { margin-bottom: 0.5rem; font-size: 1rem; } table { margin-bottom: 1rem; width: 100%; width: calc(100% + 2rem); margin-left: -1rem; border: 1px solid #e5e5e5; border-collapse: collapse; border-spacing: 0; } td, th { padding: .25rem .5rem; border: 1px solid #e5e5e5; } td:first-child, th:first-child { padding-left: 1rem; } td:last-child, th:last-child { padding-right: 1rem; } thead + tbody, tbody + tbody, tfoot { border-top: 3px double #e5e5e5; } tbody tr:nth-child(odd) td, tbody tr:nth-child(odd) th { background-color: #f9f9f9; } footer { margin-bottom: 2rem; } .page, .post { margin-bottom: 3em; } .page li + li, .post li + li { margin-top: .25rem; } .page > header, .post > header { margin-bottom: 2rem; } .page-title, .post-title { margin-top: 0; } .post-date { display: block; margin-top: -0.5rem; margin-bottom: 1rem; color: #9a9a9a; } .related-posts { padding-left: 0; list-style: none; } .related-posts > li, .related-posts > li + li { margin-top: 1rem; } .related-posts > li > small, .related-posts > li + li > small { font-size: 75%; color: #9a9a9a; } .message { margin-bottom: 1rem; padding: 1rem; color: #787878; background-color: #f9f9f9; margin-left: -1rem; margin-right: -1rem; } /* * Global resets * * Update the foundational and global aspects of the page. */ body, main { /* Prevent side-scrolling on mobile */ position: relative; overflow-x: hidden; } @media screen { body::before { content: ''; width: .5rem; background: #e5e5e5; position: absolute; left: 0; top: 0; bottom: 0; } } @media screen and (min-width: 40em) { html { font-size: 17px; } } @media screen and (min-width: 54em) { html { font-size: 16px; } } @media screen and (min-width: 72em) { html { font-size: 17px; } } @media screen and (min-width: 125em) { html { font-size: 18px; } } .sr-only { display: none; } .clearfix, .sidebar-social::after, .clearafter::after { content: ""; display: table; clear: both; } a, .a { position: relative; padding-bottom: .15rem; border-bottom: 1px solid; } .img { overflow: hidden; background-color: #f9f9f9; } .img > img { margin: 0; width: 100%; height: 100%; } .sixteen-nine { position: relative; } .sixteen-nine::before { display: block; content: ""; width: 100%; padding-top: 56.25%; } .sixteen-nine > * { position: absolute; top: 0; left: 0; right: 0; bottom: 0; } h1 + hr, h2 + hr, h3 + hr, h4 + hr, h5 + hr, h6 + hr { margin-top: 0; } .fade-in { animation-duration: 500ms; animation-name: fade-in; animation-fill-mode: forwards; } @keyframes fade-in { from { transform: translateY(-2rem); opacity: 0; } 50% { transform: translateY(-2rem); opacity: 0; } to { transform: translateY(0); opacity: 1; } } .mb6 { margin-bottom: 6rem; } .sidebar { color: rgba(255, 255, 255, 0.75); text-align: left; /* Sidebar links */ } .sidebar::before { /* make sidebar slightly darker to increase text readability (when using a background image) */ content: ""; position: absolute; z-index: 2; top: 0; left: 0; bottom: 0; right: 0; background: linear-gradient(to bottom, rgba(32, 32, 32, 0) 0%, rgba(32, 32, 32, 0.5) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */ } .sidebar a { color: #fff; border-bottom-color: rgba(255, 255, 255, 0.2); } #_yDrawer { position: relative; padding: 1rem 0; } @media screen { #_yDrawer { padding: 2rem 1rem; min-height: 640px; min-height: 100vh; } } @media screen and (min-width: 54em) { #_yDrawer { position: fixed; top: 0; left: 0; bottom: 0; width: 18rem; margin-left: 0; } } @media screen and (min-width: 97.5em) { #_yDrawer { width: calc(50% - 28rem); } } @media screen { #_yDrawer.loaded { min-height: 0; padding: 0; } } .sidebar-bg { position: absolute; top: 0; right: 0; bottom: 0; left: 0; background: #202020 center / cover; } .sidebar-sticky { position: relative; z-index: 3; } @media screen { .sidebar-sticky { position: absolute; right: 2rem; bottom: 1rem; left: auto; max-width: 14rem; } } @media print { .sidebar-sticky { padding: 0 2rem; } } /* About section */ .sidebar-about > h1 { color: #fff; font-size: 2rem; } .sidebar-nav > ul { list-style: none; padding-left: 0; margin-bottom: .5rem; } a.sidebar-nav-item { font-weight: bold; display: block; line-height: 1.75; padding: .25rem 0; border-bottom: 1px solid rgba(255, 255, 255, 0.2); } @media screen { .y-drawer-scrim { z-index: 2; } .y-drawer-content { width: 18rem; left: -17.5rem; z-index: 3; } } @media screen and (min-width: 97.5em) { .y-drawer-content { width: calc(50% - 28rem); } } .sidebar-social { margin-bottom: .5rem; } .sidebar-social > ul { list-style: none; padding-left: 0; margin: 0 -.25rem; } .sidebar-social > ul > li { float: left; margin: 0 .25rem; } .sidebar-social > ul > li > a { display: inline-block; text-align: center; font-size: 1.6rem; line-height: 3rem; width: 3.1249rem; height: 4rem; padding: .5rem 0; } .sidebar-social > ul li + li { margin-top: 0; } .fixed-top { position: fixed; top: 0; left: 0; width: 100%; z-index: 1; } .navbar > .content { padding-top: 0; padding-bottom: 0; min-height: 0; height: 0; } .menu { display: inline-block; padding: 1.75rem 1.5rem; border-bottom: none; margin-left: -1.5rem; color: #9a9a9a !important; } .menu::after { content: "\2630"; } @media screen and (min-width: 54em) { .menu { padding: 1.25rem 1.5rem; position: absolute; left: -9999px; } .menu:focus { position: static; } } .animation-main { pointer-events: none; } .loading { display: none; } @media print { .menu { display: none; } } .animation-main { opacity: 0; will-change: opacity; } .loading { position: absolute; top: 0; right: 0; padding: 5.25rem 4.5rem; transform-origin: top right; transform: scale(0.33); } .content { position: relative; margin-left: auto; margin-right: auto; padding: 5rem 1rem 12rem; } @media screen { .content { max-width: 38rem; padding-left: 1.5rem; min-height: 100vh; } } @media screen and (min-width: 54em) { .content { max-width: 42rem; padding: 4rem 1rem 12rem; margin-left: 22rem; margin-right: 4rem; } } @media screen and (min-width: 72em) { .content { margin-left: 22rem; margin-right: 4rem; } } @media screen and (min-width: 92em) { .content { max-width: 48rem; } } @media screen and (min-width: 97.5em) { .content { margin: auto; } } .me { float: right; width: 6.5rem; height: 6.5rem; margin-left: 1rem; margin-bottom: .5rem; border-radius: 100%; position: relative; } @media screen and (min-width: 40em) { .me { width: 7rem; height: 7rem; } } @media screen and (min-width: 54em) { .me { width: 6.5rem; height: 6.5rem; } } @media screen and (min-width: 60em) { .me { width: 7rem; height: 7rem; } } main > footer { position: absolute; bottom: 0; left: 0; right: 0; padding: 0 1rem; color: #9a9a9a; font-size: smaller; text-align: center; } main > footer > p { margin-bottom: 0; } /* .card, .pagination-item { border-radius: 0!important; } */ /* @media screen { .sidebar-sticky { left: 2rem; max-width: none; } } */ html { font-family: Helvetica, Arial, sans-serif; } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: Helvetica, Arial, sans-serif; } </style> <link id="_stylePreload" rel="preload" as="style" href="/assets/css/hydejack.css?v=6.6.1"> <script>document.getElementById('_stylePreload').onload=function(){this.rel='stylesheet'}</script> <!-- NOTE: These styles interact with JavsScript, so they MUST NOT be changed --> <style id="_pageStyle"> .content a { color: #4f86aa; border-color: rgba(79, 134, 170, 0.2); } .content a:hover { border-color: #4f86aa; } :focus { outline-color: #4f86aa; } ::selection { color: #fff; background: #4f86aa; } ::-moz-selection { color: #fff; background: #4f86aa; } </style> <noscript> <link rel="stylesheet" href="/assets/css/hydejack.css?v=6.6.1"> <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|Noto+Sans:400,400i,700,700i"> <style> html { font-family: 'Noto Sans', Helvetica, Arial, sans-serif } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: 'Roboto Slab', Helvetica, Arial, sans-serif } </style> <link rel="stylesheet" href="/assets/icomoon/style.css"> </noscript> <!--<![endif]--> <!--[if gt IE 8]><!----> <script async src="/assets/bower_components/webfontloader/webfontloader.js"></script> <!--<![endif]--> </head> <body> <div class="navbar fixed-top"> <div class="content"> <span class="sr-only">Jump to:</span> <a id="_menu" class="menu no-hover" href="#_title"> <span class="sr-only">Menu</span> </a> </div> </div> <div id="_yPushState"> <div class="fade-in"> <main id="_main" class="content" role="main" data-color="#4f86aa" data-image=""> <article id="post-java/2011/08/31/custom-components-and-friendly-urls" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/2011/08/31/custom-components-and-friendly-urls.html" data-flip="title"> itsnat -- Custom components and friendly URLs </a> </h1> <p class="post-date heading"> <time datetime="2011-08-31T17:03:49+08:00">31 Aug 2011</time> in <span>Java</span> on <span>Custom components and friendly urls</span>, <span>Itsnat</span>, <span>Java</span>, <span>Web</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>中文版:<a href="http://kazge.com/archives/291.html" target="_blank">itsnat--自定义控件入门和友好的url</a></p> <p><a id="internal-source-marker_0.5152134992879932" href="http://www.innowhere.com:8080/itsnat/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">itsnat</span></a>&#160; is a interesting java web framework, which implemented TBITS(<span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">The Browser Is The Server ), it mocks a <b>Universal W3C Java Browser </b>in the server, the client send the client browser's action to the server by AJAX, then mapping them to W3C Java Dom action, the DOM in the server response with the action and send result to the client, the client use the result to synchronize the DOM in the client browser with the server DOM with javascript, really wonderful idea, right?</span></p> <p><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">To design a custom component, need flowing steps:(these code will create a custom Dialog component)</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> </span><br /> <h5>1: Add Listener to the Template</h5> <h5></h5></p> <p><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Java code:</span>&#160;</p> <div>>String html = &quot;<span style="color: #8b0000">E:/projects/ItsNat/wb/test/WebRoot/apps/pto/frontpage.html</span>&quot;; ItsNatDocumentTemplate docTemplate = getItsNatHttpServlet().registerItsNatDocumentTemplate(&quot;<span style="color: #8b0000">pto</span>&quot;,&quot;<span style="color: #8b0000">text/html</span>&quot;, html); docTemplate.addItsNatServletRequestListener(<span style="color: #0000ff">new</span> ItsNatServletRequestListener(){ <p class="read-more">Continue reading <a class="heading" href="/java/2011/08/31/custom-components-and-friendly-urls.html" data-flip="title">itsnat -- Custom components and friendly URLs</a></p> </article> <article id="post-web/2011/08/29/%e3%80%90%e8%bd%ac%e3%80%91%e5%ae%89%e5%85%a8%e7%9a%84session%e7%ae%a1%e7%90%86" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web/2011/08/29/e3-80-90-e8-bd-ac-e3-80-91-e5-ae-89-e5-85-a8-e7-9a-84session-e7-ae-a1-e7-90-86.html" data-flip="title"> 【转】安全的session管理 </a> </h1> <p class="post-date heading"> <time datetime="2011-08-29T21:30:26+08:00">29 Aug 2011</time> in <span>Web</span> on <span>Session</span>, <span>Web</span>, <span>安全</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <div class="right_page"> <p>好文章，转载以备份。原文出自<a href="http://knowledge.twisc.ntust.edu.tw/doku.php?id=3%E4%BC%BA%E6%9C%8D%E7%AB%AF%E5%AE%89%E5%85%A8:3-1%E4%BC%BA%E6%9C%8D%E5%99%A8%E7%AE%A1%E7%90%86:%E5%AE%89%E5%85%A8%E7%9A%84session%E7%AE%A1%E7%90%86" target="_blank">这里</a>。</p> <p>&nbsp;</p> <h2><a id="前言" name="前言">前言</a></h2> <div class="level2"> <p>session 的管理對網站應用程式非常的重要，不適當或不夠嚴謹的管理也會造成安全上的問題，以下針對 session 管理相關的安全問題分項探討。</p> <p>&nbsp;</p> </div> <h2><a id="使用_framework_內建的_session_manager" name="使用_framework_內建的_session_manager">使用 Framework 內建的 Session Manager</a></h2> <div class="level2"> <p>藉由 session 限制與維護使用者的行為是網路安全很重要的一環。大多數的人會使用網站應用程式框架內建的 session 管理，有些人會使用 <acronym title="Practical Extraction and Report Language">Perl</acronym> CGI。網站開發者應盡量避免自行開發 session 管理，因為自行開發常常會藏有許多漏洞，而框架內建的 session 管理經過多次測試與修復相對上較為安全。此外這些框架會持續維護其安全性，因此要確保做好更新與安裝修補程式的動作。</p> <ul> <li class="level1"> <div class="li">密碼強度<br /> Session handler 的一個重點是 session token 或 session ID 的密碼強度，Session handler 產生的 token 必須是無法預知並且長度夠長讓人無法猜測的到。Session tokens 必須每個使用者都不同、無法預測、能抵抗反向工程。</div> </li> <li class="level1"> <div class="li">適當的 Key Space<br /> 一個加密的演算法也可能因為 Key space 不夠大造成攻擊者使用暴力解來取得內容。因此 token 的 Key space 必須足夠大來防禦暴力攻擊法，並且注意電腦計算能力與寬頻能力已隨著時代進步。</div> </li> <li class="level1"> <div class="li">Session Identifier（session ID）<br /> Session Identifier 應該使用最大可用的 character set，如果一個 session ID 要由 8 characters of 7 bits 組成，有效密鑰長度為56位，但如果使用的 character set 只有整數可用 4 bits表示，有效密鑰長度就只有32位。因此一個好的 session ID 應盡量使用越多 characters 越好，但一些特殊字元有轉譯的麻煩，所以大多的 frameworks 採用 A-Z 和 0-9 有些還添加了小寫 a-z。</div> </li> </ul> </div> <h2><a id="驗證由客戶端傳來的_session_id" name="驗證由客戶端傳來的_session_id">驗證由客戶端傳來的 Session ID</a></h2> <div class="level2"> <p>所有由客戶端傳來的資料都必須經過編碼和驗證，許多 frameworks 會驗證和編碼從 GET 和 POST 而來的 input，但未充分編碼從客戶端 cookie 傳來的 session ID 值。下面的 <a class="urlextern" title="http://www.owasp.org/index.php/Category:OWASP_Enterprise_Security_API" rel="nofollow" href="http://www.owasp.org/index.php/Category:OWASP_Enterprise_Security_API">ESAPI</a> code 片段使用 ESAPI 中的 method 來驗證 session ID 的值：</p> <div><pre><span style="color: #0000ff;">public</span> String getRequestedSessionId() {
     String id = request.getRequestedSessionId();
     String clean = "<span style="color: #8b0000;"> </span>";
     <span style="color: #0000ff;">try</span> {
          clean = ESAPI.validator().getValidInput( "<span style="color: #8b0000;">Requested cookie: </span>" + id, id, "<span style="color: #8b0000;">HTTPJSESSIONID</span>", 50, <span style="color: #0000ff;">false</span> );
     } <span style="color: #0000ff;">catch</span> (ValidationException e ) {
          <span style="color: #008000;">// already logged</span>
     }
     <span style="color: #0000ff;">return</span> clean;
 }</pre><p>&nbsp;</p> </div> <p>&nbsp;</p> </div> <h2><a id="確保_idle_和_timeouts_時間夠短" name="確保_idle_和_timeouts_時間夠短">確保 idle 和 timeouts 時間夠短</a></h2> <div class="level2"> <p>根據業務需求和安全性的考量，session 必須有一有限的壽命，在一定時間後過期。網站應用程式必須將靜止一段時間的 session 設為過期，刪除此 session 並一併更改 session cookie 的內容。</p> <p>&nbsp;</p> </div> <h2><a id="在使用者登出後銷毀_session" name="在使用者登出後銷毀_session">在使用者登出後銷毀 session</a></h2> <div class="level2"> <p>當使用者登出後網站應用程式需讓 session 無效或者移除此 session，並且如果隨後有別的使用者登入必須取得不同的 session ID。要做到這樣的機制，當使用者 logout 時必須改寫 session cookies 註明已過期並銷毀 session。以下是 ESAPI code 的例子：</p> <div><pre><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> logout() {
     ESAPI.httpUtilities().killCookie( ESAPI.currentRequest(), ESAPI.currentResponse(), HTTPUtilities.REMEMBER_TOKEN_COOKIE_NAME );

     HttpSession session = ESAPI.currentRequest().getSession(<span style="color: #0000ff;">false</span>);
     <span style="color: #0000ff;">if</span> (session != <span style="color: #0000ff;">null</span>) {
          session.invalidate();
     }
     ESAPI.httpUtilities().killCookie(ESAPI.currentRequest(), ESAPI.currentResponse(), "<span style="color: #8b0000;">JSESSIONID</span>");
     loggedIn = <span style="color: #0000ff;">false</span>;
     logger.info(Logger.SECURITY, "<span style="color: #8b0000;">Logout successful</span>" );
     ESAPI.authenticator().setCurrentUser(User.ANONYMOUS);
}</pre><p>&nbsp;</p> </div> <p>&nbsp;</p> </div> <div><pre><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> killCookie(HttpServletRequest request, HttpServletResponse response, String name) {
     String path = "<span style="color: #8b0000;">//</span>";
     String domain="<span style="color: #8b0000;"> </span>";
     Cookie cookie = ESAPI.httpUtilities().getCookie(request, name);
     <span style="color: #0000ff;">if</span> ( cookie != <span style="color: #0000ff;">null</span> ) {
          path = cookie.getPath();
          domain = cookie.getDomain();
     }
     SafeResponse safeResponse = <span style="color: #0000ff;">new</span> SafeResponse( response );
     safeResponse.addCookie(name, "<span style="color: #8b0000;">deleted</span>", 0, domain, path);
}</pre><p>&nbsp;</p> </div> <div class="level2"></div> <h2><a id="輪換_session_id" name="輪換_session_id">輪換 Session ID</a></h2> <div class="level2"> <p>對於高安全性網站，網站應用程式在處理重要的程序之前，或是經過某一段時間和幾次 requests 後，必須重新產生 session ID。中等或低等的網站，在使用者權限改變時也應該重新產生 session ID ，例如從訪客變成登入的會員或從登入者變成管理者。以下是 ESAPI code 重新產生 Session ID 的例子：</p> <div><pre><span style="color: #0000ff;">public</span> HttpSession changeSessionIdentifier(HttpServletRequest request) <span style="color: #0000ff;">throws</span> AuthenticationException {

     <span style="color: #008000;">// get the current session</span>
     HttpSession session = request.getSession();

     <span style="color: #008000;">// make a copy of the session content</span>
     Map temp = <span style="color: #0000ff;">new</span> HashMap();
     Enumeration e = session.getAttributeNames();
     <span style="color: #0000ff;">while</span> (e != <span style="color: #0000ff;">null</span> &amp;&amp; e.hasMoreElements()) {
          String name = (String) e.nextElement();
          Object value = session.getAttribute(name);
          temp.put(name, value);
     }

     <span style="color: #008000;">// kill the old session and create a new one</span>
     session.invalidate();
     HttpSession newSession = request.getSession();

     <span style="color: #008000;">// copy back the session content</span>
     Iterator i = temp.entrySet().iterator();
     <span style="color: #0000ff;">while</span> (i.hasNext()) {
          Map.Entry entry = (Map.Entry) i.next();
          newSession.setAttribute((String) entry.getKey(), entry.getValue());
     }
     <span style="color: #0000ff;">return</span> newSession;
}</pre><p>&nbsp;</p> </div> <p>&nbsp;</p> </div> <h2><a id="保護_session_id" name="保護_session_id">保護 Session ID</a></h2> <div class="level2"> <p>如果可以的話，網站應用程式應該都以 HTTPS 的方式傳輸。如果無法，至少包含敏感性資料的頁面或處理程序要使用 HTTPS； 如果 HTTPS 無法保護整個網站的 session，在 HTTPS 傳輸時必須搭配 session ID，將此 session ID 和網站伺服器的 session 做配對檢查。</p> <p>如果必須藉由 <acronym title="Uniform Resource Locator">URL</acronym> 參數來傳遞 session ID 時，必須使用 POST。如果 cookies 用來儲存並由 HTTPS 傳送 session ID 時，必須被設為”安全”這樣就不會經過 non-<acronym title="Secure Sockets Layer">SSL</acronym> 的管道。</p> <p>網站應用程式必須提供登出的機制，並確保登出後此 session 過期和被銷毀。</p> <p>&nbsp;</p> </div> <h2><a id="作者列表" name="作者列表">作者列表</a></h2> <div class="level2"> <ol> <li class="level1"> <div class="li">2011/03/21 姚辰旻 初稿</div> </li> </ol> </div> <h2><a id="參考資料" name="參考資料">參考資料</a></h2> <div class="level2"> <ol> <li class="level1"> <div class="li">OWASP <a class="urlextern" title="http://www.owasp.org/index.php/Guide_Table_of_Contents" rel="nofollow" href="http://www.owasp.org/index.php/Guide_Table_of_Contents">http://www.owasp.org/index.php/Guide_Table_of_Contents</a></div> </li> <li class="level1"> <div class="li">ESAPI <a class="urlextern" title="http://www.owasp.org/index.php/Category:OWASP_Enterprise_Security_API" rel="nofollow" href="http://www.owasp.org/index.php/Category:OWASP_Enterprise_Security_API">http://www.owasp.org/index.php/Category:OWASP_Enterprise_Security_API</a></div> </li> </ol> </div> <p class="li">&nbsp;</p> <p class="li">PS:</p> <p class="li">ESAPI的站点都访问不了？</p> </div> <p class="read-more">Continue reading <a class="heading" href="/web/2011/08/29/e3-80-90-e8-bd-ac-e3-80-91-e5-ae-89-e5-85-a8-e7-9a-84session-e7-ae-a1-e7-90-86.html" data-flip="title">【转】安全的session管理</a></p> </article> <article id="post-web/%E5%88%86%E5%B8%83%E5%BC%8F/2011/08/26/lustre" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web/%E5%88%86%E5%B8%83%E5%BC%8F/2011/08/26/lustre.html" data-flip="title"> 【转】Lustre 介绍 </a> </h1> <p class="post-date heading"> <time datetime="2011-08-26T22:36:10+08:00">26 Aug 2011</time> in <span>Web</span> / <span>分布式</span> on <span>Lustre</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p><a title="http://book.51cto.com/art/201004/196350.htm" href="http://book.51cto.com/art/201004/196350.htm">http://book.51cto.com/art/201004/196350.htm</a></p></p> <p><strong></strong></p> <p> Lustre[5]文件系统是一个基于对象存储的分布式文件系统，并且与PVFS一样，Lustre也是一个开源项目。Lustre项目与1999 年在Carnegie Mellon University启动，现在已经发展成为应用最广泛的分布式文件系统。Lustre已经运行在当今世界上最快的集群系统里面，比如Bule Gene，Red Storm等计算机系统，用来进行核武器相关的模拟，以及分子动力学模拟等等非常关键的领域。</p> <p>Lustre的组织结构在其官方文档中有详细的介绍，如图 5.5所示，Lustre集群组件包含了MDS（元数据服务器）、MDT（元数据存储节点）、OSS（对象存储服务器）、OST（对象存储节点）、Client（客户端），以及连接这些组件的高速网络。</p> <p>1）元数据存储与管理。MDS负责管理元数据，提供一个全局的命名空间，Client可以通过MDS读取到保存于MDT之上的元数据。在 Lustre中MDS可以有2个，采用了Active-Standby的容错机制，当其中一个MDS不能正常工作时，另外一个后备MDS可以启动服务。 MDT只能有1个，不同MDS之间共享访问同一个MDT。</p> <p><a href="http://images.51cto.com/files/uploadimg/20100423/134022971.jpg"><img border="0" alt="" src="/assets/134022971.jpg" width="498" height="493" /></a> <a href="http://book.51cto.com/files/uploadimg/20060921/153223104.gif"></a></p> <p>（点击查看大图）图 5.5&#160; Lustre集群架构</p> <p>2）文件数据存储与管理。OSS负载提供I/O服务，接受并服务来自网络的请求。通过OSS，可以访问到保存在OST上的文件数据。一个OSS对应 2到8个OST，其存储空间可以高达8TB。OST上的文件数据是以分条的形式保存的，文件的分条可以在一个OSS之中，也可以保存在多个OSS中。 Lustre的特色之一是其数据是基于对象的职能存储的，跟传统的基于块的存储方式有所不同。</p> <p>3）Lustre系统访问入口。Lustre通过Client端来访问系统，Client为挂载了Lustre文件系统的任意节点。Client提供了Linux下VFS（虚拟文件系统）与Lustre系统之间的接口，通过Client，用户可访问操作Lustre系统中的文件。</p> <p>Lustre集群中的各个节点通过高速的以太网或Quadrics Elan、Myrinet等多种网络连接起来。</p> <p><a href="http://images.51cto.com/files/uploadimg/20100423/134035568.jpg"><img border="0" alt="" src="/assets/134035568.jpg" width="640" height="462" /></a> <a href="http://book.51cto.com/files/uploadimg/20060921/153223104.gif"></a></p> <p>（点击查看大图）图 5.6&#160; Lustre文件系统架构</p> <p>在Lustre官方手册中给出了Lustre文件系统的架构，如图 5.6所示。Lustre文件系统也是一个3方架构，包括了MDS、OSS和Client这3个模块。文件的打开（open）和关闭（close）、元数据以及并发访问控制都在Client和MDS之间进行；文件I/O操作以及文件锁在OSS和Client之间进行；文件备份，文件状态获取以及文件创建等在MDS和OSS之间进行。目前Lustre文件系统最多可以支持100000个Client，1000个OSS 和2个MDS节点。</p> <p>同PVFS类似，Lustre系统中既可以运行一个功能模块，也可以同时运行2个或3个功能模块，这取决于系统的规模。不过Lustre一般运行于高性能计算机系统之上，为了提高Lustre文件系统的性能，通常MDS、OSS和Client是分开运行在Lustre不同的节点之上的。</p> <p>实验与应用已经证明，Lustre文件系统的性能和可扩展性都不错。不仅如此，Lustre文件系统还拥有基于对象的智能化存储、安全的认证机制、比较完善的容错机制等优点，值得注意的是，Lustre还实现了部分文件锁。Lustre确保从不同Client端挂载的Lustre文件系统看到的都是一个单一的、同步的、一致的命名空间。由于Lustre部分锁机制的存在，多个Client端在同一时间点可以写同一文件的不同区域，其它Client则可以读取文件的其它区域。由于部分文件锁的存在，极大的提高了多用户对同一文件进行并发访问时系统的性能，对同一文件并发访问这在像数据库这种应用里是极为常见的。</p> <p>相对于PVFS，Lustre的可用性和扩展性以及性能上都有较大的提高。然而，Lustre需要特殊设备的支持，并且Lustre目前还没实现 MDS的集群管理，虽然相比PVFS的单MDS，Lustre的双MDS在可用性上还是提高不少，但是当系统达到一定的规模之后，MDS还是很有可能成为 Lustre系统中的瓶颈。</p> <p class="read-more">Continue reading <a class="heading" href="/web/%E5%88%86%E5%B8%83%E5%BC%8F/2011/08/26/lustre.html" data-flip="title">【转】Lustre 介绍</a></p> </article> <article id="post-web/%E5%88%86%E5%B8%83%E5%BC%8F/2011/08/25/%e3%80%90%e8%bd%ac%e3%80%91ari-zilka%e8%b0%88ehcache%e7%9a%84%e8%bf%9b%e7%a8%8b%e5%86%85%e5%a0%86%e5%a4%96%e7%bc%93%e5%ad%98bigmemory" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web/%E5%88%86%E5%B8%83%E5%BC%8F/2011/08/25/e3-80-90-e8-bd-ac-e3-80-91ari-zilka-e8-b0-88ehcache-e7-9a-84-e8-bf-9b-e7-a8-8b-e5-86-85-e5-a0-86-e5-a4-96-e7-bc-93-e5-ad-98bigmemory.html" data-flip="title"> 【转】Ari Zilka谈Ehcache的进程内堆外缓存BigMemory </a> </h1> <p class="post-date heading"> <time datetime="2011-08-25T16:52:38+08:00">25 Aug 2011</time> in <span>Web</span> / <span>分布式</span> on <span>Bigmomery</span>, <span>Ehanche</span>, <span>Java</span>, <span>集群</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <div><pre>转自infoq,文章不错，而且译得也不错。</pre></div> <p></p> <h1><a href="http://www.infoq.com/cn/news/2010/11/tc-bigmemory" rel="permalink">Ari Zilka谈Ehcache的进程内堆外缓存BigMemory</a></h1> <p class="info">作者 <strong><a class="editorlink f_taxonomyEditor" href="http://www.infoq.com/cn/author/Srini-Penchikala">Srini Penchikala</a> </strong>译者 <strong><a class="editorlink f_taxonomyTranslator" href="http://www.infoq.com/cn/author/%E7%8E%8B%E4%B8%BD%E5%A8%9F">王丽娟</a> </strong>发布于 2010年11月29日 </p> <div style="width: 100%;height: 19px" class="addthis_toolbox addthis_default_style"> <div style="float: left"><a class="addthis_button_googlereader at300b" title="Send to Google Reader" href="http://www.addthis.com/bookmark.php?v=250&amp;winname=addthis&amp;pub=infoq&amp;source=tbx-250&amp;lng=zh-CN&amp;s=googlereader&amp;url=http%3A%2F%2Fwww.infoq.com%2Fcn%2Fnews%2F2010%2F11%2Ftc-bigmemory&amp;title=InfoQ%3A%20Ari%20Zilka%E8%B0%88Ehcache%E7%9A%84%E8%BF%9B%E7%A8%8B%E5%86%85%E5%A0%86%E5%A4%96%E7%BC%93%E5%AD%98BigMemory&amp;ate=AT-infoq/-/-/4e55a2ccc03c4f8e/1&amp;frommenu=1&amp;uid=4e55a2cc0c52e927&amp;ct=1&amp;tt=0" target="_blank"><span class="at300bs at15nc at15t_googlereader"></span></a><a class="addthis_button_douban at300b" title="Send to Douban" href="http://www.addthis.com/bookmark.php?v=250&amp;winname=addthis&amp;pub=infoq&amp;source=tbx-250&amp;lng=zh-CN&amp;s=douban&amp;url=http%3A%2F%2Fwww.infoq.com%2Fcn%2Fnews%2F2010%2F11%2Ftc-bigmemory&amp;title=InfoQ%3A%20Ari%20Zilka%E8%B0%88Ehcache%E7%9A%84%E8%BF%9B%E7%A8%8B%E5%86%85%E5%A0%86%E5%A4%96%E7%BC%93%E5%AD%98BigMemory&amp;ate=AT-infoq/-/-/4e55a2ccc03c4f8e/2&amp;frommenu=1&amp;uid=4e55a2cc0c4bae91&amp;ct=1&amp;tt=0" target="_blank"><span class="at300bs at15nc at15t_douban"></span></a><a class="addthis_button_googlebuzz at300b" title="Send to Google Buzz" href="http://www.addthis.com/bookmark.php?v=250&amp;winname=addthis&amp;pub=infoq&amp;source=tbx-250&amp;lng=zh-CN&amp;s=googlebuzz&amp;url=http%3A%2F%2Fwww.infoq.com%2Fcn%2Fnews%2F2010%2F11%2Ftc-bigmemory&amp;title=InfoQ%3A%20Ari%20Zilka%E8%B0%88Ehcache%E7%9A%84%E8%BF%9B%E7%A8%8B%E5%86%85%E5%A0%86%E5%A4%96%E7%BC%93%E5%AD%98BigMemory&amp;ate=AT-infoq/-/-/4e55a2ccc03c4f8e/3&amp;frommenu=1&amp;uid=4e55a2ccc318e055&amp;ct=1&amp;tt=0" target="_blank"><span class="at300bs at15nc at15t_googlebuzz"></span></a><a class="addthis_button_sinaweibo at300b" title="Send to Sinaweibo" href="http://www.addthis.com/bookmark.php?v=250&amp;winname=addthis&amp;pub=infoq&amp;source=tbx-250&amp;lng=zh-CN&amp;s=sinaweibo&amp;url=http%3A%2F%2Fwww.infoq.com%2Fcn%2Fnews%2F2010%2F11%2Ftc-bigmemory&amp;title=InfoQ%3A%20Ari%20Zilka%E8%B0%88Ehcache%E7%9A%84%E8%BF%9B%E7%A8%8B%E5%86%85%E5%A0%86%E5%A4%96%E7%BC%93%E5%AD%98BigMemory&amp;ate=AT-infoq/-/-/4e55a2ccc03c4f8e/4&amp;frommenu=1&amp;uid=4e55a2cc2593853e&amp;ct=1&amp;tt=0" target="_blank"><span class="at300bs at15nc at15t_sinaweibo"></span></a><a class="addthis_button_live at300b" title="Send to Live" href="http://www.addthis.com/bookmark.php?v=250&amp;winname=addthis&amp;pub=infoq&amp;source=tbx-250&amp;lng=zh-CN&amp;s=live&amp;url=http%3A%2F%2Fwww.infoq.com%2Fcn%2Fnews%2F2010%2F11%2Ftc-bigmemory&amp;title=InfoQ%3A%20Ari%20Zilka%E8%B0%88Ehcache%E7%9A%84%E8%BF%9B%E7%A8%8B%E5%86%85%E5%A0%86%E5%A4%96%E7%BC%93%E5%AD%98BigMemory&amp;ate=AT-infoq/-/-/4e55a2ccc03c4f8e/5&amp;frommenu=1&amp;uid=4e55a2cc7eee41af&amp;ct=1&amp;tt=0" target="_blank"><span class="at300bs at15nc at15t_live"></span></a><a class="addthis_button_linkedin at300b" title="Send to Linkedin" href="http://www.addthis.com/bookmark.php?v=250&amp;winname=addthis&amp;pub=infoq&amp;source=tbx-250&amp;lng=zh-CN&amp;s=linkedin&amp;url=http%3A%2F%2Fwww.infoq.com%2Fcn%2Fnews%2F2010%2F11%2Ftc-bigmemory&amp;title=InfoQ%3A%20Ari%20Zilka%E8%B0%88Ehcache%E7%9A%84%E8%BF%9B%E7%A8%8B%E5%86%85%E5%A0%86%E5%A4%96%E7%BC%93%E5%AD%98BigMemory&amp;ate=AT-infoq/-/-/4e55a2ccc03c4f8e/6&amp;frommenu=1&amp;uid=4e55a2ccebf433bf&amp;ct=1&amp;tt=0" target="_blank"><span class="at300bs at15nc at15t_linkedin"></span></a><a class="addthis_button_twitter at300b" title="Tweet This" href="http://www.infoq.com/cn/news/2010/11/tc-bigmemory#"><span class="at300bs at15nc at15t_twitter"></span></a><a class="addthis_button_email at300b" title="Email" href="http://www.infoq.com/cn/news/2010/11/tc-bigmemory#"><span class="at300bs at15nc at15t_email"></span></a></div> <div style="float: right"></div> <div class="clearer"></div> <div class="atclear"></div> </div> <p>Ehcache的<a href="http://www.terracotta.org/bigmemory">BigMemory</a>提供了一个进程内的堆外缓存，用来存储应用相关的大批量数据。<a href="http://www.terracotta.org/">Terracotta</a>上周<a href="http://www.terracotta.org/news/pr/2010-11-9-bigmemoryga">发布</a>了BigMemory模块的GA版本，该模块支持Ehcache企业版。BigMemory是Ehcache标准API的一部分，为cache定义两个新属性（overflowToOffHeap和maxMemoryOffHeap）就可以使用了，代码片段如下所示：</p><pre>&lt;cache name=&quot;sample-offheap-cache&quot;
    maxElementsInMemory=&quot;10000&quot;
    eternal=&quot;true&quot;
    memoryStoreEvictionPolicy=&quot;LRU&quot;
    overflowToOffHeap=&quot;true&quot;
    maxMemoryOffHeap=&quot;1G&quot;/&gt;</pre><p>BigMemory在内存存储策略上有别于传统的缓存解决方案。它不把数据存储在Java堆里，从而避免了JVM的GC问题。BigMemory这种特别的存储被称为堆外（Off-Heap）存储。传统的缓存解决方案为了规避这些问题，都将数据分布在缓存节点组成的集群上。BigMemory提供了一种新的架构选择方案，允许应用运行在堆小于1G的JVM上，利用堆外的内存来加快数据访问的速度。</p> <p>InfoQ有幸采访了Terracotta的CTO Ari Zilka，请他谈了Ehcache框架里的BigMemory新特性、BigMemory有助于应用性能提升的用例场景，以及BigMemory的局限性。</p> <p><strong>InfoQ：</strong>为Ehcache框架添加BigMemory特性的主要动机是什么？</p> <blockquote><p>主要动机是为了解决我们在Terracotta服务器里遇到的GC问题。服务器里的GC会引起响应时间和大规模GC事件出现变化，可能会致使（一级缓存L1的）缓存客户端故障转移到备份的Terracotta服务器上去。我们意识到这个解决方案的好处后就立即扩大了它的应用范围，包括为独立Ehcache追加一个内存存储，这个内存存储后来就发展成了BigMemory——Ehcache企业版的一个插件。</p></blockquote> <p><strong>InfoQ：</strong>BigMemory堆外存储提供的方式能避免Java GC的复杂性，你能谈一谈实现的具体细节么？</p> <blockquote><p>BigMemory把缓存对象存储在Java堆之外，但仍然在操作系统的Java进程里。所以它仍然是个进程内的缓存，具备所有与此相关的高性能，但它不使用堆，这样就可以给应用配置很小的堆空间，从而避免GC问题。BigMemory使用了JDK 1.4引入的<a href="http://download.oracle.com/javase/6/docs/api/index.html?java/nio/ByteBuffer.html">DirectByteBuffers</a>。所有的Java实现都可以运行BigMemory，所以任何人都可以使用BigMemory，而不用更换JDK。 </p> <p>操作系统内存管理器的功能差不多就要完成了。届时我们会在放入数据时分配内存、移除数据时释放内存，我们能做这些事情是因为BigMemory是个缓存，而不是一般用途的Java程序。DirectByteBuffers分配内存很慢，但用起来非常快。所以我们会在启动的时候就从操作系统获取所有需要的内存。</p> <p>BigMemory的关键之处在于，怎样判断某个对象不再被使用、关联的内存被释放了，这也是很多人一开始最难理解的地方。对缓存来说，这其实非常简单。Map主要涉及put、get和remove操作。我们在放入数据的时候分配内存（malloc），移除数据的时候释放内存（free）。我们实现了一个内存管理器，它使用的是很好理解的计算机科学算法，还有我们专门为此实现的增强。</p> </blockquote> <p>在被问及BigMemory什么情况下能提升应用性能时（从只读、经常读、读写操作来说），Ari回答说，在“90%读/10%写”的常见情况和“50%读/50%写”的写操作过多的情况下，他们都见过比较好的<a href="http://ehcache.org/documentation/offheap_store.html#Performance_Comparisons">性能结果</a>。这是因为缓存是进程内的。只读操作会受到分布式缓存的影响。读取活跃数据集要比读取其它数据快很多，那些不活跃的数据必须通过网络获取。</p> <p><strong>InfoQ：</strong>BigMemory解决方案有什么局限性？</p> <blockquote><p>鉴于BigMemory是纯Java的、进程内的，而且和常见的JVM、容器兼容，所以它没有明显的局限性。我们找到的最大的内存盒有384GB内存，我们在上面测试的结果显示，在BigMemory始终有350GB内存的空闲情况下，性能都是线性的，没有明显的增长。 </p> <p>我们要向用户强调的限制只有一个，那就是使用堆外存储的话，放置在BigMemory中的对象必须进行序列化。对通常就存储在缓存里的那些数据来说，这并不是什么问题。</p> <p>一旦对象被序列化，在返回Java堆的时候必需反序列化才可以使用。这确实是一笔性能开销。因此在没有GC的时候，BigMemory会比堆内存储慢。但BigMemory还是要比底层可用的存储快很多，不论是本地磁盘、网络存储，还是RDBMS等原本记录数据的系统。</p> <p>还应指出的是，序列化/反序列化的性能开销远没有很多用户想象的那么大。BigMemory已经针对字节缓冲区做了优化，本身也包含一些优化机制，可以对使用标准Java序列化的对象进行优化。举例来说，测试版发布之后添加的那些优化机制能使复杂Java对象的性能提升两倍，使byte数组的性能提升四倍。Terracotta Server Array正是用byte数组存储数据的。用自定义的序列化则能进一步减少性能开销。</p> </blockquote> <p>InfoQ问Ari，架构师和开发人员在应用中使用BigMemory时应该注意哪些最佳实践和问题。Ari回答说，任何成功的商业应用都要处理伸缩性问题。缓存是最稳妥、最容易实现的解决方案之一。现在比较新颖的是，不用非得引入缓存集群了。</p> <blockquote><p>最好的做法就是用新眼光来审视一下你的性能架构，看你能否从大型的进程内缓存获益。BigMemory可以让架构师对服务器和进程密度进行优化，以满足特定的需求，而不用受制于Java的局限性。 </p> <p>最大的问题则是大多数人已经针对Java本身的局限性做了优化。比如说，大多数Ehcache用户会运行32位的JVM。根据OS的不同，32位 Java的地址空间会是2到4GB不等。所以这些用户在用Java时就放弃了使用很多内存。应用目前可能都运行在RAM很小的硬件上。所以用户要是想使用 BigMemory来运行100GB的进程内缓存，可能就意味着要更换新的硬件，即便现在硬件很便宜。</p> </blockquote> <p><strong>InfoQ：</strong>Ehcache框架以后的路线图是怎样的？BigMemory有什么特殊的么？</p> <blockquote><p>我们正在开发Ehcache和Terracotta的下一个版本（代码以澳大利亚弗里曼特尔的别称Freo命名），计划本月发布测试版。我们计划在这个版本中添加一系列功能特性和性能增强。比如<a href="http://ehcache.org/documentation/search.html">Ehcache Search</a>，它能让Ehcache用户在缓存里进行搜索，就像使用数据库一样。Ehcache Search已经发布了测试版，文档也已经全部可用了。 </p> <p>至于BigMemory，我们还在继续提升性能，同时会增加一系列比较实用的增强，例如提供更多的工具，帮助人们更好地理解最适合他们用例的设置。</p> </blockquote> <p><strong>查看英文原文：</strong><a href="http://www.infoq.com/news/2010/11/tc-bigmemory">Ari Zilka on Ehcache BigMemory</a></p></p> <p>---------------------------------------</p> <p>PS:</p> <p>另外一篇:<a title="http://www.infoq.com/interviews/zilka-bigmemory" href="http://www.infoq.com/interviews/zilka-bigmemory">http://www.infoq.com/interviews/zilka-bigmemory</a></p> <p>Terracotta是一款由美国Terracotta公司开发的著名开源Java集群平台。</p> <p>参见:<a title="http://blog.csdn.net/ansonchan/article/details/1873001" href="http://blog.csdn.net/ansonchan/article/details/1873001">http://blog.csdn.net/ansonchan/article/details/1873001</a></p> <p>这有个人问的<a href="http://blog.csdn.net/lima01/article/details/5260034" target="_blank">问题</a>:</p> <div><pre>    请教老马，这个产品在当前有没有成功又稳定的项目中使用的经验，由于该项目中使用大量自旋竞争锁操作，导致cpu偏高，所以带来的稳定性一直是个问题</pre><p>问的有水平。哪些人用了？</p> <p></div> <p class="read-more">Continue reading <a class="heading" href="/web/%E5%88%86%E5%B8%83%E5%BC%8F/2011/08/25/e3-80-90-e8-bd-ac-e3-80-91ari-zilka-e8-b0-88ehcache-e7-9a-84-e8-bf-9b-e7-a8-8b-e5-86-85-e5-a0-86-e5-a4-96-e7-bc-93-e5-ad-98bigmemory.html" data-flip="title">【转】Ari Zilka谈Ehcache的进程内堆外缓存BigMemory</a></p> </article> <article id="post-web%E5%89%8D%E7%AB%AF/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2011/08/24/%e4%b8%b2%e5%8f%a3%e4%b8%ba%e4%bb%80%e4%b9%88%e6%af%94%e5%b9%b6%e5%8f%a3%e5%bf%ab%e4%bb%a5%e5%8f%8aide%e5%ae%b9%e9%87%8f" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2011/08/24/e4-b8-b2-e5-8f-a3-e4-b8-ba-e4-bb-80-e4-b9-88-e6-af-94-e5-b9-b6-e5-8f-a3-e5-bf-ab-e4-bb-a5-e5-8f-8aide-e5-ae-b9-e9-87-8f.html" data-flip="title"> 串口为什么比并口快以及IDE容量 </a> </h1> <p class="post-date heading"> <time datetime="2011-08-24T23:49:08+08:00">24 Aug 2011</time> in <span>Web前端</span> / <span>计算机基础</span> on <span>串口</span>, <span>并口</span>, <span>硬件</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>教科书上说，并口一次传多位，速度快。但是实际上为什么SATA硬盘比IDE/PATA硬盘要快？</p> <p>两方面的原因：</p> <p>1：数据同步问题</p> <p>网上有个例子很形象:</p><pre>并口啊
举个很切合实际的例子
有10个人走一个门，如果门大可以同时通过，门小要单一同过
大门=并口，小门=串口
10个人排一列不容易跟丢，说明串口适合远距离
10个人排一行，可能会走丢，适合近距离，但是走大门能一下通过，速度快，并口的特点 </pre><p>这是说多个位同时传送，长时间传送后，有些位先到，有些位后到，这就要取决于最后到的那位了，还要加上数据校验的时间(比特流传输的速度必须减缓以纠正错误)。</p> <p>2:干扰问题</p> <p>10个人并排走，这个人把那个人推一下，几个人交头接耳说笑话，-----这说的是互相之间的干扰。</p> <p>目前并行总线没有能解决好数据干扰问题，所以还要校错。</p> <p>对于长距离传输，问题一影响较大，对于硬盘，问题二影响较大。</p> <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2011/08/24/e4-b8-b2-e5-8f-a3-e4-b8-ba-e4-bb-80-e4-b9-88-e6-af-94-e5-b9-b6-e5-8f-a3-e5-bf-ab-e4-bb-a5-e5-8f-8aide-e5-ae-b9-e9-87-8f.html" data-flip="title">串口为什么比并口快以及IDE容量</a></p> </article> <article id="post-web/2011/08/22/openid-%e5%88%9d%e6%ad%a5" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web/2011/08/22/openid-e5-88-9d-e6-ad-a5.html" data-flip="title"> OpenID 入门 </a> </h1> <p class="post-date heading"> <time datetime="2011-08-22T20:43:07+08:00">22 Aug 2011</time> in <span>Web</span> on <span>Java</span>, <span>Openid</span>, <span>Web</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>wiki百科:&#160; <a title="http://zh.wikipedia.org/wiki/OpenID" href="http://zh.wikipedia.org/wiki/OpenID">http://zh.wikipedia.org/wiki/OpenID</a></p> <p>官网: <a title="http://openid.net/" href="http://openid.net/">http://openid.net/</a>&#160; 规范:<a title="http://openid.net/developers/specs/" href="http://openid.net/developers/specs/">http://openid.net/developers/specs/</a></p> <p>这篇文章较适入门：&#160; <a title="http://www.theserverside.com/news/1364125/Using-OpenID" href="http://www.theserverside.com/news/1364125/Using-OpenID">http://www.theserverside.com/news/1364125/Using-OpenID</a> 作者也是open4javba的作者。</p> <p>使用open4java,wicket</p> <p>上 <a title="http://www.ibm.com/developerworks/cn/java/j-openid/" href="http://www.ibm.com/developerworks/cn/java/j-openid/">http://www.ibm.com/developerworks/cn/java/j-openid/</a></p> <p>下&#160; <a title="http://www.ibm.com/developerworks/cn/java/j-openid2/index.html?ca=drs-cn-0427" href="http://www.ibm.com/developerworks/cn/java/j-openid2/index.html?ca=drs-cn-0427">http://www.ibm.com/developerworks/cn/java/j-openid2/index.html?ca=drs-cn-0427</a></p> <p>讲得最明白的还是google: <a title="http://code.google.com/intl/zh-CN/apis/accounts/docs/OpenID.html" href="http://code.google.com/intl/zh-CN/apis/accounts/docs/OpenID.html">http://code.google.com/intl/zh-CN/apis/accounts/docs/OpenID.html</a></p> <p><a title="http://www.seven2.com.cn/archives/786/" href="http://www.seven2.com.cn/archives/786/">http://www.seven2.com.cn/archives/786/</a>&#160; Google OAUTH + OpenID 解决方案</p> <p>open4java 用起来总是报错，说什么xml解析错误，查了半天原来是xml解析包冲突,遇到这种情况要检查一下别的引用是否有冲突的xml解析包。</p> <p>使用0.9.6 maven一直下载不下来改用0.9.5就可以了。</p> <p>运行simple-openid这个示例只需要这样的pom:</p> <div><pre><span style="color: #0000ff">&lt;</span><span style="color: #800000">project</span> <span style="color: #ff0000">xmlns</span>=<span style="color: #0000ff">&quot;http://maven.apache.org/POM/4.0.0&quot;</span>
	<span style="color: #ff0000">xmlns</span>:<span style="color: #ff0000">xsi</span>=<span style="color: #0000ff">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
	<span style="color: #ff0000">xsi</span>:<span style="color: #ff0000">schemaLocation</span>=<span style="color: #0000ff">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span><span style="color: #0000ff">&gt;</span>
	<span style="color: #0000ff">&lt;</span><span style="color: #800000">modelVersion</span><span style="color: #0000ff">&gt;</span>4.0.0<span style="color: #0000ff">&lt;/</span><span style="color: #800000">modelVersion</span><span style="color: #0000ff">&gt;</span>
	<span style="color: #0000ff">&lt;</span><span style="color: #800000">groupId</span><span style="color: #0000ff">&gt;</span>test<span style="color: #0000ff">&lt;/</span><span style="color: #800000">groupId</span><span style="color: #0000ff">&gt;</span>
	<span style="color: #0000ff">&lt;</span><span style="color: #800000">artifactId</span><span style="color: #0000ff">&gt;</span>test<span style="color: #0000ff">&lt;/</span><span style="color: #800000">artifactId</span><span style="color: #0000ff">&gt;</span>
	<span style="color: #0000ff">&lt;</span><span style="color: #800000">version</span><span style="color: #0000ff">&gt;</span>0.0.1-SNAPSHOT<span style="color: #0000ff">&lt;/</span><span style="color: #800000">version</span><span style="color: #0000ff">&gt;</span>
	<span style="color: #0000ff">&lt;</span><span style="color: #800000">dependencies</span><span style="color: #0000ff">&gt;</span>		
		<span style="color: #0000ff">&lt;</span><span style="color: #800000">dependency</span><span style="color: #0000ff">&gt;</span>
			<span style="color: #0000ff">&lt;</span><span style="color: #800000">groupId</span><span style="color: #0000ff">&gt;</span>org.openid4java<span style="color: #0000ff">&lt;/</span><span style="color: #800000">groupId</span><span style="color: #0000ff">&gt;</span>
			<span style="color: #0000ff">&lt;</span><span style="color: #800000">artifactId</span><span style="color: #0000ff">&gt;</span>openid4java<span style="color: #0000ff">&lt;/</span><span style="color: #800000">artifactId</span><span style="color: #0000ff">&gt;</span>
			<span style="color: #0000ff">&lt;</span><span style="color: #800000">version</span><span style="color: #0000ff">&gt;</span>0.9.5<span style="color: #0000ff">&lt;/</span><span style="color: #800000">version</span><span style="color: #0000ff">&gt;</span>
		<span style="color: #0000ff">&lt;/</span><span style="color: #800000">dependency</span><span style="color: #0000ff">&gt;</span>
	<span style="color: #0000ff">&lt;/</span><span style="color: #800000">dependencies</span><span style="color: #0000ff">&gt;</span>	
<span style="color: #0000ff">&lt;/</span><span style="color: #800000">project</span><span style="color: #0000ff">&gt;</span></pre></div> <p></p> <p>简单复述一遍流程：</p> <p>用户登陆网站(简称A),A提供选择：</p> <p>1：用A的账户登陆。</p> <p>2：用google的账户登陆。</p> <p>用户想“俺有个google openid账户，我不想重新注册A账户”。他就选择用google openid账户登陆。</p> <p>A站点就要知道google的openid provider endpoint的url,向这个地址请求,这一步叫discovery.</p> <p>endpoint会返回一个文档(可能是xrds格式或html格式),例如google返回的xrds格式:</p> <div><pre><span style="color: #0000ff">&lt;?</span>xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;<span style="color: #0000ff">?&gt;</span>
<span style="color: #0000ff">&lt;</span><span style="color: #c71585">xrds</span>:<span style="color: #800000">XRDS</span> <span style="color: #ff0000">xmlns</span>:<span style="color: #ff0000">xrds</span>=<span style="color: #0000ff">&quot;xri://$xrds&quot;</span> <span style="color: #ff0000">xmlns</span>=<span style="color: #0000ff">&quot;xri://$xrd*($v*2.0)&quot;</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;</span><span style="color: #800000">XRD</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;</span><span style="color: #800000">Service</span> <span style="color: #ff0000">priority</span>=<span style="color: #0000ff">&quot;0&quot;</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;</span><span style="color: #800000">Type</span><span style="color: #0000ff">&gt;</span>http://specs.openid.net/auth/2.0/server<span style="color: #0000ff">&lt;/</span><span style="color: #800000">Type</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;</span><span style="color: #800000">Type</span><span style="color: #0000ff">&gt;</span>http://openid.net/srv/ax/1.0<span style="color: #0000ff">&lt;/</span><span style="color: #800000">Type</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;</span><span style="color: #800000">Type</span><span style="color: #0000ff">&gt;</span>http://specs.openid.net/extensions/ui/1.0/mode/popup<span style="color: #0000ff">&lt;/</span><span style="color: #800000">Type</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;</span><span style="color: #800000">Type</span><span style="color: #0000ff">&gt;</span>http://specs.openid.net/extensions/ui/1.0/icon<span style="color: #0000ff">&lt;/</span><span style="color: #800000">Type</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;</span><span style="color: #800000">Type</span><span style="color: #0000ff">&gt;</span>http://specs.openid.net/extensions/pape/1.0<span style="color: #0000ff">&lt;/</span><span style="color: #800000">Type</span><span style="color: #0000ff">&gt;</span>
  <span style="color: #0000ff">&lt;</span><span style="color: #800000">URI</span><span style="color: #0000ff">&gt;</span></pre><p><font color="#0000ff"><font color="#408080">https://www.google.com/accounts/o8/ud</font><span style="color: #0000ff">&lt;/</span></font><span style="color: #800000">URI</span><span style="color: #0000ff">&gt;</span><br /> <span style="color: #0000ff">&lt;/</span><span style="color: #800000">Service</span><span style="color: #0000ff">&gt;</span><br /> <span style="color: #0000ff">&lt;/</span><span style="color: #800000">XRD</span><span style="color: #0000ff">&gt;</span><br /> <span style="color: #0000ff">&lt;/</span><span style="color: #c71585">xrds</span>:<span style="color: #800000">XRDS</span><span style="color: #0000ff">&gt;</span> </div> <p>可以看到uri里面就是下一步进行认证的地址。</p> <p>A就要向这个uri请求认证，这个里面要设置一些参数用来进行交互比如说交换用户信息(AX),或是简单注册(Sreg)。当然要传入用户输入的openid账号。以及验证成功后接受google信息的url(openid.return_to)。google验证完成后会请求openid.return_to设置的网址，如果成功，会将需要的用户信息使用参数传入。</p> <p>在这最后一步需要验证返回是否是安全的（中途是否被修改）:</p> <p>1：检查openid.return_to和请求的地址是否匹配；</p> <p>2：检查discovery信息。</p> <p>3：检查openid.response_nonce</p> <p>4：检查签名</p> <p>------------------------------------------</p> <p>我再使用规范2.0的复述一遍:</p> <p>1 The end user <a href="http://openid.net/specs/openid-authentication-2_0.html#initiation">initiates authentication</a> by presenting a User-Supplied Identifier to the Relying Party via their User-Agent.&#160; </p> <blockquote> <p>用户向RP提交openid.</p> </blockquote> <p>2 After <a href="http://openid.net/specs/openid-authentication-2_0.html#normalization">normalizing</a> the User-Supplied Identifier, the Relying Party <a href="http://openid.net/specs/openid-authentication-2_0.html#discovery">performs discovery</a> on it and establishes the OP Endpoint URL that the end user uses for authentication. It should be noted that the User-Supplied Identifier may be an OP Identifier, as discussed in <a href="http://openid.net/specs/openid-authentication-2_0.html#discovered_info">Section 7.3.1</a>, which allows selection of a Claimed Identifier at the OP or for the protocol to proceed without a Claimed Identifier if something else useful is being done via an <a href="http://openid.net/specs/openid-authentication-2_0.html#extensions">extension</a>. </p> <blockquote> <p>RP使用openid执行discovery操作。openid中包含了将要请求的OP地址相关信息。OP对discovery返回的信息中包含了OP Endpoint 信息，下一步将要使用这些信息。openid还可能仅仅是OP的标识符而不是用户的openid标识符。</p> </blockquote> <p>3 (optional) The Relying Party and the OP establish an <a href="http://openid.net/specs/openid-authentication-2_0.html#associations">association</a> -- a shared secret established using <a href="http://openid.net/specs/openid-authentication-2_0.html#RFC2631">Diffie-Hellman Key Exchange</a> [RFC2631]. The OP uses an association to sign subsequent messages and the Relying Party to verify those messages; this removes the need for subsequent direct requests to verify the signature after each authentication request/response. </p> <blockquote> <p>关联，密钥交换，这一步不是必需的，但是如果使用了这一步，那么最后的验证(7)就不是必需的。</p> </blockquote> <p>4 The Relying Party redirects the end user's User-Agent to the OP with an OpenID <a href="http://openid.net/specs/openid-authentication-2_0.html#requesting_authentication">Authentication request</a>. </p> <blockquote> <p>RP跳转用户到OP的登陆页面。</p> </blockquote> <p>5 The OP establishes whether the end user is authorized to perform OpenID Authentication and wishes to do so. The manner in which the end user authenticates to their OP and any policies surrounding such authentication is out of scope for this document. </p> <blockquote> <p>OP完成对用户的验证</p> </blockquote> <p>6 The OP redirects the end user's User-Agent back to the Relying Party with either an assertion that <a href="http://openid.net/specs/openid-authentication-2_0.html#positive_assertions">authentication is approved</a> or a message that <a href="http://openid.net/specs/openid-authentication-2_0.html#negative_assertions">authentication failed</a>. </p> <blockquote> <p>OP跳转用户到RP提供的returnto页面，并提供验证信和其他扩展属性。</p> </blockquote> <p>7 The Relying Party <a href="http://openid.net/specs/openid-authentication-2_0.html#verification">verifies</a> the information received from the OP including checking the Return URL, verifying the discovered information, checking the nonce, and verifying the signature by using either the shared key established during the association or by sending a direct request to the OP. </p> <blockquote> <p>RP验证返回的信息是否可靠。(如果使用了<a href="http://openid.net/specs/openid-authentication-2_0.html#associations">association</a>这一步，那么就不需要。因为直接可以通过交换的密钥来验证返回。)</p> </blockquote> <p>-----------------</p> <p>要认识到openid和cas的sso是两种风格，openid对于不同公司不同网站，典型的登陆操作是，即使用户已经登陆了provider的网站，但是即使他再打开consumer的网站，consumer网站任然是不知道此用户已经登陆的。用户想要登录consumer网站，还需要进入登陆页面，这个时候给予用户使用provider网站账户登陆的选项。用户选择使用provider网站账户登陆后，由consumer的网站自动与provider网站交互完成登录过程。典型的例子可看 <a title="http://translate.uservoice.com/" href="http://translate.uservoice.com/">http://translate.uservoice.com/</a> 中的google登录方式。</p> <p>但是如果是同一个公司，不同的网站，要通过openid实现类似CAS的方式，也是可行的，每个网站都使用过滤器来检查用户是否已经在主站(provider)登陆，将用户信息拿过来就行了。即discovery这一步是固定的。</p> <p>&#160;</p> <p>==========================================</p> <p>参考:</p> <p><a title="http://r-j-r-a5438-163-com.iteye.com/blog/611351" href="http://r-j-r-a5438-163-com.iteye.com/blog/611351">http://r-j-r-a5438-163-com.iteye.com/blog/611351</a></p> <p><a title="http://www.360doc.com/content/08/0507/11/7349_1242557.shtml" href="http://www.360doc.com/content/08/0507/11/7349_1242557.shtml">http://www.360doc.com/content/08/0507/11/7349_1242557.shtml</a></p> <p><a href="http://code.google.com/p/openid4java/w/list">http://code.google.com/p/openid4java/w/list</a></p> <p><a href="http://code.google.com/p/openid-server/">http://code.google.com/p/openid-server/</a></p> <p class="read-more">Continue reading <a class="heading" href="/web/2011/08/22/openid-e5-88-9d-e6-ad-a5.html" data-flip="title">OpenID 入门</a></p> </article> <article id="post-web%E5%89%8D%E7%AB%AF/2011/08/19/javascript%e6%98%af%e4%b8%8d%e6%98%af%e5%87%bd%e6%95%b0%e5%bc%8f%e7%bc%96%e7%a8%8b%e8%af%ad%e8%a8%80" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/2011/08/19/javascript-e6-98-af-e4-b8-8d-e6-98-af-e5-87-bd-e6-95-b0-e5-bc-8f-e7-bc-96-e7-a8-8b-e8-af-ad-e8-a8-80.html" data-flip="title"> javascript是不是函数式编程语言? </a> </h1> <p class="post-date heading"> <time datetime="2011-08-19T21:36:43+08:00">19 Aug 2011</time> in <span>Web前端</span> on <span>Javascript</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>javascript是不是函数式编程语言? </p> <p>答案可以使yes也可以是no. 因为函数是语言也没有统一的定义。</p> <p>如果从函数支持和λ演算来看它是的。</p> <p>关于lambda演算一时半会理解不了,粗略理解:</p> <blockquote><p>所谓λ演算，是一套用于研究函数定义，函数应用和递归的形式系统。它包括一条变换规则（变量替换）和一条函数定义方式，Lambda演算之通用在于，任何一个可计算函数都能用这种形式来表达和求值。因而，它是等价于<a href="http://zh.wikipedia.org/wiki/%E5%9B%BE%E7%81%B5%E6%9C%BA">图灵机</a>的。尽管如此，Lambda演算强调的是变换规则的运用，而非实现它们的具体机器。可以认为这是一种更接近软件而 非硬件的方式。</p> </blockquote> <p>如果从immutability, algebraic data types, pattern matching, partial application 等等这些其他方面来看，它又不是的。</p> <p>我倾向如认为它不是的。</p> <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/2011/08/19/javascript-e6-98-af-e4-b8-8d-e6-98-af-e5-87-bd-e6-95-b0-e5-bc-8f-e7-bc-96-e7-a8-8b-e8-af-ad-e8-a8-80.html" data-flip="title">javascript是不是函数式编程语言?</a></p> </article> <article id="post-web%E5%89%8D%E7%AB%AF/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2011/08/18/programming-methodology-lecture01" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2011/08/18/programming-methodology-lecture01.html" data-flip="title"> Programming Methodology-Lecture01 </a> </h1> <p class="post-date heading"> <time datetime="2011-08-18T00:07:36+08:00">18 Aug 2011</time> in <span>Web前端</span> / <span>计算机基础</span> on <span>Programming methodology</span>, <span>Sse</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <div><pre>NOTE:these series of lecture are from SEE http://see.stanford.edu/see/courses.aspx</pre></div> <p>Instructor (Mehran Sahami):Alrighty. If you could have a seat, please, we need to get</p> <p>started. There are still a bunch of people coming in the back. Come on down and try to</p> <p>find a seat somewhere. If you can't find a seat, sit in the aisle[(席位间的)通道] as long as you're not a fire</p> <p>marshal[消防局长；防火处处长]. Anyone here a fire marshal? Good. We're fine. Come on in and sit in the aisles.</p> <p>So welcome to CS106A. If you don't think you should be in CS106A, you think you</p> <p>should be somewhere different, now is probably a good time to go, not that I would</p> <p>discourage anyone from taking this class. I think we'll have a lovely time in here. But this</p> <p>class is CS106A or E70A, so if you're, like, &quot;Wait. I thought I was in E70A,&quot; you're fine.</p> <p>They're the same class; it's the same thing. No worries, okay?</p> <p>There's four handouts[讲义；宣传册子]. They're in the back. If you haven't already gotten the handouts</p> <p>because you came in and you sat down, don't worry. You can pick them up on the way</p> <p>out. They're the same handouts. They'll still be there.</p> <p>So just a quick introduction. That's what the first four handouts actually give you. They</p> <p>give you a little bit of an introduction to the class, what we're gonna cover, some logistics</p> <p>for the class and some other stuff. I'm gonna go over all that today so we can sort of get a</p> <p>good idea for where we're at, okay?</p> <p>So just a quick show of hands before we get into a bunch of things in the class. This is</p> <p>kind of an intro-programming course; well, it is. I shouldn't say it's kind of an introprogramming</p> <p>course. It is an intro-programming course. And it's always good to get an</p> <p>idea as to how much familiarity you may have beforehand, okay? So just quick show of</p> <p>hands. How many people can recognize a computer that's on? Good, good. That's the</p> <p>prerequisite[n. 先决条件] for this class.</p> <p>So if you're worried about how much previous experience you've had or your friend who,</p> <p>like, worked their way through high school by programming for Google or whatever,</p> <p>don't worry about it because all you need to know in here is basically either how to turn a</p> <p>computer on or to recognize a computer that's on if you were to walk up to it and it were</p> <p>already to be on, all right?</p> <p>So but a little bit more seriously, how many people have actually used a computer for</p> <p>anything? All right. I would expect most of you.</p> <p>So now, we begin to bump it up a notch[再加把劲, 原意是给压力计加压使它再上一个刻度]. How many people have used it for word</p> <p>processing? Okay. Most folks.</p> <p>How many people have done web browsing? Yeah, I won't ask you what you look at, all</p> <p>right? It's just I don't wanna know.</p> <p>How many people have actually created a web page? Okay. Fair number.</p> <p>How many people have done any kind of programming before? Fair number. All right.</p> <p>How about how many folks have done actually programmed in Java before? All right. A</p> <p>few folks.</p> <p>How about another language, C, C++, BASIC, anyone program in BASIC? Yeah, oh, I</p> <p>love — that was the first language I learned, and it was kind of like the warm and fuzzy,</p> <p>and I felt good. There was actually people who argued that if you learn BASIC as your</p> <p>first language, you're brain damaged, then you're just beyond help. But if that's the case,</p> <p>we're all in the boat together because I'm probably brain damaged as well. The truth is I</p> <p>probably am, but that's a whole different story.</p> <p>All right. So one thing you should know kind of up front is actually this course is gonna</p> <p>be provided eventually somewhere down the line as part of Stanford School of</p> <p>Engineering Free Course Initiative, which means not only are we recording this course to</p> <p>broadcast to a bunch of companies and industry who are watching this course, but we're</p> <p>eventually gonna provide it free to the world.</p> <p>So how does that impact your life? And on the average day, it doesn't at all. The only</p> <p>way it does impact your life is just so you should know, the lawyers told me to tell you</p> <p>that your voice, should you ask a question, may actually be recorded as part of the video.</p> <p>As a result, your voice may end up going out to thousands of people or millions of people</p> <p>in the world. If you have an issue with that, come talk to me. If you don't, everything is</p> <p>just fine, all right?</p> <p>Don't worry. We're not gonna put your picture up or anything like that. You might wanna</p> <p>be on the video, like, &quot;Hey, ma, I'm on TV.&quot; We decided that we're just gonna not show</p> <p>anyone actually on the video, but your voice may actually get recorded, okay?</p> <p>Now, along those lines, you may also notice there are some microphones in the room. So</p> <p>when you wanna ask a question, please make sure to use the microphone because that's</p> <p>not only good for people in here to be able to hear your question, it's also good for all the</p> <p>folks that this is getting broadcast to because not only are we gonna broadcast to the</p> <p>world, but there's actually some folks who are sort of watching this live now in various</p> <p>companies in Silicon Valley.</p> <p>So it's real important that you actually use the microphone, so just remember that. And</p> <p>every once in a while, I might get on your case and be, like, &quot;Please use the microphone.&quot;</p> <p>I'm not trying to be argumentative[a. 爱争论的,好辩论的] or anything. I just wanna make sure we pick up all the</p> <p>audio, all right?</p> <p>So with that said, a little bit of an introduction. That's kind of a way of background. I</p> <p>didn't give you any sort of introduction. So just to introduce myself, my name's Mehran</p> <p>Sahami. I'm the professor for the class. Don't call my Professor Sahami, way too formal.</p> <p>Don't call me Mr. Sahami. That, I think of my dad. And don't call me Mrs. Sahami, or</p> <p>we're gonna have issues, all right? So just call me Mehran. We'll get along. It's just fine,</p> <p>all right? It's to keep things a little bit more informal, but that way it's a little bit easier to</p> <p>discuss stuff as you go along.</p> <p>There is also a head TA[abbr. 助教（teaching assistant）] for the class, Ben Newman, who's standing up there. Get to know</p> <p>Ben. He has all the real power in this class. I'm just kind of the monkey that gets up here</p> <p>and gives the lectures. But Ben really is the one who's got all the power.</p> <p>Along with the head TA for the class, we have a large section leading staff. So the section</p> <p>leaders here, could you stand up if you're here? They're kind of all over the place, some</p> <p>over here, some over there, and some over there. As you can see, there's a pretty large</p> <p>number of folks. And this isn't even all of them. We sort of have more — we just can't</p> <p>stuff them all into the room — who are section leaders for the class, and these folks are</p> <p>all here to make sure that everyone in this class has as good an experience as possible</p> <p>when we're sort of going through the class.</p> <p>And the best way to reach all of us is email. So on Handout No. 1, you get my email and</p> <p>Ben's email. We'll tell you how to sign up for section. That's how you'll meet your section</p> <p>leader and get your section leader's email. That will all be coming soon. But email really</p> <p>is kind of a happy form of communication to get a hold of us, okay?</p> <p>So with that said, I wanna tell you a little bit about this class and kind of what we're</p> <p>gonna do in here and what you should expect and make sure that you don't feel scared off</p> <p>by this class, okay? Because it really is meant to sort of be an interesting time.</p> <p>But one question that comes up is why is this class called Programming Methodology,</p> <p>right? Why don't we just call this class, like, Programming with Java? And the real reason</p> <p>for that is that programming methodology is about good software engineering principles.</p> <p>It's about something that's much larger than just programming.</p> <p>So some people, like, they'll go and get a book somewhere and they'll think they learned</p> <p>how to program by just reading the book. And they're, like, &quot;Oh, I know how to program.</p> <p>Isn't that great?&quot; And it's, like, yeah, you might know the mechanics of the language, but</p> <p>the mechanics of the language are nothing compared to understanding the software</p> <p>engineering principles that go into actually developing a software system.</p> <p>And that's what you're gonna learn about in this class. You're gonna learn a lot of those</p> <p>principles. But in order to be able to use those principles and apply them, you also need</p> <p>to have the language to program in, and that language that we're gonna use in this class is</p> <p>Java.</p> <p>-----很幽默-----</p> <p>So the way I like to think about it and the way I tell a lot of people is writing a good</p> <p>program or learning how to program is like learning to be a good essay[散文] writer. And</p> <p>you're, like, &quot;Oh, but part of the reason I'm taking this class, Mehran, is that I don't like</p> <p>writing essays.&quot; That's fine. It's okay. Trust me. I didn't like writing essays either.</p> <p>But the whole point is that when you write an essay, it's not a formulated kind of thing.</p> <p>You're, like, &quot;Well, what about five-paragraph essays?&quot; Yeah, just block that from your</p> <p>mind. That was a bad time, right? That was just, like, '70s education at work. It's not a</p> <p>formulated kind of thing.</p> <p>There's an art to writing an essay, right? In order to write an essay, you need to know a</p> <p>language. You need to know English or German or Hindi or whatever language you</p> <p>wanna use, but then you use that language to write an essay. Just knowing the language</p> <p>doesn't make you a good essay writer though. Being a good essay writer makes you a</p> <p>good essay writer.</p> <p>So that's the same difference in programming and software engineering. Knowing the</p> <p>language, in order to be a good programmer, like a good essayist, you need to know a</p> <p>language to write your programs in, whether that be Java or C or C++ or whatever. Here</p> <p>we're gonna use Java.</p> <p>But just knowing the language doesn't make you a good software engineer and doesn't</p> <p>make you understand what the principles are of writing good software, which is what</p> <p>you're also gonna get in this class in addition to the language, and that's kind of a key</p> <p>thing to stress.</p> <p>So if you're sort of worried, if you were kind of looking around and you saw a bunch of</p> <p>people raising their hands when I asked, &quot;Do you have any previous programming</p> <p>experience?&quot; and some folks raised their hands, and you got a little worried and you're</p> <p>like, &quot;Oh, am I gonna be in some sense at a disadvantage because I haven't done any</p> <p>programming before?&quot; The answer, plain and simple, is no, okay? You're gonna learn</p> <p>everything you need to learn from the first principle because as a matter of fact, in some</p> <p>cases you might be in slightly better shape. That's not necessarily to say that that's the</p> <p>way it will be.</p> <p>But how many people are Star Wars fans? Just wondering. Anyone? I'm talking about the</p> <p>old-school, original, like, three movies. Those were so good, and we're not — no George</p> <p>R. Binks here, all right? So if you remember — and sort of I'm a big Star Wars fan, and</p> <p>that's just a whole separate point. But in the second movie, Yoda actually said something</p> <p>which I thought was quite profound, which is he says sometimes you have to unlearn</p> <p>what you have learned.</p> <p>And one of the things we actually find is that some people who are self-taught</p> <p>programmers, some of them are just fine, and some of them are very good. But some of</p> <p>them have picked up some really bad habits along the way, and it's like being a bad essay</p> <p>writer. And to go from being a bad essay writer to a good essay writer, in some cases, can</p> <p>actually be harder than from not being an essay writer to being a good essay writer</p> <p>because you have to unlearn the bad habits.</p> <p>So if you're worried about, &quot;Oh, I've had no previous experience,&quot; don't worry. You're</p> <p>okay, blank slate, you're just fine. And now if you're thinking, &quot;Oh, I have some previous</p> <p>experience. Do I have bad habits?&quot; Don't worry. You'll be fine, too, okay? So it's all</p> <p>gonna work out.</p> <p>So the next question that kind of comes up — hopefully that helps put some of your fears</p> <p>aside. Another one of the things is that we really strive to make everyone successful in</p> <p>this class, okay? At some other schools, people wanna do computer science or they</p> <p>wanna do an engineering major or whatever. And you come into the first day of class,</p> <p>and they say, &quot;Oh, only one third of you are actually gonna make it through this program.</p> <p>And look to the person to your left and look to the person to your right, and only one of</p> <p>you will make it through.&quot; And you're, like, &quot;Oh, man, that's real nice.&quot; It's not like that</p> <p>here.</p> <p>As a matter of fact, we want all of you to be extremely successful in this class, which is</p> <p>why we have a huge course staff, which is why over years and years we've refined how</p> <p>we do a lot of the teaching in this class to make sure you have the best possible</p> <p>experience and to make sure that everyone gets through.</p> <p>And the important thing about that is that you're not competing against anyone except</p> <p>yourself in this class. It's not like we're gonna have a curve and we're gonna say, &quot;Oh, we</p> <p>have a certain number of &quot;F&quot;s and a certain number of &quot;D&quot;s and a certain number of</p> <p>&quot;C&quot;s.&quot; All we really have going into it is an expectation that when you get out of here,</p> <p>there's a set of stuff we want you to know. And if you know that stuff well, you get an</p> <p>&quot;A.&quot; And if everyone knows that stuff well, everyone gets an &quot;A.&quot; And I got no problems</p> <p>with that. Registrar might have a problem with that, but that's okay. You don't need to</p> <p>worry about that.</p> <p>So you don't need to think about, oh, is someone else doing better than you or whatever.</p> <p>And we'll talk about issues of collaboration in just a little bit. All you need to think about</p> <p>is learning the stuff yourself as well as you possibly can, and you'll be just fine and you'll</p> <p>get a good grade, okay? So that's really all we ask, which is not a trivial amount, right? It</p> <p>requires you to really understand the material.</p> <p>So another question that comes up is are you in the right place, right? This isn't the only</p> <p>introductory programming class at Stanford. And so I wanna spend a little bit of time</p> <p>making sure you actually are in the right place by going over some of the different</p> <p>options.</p> <p>----------------------</p> <p>So right now, as you know, you're in CS106A. And CS106A, we're sort of happy over</p> <p>here, right? As a matter of fact, we're not only happy, we're happy and we're also a little</p> <p>bit loopy[adj. 多圈的；呆头呆脑的], right? There is no previous programming experience required, as I mentioned,</p> <p>right? All you need to know is basically if you can get to a computer and know how to</p> <p>figure out that it's on, you're in good shape.</p> <p>But what 106A does is it's a real rigorous[严厉的,严酷的,严格的] class. You learn programming in here, and you</p> <p>learn it in a way that makes you ready to be an engineer if you so choose to be an</p> <p>engineer. That's not to say you're all gonna be engineers. I would love for all of you to be</p> <p>computer science majors, but statistics in the past show only about 6 percent of you will</p> <p>be computer science majors. That's not because we turn anyone off to computer science;</p> <p>it's because we make programming accessible to so many people that you don't have to be</p> <p>a computer science or a Double E or even an engineering major to do extremely well in</p> <p>the class.</p> <p>And we actually have sort of a significant percentage of the entire campus undergraduate</p> <p>student body at Stanford actually goes through this class and does well, okay? So don't</p> <p>worry if you're, like, &quot;Oh, but I'm not really a CS person.&quot; I hope we'll turn you into one</p> <p>by the end of the class. No, it's okay. But you'll be prepared if that's what you wanna do.</p> <p>So this leads into a whole engineering sequence that can go on to other engineering</p> <p>majors or the computer science majors.</p> <p>If you're, like, &quot;Huh, I'm not sure if that's really what I wanna do. As a matter of fact, I'm</p> <p>so sure that's not what I wanna do, I only wanna get the general educational requirement</p> <p>out of the way, and I'm positive there is nothing else I wanna do. Really, no matter how</p> <p>much I like it, like, there is no way you're gonna drag me into anything that would</p> <p>involve anything remotely techie.&quot; They're the class CS105. And this is happy, yeah, this</p> <p>is kind of, oh, we're happy in our little happy world. And I don't wanna say it's holding</p> <p>hands and singing, &quot;Kumbaya,&quot; because that's not what it is. It's a real class. But it's</p> <p>meant to be a general educational requirement, right? It doesn't lead into the 106s. It's</p> <p>meant to be its own self-contained class. You do some Java script in there. You do a little</p> <p>bit of what computers are about.</p> <p>Computers in society is a good time. We all hold hands. We're all happy. I don't teach the</p> <p>class, so I don't actually hold hands. But it's a fun time, okay? It just doesn't lead to</p> <p>anything else. So think of this as kind of a terminal class, right? So it's sort of like, well,</p> <p>we'll hook you up to the IV drip.</p> <p>And you're, like, &quot;Well, 106A, you told me I don't need any previous background. Well,</p> <p>hey, Mehran, I got lots of background. I got so much background, it hurts. I got AP</p> <p>background, I got working through school doing software engineering background. I'm</p> <p>not sure I should be here.&quot; That could be the case.</p> <p>We have another class called CS106X, and as the &quot;X&quot; kind of implies, it's sort of the</p> <p>extreme games version of the class. No, it stands for accelerated, right, because &quot;A&quot; was</p> <p>already taken, so we had to come up with something else. So the way CS106X works is it</p> <p>really is a very fast-paced class. It's meant for people who've got previous AP exam</p> <p>credit, like, got a 4 or 5 on the AP, or have had significant and prior programming</p> <p>experience before.</p> <p>If you're not sure which one of these classes is for you, you can come talk to me</p> <p>afterwards, or I'd also encourage you, you could go to pick up the syllabus for CS106X</p> <p>and compare it to CS106A. This class is all in C++. And if you're thinking, &quot;Hey,</p> <p>Mehran, I'm doing 106A. I wanna learn Java and C++,&quot; don't worry. You'll eventually, if</p> <p>you so choose, take a class called CS106B, which is where this class sort of leads to,</p> <p>which is C++ and all of the other stuff you would have learned in this accelerated class,</p> <p>okay? So you still certainly have that course path.</p> <p>So don't let anyone make you think — I know a lot of times, and especially for Stanford</p> <p>students, you come in here and you're, like, &quot;Well, every class I took in high school was</p> <p>like an honors or an AP class, or if it wasn't an honors or an AP class, like, I had to tie</p> <p>half my brain before my head because I'm just that hardcore.&quot; And so everyone just wants</p> <p>to, like, do the most hardcore thing they can, right? And what I'm here to tell you is that</p> <p>you shouldn't necessarily think about it that way. You should think about it as where you</p> <p>feel most comfortable.</p> <p>Some number of years ago, let's just say greater than 10, maybe 15, I was sitting where</p> <p>you're sitting right now, literally. I was in CS106A in Terman Auditorium as a freshman,</p> <p>okay? It was perfectly fine. It worked out. I went to grad school, did the faculty thing. It's</p> <p>just fine. It will open your doors to CS. You're not at any kind of disadvantage by starting</p> <p>here. So know where you've been, literally. Like, that seat right there was where I was</p> <p>most of the time. So just something to keep in mind in terms of the different options that</p> <p>are actually available to you.</p> <p>Now, with that said, let's just assume for the rest of this lecture that this is the right place</p> <p>for you. And if it's not, well, afterwards we can kind of talk about it, or if you really are</p> <p>convinced now that it's not the right place, you can feel free and try to scramble over 20</p> <p>of your classmates and actually leave the room, which is probably impossible.</p> <p>All right. So a few other things you should know, some mechanics. So Handout No. 1,</p> <p>should you wanna follow along at home, is the class web page. And so all the stuff that</p> <p>we think of as course materials, including online copies of the handouts, things that you'll</p> <p>need to do for the assignments, announcements related to the class are all on the class</p> <p>web page, which is www.stanford.edu/class/cs106a. And because that's just kind of a</p> <p>whole bunch to remember, we make your life easy and so there is an equivalent form of</p> <p>the URL, which is just cs106a.stanford.edu, which is the easy thing to remember. You</p> <p>put that in, it'll take you to the class web page, okay?</p> <p>And you should check that regularly because all the announcements and handouts —</p> <p>we'll give out hard copies of all the handouts in class, but should you happen to miss</p> <p>class for whatever reason, you wanna go print whatever copies of the handouts we're</p> <p>actually giving out, you can find them all on the web page, okay?</p> <p>Now, there's this funky thing about units. So you may have noticed that this class is for</p> <p>three to five units, and that kind of brings up the natural question, &quot;Should I take it for</p> <p>three or five units?&quot; If you're an undergrad, you take it for five units, end of story. That's</p> <p>life in the city. Congratulations. Five units.</p> <p>If you're a graduate student, you can have the option of taking it for three units if you</p> <p>want, if you're gonna run into some unit cap. It doesn't change the amount of work you</p> <p>have to do. Welcome to graduate school. Same work, fewer units. So that's just the way</p> <p>life is. If you have a unit cap and you're a grad student, in three units you can take it if</p> <p>you want. You can take it for five if you want as well. If you're an undergrad, you take it</p> <p>for five, all right?</p> <p>So why is it five units? And you might think, &quot;Hey, this class only meets three times a</p> <p>week. How come it's five units?&quot; Well, it actually has a fourth meeting every week,</p> <p>which is your section, and that's something you should sign up for. So how you actually</p> <p>sign up for your section is sections are at a bunch of different times. You don't sign up for</p> <p>them in Axess, even though they're all kind of listed in the time schedule. That's not</p> <p>where you sign up for them. In Axess, you just sign up for the class.</p> <p>How you sign up for a section is you go to a website, cs198.stanford.edu/section and this</p> <p>will give us a list of preferences for section times that you wanna sign up for, and there's</p> <p>some matching process that goes on. It takes all your preferences into consideration with</p> <p>the whole system, and eventually you get an email by sometime early next week that tells</p> <p>you what section you're in. And section's 50 minutes, once a week. It's required to go to.</p> <p>It's actually gonna be part of your class participation grade, which we'll talk about in just</p> <p>a bit, okay?</p> <p>---------------------------------------</p> <p>When do these sign-ups happen? They happen between 5:00 p.m. this Thursday is when</p> <p>they go up. So if you try to go there now, you can't sign up. Remember 5:00 p.m.</p> <p>Thursday. So they're up, and then they're down at 5:00 p.m. on Sunday, okay? So make</p> <p>sure you sign up probably this weekend. If you're planning on being out of town this</p> <p>weekend, you wanna sign up before you go. Sign up early, but don't sign up often</p> <p>because you only need one section, okay?</p> <p>If you're an SCPD student — every once in a while you'll hear me refer to SCPD</p> <p>students. That stands for Stanford Center for Professional Development. They are the</p> <p>folks in industry who actually take this class via broadcast. If you're an SCPD student,</p> <p>you're automatically enrolled for a section, so you don't actually need to do this, and your</p> <p>section will meet at — so for SCPD — and if you're wondering what an SCPD student is,</p> <p>you're not one, okay? So SCPD section meets Friday from 1:15 to 2:05. It meets live, if</p> <p>you wanna go there live, in Skilling Auditorium. But if you're watching it remotely, it</p> <p>meets on Channel E2. I know it seems weird to say it meets on channel — what does that</p> <p>mean? It meets on Channel E2, okay? That is grammatically the correct way of saying it.</p> <p>All right. So there's a little bit more administrative stuff. Now, textbooks, right?</p> <p>Textbooks, there's nothing quite like the extortion that is textbooks. So there are two</p> <p>textbooks that are required for this class. Well, one's a course reader and one's a textbook.</p> <p>The course reader is called, Karel the Robot Learns Java. You can pick it up at the</p> <p>bookstore. It's relatively cheap. It was actually written by Eric Roberts here. And</p> <p>surprisingly enough, the textbook for the class was also written by Eric Roberts, The Art</p> <p>and Science of Java, which is available now in your local bookstore, including the</p> <p>bookstore on campus, so you can go and pick up a copy of this.</p> <p>So both these things you actually wanna have because they're required for the class. We'll</p> <p>go through all of them. We'll go through basically everything except the last chapter of</p> <p>this book. So you sort of get your money's worth. We're just gonna do it a little bit out of</p> <p>order, but we'll go through the whole thing, okay?</p> <p>So email, how many of you have email accounts? All right. I will ask the reverse question</p> <p>because I think at this point, some people just don't wanna put up their hands. How many</p> <p>people don't have email accounts? Odd how that is not the complement of the folks who</p> <p>had their hands up previously. Email's required for this class. Chances are, by being at</p> <p>Stanford, you've already gotten an email account through your SUNet ID, but if you don't</p> <p>have an email account, get an email account and that's how you'll stay in contact with us.</p> <p>That's how we'll stay in contact with you, except we'll also meet with you live in person,</p> <p>but email is kind of the general method for communication.</p> <p>As a matter of fact, for your first assignment, and part of your first assignment is to send</p> <p>us an email, just because we love you and we don't get enough email as it is. So you need</p> <p>to have an email account to be able to do that. So if you have not already, you can kind of</p> <p>get ahead of the game and go set up your email account. Now, don't worry. You'll get the</p> <p>first assignment next time. So you still get, like, two days of breathing space before your</p> <p>assignment goes out, okay?</p> <p>There is also gonna be lots of handouts in the class. They'll be either given out in class,</p> <p>well, they will be given out in class, but we'll also post them online in case you miss</p> <p>them.</p> <p>And how much real work do you do in this class? That's always kind of an interesting</p> <p>question. So let's talk a little bit about assignments and a little bit of other logistical</p> <p>things. So assignments, we'll just call them the dreaded assigns. There are seven</p> <p>programming assignments. And if you look at the syllabus Handout No. 2, it tells you</p> <p>when all of them are due all the way through by day, so you can plan out your whole</p> <p>quarter. It's just that much fun, okay?</p> <p>And these seven programming assignments are weighted slightly more toward the last</p> <p>assignments because the assignments will tend to get more complicated. That doesn't</p> <p>necessarily mean there'll be more programming; it just means conceptually, they'll</p> <p>become more complicated, so we tend to weigh them more toward the end of the class.</p> <p>So the later assignments count more than the early assignments.</p> <p>How you're gonna be actually doing your programming is using a little tool called</p> <p>Eclipse. And Eclipse thankfully is free, so you don't have to pay for it. As a matter of</p> <p>fact, you can download it from the CS106A website. And if you're wondering how you</p> <p>do that, don't worry. We'll give you a handout next class that explains to you the whole</p> <p>grueling process of downloading and installing Eclipse.</p> <p>And you can use this either on the Mac or the PC. So if you have your own computer,</p> <p>you can certainly work on this yourself. You just download it to your own machine. We'll</p> <p>explain the whole process in a handout. If you don't have your own computer, the public</p> <p>computer clusters on campus will have Eclipse installed on them, and so you can use</p> <p>Eclipse there. So you're sort of happy to go either way, okay?</p> <p>Now, the important thing, remember I mentioned that whole notion of software</p> <p>engineering in the class, and that's something we take really seriously, so seriously as a</p> <p>matter of fact that when you turn in your assignments, one thing we could do is we could</p> <p>take your assignments and we could just kind of look at it and go, &quot;Yeah, interesting, 'B.'</p> <p>Here you go. Thanks for playing.&quot; And you don't learn a whole lot from them. So in order</p> <p>to actually learn a lot from your assignments, we could take your assignment and write a</p> <p>whole bunch of comments on it and hand it back to you. Even that's kind of not enough.</p> <p>What really is a little bit more that makes it more fun is every week after you turn in your</p> <p>assignment and your section leader looks it over and grades it, you'll actually meet with</p> <p>your section leader for about 10 to 15 minutes every week or every time an assignment is</p> <p>due to actually go over in something referred to as interactive grading.</p> <p>And it's a chance to sit there and talk with an actual human being about what's good in</p> <p>your assignment, what are some of the things you need to work on, what are some of the</p> <p>software engineering principles you need to develop. And that way, you can really sort of</p> <p>get more detailed information and be able to ask questions to develop yourself as a</p> <p>programmer as well as get help if you need help, okay?</p> <p>And that's in addition to going to section, going to class and all that stuff. So it's another</p> <p>15 minutes a week. You'll actually schedule that time with your section leader on a</p> <p>regular basis when you're gonna have interactive grading or just affectionately referred to</p> <p>as IGs because at Stanford, everything's just short and we just can't say, like, psychology;</p> <p>we have to say psyche. So it's IG. Just remember that, all right?</p> <p>And then how are these things graded? So the other thing we could do is I told you we</p> <p>could just write &quot;B&quot; and hand it back to you. But we found that that's not really great</p> <p>because people get all wrapped around the axle about the grade.</p> <p>And so for a while, we did numbers and we're, like, huh, why don't we give a number</p> <p>between 1 and 20? And so what happens there? People get all wrapped around the axle</p> <p>about numbers.</p> <p>So then we thought, huh, what was a happier time when we were in school? I remember</p> <p>when we were in school, and we used to get back assignments and they had, like, smiley</p> <p>faces on them. Well, we can't do that because then it doesn't appear to be a rigorous</p> <p>Stanford class.</p> <p>So instead of the smiley face, we come up with something else, which looks surprisingly</p> <p>like this. It's kind of involved to actually draw, so I need to erase the board to do it.</p> <p>Check. That's kind of the beginning of our grading scale, okay?</p> <p>And the way our grading scale works is we start off with a check in the middle, which</p> <p>says this is a pretty solid program. It meets all the requirements for the program. Maybe</p> <p>it's got a little problem here or there, but it's a check. Then we have sort of two grades on</p> <p>the two sides of it: check plus and check minus.</p> <p>Check plus is, like, solid. You did a great job; you got everything right; things look good,</p> <p>a nice style in your program, nice software engineering, and the program works</p> <p>flawlessly. Good job. This is like total &quot;A.&quot; Check is kind of like, yeah, you're sort of</p> <p>there. It's kind of like &quot;A&quot; minus, &quot;B&quot; plus, maybe on some occasions &quot;B.&quot; But it's kind</p> <p>of like it's pretty good work; you're in pretty good shape here. And so a lot of grades in</p> <p>this class ends up being check pluses and checks, and if that's the case, you're perfectly</p> <p>fine grade-wise.</p> <p>Check minus, as you can imagine, this is kind of thinking about &quot;B,&quot; &quot;B&quot; minus. It's,</p> <p>yeah, there are some slightly more significant problems with your program.</p> <p>But that's not where it ends, right, because we wanna be able to even shoot for in some</p> <p>sense bigger gustoes. There was a plus and a minus. So plus is like, oh, nice job, kind of a</p> <p>hearty pat on the back. If you get pluses all the way through on all your assignments,</p> <p>you're in a pretty good candidate to get an &quot;A&quot; plus.</p> <p>And minus, like, just take good over here and replace it with bad, it's kind of like, oh, bad</p> <p>times, right, or maybe, you know — but even there was, like, more significant problems</p> <p>with this program or just the style on the program is just really bad. But even there, we</p> <p>don't stop. And you're, like, &quot;Come on, man. Like, I thought the whole reason was to</p> <p>simplify this.&quot; Don't worry.</p> <p>And it gets even better because we have a plus-plus and a minus-minus. And at this point,</p> <p>we've run out of board space, so we can't go any further. But a plus-plus is just</p> <p>outrageous, right? It's the kind of thing — so this is the kind of thing your section leader</p> <p>can't actually give you without coming and talking to Ben and I first because they get a</p> <p>program that just goes — it has to actually exceed the requirements for the assignment.</p> <p>It's by a long shot. Like, you'll get all your assignment requirements, and what we</p> <p>encourage you to do is you can do a grade assignment and get everything right and have</p> <p>good style, and you'll be in this category. And for the later assignments, you may be in</p> <p>this category if it's flawless.</p> <p>But we'll actually — if you want to go for the plus-plus, go beyond the assignment</p> <p>requirements. And the way we think about the plus-plus, it's a program that makes you</p> <p>weep in a good way. It's just like your section leader sees it, and they're just, like, this is</p> <p>so good, I've gotta show someone else. And they come and show Ben and I, and we're,</p> <p>like, sitting there looking at this on a monitor, and, like, tears are just welling in our eyes,</p> <p>and there was, like, soft violin music playing in the background and we get out the wine</p> <p>and cheese.</p> <p>So this is just, like, this is the kind of thing that gets you, like, remembered and the, oh, if</p> <p>you want a letter of recommendation, just ask because you got a plus-plus. Like, oh, it's</p> <p>awesome, right?</p> <p>There are very few of these in a quarter. So just by sort of way of comparison, in a class</p> <p>this size, probably throughout the span of the whole quarter, I'd expect there to be maybe</p> <p>ten plus-pluses, I mean, ten assignment plus-pluses, not ten students who get plus-pluses</p> <p>across the board. So it's really something to strive for, but if you strive for it, like, we're</p> <p>giving you the credit for it. And this gets remembered and you get, like, extra credit and</p> <p>everything.</p> <p>So we're left with this, right? This assignment also makes you weep, but not in the good</p> <p>way, right? It makes you kind of weep in the sense, like, I look at them and I'm, like, oh,</p> <p>man, like, what did I teach? Like, where did I go wrong, right? I, like, blame myself. I</p> <p>blame you a little bit, but I blame myself. And this is really just, like, the program is just,</p> <p>like, it's a shell. Like, there really wasn't much effort that was put into it. Yeah, you</p> <p>slapped something together or it doesn't really work, that whole deal.</p> <p>And then if you don't turn anything in, we do kind of reserve the zero to distinguish from</p> <p>the &quot;made really bad effort&quot; versus &quot;didn't make any effort at all.&quot; And we just won't talk</p> <p>about these, right? Let's just hope we can avoid those if possible. But that's kind of how</p> <p>the grading scale works now.</p> <p>Now, at the same time, I trust all of you to be responsible people. And every once in a</p> <p>while, something bad happens to a good person, and there's an assignment that you'd like</p> <p>to be able to turn in, but for whatever reason, you can't turn in on time. And I just wanna</p> <p>treat you like adults. I don't want you to have to worry about coming in and asking for an</p> <p>extension or, like, &quot;Oh, I had this really hard thing in another class, and I couldn't do it at</p> <p>the same time.&quot; Up front, everyone gets two free extensions, okay? So in terms of late</p> <p>days — we refer to these as late days, strangely enough — you get two free ones.</p> <p>What a late day is, is a class day. They're not 24-hour days, but class days. So if</p> <p>something is due on a Wednesday, you turned in on a Friday, that's a late day. That's one.</p> <p>You turn it in on the following Monday, that's two late days. You can split up your two</p> <p>late days among two different assignments. You can use them both on one assignment.</p> <p>But we encourage you to not use them at all because if you use your late days, you fall</p> <p>behind in the class. The way you should think about these things are these are preapproved</p> <p>extensions. They're not the kind of thing where you just think, &quot;Oh, yeah, I'm</p> <p>not gonna do the assignment because I wanna go and play Frisbee golf,&quot; right? Think of</p> <p>it, well, you wouldn't come ask me for an extension — you might, but you probably</p> <p>wouldn't ask me for an extension if you're, like, &quot;Hey, hey, Mehran, can I turn in the</p> <p>assignment, like, on Wednesday because I'm playing Frisbee golf this afternoon,&quot; right?</p> <p>If you would feel embarrassed asking that question, you probably don't wanna use one of</p> <p>your free late days.</p> <p>But something happens like, oh, it's a tough week, you've got midterms in other classes</p> <p>and you got this assignment due or whatever, that's a good time to use it. So we just trust</p> <p>you. And most people, we actually encourage you not to use them because it just makes</p> <p>you fall behind in the class.</p> <p>Because we trust you and we give you these two up front, getting extensions beyond your</p> <p>two free class days is virtually impossible because we sort of up front said, hey, it's your</p> <p>responsibility. We're giving you two freebies. We're not gonna give you a third extension.</p> <p>Imagine if you had to come ask us for three extensions. By the third one, we'd be, like,</p> <p>okay, what's going on, which is why we don't necessarily give extensions beyond these</p> <p>two.</p> <p>The only time we might give an extension beyond the two free ones is for something</p> <p>major, like death in the family or, like, serious medical problems that might require</p> <p>surgery or something like that. Every once in a while, unfortunately, that happens. I hope</p> <p>it doesn't happen in this class. But those are the only kinds of things that we give</p> <p>extensions to beyond the two free late days.</p> <p>Importantly, don't ask your section leader for extensions. They cannot grant you</p> <p>extensions. Only Ben, who has all the power in this class, can give extensions, which is</p> <p>why you should get to know Ben and then hopefully you won't need to talk to him about</p> <p>extensions, okay?</p> <p>So other thing to keep in mind is that three days late is the max. Beyond three days late,</p> <p>which is basically one class week, if you think about late days being class days, we will</p> <p>not accept an assignment. And the reason for that is at a certain point, you're so late,</p> <p>you're better off just doing the next assignment, letting the old one go. So to sort of</p> <p>enforce that policy, after three days, we don't accept that assignment late anymore. It's</p> <p>just gonna be a zero if it's not turned in, okay? And that just kind of forces you to keep</p> <p>up.</p> <p>Couple other minor things, well, I shouldn't say they're minor things. They're actually</p> <p>kind of important. Exams: There's two exams in this class. There's a midterm and a final.</p> <p>Both of them are, well, I shouldn't say both. The midterm is out of class. It's from 7:00 to</p> <p>8:30 p.m. on Tuesday, October 30. And it's on the syllabus. It's there. It's on the syllabus;</p> <p>it's on Handout No. 1. We repeat it multiple times. The date will eventually be announced</p> <p>when we get close to the midterm.</p> <p>But if you have a conflict with this time, you need to send me email, okay? You can send</p> <p>me email a little closer to the midterm because I'll announce it again for people who have</p> <p>conflicts. But since it's an out-of-class exam, you need to send me email if you have a</p> <p>conflict. I'll get all the constraints from people who have conflicts and try to schedule an</p> <p>alternate time if there's enough people with conflicts. But 7:00 to 8:30 is when you need</p> <p>to know about the midterm.</p> <p>And to make up for the fact that we have an out-of-class midterm, I actually give you sort</p> <p>of a belated free day, which is the Friday of the week of the midterm, we don't have class</p> <p>to make up for the fact that we made you come to the midterm outside of class. But the</p> <p>midterm's an hour and a half, and we can't compress time. If we could, we'd have</p> <p>different issues. We can't compress time and fit it into a 50 minute class, which is why it's</p> <p>out of class, but you get a free day for it, all right?</p> <p>Last but not least, few things about grading. Grading, one of those things as you might be</p> <p>able to tell from this little board over here or something, if I didn't have to do it, I</p> <p>wouldn't do it because honestly, as corny as this sounds, I just believe in the love of</p> <p>learning. Like, I think if you're passionate about something, you just go do it and you</p> <p>learn it. But I'm naïve, and so that's not the way learning always works. So sometimes we</p> <p>actually need grading to make sure that learning takes place.</p> <p>And so this is how your grade breaks down: Forty-five percent of your grade is on the</p> <p>programming assignments, okay? Fifteen percent is the midterm, which we'll just call the</p> <p>mid because we like to abbreviate everything. Thirty percent is the final. It's a three-hour</p> <p>final exam in the regular final time slot for this class.</p> <p>If you think or are under the delusion that you should take two classes at the same time,</p> <p>that's a bad idea because their final exams are at the same time, okay? So you should not</p> <p>take two classes as the same time because our final exam is scheduled for — I believe it's</p> <p>December 13, which is a Thursday, 12:15 to 3:15. That's the regular final exam slot for</p> <p>this class. And any other class at the same time will conflict with that slot. Thirty percent</p> <p>of your grade is the final.</p> <p>And that, if you add it all up, it's not just that I'm bad with math. It's because 10 percent</p> <p>of your grade is actually participation. And this is things like did you go to your</p> <p>interactive grading sessions? Did you regularly attend section? Did you participate in</p> <p>section? Did you participate in class, right?</p> <p>And so, in order to help you participate in class, there's a little incentive to participate in</p> <p>class, which is sugar in the afternoon. So someone raise their hand. All right. Yeah,</p> <p>sometimes I'm not a good shot. And this will tell you, if you're sitting in the back of the</p> <p>room, I can't throw a Kit Kat back there because they're a little too light. Oh, yeah, sorry.</p> <p>If you sit in the back of the room, the roof prevents me from actually being able to hit</p> <p>you. So if you want the food, come up. But if you ask questions in class, hey, that's a</p> <p>good time. It's just a little way to be able to reward you for actually participating in class</p> <p>or to keep your blood sugar up if you need it, all right?</p> <p>So that's participation. It's 10 percent of your grade, and as a matter of fact, at the end of</p> <p>the quarter, I ask every one of your section leaders to actually tell me how much you</p> <p>participated in class, and some of them just say, &quot;Oh, this person was wonderful. They</p> <p>came every time. They participated. It's just a great thing.&quot; And that helps your grade out</p> <p>a lot, okay?</p> <p>Now, the final thing, and as you can kind of tell, most of the time, I'm not the most</p> <p>serious person in the world. I just like to have fun with things, and I think it's important</p> <p>for you to have fun with things. There is just one place where I get real serious, and it's</p> <p>one place where Stanford gets real serious. Anyone wanna guess what that is? Plagiarism</p> <p>and the honor code. As a matter of fact, that's what we call a social. So we had someone</p> <p>down here who got it and then a whole bunch of people who I don't know, so we just</p> <p>spray. All right.</p> <p>So the honor code, in terms of the honor code, the question comes up is what is the honor</p> <p>code all about, and how does that affect working in groups and computer science, etc.?</p> <p>Does that mean we shouldn't talk to each other? No. The answer to all those is no, okay?</p> <p>If you look at Handout No. 4, which is all about the honor code, we encourage you to talk</p> <p>to each other. We encourage you to talk about concepts in the class, talk about different</p> <p>strategies to problems, to think about the ways that you could potentially approach some</p> <p>problem or the way different control constructs when we eventually get to them work in</p> <p>the class. And discussion is perfectly fine, especially among the course staff, but also</p> <p>amongst yourselves. That's a great thing.</p> <p>So where do we draw the line? And we try to make a bright line for where you've crossed</p> <p>the line for the honor code, which is don't share code, plain and simple, in any respect,</p> <p>okay? Don't give a file to someone else that's got your code in it. Don't get code from</p> <p>someone else. Don't look at someone else's printout. Don't give them a printout.</p> <p>If you have two people who are sitting looking at the same screen together, that code</p> <p>can't belong to both of you. It belongs to one of you. I don't know which one, but it</p> <p>becomes an honor code violation. So you shouldn't both — two people shouldn't be</p> <p>staring at the monitor together. If it ever gets to the point where you're looking at</p> <p>someone else's code, that's where you're gonna reach an issue, okay? Discuss as much as</p> <p>you want. That's great. Write your own code. That's all we care about.</p> <p>And you're, like, &quot;Well, what is code, Mehran? What does that word mean?&quot; Code is</p> <p>geek speak for your program, so when you program, the program that you write is what</p> <p>we affectionately refer to as code. And the idea of programming is what we refer to as</p> <p>coding, strangely enough. Computer scientists need to make everything more</p> <p>complicated than it really is so we can get people under the illusion that they should pay</p> <p>us lots of money to do what we do. I mean, you're, like, &quot;Oh, I just write programs.&quot; And</p> <p>they're, like, &quot;Oh, yeah, I should pay you half.&quot; And you're, like, &quot;No, no, no. I write</p> <p>code.&quot; And they're, like, &quot;Oh, yeah.&quot; Suddenly, it's much more impressive. So don't share</p> <p>code.</p> <p>The other thing is if you talk to other people, like if you have a study group to talk about</p> <p>solution approaches or you go, let's say, talk to the TA or your section leader to how you</p> <p>should approach a problem, and they give you a lot of hints as to how to do it, cite</p> <p>collaboration. So cite and collaboration gets you out of trouble. Any collaboration that</p> <p>you cite you cannot be held responsible for under the honor code.</p> <p>You can actually copy someone else's program and say, &quot;I copied this program from</p> <p>Mary Smith.&quot; And I'll look at that and say, &quot;They cited it,&quot; and it will warm the cockles</p> <p>of my heart. And Mary Smith will get full credit, and you'll get a zero because you copied</p> <p>your program from Mary Smith, but it's not an honor code violation because you cited the</p> <p>work, okay? So the bottom line is keep yourself safe and cite your collaborations. And I</p> <p>guarantee you most of the time, you'll be just fine.</p> <p>Now, you might wonder why do I make such a big deal about this. And the reason I make</p> <p>a big deal about this is for a while, thankfully it's not true anymore, but for a while, the</p> <p>computer science department actually had more honor code violations than the rest of the</p> <p>university combined. Take everything else in the university, put them all together, they</p> <p>were like over here. And we're, like, we're computer science, which is not a fun</p> <p>distinction to have, let me tell you.</p> <p>And you might wonder why is that? Is that because computer science people are just</p> <p>mischievous and dishonest? No. It's because it's easier to catch honor code violations in</p> <p>computer science. We have a whole bunch of tools that allow us — then we take all your</p> <p>programs and we run them through this tool, and it compares them not only to everyone</p> <p>else in here, but, like, to everyone from the last, like, X years where X is the large</p> <p>number of people who've ever gone through the classes, right? And it's an extremely</p> <p>good tool from finding where honor code violations happen, from where they don't. And</p> <p>it doesn't find spurious violations.</p> <p>To be honest, I've never lost an honor code case. When I find an honor code case, it is</p> <p>blatant. And you take it to judicial affairs, and they look at it, and they're, like, yeah, this</p> <p>is blatant. And I take it to the student, and every student I've ever confronted them with</p> <p>never said, &quot;No, no, no. I didn't cheat.&quot; They said, &quot;You caught me,&quot; okay? So it's blatant.</p> <p>It's not like, oh, there's some little line in it, &quot;Oh, am I gonna need to worry about an</p> <p>honor code violation?&quot; Remember those rules, you have nothing to worry about in this</p> <p>class. It's people who go and, like, fish out printouts from the recycle bins and copy other</p> <p>people's code that are the people we catch, right? It's blatant cheating that we catch. But</p> <p>we catch it. We catch it all the time. So I hope, I pray it doesn't happen in this class.</p> <p>But the reason I make a big deal about it is historically if I look at the evidence, it</p> <p>happens and we catch it. And when we catch it, we're required by the university to</p> <p>prosecute. And I feel bad because usually it's someone who just made a bad call, like,</p> <p>they were up way too late the night before working on something else, and they're not</p> <p>thinking straight. And rather than just taking a late day or turning in their assignment late</p> <p>and getting a slight penalty on it beyond their two free late days, they decide to cheat.</p> <p>And that's just always the wrong call, okay? So you just don't wanna put yourself in that</p> <p>situation. So I get real serious about it for a moment, and hopefully it won't be an issue</p> <p>and we can just kind of go on, okay?</p> <p>So with that said, that's a whole bunch of logistical stuff. Any questions about the</p> <p>logistics of this class or anything I just talked about? Uh huh?</p> <p>Student:You had briefly mentioned the late penalty.</p> <p>Instructor (Mehran Sahami):Oh, the late penalty, good point. So remember our little</p> <p>bucket scale. If you go beyond your two free late days, every day you turn in an</p> <p>assignment late beyond those, it drops down one bucket. So let's say you already used</p> <p>your two free late days on Assignment No. 1. And on Assignment No. 2, you turned in</p> <p>something one day late and you would have gotten a check normally, it becomes a check</p> <p>minus. So that's how it is. It's one bucket per late day beyond your two free ones. Uh</p> <p>huh?</p> <p>Student:Are the sections first come, first served?</p> <p>Instructor (Mehran Sahami):Yeah, the sign-ups, well, they take into consideration your</p> <p>preference, but part of your preference is to do the match is first come, first served. So</p> <p>you wanna sign up early. Oh, thanks for your honesty. As a matter of fact, I dig honesty,</p> <p>all right? Any other questions? It's just honesty's cool. Uh huh?</p> <p>Student:How much time should we plan on studying [inaudible]?</p> <p>Instructor (Mehran Sahami):Oh, good question. How much time should you plan? And</p> <p>this is something that I say for classes in general at Stanford, which is not always true,</p> <p>which is take the number of units that a class is, multiply it by three. That's how many</p> <p>hours you'll spend per week in that class, total, on average. So what that means is in</p> <p>106A, a 5 unit class, you multiply by 3, you get 15. Five of those hours are roughly spent</p> <p>between class, section, interactive grading, other stuff. That means on average about ten</p> <p>hours a week will be spent on your assignments in this class. Again, that's an average.</p> <p>Sometimes when I go to computer science conferences, I sit there and joke around with</p> <p>plans. And we're, like, &quot;Oh, how long did your assignments take?&quot; And I say, &quot;Oh, on</p> <p>average, ten hours.&quot; And what I really mean when I say on average 10 hours is they take</p> <p>between 3 and 45, okay? It's a large variance event, right? Ten is the average. Some</p> <p>people take a really long time. Some people get through it really quickly, but that's about</p> <p>the average you can plan for. Uh huh? Another question?</p> <p>Student:[Inaudible] late days [inaudible] class days?</p> <p>Instructor (Mehran Sahami):Yeah, all late days are class days, so the free ones — the</p> <p>halfway mark's really my reach. That's about it. All right.</p> <p>So I do wanna give you your very beginning of an introduction to programming before</p> <p>we sort of break for the day. How are we doing on time? And so in order to kind of see</p> <p>this, there's a few things that we wanna keep in mind.</p> <p>Actually, let me show you a little picture, okay? Sometimes when we talk about writing</p> <p>programs, we talk about debugging programs, right? How many people ever heard the</p> <p>term debugging or bugs in programs? A bug in a program is an error in a program, so</p> <p>sometimes when you hear us say, &quot;Oh, come see,&quot; like, your section leader to help debug</p> <p>or see the helpers in LaIR.</p> <p>That's another thing. In the Tresidder computer cluster is the LaIR. It's a computer cluster</p> <p>that we have helpers there to help you get through this class. What is it? Sunday through</p> <p>Thursday, every week, from around 2:00 in the afternoon 'til midnight every day, okay, to</p> <p>help you get through the class. So that's a good place if, you know, you can work in your</p> <p>dorm room certainly, but if you also want help, go to the Tresidder computer cluster, and</p> <p>there will be helpers there. There's a little queue you sign up for to get help, and that's a</p> <p>great place, and it's all explained in Handout No. 1, but that's just something to keep in</p> <p>mind.</p> <p>Where the term debugging comes from, it turns out this is an apocryphal story, but I'll tell</p> <p>you anyway. Back in the days of yore, in 1945 actually, there was a computer called the</p> <p>Mark II at Harvard. And there was a woman named Grace Murray Hopper. Anyone ever</p> <p>heard of Grace Murray Hopper? A few folks. She was actually the first woman who was</p> <p>an admiral in the navy. And she was also one of the very early pioneers of computer</p> <p>programming. She did a lot of computer programming when she was actually a captain,</p> <p>and she was stationed at Harvard as part of some sort of navy thing. I don't know why,</p> <p>but that's what happened.</p> <p>And they had this huge computer there, and they were noticing the computer was on the</p> <p>fritz, and they couldn't understand what was wrong. And this is one of these big old</p> <p>machines in the days of yore that has vacuum tubes and stuff inside it. So they walked</p> <p>inside the computer, right, because then you could actually open it up and walk inside</p> <p>your computer.</p> <p>And they saw this, and I don't know if you can see that, but that's a moth. It was a moth</p> <p>that had sort of given its life to be immortalized because it had actually shorted out across</p> <p>two relays in the computer and was causing these sort of errors to happen on the fritz.</p> <p>And so they took the bug out, and once they actually plucked this little charred bug out of</p> <p>there, the computer started working fine again, and she taped it in her log book.</p> <p>And this log book's actually preserved in the Smithsonian Institution now, which is where</p> <p>all this comes from. Here's all the standard disclaimer information: &quot;Image used under</p> <p>fair use for education purposes. Use of this image is exempt from Creative Commons and</p> <p>other licenses,&quot; just so you know. Now the lawyers are happy. But this is where we think</p> <p>of sort of the modern term debugging actually came from.</p> <p>Now, it turns out the actual story is that the term debugging came from the 1800s, in the</p> <p>late 1800s from mechanical devices. People actually referred to debugging as fixing</p> <p>mechanical devices. But this is kind of the apocryphal story for how it comes up in</p> <p>computer science.</p> <p>Now, with that said, what is the platform in which you're gonna sort of do your first</p> <p>debugging or your first work on? We talked about Java, but in fact in this class, we're not</p> <p>gonna start with Java. We're gonna start with something even sort of simpler than Java</p> <p>because as I mentioned, sometimes what happens in computer science is people learn all</p> <p>the features of some language. And they think just knowing the language makes them a</p> <p>good software engineer. And they get so worried about all the features of the language</p> <p>that they don't kind of think about the big picture.</p> <p>And so there was a guy named Rich Pattis, who oddly enough was actually a grad student</p> <p>at the time at Stanford, and he said, &quot;You know what? If we're gonna teach computer</p> <p>science, when we first start out, why don't we have people not worry about all of the</p> <p>different commands of the language and all the different things they can do? Let's start</p> <p>with something really simple so you can learn all the commands real quick. And then</p> <p>you've mastered everything there is to master about that language, and you can focus on</p> <p>the software engineering concepts.&quot; And it turns out to be a brilliant idea, which has</p> <p>actually been adopted by a bunch of people.</p> <p>And so Rich, who's a wonderfully friendly guy — sometime if we get him to come to</p> <p>Stanford, I'll introduce you; he's just very nice — came up with this thing called Karel the</p> <p>Robot. And the term, &quot;Karel&quot; actually comes from Karel Capek. Anyone know who he</p> <p>is? Oh, free candy. Uh huh?</p> <p>Student:He coined the term, &quot;robot.&quot;</p> <p>Instructor (Mehran Sahami):He coined the term, &quot;robot.&quot; He was a Czech playwright</p> <p>who actually wrote a play called, &quot;RUR,&quot; which was about robots. And the word robot</p> <p>actually comes from a Czech word, the Czech word for work. And so the robot is named</p> <p>after Karel. And some people say Karl, which is kind of actually closer to I believe if — I</p> <p>don't know if there's anyone who speaks Czech in the room — but closer to the actual</p> <p>pronunciation. But we say Karel these days because it's kind of like gender neutral, okay?</p> <p>And so Karel the Robot is basically this robot that lives in a really simple world. And so</p> <p>I'll show you all that you can meet Karel the Robot. He's friendly; he's fun. I'll show you</p> <p>Karel the Robot. So we gotta get Karel running. He's at the factory. He's getting souped</p> <p>up. We're energizing Karel. You gotta add some color to it. Otherwise — all right. We're</p> <p>begging for him. Come on, Karel. There he is. Oh, yeah. That's Karel the Robot. He looks</p> <p>like one of the old Macintoshes if you remember the original Macintoshes that look like a</p> <p>lunch pail, except he's got legs. One sticks out his back. That's just the way it is.</p> <p>And the way Karel works is he lives in a grid. To you, it may not be exciting, but to</p> <p>Karel, it's way exciting. So Karel lives in this little grid, and the way the grid works is</p> <p>there are streets and avenues in the grid. Streets run horizontally, so this is First Street,</p> <p>Second Street, Third Street. And then over here, we have avenues, First Avenue, Second</p> <p>Avenue, Third Avenue, Fourth Avenue, Fifth Avenue. It's kind of like Karel lives in</p> <p>Manhattan if you wanna think about it that way, okay? So Karel always is on one of these</p> <p>corners. So right now, he's at the corner of First Street and First Avenue, or we just refer</p> <p>to it as 1 1 if you wanna think about sort of Cartesian coordinates, right? But just think of</p> <p>them as streets and avenues. That's where Karel lives.</p> <p>And Karel can move around in this world. There's a bunch of things that Karel can do. He</p> <p>can take steps forward. He can turn around to face different directions, and he can sense</p> <p>certain things about his world. So there's some things that exist in Karel's world, okay?</p> <p>Things like walls that Karel cannot move through, right, so his world has walls all around</p> <p>it that he can't go through, so he can't fall off the end of the world. And there's other walls</p> <p>like this one if Karel were over here, he can't step through that wall.</p> <p>There's also something referred to as beepers in Karel's world. And what a beeper is, is</p> <p>it's like a big diamond, okay? But what a beeper really is, is basically just some marker</p> <p>that he puts in the world. You can think of a beeper like a piece of candy. And Karel just</p> <p>goes around, like, putting pieces of candy in the world. As a matter of fact, not only does</p> <p>he put pieces of candy in the world, he carries around a whole bag of candy.</p> <p>So he has a beeper bag with him, and sometimes that bag has a whole bunch of beepers in</p> <p>it; sometimes it only has one beeper; sometimes, it's sad Karel, and he has no beepers.</p> <p>But he's still got the bag. There just don't happen to be any beepers in it. So he can</p> <p>potentially, if he come across a beeper in his world, he can pick it up and put it in his bag,</p> <p>or he can take, if he's got beepers in his bag, he can take them out of his bag and put them</p> <p>places in the world. And corners in the world can have either zero — if they have no</p> <p>beepers, they just appear like a little dot — or one or more beepers on them that Karel</p> <p>can potentially pick up, okay?</p> <p>So any questions about beepers or Karel having a little bag of beepers? And that's it.</p> <p>That's Karel. That's his world. His world, we can make it larger if we want. We can put in</p> <p>walls in different places. We can put beepers in different places. We can have Karel be in</p> <p>a different place.</p> <p>But starting next time, what you're gonna realize is with this extremely simple world,</p> <p>there's actually some complicated things you can do. And after about a week — so this</p> <p>first week, we're gonna focus on Karel — you'll notice that Karel is actually a very nice,</p> <p>gentle introduction into Java. And a lot of the concepts that we learn, sort of software</p> <p>engineering concepts using Karel, will translate over to the Java world, okay? So any</p> <p>questions about Karel or any of the other logistics that you've actually heard about in the</p> <p>class?</p> <p>Alrighty then. Welcome to 106A. I'll see you on Wednesday.</p> <p>[End of Audio]</p> <p>Duration: 50 minutes</p> <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2011/08/18/programming-methodology-lecture01.html" data-flip="title">Programming Methodology-Lecture01</a></p> </article> <article id="post-%E8%8B%B1%E8%AF%AD/2011/08/16/it-e-75-distributed-database-system" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E8%8B%B1%E8%AF%AD/2011/08/16/it-e-75-distributed-database-system.html" data-flip="title"> it-e-75 Distributed Database System </a> </h1> <p class="post-date heading"> <time datetime="2011-08-16T23:11:22+08:00">16 Aug 2011</time> in <span>英语</span> on <span>English</span>, <span>It</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>A decentralized system-known in the database world as a distributed system can be highly responsive to differences in data gathering, storage, and access. It can adjust to differences in user psychology-between, say, a multinational corporation's employees in individualistic Greece and in disciplined Japan. It can also adapt to the management styles of strong managers in different locations．</p> <p> An organization that prefers <font color="#0000ff">homogeneity</font> and top-down control will naturally choose a centralized database system. It may also prefer the hierarchical data model．</p> <p> By contrast, an organization that prefers local <font color="#0000ff">improvisation </font>and free wheeling may well choose distributed database system. It may also choose the network data model，which is well suited to searching and updating data in a distributed system.</p> <p> Communication between distributed commutinies of computer is required for many reasons．At a national level, for example, computers located in different parts of the country use public communication services to exchange electronic messages（mail） and to transfer files of information from one computer to another: Similarly, at a local level within, say, a single building or establishment, distributed communities of computer-based workstations use local communication networks to access expensive shared resources-for example, printers, copiers, disks and tapes, etc．-that are also managed by computers．Clearly, as the range of computer-based products and associated public and local com-medication networks <font color="#0000ff">procreate</font>, computer-to-computer communication will expand rapidly and ultimately dominate the field of distributed system.</p> <p> Historically, computers were so expensive that most large organizations did all their data processing on a single, centralized machine. While very efficient for such tasks as <font color="#0000ff">payroll </font>and generating accounting reports, the centralized approach was very useful to those who needed a quick response to a unique, local problem.</p> <p> With today's inexpensive micros and minis, there is no reason why a branch office, the engineer-in department, or any other group needing computer support cannot have its own computer. By linking these remote machines to a centralized computer via communication lines, local activity can be monitored and coordinated. This approach is called distributed data processing.</p> <p>&#160;</p> <p>1, arbitrary&#160;&#160; <br />a. 任意的,恣意的,专制的 </p> <p>2, homogeneity&#160; [,hɔməudʒe'ni:əti, ,həu-] <br />n. 同质；同种；同次性（等于homogeneousness） </p> <p>3, improvisation&#160; [,imprəvai'zeiʃən] <br />n. 即兴创作；即席演奏 </p> <p>4, procreate&#160; ['prəukrieit] <br />vi. 生育（子女）；产生 <br />vt. 生殖 </p> <p>5, payroll&#160; ['peirəul] <br />n. 工资单 </p> <p class="read-more">Continue reading <a class="heading" href="/%E8%8B%B1%E8%AF%AD/2011/08/16/it-e-75-distributed-database-system.html" data-flip="title">it-e-75 Distributed Database System</a></p> </article> <article id="post-web/2011/08/16/%e3%80%90%e8%bd%ac%e3%80%91sso-%e5%8e%9f%e7%90%86" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web/2011/08/16/e3-80-90-e8-bd-ac-e3-80-91sso-e5-8e-9f-e7-90-86.html" data-flip="title"> 【转】SSO 原理 </a> </h1> <p class="post-date heading"> <time datetime="2011-08-16T18:55:03+08:00">16 Aug 2011</time> in <span>Web</span> on <span>Cas</span>, <span>Sso</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>转载自<a title="http://www.cnblogs.com/yonsin/archive/2009/08/29/1556423.html" href="http://www.cnblogs.com/yonsin/archive/2009/08/29/1556423.html">http://www.cnblogs.com/yonsin/archive/2009/08/29/1556423.html</a>&#160;</p> <p>&#160;</p> <p>SSO <span style="font-family: 宋体">是一个非常大的主题，我对这个主题有着深深的感受，自从广州</span> UserGroup <span style="font-family: 宋体">的论坛成立以来，无数网友都在尝试使用开源的</span> CAS <span style="font-family: 宋体">，</span> Kerberos <span style="font-family: 宋体">也提供另外一种方式的</span> SSO <span style="font-family: 宋体">，即基于</span> Windows <span style="font-family: 宋体">域的</span> SSO <span style="font-family: 宋体">，还有就是从</span> 2005 <span style="font-family: 宋体">年开始一直兴旺不衰的</span> SAML <span style="font-family: 宋体">。</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">如果将这些免费的</span> SSO <span style="font-family: 宋体">解决方案与商业的</span> Tivoli <span style="font-family: 宋体">或</span> Siteminder <span style="font-family: 宋体">或</span> RSA Secure SSO <span style="font-family: 宋体">产品做对比，差距是存在的。毕竟，商业产品的安全性和用户体验都是无与伦比的，我们现在提到的</span> SSO <span style="font-family: 宋体">，仅仅是</span> Web SSO <span style="font-family: 宋体">，即</span> Web-SSO <span style="font-family: 宋体">是体现在客户端；另外一种</span> SSO <span style="font-family: 宋体">是桌面</span> SSO <span style="font-family: 宋体">，例如，只需要作为</span> Administrator <span style="font-family: 宋体">登录一次</span> windows 2000 <span style="font-family: 宋体">，我便能够在使用</span> MSN/QQ <span style="font-family: 宋体">的时候免去登录的环节</span> ( <span style="font-family: 宋体">注意，这不是用客户端软件的密码记忆功能</span> ) <span style="font-family: 宋体">，是一种代理用户输入密码的功能。因此，桌面</span> SSO <span style="font-family: 宋体">是体现在</span> OS <span style="font-family: 宋体">级别上。</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">今天，当我们提起</span> SSO <span style="font-family: 宋体">的时候，我们通常是指</span> Web SSO <span style="font-family: 宋体">，它的主要特点是，</span> SSO <span style="font-family: 宋体">应用之间走</span> Web <span style="font-family: 宋体">协议</span> ( <span style="font-family: 宋体">如</span> HTTP/SSL) <span style="font-family: 宋体">，并且</span> SSO <span style="font-family: 宋体">都只有一个登录入口。</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">简单的</span> SSO <span style="font-family: 宋体">的体系中，会有下面三种角色：</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; 1 <span style="font-family: 宋体">，</span> User <span style="font-family: 宋体">（多个）</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; 2 <span style="font-family: 宋体">，</span> Web <span style="font-family: 宋体">应用（多个）</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; 3 <span style="font-family: 宋体">，</span> SSO <span style="font-family: 宋体">认证中心（</span> 1 <span style="font-family: 宋体">个）</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">虽然</span> SSO <span style="font-family: 宋体">实现模式千奇百怪，但万变不离其宗：</span> </p> <p><span style="font-family: wingdings">l<span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></span>Web <span style="font-family: 宋体">应用不处理</span> User <span style="font-family: 宋体">的登录，否则就是多点登陆了，所有的登录都在</span> SSO <span style="font-family: 宋体">认证中心进行。</span> </p> <p><span style="font-family: wingdings">l<span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></span>SSO <span style="font-family: 宋体">认证中心通过一些方法来告诉</span> Web <span style="font-family: 宋体">应用当前访问用户究竟是不是张三</span> / <span style="font-family: 宋体">李四。</span> </p> <p><span style="font-family: wingdings">l<span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></span>SSO <span style="font-family: 宋体">认证中心和所有的</span> Web <span style="font-family: 宋体">应用建立一种信任关系，</span> SSO <span style="font-family: 宋体">认证中心对用户身份正确性的判断会通过某种方法告之</span> Web <span style="font-family: 宋体">应用，而且判断结果必须被</span> Web <span style="font-family: 宋体">应用信任。</span> </p> <h2 style="margin: 13pt 0cm"><font size="6"><font color="#0000ff"><font face="Arial">2. CAS</font> <span style="font-family: 黑体">的基本原理</span> </font></font></h2> <p>&#160;&#160;&#160;&#160;&#160;&#160; CAS(Central Authentication Service) <span style="font-family: 宋体">是</span> Yale <span style="font-family: 宋体">大学发起的一个开源项目，据统计，大概每</span> 10 <span style="font-family: 宋体">个采用开源构建</span> Web SSO <span style="font-family: 宋体">的</span> Java <span style="font-family: 宋体">项目，就有</span> 8 <span style="font-family: 宋体">个使用</span> CAS <span style="font-family: 宋体">。对这些统计，我虽然不以为然，但有一点可以肯定的是，</span> CAS <span style="font-family: 宋体">是我认为最简单实效，而且足够安全的</span> SSO <span style="font-family: 宋体">选择。</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">本节主要分析</span> CAS <span style="font-family: 宋体">的安全性，以及为什么</span> CAS <span style="font-family: 宋体">被这样设计，带着少许密码学的基础知识，我希望有助于读者对</span> CAS <span style="font-family: 宋体">的协议有更深层次的理解。</span> </p> <h3 style="margin: 13pt 0cm"><font size="5">2.1 CAS <span style="font-family: 宋体">的结构体系</span> </font></h3> <p><span style="font-family: 宋体">从结构体系看，</span> CAS <span style="font-family: 宋体">包含两部分：</span> </p> <p><font color="#0000ff"><span style="font-family: wingdings">l<span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></span>CAS Server </font></p> <p>CAS Server <span style="font-family: 宋体">负责完成对用户的认证工作，</span> CAS Server <span style="font-family: 宋体">需要独立部署，有不止一种</span> CAS Server <span style="font-family: 宋体">的实现，</span> Yale CAS Server <span style="font-family: 宋体">和</span> ESUP CAS Server <span style="font-family: 宋体">都是很不错的选择。</span> </p> <p>CAS Server <span style="font-family: 宋体">会处理用户名</span> / <span style="font-family: 宋体">密码等凭证</span> (Credentials) <span style="font-family: 宋体">，它可能会到数据库检索一条用户帐号信息，也可能在</span> XML <span style="font-family: 宋体">文件中检索用户密码，对这种方式，</span> CAS <span style="font-family: 宋体">均提供一种灵活但同一的接口</span> / <span style="font-family: 宋体">实现分离的方式，</span> CAS <span style="font-family: 宋体">究竟是用何种认证方式，跟</span> CAS <span style="font-family: 宋体">协议是分离的，也就是，这个认证的实现细节可以自己定制和扩展。</span> </p> <p><font color="#0000ff"><span style="font-family: wingdings">l<span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></span>CAS Client </font></p> <p>CAS Client <span style="font-family: 宋体">负责部署在客户端（注意，我是指</span> Web <span style="font-family: 宋体">应用），原则上，</span> CAS Client <span style="font-family: 宋体">的部署意味着，当有对本地</span> Web <span style="font-family: 宋体">应用的受保护资源的访问请求，并且需要对请求方进行身份认证，</span> Web <span style="font-family: 宋体">应用不再接受任何的用户名密码等类似的</span> Credentials <span style="font-family: 宋体">，而是重定向到</span> CAS Server <span style="font-family: 宋体">进行认证。</span> </p> <p><span style="font-family: 宋体">目前，</span> CAS Client <span style="font-family: 宋体">支持（某些在完善中）非常多的客户端，包括</span> Java <span style="font-family: 宋体">、</span> .Net <span style="font-family: 宋体">、</span> ISAPI <span style="font-family: 宋体">、</span> Php <span style="font-family: 宋体">、</span> Perl <span style="font-family: 宋体">、</span> uPortal <span style="font-family: 宋体">、</span> Acegi <span style="font-family: 宋体">、</span> Ruby <span style="font-family: 宋体">、</span> VBScript <span style="font-family: 宋体">等客户端，几乎可以这样说，</span> CAS <span style="font-family: 宋体">协议能够适合任何语言编写的客户端应用。</span> </p> <h3 style="margin: 13pt 0cm"><font size="5">2.2 CAS <span style="font-family: 宋体">协议</span> </font></h3> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">剖析协议就像剖析设计模式，有些时候，协议让人摸不着头脑。</span> CAS <span style="font-family: 宋体">的代理模式要相对复杂一些，它引入了一些新的概念，我希望能够在这里描述一下其原理，有助于读者在配置和调试</span> CAS SSO <span style="font-family: 宋体">有更清晰的思路。</span> </p> <p><span style="font-family: 宋体">如果没记错，</span> CAS <span style="font-family: 宋体">协议应该是由</span> <a href="mailto:drew.mazurek@yale.edu"><font color="#ae0405" size="2">Drew Mazurek</font></a> <span style="font-family: 宋体">负责可开发的，从</span> CAS v1 <span style="font-family: 宋体">到现在的</span> CAS v3 <span style="font-family: 宋体">，整个协议的基础思想都是基于</span> Kerberos <span style="font-family: 宋体">的票据方式。</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; CAS v1 <span style="font-family: 宋体">非常原始，传送一个用户名居然是</span> ”yes&quot;ndavid.turing” <span style="font-family: 宋体">的方式，</span> CAS v2 <span style="font-family: 宋体">开始使用了</span> XML <span style="font-family: 宋体">规范，大大增强了可扩展性，</span> CAS v3 <span style="font-family: 宋体">开始使用</span> AOP <span style="font-family: 宋体">技术，让</span> Spring <span style="font-family: 宋体">爱好者可以轻松配置</span> CAS Server <span style="font-family: 宋体">到现有的应用环境中。</span> </p> <p>CAS <span style="font-family: 宋体">是通过</span> TGT(Ticket Granting Ticket) <span style="font-family: 宋体">来获取</span> ST(Service Ticket) <span style="font-family: 宋体">，通过</span> ST <span style="font-family: 宋体">来访问服务，而</span> CAS <span style="font-family: 宋体">也有对应</span> TGT <span style="font-family: 宋体">，</span> ST <span style="font-family: 宋体">的实体，而且他们在保护</span> TGT <span style="font-family: 宋体">的方法上虽然有所区别，但是，最终都可以实现这样一个目的——免去多次登录的麻烦。</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">下面，我们看看</span> CAS <span style="font-family: 宋体">的基本协议框架：</span> </p> <p><strong><font face="MS Sans Serif">2.1.1 </font><span style="font-family: 黑体">基础协议</span> </strong></p> <p><img border="0" alt="cas_protocol-1.jpg" src="/assets/cas_protocol-1.jpg" width="528" height="380" /> <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; CAS <span style="font-family: 宋体">基础模式</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">上图是一个最基础的</span> CAS <span style="font-family: 宋体">协议，</span> CAS Client <span style="font-family: 宋体">以</span> Filter <span style="font-family: 宋体">方式保护</span> Web <span style="font-family: 宋体">应用的受保护资源，过滤从客户端过来的每一个</span> Web <span style="font-family: 宋体">请求，同时，</span> CAS Client <span style="font-family: 宋体">会分析</span> HTTP <span style="font-family: 宋体">请求中是否包请求</span> Service Ticket( <span style="font-family: 宋体">上图中的</span> Ticket) <span style="font-family: 宋体">，如果没有，则说明该用户是没有经过认证的，于是，</span> CAS Client <span style="font-family: 宋体">会重定向用户请求到</span> CAS Server <span style="font-family: 宋体">（</span> Step 2 <span style="font-family: 宋体">）。</span> Step 3 <span style="font-family: 宋体">是用户认证过程，如果用户提供了正确的</span> Credentials <span style="font-family: 宋体">，</span> CAS Server <span style="font-family: 宋体">会产生一个随机的</span> Service Ticket <span style="font-family: 宋体">，然后，缓存该</span> Ticket <span style="font-family: 宋体">，并且重定向用户到</span> CAS Client <span style="font-family: 宋体">（附带刚才产生的</span> Service Ticket <span style="font-family: 宋体">），</span> Service Ticket <span style="font-family: 宋体">是不可以伪造的，最后，</span> Step 5 <span style="font-family: 宋体">和</span> Step6 <span style="font-family: 宋体">是</span> CAS Client <span style="font-family: 宋体">和</span> CAS Server <span style="font-family: 宋体">之间完成了一个对用户的身份核实，用</span> Ticket <span style="font-family: 宋体">查到</span> Username <span style="font-family: 宋体">，因为</span> Ticket <span style="font-family: 宋体">是</span> CAS Server <span style="font-family: 宋体">产生的，因此，所以</span> CAS Server <span style="font-family: 宋体">的判断是毋庸置疑的。</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">该协议完成了一个很简单的任务，就是</span> User(david.turing) <span style="font-family: 宋体">打开</span> IE <span style="font-family: 宋体">，直接访问</span> helloservice <span style="font-family: 宋体">应用，它被立即重定向到</span> CAS Server <span style="font-family: 宋体">进行认证，</span> User <span style="font-family: 宋体">可能感觉到浏览器在</span> helloservcie <span style="font-family: 宋体">和</span> casserver <span style="font-family: 宋体">之间重定向，但</span> User <span style="font-family: 宋体">是看不到，</span> CAS Client <span style="font-family: 宋体">和</span> CAS Server <span style="font-family: 宋体">相互间的</span> Service Ticket <span style="font-family: 宋体">核实</span> (Validation) <span style="font-family: 宋体">过程。当</span> CAS Server <span style="font-family: 宋体">告知</span> CAS Client <span style="font-family: 宋体">用户</span> Service Ticket <span style="font-family: 宋体">对应确凿身份，</span> CAS Client <span style="font-family: 宋体">才会对当前</span> Request <span style="font-family: 宋体">的用户进行服务。</span> </p> <p><strong><font face="MS Sans Serif">2.2.2 CAS </font><span style="font-family: 黑体">如何实现</span> <font face="MS Sans Serif">SSO</font> </strong></p> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">当我们的</span> Web <span style="font-family: 宋体">时代还处于初级阶段的时候，</span> SSO <span style="font-family: 宋体">是通过共享</span> cookies <span style="font-family: 宋体">来实现，比如，下面三个域名要做</span> SSO <span style="font-family: 宋体">：</span> </p> <p><a href="http://www.blogjava.net/"><font color="#ae0405" size="2">http://www.blogjava.net</font></a> </p> <p><a href="http://www.matrix.org.cn/"><font color="#ae0405" size="2">http://www.matrix.org.cn</font></a> </p> <p><a href="http://www.csdn.net/"><font color="#ae0405" size="2">http://www.csdn.net</font></a> </p> <p><span style="font-family: 宋体">如果通过</span> CAS <span style="font-family: 宋体">来集成这三个应用，那么，这三个域名都要做一些域名映射，</span> </p> <p><a href="http://blogjava.cas.org/"><font color="#ae0405" size="2">http://blogjava.cas.org</font></a> </p> <p><a href="http://matrix.cas.org/"><font color="#ae0405" size="2">http://matrix.cas.org</font></a> </p> <p><a href="http://csdn.cas.org/"><font color="#ae0405" size="2">http://csdn.cas.org</font></a> </p> <p><span style="font-family: 宋体">因为是同一个域，所以每个站点都能够共享基于</span> cas.org <span style="font-family: 宋体">的</span> cookies <span style="font-family: 宋体">。这种方法原始，不灵活而且有不少安全隐患，已经被抛弃了。</span> </p> <p>CAS <span style="font-family: 宋体">可以很简单的实现跨域的</span> SSO <span style="font-family: 宋体">，因为，单点被控制在</span> CAS Server <span style="font-family: 宋体">，用户最有价值的</span> TGC-Cookie <span style="font-family: 宋体">只是跟</span> CAS Server <span style="font-family: 宋体">相关，</span> CAS Server <span style="font-family: 宋体">就只有一个，因此，解决了</span> cookies <span style="font-family: 宋体">不能跨域的问题。</span> </p> <p><span style="font-family: 宋体">回到</span> CAS <span style="font-family: 宋体">的基础协议图，当</span> Step3 <span style="font-family: 宋体">完成之后，</span> <font color="#0000ff">CAS Server <span style="font-family: 宋体">会向</span> User <span style="font-family: 宋体">发送一个</span> Ticket granting cookie (TGC) <span style="font-family: 宋体">给</span> User </font><span style="font-family: 宋体"><font color="#0000ff">的浏览器</font>，这个</span> Cookie <span style="font-family: 宋体">就类似</span> Kerberos <span style="font-family: 宋体">的</span> TGT <span style="font-family: 宋体">，下次当用户被</span> Helloservice2 <span style="font-family: 宋体">重定向到</span> CAS Server <span style="font-family: 宋体">的时候，</span> CAS Server <span style="font-family: 宋体">会主动</span> Get <span style="font-family: 宋体">到这个</span> TGC cookie <span style="font-family: 宋体">，然后做下面的事情：</span> </p> <p>1，<span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="font-family: 宋体">如果</span> User <span style="font-family: 宋体">的持有</span> TGC <span style="font-family: 宋体">且其还没失效，那么就走基础协议图的</span> Step4 <span style="font-family: 宋体">，达到了</span> SSO <span style="font-family: 宋体">的效果。</span> </p> <p>2，<span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="font-family: 宋体">如果</span> TGC <span style="font-family: 宋体">失效，那么用户还是要重新认证</span> ( <span style="font-family: 宋体">走基础协议图的</span> Step3) <span style="font-family: 宋体">。</span> </p> <p><strong><font face="MS Sans Serif">2.2.2 CAS </font><span style="font-family: 黑体">的代理模式</span> </strong></p> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">模式</span> 1 <span style="font-family: 宋体">已经能够满足大部分简单的</span> SSO <span style="font-family: 宋体">应用，现在，我们探讨一种更复杂的情况，即用户访问</span> helloservice <span style="font-family: 宋体">，</span> helloservice <span style="font-family: 宋体">又依赖于</span> helloservice2 <span style="font-family: 宋体">来获取一些信息，如同：</span> </p> <p>User <span style="font-family: wingdings">à </span>helloservice <span style="font-family: wingdings">à </span>helloservice2 </p> <p><span style="font-family: 宋体">这种情况下，假设</span> helloservice2 <span style="font-family: 宋体">也是需要对</span> User <span style="font-family: 宋体">进行身份验证才能访问，那么，为了不影响用户体验（过多的重定向导致</span> User <span style="font-family: 宋体">的</span> IE <span style="font-family: 宋体">窗口不停地</span> <span style="font-family: 宋体">闪动</span> ) <span style="font-family: 宋体">，</span> CAS <span style="font-family: 宋体">引入了一种</span> Proxy <span style="font-family: 宋体">认证机制，即</span> CAS Client <span style="font-family: 宋体">可以代理用户去访问其它</span> Web <span style="font-family: 宋体">应用。</span> </p> <p><span style="font-family: 宋体">代理的前提是需要</span> CAS Client <span style="font-family: 宋体">拥有用户的身份信息</span> ( <span style="font-family: 宋体">类似凭据</span> ) <span style="font-family: 宋体">。</span> <span style="font-family: 宋体">与其说之前我们提到的</span> TGC <span style="font-family: 宋体">是用户持有对自己身份信息的一种凭据，则这里的</span> PGT <span style="font-family: 宋体">就是</span> CAS Client <span style="font-family: 宋体">端持有的对用户身份信息的一种凭据。凭借</span> TGC <span style="font-family: 宋体">，</span> User <span style="font-family: 宋体">可以免去输入密码以获取访问其它服务的</span> Service Ticket <span style="font-family: 宋体">，所以，这里，凭借</span> PGT <span style="font-family: 宋体">，</span> Web <span style="font-family: 宋体">应用可以代理用户去实现后端的认证，而无需前端用户的参与。</span> </p> <p><span style="font-family: 宋体">如下面的</span> CAS Proxy <span style="font-family: 宋体">图所示，</span> CAS Client <span style="font-family: 宋体">在基础协议之上，提供了一个额外的</span> PGT URL <span style="font-family: 宋体">给</span> CAS Server, <span style="font-family: 宋体">于是，</span> CAS Server <span style="font-family: 宋体">可以通过</span> PGT URL <span style="font-family: 宋体">提供一个</span> PGT <span style="font-family: 宋体">给</span> CAS Client <span style="font-family: 宋体">。</span> </p> <p><img border="0" alt="cas_protocol-2.jpg" src="/assets/cas_protocol-2.jpg" width="528" height="402" /> <br />&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">初学者可能会对上图的</span> PGT URL <span style="font-family: 宋体">感到迷惑，或者会问，为什么要这么麻烦，要通过一个额外的</span> URL( <span style="font-family: 宋体">而且是</span> SSL <span style="font-family: 宋体">的入口</span> ) <span style="font-family: 宋体">去传递</span> PGT <span style="font-family: 宋体">？如果直接在</span> Step 6 <span style="font-family: 宋体">返回，则连用来做对应关系的</span> PGTIOU <span style="font-family: 宋体">都可以省掉。</span> PGTIOU <span style="font-family: 宋体">设计是从安全性考虑的，非常必要，</span> CAS <span style="font-family: 宋体">协议安全性问题我会在后面一节介绍。</span> </p> <p><span style="font-family: 宋体">于是，</span> CAS Client <span style="font-family: 宋体">拿到了</span> PGT( <span style="color: black;font-size: 10pt">PGTIOU-85…..ti2td</span> ) <span style="font-family: 宋体">，这个</span> PGT <span style="font-family: 宋体">跟</span> TGC <span style="font-family: 宋体">同样地关键，</span> CAS Client <span style="font-family: 宋体">可以通过</span> PGT <span style="font-family: 宋体">向后端</span> Web <span style="font-family: 宋体">应用进行认证。如下图所示，</span> Proxy <span style="font-family: 宋体">认证与普通的认证其实差别不大，</span> Step1, 2 <span style="font-family: 宋体">与基础模式的</span> Step 1,2 <span style="font-family: 宋体">几乎一样，唯一不同的是，</span> Proxy <span style="font-family: 宋体">模式用的是</span> PGT <span style="font-family: 宋体">而不是</span> TGC <span style="font-family: 宋体">，是</span> Proxy Ticket <span style="font-family: 宋体">（</span> PT <span style="font-family: 宋体">）而不是</span> Service Ticket <span style="font-family: 宋体">。</span> </p> <p><span style="font-family: 宋体">最终的结果是，</span> helloservice2 <span style="font-family: 宋体">明白</span> helloservice <span style="font-family: 宋体">所代理的客户是</span> David. Turing <span style="font-family: 宋体">同学，同时，根据本地策略，</span> helloservice2 <span style="font-family: 宋体">有义务为</span> PGTURL=http://helloservice/proxy <span style="font-family: 宋体">服务</span> (PGTURL <span style="font-family: 宋体">用于表示一个</span> Proxy <span style="font-family: 宋体">服务</span> ) <span style="font-family: 宋体">，于是它传递数据给</span> helloservice <span style="font-family: 宋体">。这样，</span> helloservice <span style="font-family: 宋体">便完成一个代理者的角色，协助</span> User <span style="font-family: 宋体">返回他想要的数据。</span> </p> <p><span style="font-family: 宋体"> <br /><img border="0" alt="cas_protocol-3.jpg" src="/assets/cas_protocol-3.jpg" width="543" height="378" /> <br />&#160;&#160; 代理认证模式非常有用，它也是</span> CAS <span style="font-family: 宋体">协议</span> v2 <span style="font-family: 宋体">的一个最大的变化，这种模式非常适合在复杂的业务领域中应用</span> SSO <span style="font-family: 宋体">。因为，以前我们实施</span> SSO <span style="font-family: 宋体">的时候，都是假定以</span> IE User <span style="font-family: 宋体">为</span> SSO <span style="font-family: 宋体">的访问者，忽视了业务系统作为</span> SSO <span style="font-family: 宋体">的访问者角色。</span> </p> <h3 style="margin: 13pt 0cm"><font size="5">2.3 CAS <span style="font-family: 宋体">安全性</span> </font></h3> <p>&#160;&#160;&#160;&#160;&#160;&#160; CAS <span style="font-family: 宋体">的安全性是一个非常重要的</span> Topic <span style="font-family: 宋体">。</span> CAS <span style="font-family: 宋体">从</span> v1 <span style="font-family: 宋体">到</span> v3 <span style="font-family: 宋体">，都很依赖于</span> SSL <span style="font-family: 宋体">，它假定了这样一个事实，用户在一个非常不安全的网络环境中使用</span> SSO <span style="font-family: 宋体">，</span> Hacker <span style="font-family: 宋体">的</span> Sniffer <span style="font-family: 宋体">会很容易抓住所有的</span> Http Traffic <span style="font-family: 宋体">，包括通过</span> Http <span style="font-family: 宋体">传送的密码甚至</span> Ticket <span style="font-family: 宋体">票据。</span> </p> <p><strong><font face="MS Sans Serif">2.3.1 TGC/PGT </font><span style="font-family: 黑体">安全性</span> <font color="#0000ff">[这两个安全性是基础]</font></strong></p> <div>/> <p>概念术语<br /> CAS(Central Authentication Service)<br /> TGT(Ticket Granting Ticket)<br /> ST(Service Ticket)<br /> PGT(Proxy Granting Ticket)</p> <p>&#160;</p> <p>原理剖析<br /> Yale CAS使用了Ticket Granting Cookie （简称TGC）去作为获取Service Ticket（简称ST）的凭据，这个TGC 是保存在客户端的cookie，即当第2次被其他CAS Client重定向的时候，CAS Server实际上已经从用户的Cookie中抓取到TGC，然后知道TGC对应的用户，因此避免了再次登录，如果CAS Server抓取不到TGC，则用户需要登陆。</p> <p>众所周知，cookie是不能跨域的。但是CAS能够做abc.com和xyz.com的sso，因为CAS Server缓存了所有的ticket，所以Client无需共享cookies。</p> <p><font color="#0000ff">似乎CAS设置了一个cas站点的cookie,所以abc.com和xyz.com都是读的cas本域的cookie,因此不存在跨域的问题。</font></p> </div> <p></p> <p><strong><font color="#0000ff">TGC是cookie,TGT也很重要，如果获得了TGT就可以反复使用它来创建ST,直到这个TGT过期。不知为什么不让TGT只有一次使用期限？我测试使用一个TGT可以很长时间获得可用的ST。所以在取TGT和PGT时以及使用TGT和PGT取ST时，都应该使用SSL.</font></strong></p> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">对于一个</span> CAS <span style="font-family: 宋体">用户来说，最重要是要保护它的</span> TGC <span style="font-family: 宋体">，如果</span> TGC <span style="font-family: 宋体">不慎被</span> CAS Server <span style="font-family: 宋体">以外的实体获得，</span> Hacker <span style="font-family: 宋体">能够找到该</span> TGC <span style="font-family: 宋体">，然后冒充</span> CAS <span style="font-family: 宋体">用户访问所有授权资源。</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; SSO <span style="font-family: 宋体">的安全性问题比普通应用的安全性还要严重，因为</span> SSO <span style="font-family: 宋体">存在一种门槛效应。以前即使</span> Hacker <span style="font-family: 宋体">能够截获用户在</span> Web <span style="font-family: 宋体">应用</span> A <span style="font-family: 宋体">的密码，它也未必能知道用户在</span> Web <span style="font-family: 宋体">应用</span> B <span style="font-family: 宋体">的密码，但</span> SSO <span style="font-family: 宋体">让</span> Hacker <span style="font-family: 宋体">只需要截获</span> TGC( <span style="font-family: 宋体">突破了门槛</span> ) <span style="font-family: 宋体">，即能访问所有与该用户相关的所有应用系统。</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; PGT <span style="font-family: 宋体">跟</span> TGC <span style="font-family: 宋体">的角色是一样的，如果被</span> Hacker <span style="font-family: 宋体">获得，后果可想而知。</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">从基础模式可以看出，</span> TGC <span style="font-family: 宋体">是</span> CAS Server <span style="font-family: 宋体">通过</span> SSL <span style="font-family: 宋体">方式发送给终端用户，因此，要截取</span> TGC <span style="font-family: 宋体">难度非常大，从而确保</span> CAS <span style="font-family: 宋体">的安全性。</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">因此，某些人认为</span> CAS <span style="font-family: 宋体">可以不使用</span> SSL <span style="font-family: 宋体">的想法需要更正一下，</span> CAS <span style="font-family: 宋体">的传输安全性仅仅依赖与</span> SSL <span style="font-family: 宋体">。</span> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">跟</span> Kerberos <span style="font-family: 宋体">一样</span> TGT <span style="font-family: 宋体">，</span> TGC <span style="font-family: 宋体">也有自己的存活周期。下面是</span> CAS <span style="font-family: 宋体">的</span> web.xml <span style="font-family: 宋体">中，通过</span> grantingTimeout <span style="font-family: 宋体">来设置</span> CAS TGC <span style="font-family: 宋体">存活周期的参数，参数默认是</span> 120 <span style="font-family: 宋体">分钟，在合适的范围内设置最小值，太短，会影响</span> SSO <span style="font-family: 宋体">体验，太长，会增加安全性风险。</span> </p> <table style="border-bottom: medium none;border-left: medium none;margin: auto auto auto 50.4pt;border-collapse: collapse;border-top: medium none;border-right: medium none" border="1" cellspacing="0" cellpadding="0"> <tbody> <tr> <td valign="top"> <p>&#160;&#160;&#160; &lt;context-param&gt; </p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;param-name&gt;edu.yale.its.tp.cas.grantingTimeout&lt;/param-name&gt; </p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;param-value&gt;7200&lt;/param-value&gt; </p> <p>&#160;&#160;&#160; &lt;/context-param&gt; </p> </td> </tr> </tbody> </table> <p>TGC <span style="font-family: 宋体">面临的风险主要并非传输窃取。比如你登陆了之后，没有</span> Logout <span style="font-family: 宋体">，离开了电脑，别人就可以打开你的浏览器，直接访问你授权访问的应用</span> ) <span style="font-family: 宋体">，设置一个</span> TGC <span style="font-family: 宋体">的有效期，可以减少被别人盗用，或者被</span> Hacker <span style="font-family: 宋体">入侵你的电脑直接获取你系统目录下的</span> TGC Cookie <span style="font-family: 宋体">。</span> </p> <p><strong><font face="MS Sans Serif">2.3.2 Service Ticket/Proxy Ticket </font><span style="font-family: 黑体">安全性</span> </strong></p> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">首要明白，</span> Service Ticket <span style="font-family: 宋体">是通过</span> Http <span style="font-family: 宋体">传送的，以为着所网络中的其他人可以</span> Sniffer <span style="font-family: 宋体">到其他人的</span> Ticket <span style="font-family: 宋体">。</span> </p> <p>CAS <span style="font-family: 宋体">协议从几个方面让</span> Service Ticket <span style="font-family: 宋体">变得更加安全。</span> </p> <p><span style="font-family: wingdings">l<span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></span>Service Ticket <span style="font-family: 宋体">只能使用一次。</span> </p> <p>CAS <span style="font-family: 宋体">协议规定，无论</span> Service Ticket <span style="font-family: 宋体">验证是否成功，</span> CAS Server <span style="font-family: 宋体">都会将服务端的缓存中清除该</span> Ticket <span style="font-family: 宋体">，从而可以确保一个</span> Service Ticket <span style="font-family: 宋体">被使用两次。</span> </p> <p><span style="font-family: wingdings">l<span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></span>Service Ticket <span style="font-family: 宋体">在一段时间内失效。</span> </p> <p><span style="font-family: 宋体">假设用户拿到</span> Service Ticket <span style="font-family: 宋体">之后，他请求</span> helloservice <span style="font-family: 宋体">的过程又被中断了，</span> Service Ticket <span style="font-family: 宋体">就被空置了，事实上，此时，</span> Service Ticket <span style="font-family: 宋体">仍然有效。</span> CAS <span style="font-family: 宋体">规定</span> Service Ticket <span style="font-family: 宋体">只能存活一定的时间，然后</span> CAS Server <span style="font-family: 宋体">会让它失效。通过在</span> web.xml <span style="font-family: 宋体">中配置下面的参数，可以让</span> Service Ticket <span style="font-family: 宋体">在多少秒内失效。</span> </p> <table style="border-bottom: medium none;border-left: medium none;margin: auto auto auto 76.25pt;border-collapse: collapse;border-top: medium none;border-right: medium none" border="1" cellspacing="0" cellpadding="0"> <tbody> <tr> <td valign="top"> <p>&lt;context-param&gt; </p> <p>&lt;param-name&gt;edu.yale.its.tp.cas.serviceTimeout&lt;/param-name&gt; </p> <p>&lt;param-value&gt;<span style="color: blue">300<font color="#000000">&lt;/param-value&gt;</font></span> </p> <p>&lt;/context-param&gt; </p> </td> </tr> </tbody> </table> <p>&#160;&#160;&#160;&#160;&#160;&#160; <span style="font-family: 宋体">该参数在业务应用的条件范围内，越小越安全。</span> </p> <p><span style="font-family: wingdings">l<span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></span>Service Ticket <span style="font-family: 宋体">是基于随机数生成的。</span> </p> <p>Service Ticket <span style="font-family: 宋体">必须足够随机，如果</span> Service Ticket <span style="font-family: 宋体">生成规则被猜出（如果你使用了</span> ST+Helloservice+ <span style="font-family: 宋体">自增序列的方式，</span> Hacker <span style="font-family: 宋体">就可以构造下一个</span> Ticket <span style="font-family: 宋体">），</span> Hacker <span style="font-family: 宋体">就等于绕过</span> CAS <span style="font-family: 宋体">认证，直接访问所有服务。</span></p> <p class="read-more">Continue reading <a class="heading" href="/web/2011/08/16/e3-80-90-e8-bd-ac-e3-80-91sso-e5-8e-9f-e7-90-86.html" data-flip="title">【转】SSO 原理</a></p> </article> <h2 class="sr-only">Pagination</h2> <nav class="pagination heading" role="navigation"> <ul> <li class="pagination-item older" > <a rel="next" href="/page-38/">Older</a> </li> <li class="pagination-item newer" > <a rel="prev" href="/page-36/">Newer</a> </li> </ul> </nav> <footer> <hr/> <p>© 2011 - 2017. All rights reserved.</p> <p> <code>Powered by <a href="https://qwtel.com/hydejack/">Hydejack</a> v<span id="_version">6.6.1</span></code> </p> </footer> </main> </div> <div id="_yDrawer"> <div id="_sidebar" class="sidebar"> <div class="sidebar-bg" style="background-color:#4f86aa;background-image:url()"></div> <header class="sidebar-sticky" role="banner"> <div class="sidebar-about"> <img src="https://avatars0.githubusercontent.com/u/4122902?v=4&s=460" class="me" /> </div> <div class="sidebar-about"> <h1><a id="_title" href="/">Ka's Blog</a></h1> <p>Ka’s blog description…</p> </div> <nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span> <ul> <li> <a class="sidebar-nav-item" href="/categories.html">Categories</a> </li> <li> <a class="sidebar-nav-item" href="/archive.html">Archive</a> </li> <li> <a class="sidebar-nav-item" href="/tags.html">Tags</a> </li> <li> <a class="sidebar-nav-item" href="/about.html">About</a> </li> </ul> </nav> <div class="sidebar-social"> <span class="sr-only">Social:</span> <ul> <li> <a href="https://twitter.com/imhazige" title="Twitter"> <span class="icon-twitter"></span> <span class="sr-only">Twitter</span> </a> </li> <li> <a href="https://github.com/imhazige" title="GitHub"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a> </li> <li> <a href="mailto:imhazige@gmail.com" title="Email"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a> </li> <li> <a href="https://imhazige.github.io/myblog/feed.xml" title="RSS"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a> </li> </ul> </div> </header> </div> </div> </div> <!--[if gt IE 9]><!----> <script>loadJSDeferred('/assets/js/hydejack.js?v=6.6.1');</script> <!--<![endif]--> </body>
</html>
