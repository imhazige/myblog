<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v6.6.1 <https://qwtel.com/hydejack/>
--><head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="format-detection" content="telephone=no"> <meta http-equiv="x-ua-compatible" content="ie=edge"> <title>Ka's Blog &middot; Ka's Blog</title> <meta name="description" content="Ka’s blog description… "> <link rel="canonical" href="http://localhost:4000/page-7/"> <link rel="alternate" type="application/atom+xml" title="Ka's Blog Feed" href="http://localhost:4000/feed.xml"> <link rel="apple-touch-icon" href="/apple-touch-icon.png"> <!-- Place favicon.ico in the root directory --> <link rel="stylesheet" href="/assets/style.css"> <link id="_katexJS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.js"> <link id="_katexCSS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css"> <!--[if gt IE 8]><!----> <script> WebFontConfig = { google: { families: 'Roboto+Slab:700|Noto+Sans:400,400i,700,700i'.split('|') }, custom: { families: ['icomoon'], urls: ['/assets/icomoon/style.css'] } }; </script> <!--<![endif]--> <script> !function(n,e){function t(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function o(n,e){n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,n))}}n._loaded=!1,n.loadJSDeferred=function(a,d){function r(){n._loaded=!0;var r=e.createElement("script");r.src=a,d&&(("onload"in r?t:o)(r,d),r.onload||t(r,d));var l=e.getElementsByTagName("script")[0];l.parentNode.insertBefore(r,l)}n._loaded?r():n.addEventListener?n.addEventListener("load",r,!1):n.attachEvent?n.attachEvent("onload",r):n.onload=r}}(window,document); !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); window.disablePushState = false; window.disableDrawer = false; </script> <!--[if lt IE 9]> <script src="/assets/bower_components/html5shiv/dist/html5shiv.min.js"></script> <![endif]--> <!--[if gt IE 8]><!----> <style> article, aside, dialog, figcaption, figure, footer, header, hgroup, main, nav, section { display: block; } mark { background: #FF0; color: #000; } * { box-sizing: border-box; } html, body { margin: 0; padding: 0; } html { font-size: 16px; line-height: 1.75; } body { color: #333; background-color: #fff; overflow-y: scroll; } a { text-decoration: none; } .lead { margin-left: -1rem; margin-right: -1rem; } img, .img { display: block; max-width: 100%; margin-bottom: 1rem; border: none; } img.lead, .img.lead { max-width: calc(100% + 2rem); width: calc(100% + 2rem); } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-weight: bold; text-rendering: optimizeLegibility; } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 { margin: 3rem 0 1rem; line-height: 1.6; } h1, .h1 { font-size: 2rem; line-height: 1.25; } h2, .h2 { font-size: 1.5rem; } h3, .h3 { font-size: 1.17em; } p { margin-top: 0; margin-bottom: 1rem; } p.lead { font-size: 1.25rem; font-weight: 300; padding: 0 1rem; } ul, ol, dl { margin-top: 0; margin-bottom: 1rem; } ul, ol { padding-left: 1.25rem; } hr { position: relative; margin: 1.5rem 0; border: 0; border-top: 1px solid #eee; } .hr { padding-bottom: .5rem; border-bottom: 1px solid #eee; margin-bottom: 1.5rem; } h4, h5, h6, .h4, .h5, .h6 { margin-bottom: 0.5rem; font-size: 1rem; } table { margin-bottom: 1rem; width: 100%; width: calc(100% + 2rem); margin-left: -1rem; border: 1px solid #e5e5e5; border-collapse: collapse; border-spacing: 0; } td, th { padding: .25rem .5rem; border: 1px solid #e5e5e5; } td:first-child, th:first-child { padding-left: 1rem; } td:last-child, th:last-child { padding-right: 1rem; } thead + tbody, tbody + tbody, tfoot { border-top: 3px double #e5e5e5; } tbody tr:nth-child(odd) td, tbody tr:nth-child(odd) th { background-color: #f9f9f9; } footer { margin-bottom: 2rem; } .page, .post { margin-bottom: 3em; } .page li + li, .post li + li { margin-top: .25rem; } .page > header, .post > header { margin-bottom: 2rem; } .page-title, .post-title { margin-top: 0; } .post-date { display: block; margin-top: -0.5rem; margin-bottom: 1rem; color: #9a9a9a; } .related-posts { padding-left: 0; list-style: none; } .related-posts > li, .related-posts > li + li { margin-top: 1rem; } .related-posts > li > small, .related-posts > li + li > small { font-size: 75%; color: #9a9a9a; } .message { margin-bottom: 1rem; padding: 1rem; color: #787878; background-color: #f9f9f9; margin-left: -1rem; margin-right: -1rem; } /* * Global resets * * Update the foundational and global aspects of the page. */ body, main { /* Prevent side-scrolling on mobile */ position: relative; overflow-x: hidden; } @media screen { body::before { content: ''; width: .5rem; background: #e5e5e5; position: absolute; left: 0; top: 0; bottom: 0; } } @media screen and (min-width: 40em) { html { font-size: 17px; } } @media screen and (min-width: 54em) { html { font-size: 16px; } } @media screen and (min-width: 72em) { html { font-size: 17px; } } @media screen and (min-width: 125em) { html { font-size: 18px; } } .sr-only { display: none; } .clearfix, .sidebar-social::after, .clearafter::after { content: ""; display: table; clear: both; } a, .a { position: relative; padding-bottom: .15rem; border-bottom: 1px solid; } .img { overflow: hidden; background-color: #f9f9f9; } .img > img { margin: 0; width: 100%; height: 100%; } .sixteen-nine { position: relative; } .sixteen-nine::before { display: block; content: ""; width: 100%; padding-top: 56.25%; } .sixteen-nine > * { position: absolute; top: 0; left: 0; right: 0; bottom: 0; } h1 + hr, h2 + hr, h3 + hr, h4 + hr, h5 + hr, h6 + hr { margin-top: 0; } .fade-in { animation-duration: 500ms; animation-name: fade-in; animation-fill-mode: forwards; } @keyframes fade-in { from { transform: translateY(-2rem); opacity: 0; } 50% { transform: translateY(-2rem); opacity: 0; } to { transform: translateY(0); opacity: 1; } } .mb6 { margin-bottom: 6rem; } .sidebar { color: rgba(255, 255, 255, 0.75); text-align: left; /* Sidebar links */ } .sidebar::before { /* make sidebar slightly darker to increase text readability (when using a background image) */ content: ""; position: absolute; z-index: 2; top: 0; left: 0; bottom: 0; right: 0; background: linear-gradient(to bottom, rgba(32, 32, 32, 0) 0%, rgba(32, 32, 32, 0.5) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */ } .sidebar a { color: #fff; border-bottom-color: rgba(255, 255, 255, 0.2); } #_yDrawer { position: relative; padding: 1rem 0; } @media screen { #_yDrawer { padding: 2rem 1rem; min-height: 640px; min-height: 100vh; } } @media screen and (min-width: 54em) { #_yDrawer { position: fixed; top: 0; left: 0; bottom: 0; width: 18rem; margin-left: 0; } } @media screen and (min-width: 97.5em) { #_yDrawer { width: calc(50% - 28rem); } } @media screen { #_yDrawer.loaded { min-height: 0; padding: 0; } } .sidebar-bg { position: absolute; top: 0; right: 0; bottom: 0; left: 0; background: #202020 center / cover; } .sidebar-sticky { position: relative; z-index: 3; } @media screen { .sidebar-sticky { position: absolute; right: 2rem; bottom: 1rem; left: auto; max-width: 14rem; } } @media print { .sidebar-sticky { padding: 0 2rem; } } /* About section */ .sidebar-about > h1 { color: #fff; font-size: 2rem; } .sidebar-nav > ul { list-style: none; padding-left: 0; margin-bottom: .5rem; } a.sidebar-nav-item { font-weight: bold; display: block; line-height: 1.75; padding: .25rem 0; border-bottom: 1px solid rgba(255, 255, 255, 0.2); } @media screen { .y-drawer-scrim { z-index: 2; } .y-drawer-content { width: 18rem; left: -17.5rem; z-index: 3; } } @media screen and (min-width: 97.5em) { .y-drawer-content { width: calc(50% - 28rem); } } .sidebar-social { margin-bottom: .5rem; } .sidebar-social > ul { list-style: none; padding-left: 0; margin: 0 -.25rem; } .sidebar-social > ul > li { float: left; margin: 0 .25rem; } .sidebar-social > ul > li > a { display: inline-block; text-align: center; font-size: 1.6rem; line-height: 3rem; width: 3.1249rem; height: 4rem; padding: .5rem 0; } .sidebar-social > ul li + li { margin-top: 0; } .fixed-top { position: fixed; top: 0; left: 0; width: 100%; z-index: 1; } .navbar > .content { padding-top: 0; padding-bottom: 0; min-height: 0; height: 0; } .menu { display: inline-block; padding: 1.75rem 1.5rem; border-bottom: none; margin-left: -1.5rem; color: #9a9a9a !important; } .menu::after { content: "\2630"; } @media screen and (min-width: 54em) { .menu { padding: 1.25rem 1.5rem; position: absolute; left: -9999px; } .menu:focus { position: static; } } .animation-main { pointer-events: none; } .loading { display: none; } @media print { .menu { display: none; } } .animation-main { opacity: 0; will-change: opacity; } .loading { position: absolute; top: 0; right: 0; padding: 5.25rem 4.5rem; transform-origin: top right; transform: scale(0.33); } .content { position: relative; margin-left: auto; margin-right: auto; padding: 5rem 1rem 12rem; } @media screen { .content { max-width: 38rem; padding-left: 1.5rem; min-height: 100vh; } } @media screen and (min-width: 54em) { .content { max-width: 42rem; padding: 4rem 1rem 12rem; margin-left: 22rem; margin-right: 4rem; } } @media screen and (min-width: 72em) { .content { margin-left: 22rem; margin-right: 4rem; } } @media screen and (min-width: 92em) { .content { max-width: 48rem; } } @media screen and (min-width: 97.5em) { .content { margin: auto; } } .me { float: right; width: 6.5rem; height: 6.5rem; margin-left: 1rem; margin-bottom: .5rem; border-radius: 100%; position: relative; } @media screen and (min-width: 40em) { .me { width: 7rem; height: 7rem; } } @media screen and (min-width: 54em) { .me { width: 6.5rem; height: 6.5rem; } } @media screen and (min-width: 60em) { .me { width: 7rem; height: 7rem; } } main > footer { position: absolute; bottom: 0; left: 0; right: 0; padding: 0 1rem; color: #9a9a9a; font-size: smaller; text-align: center; } main > footer > p { margin-bottom: 0; } /* .card, .pagination-item { border-radius: 0!important; } */ /* @media screen { .sidebar-sticky { left: 2rem; max-width: none; } } */ html { font-family: Helvetica, Arial, sans-serif; } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: Helvetica, Arial, sans-serif; } </style> <link id="_stylePreload" rel="preload" as="style" href="/assets/css/hydejack.css?v=6.6.1"> <script>document.getElementById('_stylePreload').onload=function(){this.rel='stylesheet'}</script> <!-- NOTE: These styles interact with JavsScript, so they MUST NOT be changed --> <style id="_pageStyle"> .content a { color: #4f86aa; border-color: rgba(79, 134, 170, 0.2); } .content a:hover { border-color: #4f86aa; } :focus { outline-color: #4f86aa; } ::selection { color: #fff; background: #4f86aa; } ::-moz-selection { color: #fff; background: #4f86aa; } </style> <noscript> <link rel="stylesheet" href="/assets/css/hydejack.css?v=6.6.1"> <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|Noto+Sans:400,400i,700,700i"> <style> html { font-family: 'Noto Sans', Helvetica, Arial, sans-serif } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: 'Roboto Slab', Helvetica, Arial, sans-serif } </style> <link rel="stylesheet" href="/assets/icomoon/style.css"> </noscript> <!--<![endif]--> <!--[if gt IE 8]><!----> <script async src="/assets/bower_components/webfontloader/webfontloader.js"></script> <!--<![endif]--> </head> <body> <div class="navbar fixed-top"> <div class="content"> <span class="sr-only">Jump to:</span> <a id="_menu" class="menu no-hover" href="#_title"> <span class="sr-only">Menu</span> </a> </div> </div> <div id="_yPushState"> <div class="fade-in"> <main id="_main" class="content" role="main" data-color="#4f86aa" data-image=""> <article id="post-web/2013/03/18/godaddy%e5%9f%9f%e5%90%8d%e8%a2%ab%e8%af%af%e5%88%a0%e7%9a%84%e7%bb%8f%e5%8e%86" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web/2013/03/18/godaddy-e5-9f-9f-e5-90-8d-e8-a2-ab-e8-af-af-e5-88-a0-e7-9a-84-e7-bb-8f-e5-8e-86.html" data-flip="title"> Godaddy域名被误删的经历 </a> </h1> <p class="post-date heading"> <time datetime="2013-03-18T21:46:17+08:00">18 Mar 2013</time> in <span>Web</span> on <span>Domain</span>, <span>Godaddy</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>原来的域名ig2net.info和ig2net.com被我误删了！ 其原因是godaddy那误导性的界面还有我的手贱！</p> <p>&#160;</p> <p>本来我是买了两年的一直到2015年，花了50刀，当看到信用卡上已经出了账单时我以为已经购买成功，因此为安全原因就想把我的信用卡信息从godaddy上删掉。删的过程中，godaddy提示有两个item被绑定(ig2net.info和ig2net.com)，我当时想款都已经付了，应该没问题吧。结果就点了确认，居然没有出错，居然就这样删了。结果就是ig2net.info和ig2net.com域名被删。我的博客马上就访问不了。</p> <p>&#160;</p> <p>一身冷汗！赶紧找Godaddy客服,不好意思没有在线客服，除非你打电话直接联系，发了邮件说是18小时内回复，其实是第二天快24小时候才回个邮件说可以从domain可以恢复:</p> <p>&#160;</p> <ol> <li>Log in to your <a href="http://mya.godaddy.com/default.aspx?prog_id=GoDaddy">Account Manager</a>. 登陆godaddy账户 </li> <li>Next to <strong>Domains</strong>, click <strong>Launch</strong>. 点击Domains,点击Launch </li> <li>From the <strong>Domains</strong> menu, select <strong>Recover Expired Domains</strong>. 从Domains菜单中选择<strong>Recover Expired Domains</strong> </li> <li>Select the domain name(s) you want to recover. 选择你想恢复的域名 </li> <li>Click <strong>Recover</strong>. 点击Recover </li> <li>Select the renewal length for the domain name(s), and then click <strong>Next</strong>. <p><strong>NOTE:</strong> Renewal lengths for multiple domain names can vary depending on maximum renewal lengths allowed by each domain name registry.</p> </li> <li><em>(Optional)</em> Select the registration and website options you want to apply to your domain name renewals. </li> <li>Click <strong>Next</strong>, and then complete the checkout process. </li> </ol> <p>一路下来居然要我300美刀，有没有搞错啊！什么附加项目也没选，居然要这么多。</p> <p>再联系客服，还是一天后回复：</p> <p>&#160;</p> <p> <strong style="line-height: normal; text-transform: none; background-color: rgb(255,255,255); font-variant: normal; font-style: normal; text-indent: 0px; font-family: arial, sans-serif; white-space: normal; letter-spacing: normal; color: rgb(34,34,34); font-size: 13px; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px"><br /> <table> <tbody> <tr style="background-color: rgb(51,51,51)"> <th style="color: rgb(255,255,255)">Days after expiration</th> <td style="margin: 0px; font-family: arial, sans-serif"></td> <th style="color: rgb(255,255,255)">Action</th> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr> <td style="margin: 0px; font-family: arial, sans-serif"><strong>Day 1</strong></td> <td style="margin: 0px; font-family: arial, sans-serif"></td> <td style="margin: 0px; font-family: arial, sans-serif">We make the first of three billing attempts to renew the domain name. If the billing fails, the domain name expires. The domain name can be renewed by the registrant at no extra cost.</td> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr style="background-color: rgb(230,230,230)"> <td style="margin: 0px; font-family: arial, sans-serif"><strong>Day 5</strong></td> <td style="margin: 0px; font-family: arial, sans-serif"></td> <td style="margin: 0px; font-family: arial, sans-serif">We make the second billing attempt. If the billing fails again, the domain name is parked. The domain name can still be renewed by the registrant at no extra cost.</td> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr> <td style="margin: 0px; font-family: arial, sans-serif"><strong>Day 12</strong></td> <td style="margin: 0px; font-family: arial, sans-serif"></td> <td style="margin: 0px; font-family: arial, sans-serif">We make the third and final attempt to renew the domain name. The domain name can still be renewable by the registrant at no extra cost.</td> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr style="background-color: rgb(230,230,230)"> <td style="margin: 0px; font-family: arial, sans-serif"><strong><font color="#0000ff">Day 19</font></strong></td> <td style="margin: 0px; font-family: arial, sans-serif"><font color="#0000ff"> <br /></font></td> <td style="margin: 0px; font-family: arial, sans-serif"><font color="#0000ff">The domain name can be renewed by the registrant for the cost of a one-year renewal plus an $80.00 redemption fee.</font></td> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr> <td style="margin: 0px; font-family: arial, sans-serif"><strong>Day 26</strong></td> <td style="margin: 0px; font-family: arial, sans-serif"></td> <td style="margin: 0px; font-family: arial, sans-serif">We add the domain name to an expired domain name auction.</td> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr style="background-color: rgb(230,230,230)"> <td style="margin: 0px; font-family: arial, sans-serif"><strong>Day 36</strong></td> <td style="margin: 0px; font-family: arial, sans-serif"></td> <td style="margin: 0px; font-family: arial, sans-serif">The expired domain name auction ends. If there are no backorders and no bidders in the expired domain name auction, we list the domain name in a closeout auction.</td> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr> <td style="margin: 0px; font-family: arial, sans-serif"><strong>Day 41</strong></td> <td style="margin: 0px; font-family: arial, sans-serif"></td> <td style="margin: 0px; font-family: arial, sans-serif">The closeout auction ends.</td> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr style="background-color: rgb(230,230,230)"> <td style="margin: 0px; font-family: arial, sans-serif"><strong>Day 43</strong></td> <td style="margin: 0px; font-family: arial, sans-serif"></td> <td style="margin: 0px; font-family: arial, sans-serif">We assign the domain name to the winner of the expired domain name auction, backorder, or closeout. If there are no bidders, we return the domain name to the registry.</td> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> <tr> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> </tbody> <tbody> <tr> <td style="margin: 0px; font-family: arial, sans-serif"></td> </tr> </tbody> </table> <p> </strong> <br class="Apple-interchange-newline" /> <p>我还是不明白，明明还没过期，怎么就到Day19了？</p> <p>然后再看看Recovery,居然要我500刀，有没有搞错！</p> <p>&#160;</p> <p>看来恢复无望，看能不能把钱要回来。再问客服，还是一天后恢复：</p> <p>可以，要回复此邮件我们将退款给你。</p> <p>&#160;</p> <p>这还差不多，不至于域、财两空。</p> <p>&#160;</p> <p>只好再从name.com买了个域名kazge.com。</p> <p>&#160;</p> <p>godaddy用了几年了，界面真是烂，一点也不fashion. 客服反映慢，邮件都是一天后才回复，我明明是他给我邮件后马上回复的。</p> <p>不过它支持支付宝这点对国内来说还是比较方便的。</p> <p>&#160;</p> <p>name.com是别人推荐的，目前用起来还没什么问题。不过传说的whois免费是没碰到的。</p> <p>&#160;</p> <p>买域名要想能自动renew,那还得信用卡。否则，到时再续费就行了。</p> <p>&#160;</p> <p>&#160;</p> <p>换了域名，原来许多文章指向站内链接也需要换，这片文章介绍了个插件Velvet Blues Update URLs</p> <p>，<a title="http://www.wpdaxue.com/wordpress-change-domain-update-urls.html" href="http://www.wpdaxue.com/wordpress-change-domain-update-urls.html">http://www.wpdaxue.com/wordpress-change-domain-update-urls.html</a></p> <p>还行，但是不能更新评论中的链接。</p> <p class="read-more">Continue reading <a class="heading" href="/web/2013/03/18/godaddy-e5-9f-9f-e5-90-8d-e8-a2-ab-e8-af-af-e5-88-a0-e7-9a-84-e7-bb-8f-e5-8e-86.html" data-flip="title">Godaddy域名被误删的经历</a></p> </article> <article id="post-java/2013/03/12/httpclient-ssl-%e6%97%a0%e9%aa%8c%e8%af%81" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/2013/03/12/httpclient-ssl-e6-97-a0-e9-aa-8c-e8-af-81.html" data-flip="title"> HttpClient ssl 无验证 </a> </h1> <p class="post-date heading"> <time datetime="2013-03-12T03:46:19+08:00">12 Mar 2013</time> in <span>Java</span> on <span>Httpclient</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>今天发现httpclient完全是个版本帝，前段时间刚刚从升级到4.o,丢弃曾经熟悉的使用结构。这次升级到4.2后里面又一堆方法被丢弃了。</p> <p>看着写的类一堆黄行行，心里确实不舒服，这里干个时髦。</p> <p>&#160;</p> <p>Httpclient创建ssl无验证的工厂代码:</p> <p> <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:ed016b3b-36cf-4d4c-9a6b-8126c0f24d32" class="wlWriterEditableSmartContent">name="code" class="java:showcolumns">public static HttpClient getHttpClient() { if (httpClient != null) return httpClient; <p class="read-more">Continue reading <a class="heading" href="/java/2013/03/12/httpclient-ssl-e6-97-a0-e9-aa-8c-e8-af-81.html" data-flip="title">HttpClient ssl 无验证</a></p> </article> <article id="post-%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/2013/03/11/google%e6%97%a5%e5%8e%86%e7%9a%84%e5%86%9c%e5%8e%86%e6%8f%90%e9%86%92" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/2013/03/11/google-e6-97-a5-e5-8e-86-e7-9a-84-e5-86-9c-e5-8e-86-e6-8f-90-e9-86-92.html" data-flip="title"> Google日历的农历提醒 </a> </h1> <p class="post-date heading"> <time datetime="2013-03-11T18:25:15+08:00">11 Mar 2013</time> in <span>默认分类</span> on <span>Google</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>Google日历非常不错，提供免费的短信提醒功能，支持国内手机。</p> <p>&#160;</p> <p>但是其尚不支持农历周期提醒，解决这个问题见这里:</p> <p><a href="http://hi.baidu.com/elegate/item/02ce23a0dca3899c14107363">http://hi.baidu.com/elegate/item/02ce23a0dca3899c14107363</a></p> <p>&#160;</p> <p>软件使用注意：</p> <p>选择的应该都是农历日期，前一个代表提醒的日期，后一个代表周期提醒结束日期，例如前一个设置2012-01-2,后一个设置2080-12-30那么就每年农历正月2号提醒一直到2080年，因为它还做不到无限循环提醒。 </p> <p>生成的ics文件是保存在软件所在目录。</p> <p class="read-more">Continue reading <a class="heading" href="/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/2013/03/11/google-e6-97-a5-e5-8e-86-e7-9a-84-e5-86-9c-e5-8e-86-e6-8f-90-e9-86-92.html" data-flip="title">Google日历的农历提醒</a></p> </article> <article id="post-%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/2013/03/10/%e5%86%8d%e8%b0%88c%e7%9b%98%e7%a9%ba%e9%97%b4%e4%b8%8d%e8%b6%b3" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/2013/03/10/e5-86-8d-e8-b0-88c-e7-9b-98-e7-a9-ba-e9-97-b4-e4-b8-8d-e8-b6-b3.html" data-flip="title"> 再谈c盘空间不足 </a> </h1> <p class="post-date heading"> <time datetime="2013-03-10T00:34:48+08:00">10 Mar 2013</time> in <span>默认分类</span> on <span>Windows</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>之前转载了c盘整理的文章，这次仍然c盘不足，发现一个较好的文件空间占用分析工具space_sniffer</p> <p>主页:</p> <p><a title="http://www.uderzo.it/main_products/space_sniffer/download.html" href="http://www.uderzo.it/main_products/space_sniffer/download.html">http://www.uderzo.it/main_products/space_sniffer/download.html</a></p> <p>下载:</p> <p><a title="http://www.uderzo.it/main_products/space_sniffer/files/spacesniffer_1_1_3_1.zip" href="http://www.uderzo.it/main_products/space_sniffer/files/spacesniffer_1_1_3_1.zip">http://www.uderzo.it/main_products/space_sniffer/files/spacesniffer_1_1_3_1.zip</a></p> <p>&#160;</p> <p>这个是免费的，这里有文章介绍:</p> <p><a title="http://www.iplaysoft.com/spacesniffer.html" href="http://www.iplaysoft.com/spacesniffer.html">http://www.iplaysoft.com/spacesniffer.html</a></p> <p>&#160;</p> <p>使用其扫一遍，发现这个itune占了2G,我就知道是这个原因，但一直不知道它到底是哪里占的空间，这下借助这个软件可以知道具体位置，删之。</p> <p>&#160;</p> <p>另外有个<a href="http://www.baidu.com/link?url=iH1_GJqjJ4zBBpC8yDF8xDhiqDSn1JZjFWsHhEoSNd85PkV8Xilxq1wlR83rynaE">hiberfil.sys</a> 文件也很大，他是windows的休眠备份文件，可以通过禁止休眠来删除：</p> <p>这里讲了两种方法禁止，我试过命令行，没成功，但是控制面板里是可以的，一下子又减少了3G.</p> <p><a title="http://jingyan.baidu.com/article/9113f81bcca4a22b3214c732.html" href="http://jingyan.baidu.com/article/9113f81bcca4a22b3214c732.html">http://jingyan.baidu.com/article/9113f81bcca4a22b3214c732.html</a></p> <p>&#160;</p> <p>上面两个方式一共减少了6G,这样就差不多了。</p> <p>&#160;</p> <p>另外还有几个明显很大的文件夹：</p> <p>C:\ProgramData</p> <p>C:\Users</p> <p>C:\Program Files</p> <p>这些没有提供设置来更改了路径，网上有些修改注册表的方法，不是很推荐。</p> <p><a title="http://www.360doc.com/content/12/1017/22/3145655_242113958.shtml" href="http://www.360doc.com/content/12/1017/22/3145655_242113958.shtml">http://www.360doc.com/content/12/1017/22/3145655_242113958.shtml</a></p> <p>&#160;</p> <p>也不建议自己手动删除这些文件夹，可能导致程序配置问题无法运行。</p> <p>我试过删除ProgramData,结果vmware station无法上网了，而且这个奇葩竟然把删除程序放在这个文件夹里，于是删除也删除不了，只好使用<a href="http://ishare.iask.sina.com.cn/f/14528142.html">http://ishare.iask.sina.com.cn/f/14528142.html</a> 这个来清理然后再重装。还不行的话那只有手动删除了 <a href="http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=1308">http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=1308</a></p> <p>不过这个也不一定解决问题，如果还不行（果然是奇葩），那你就只好一项项查找注册表vmware删除再试试了，我就是这样花时间试出来的。</p> <p class="read-more">Continue reading <a class="heading" href="/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/2013/03/10/e5-86-8d-e8-b0-88c-e7-9b-98-e7-a9-ba-e9-97-b4-e4-b8-8d-e8-b6-b3.html" data-flip="title">再谈c盘空间不足</a></p> </article> <article id="post-web%E5%89%8D%E7%AB%AF/2013/02/26/jquery-validate-%e6%8f%92%e4%bb%b6" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/2013/02/26/jquery-validate-e6-8f-92-e4-bb-b6.html" data-flip="title"> jquery validate 插件 </a> </h1> <p class="post-date heading"> <time datetime="2013-02-26T17:47:09+08:00">26 Feb 2013</time> in <span>Web前端</span> on <span>Bootstrap</span>, <span>Jquery</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>jquery validate plugin是个很不错的验证form的插件，提供许多类型的验证并且UI错误提示。</p> <p>&#160;</p> <p>主页:</p> <p><a title="http://docs.jquery.com/Plugins/Validation" href="http://docs.jquery.com/Plugins/Validation">http://docs.jquery.com/Plugins/Validation</a></p> <p><a title="http://bassistance.de/jquery-plugins/jquery-plugin-validation/" href="http://bassistance.de/jquery-plugins/jquery-plugin-validation/">http://bassistance.de/jquery-plugins/jquery-plugin-validation/</a></p> <p>&#160;</p> <p>配置一个form下面的验证:</p> <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:be816d18-2bbe-4f49-b969-c7c59dd1efc7" class="wlWriterEditableSmartContent"><pre name="code" class="js:firstline[1]">$('#frm').validate({
			rules : {
				username : {
					minlength : 2,
					required : true
				},
				email : {
					required : true,
					email : true
				}
			},
			messages : {
				username : {
//					minlength : jQuery
//							.format("At least {0} characters required!")
					minlength : 'Why your name is so short?'		
				},
				email : {
					required : "We need your email address to send token to you"
				}
			}			
		});</pre></div> <p>&#160;</p> <p><font color="#0000ff">据我使用的情况,选择子必须是个form,否则报错。</font></p> <p>上面的例子为name=”username”这个元素指定了最小长度2,必须这两个验证</p> <p>为name=”email”这个元素指定了必须和email这两个验证。</p> <p>对应的messages则制定了出错后的显示字符串（如果要支持i18n则需要另外的使用方法。）</p> <p>&#160;</p> <p>结合bootstrap使用的例子<a title="http://alittlecode.com/jquery-form-validation-with-styles-from-twitter-bootstrap/" href="http://alittlecode.com/jquery-form-validation-with-styles-from-twitter-bootstrap/">http://alittlecode.com/jquery-form-validation-with-styles-from-twitter-bootstrap/</a></p> <p>代码中只需要添加如下:</p> <p>&#160;</p> <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:cd442b1f-e241-48f2-8cf5-f746dc933f72" class="wlWriterEditableSmartContent"><pre name="code" class="js:firstline[1]">highlight : function(element) {
				$(element).closest('.control-group').removeClass('success')
						.addClass('error');
			},
			success : function(element) {
				element.text('OK!').addClass('valid').closest('.control-group')
						.removeClass('error').addClass('success');
			}</pre></div> <p>&#160;</p> <p>需添加样式:</p> <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:191037f5-d11f-4374-a20b-16aad1e47235" class="wlWriterEditableSmartContent">name="code" class="css:firstline[1]"> label.valid { width: 24px; height: 24px; background: url(../i/valid.png) center center no-repeat; display: inline-block; text-indent: -9999px; } <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/2013/02/26/jquery-validate-e6-8f-92-e4-bb-b6.html" data-flip="title">jquery validate 插件</a></p> </article> <article id="post-java/2013/02/25/apache-httpclient%e5%8f%8ahttpurlconnection%e7%9a%84%e9%97%ae%e9%a2%98" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/2013/02/25/apache-httpclient-e5-8f-8ahttpurlconnection-e7-9a-84-e9-97-ae-e9-a2-98.html" data-flip="title"> apache httpclient及httpurlconnection的问题 </a> </h1> <p class="post-date heading"> <time datetime="2013-02-25T17:56:38+08:00">25 Feb 2013</time> in <span>Java</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>之前写过httpclient 在android上的问题（<a title="http://kazge.com/archives/947.html" href="http://kazge.com/archives/947.html">http://kazge.com/archives/947.html</a>），后来曾想过完全抛弃httpclient,但是这次使用jvm上的httpurlconnection又碰到个问题。</p> <p>&#160;</p> <p>&#160;</p> <p>httpurlconnection的问题：</p> <p>当请求返回的是400之类的错误码时，则直接抛异常，得不到返回体。这个对于RESTFul请求就不太好了，因为它的返回体有时也包含了具体错误信息，客户端是要用的。而httpclient则没这个问题。</p> <p>&#160;</p> <p>&#160;</p> <p>httpclient主要是在android上的问题:</p> <p>google不推荐使用，版本保持在4.0.1不再更新,可想之后前途。</p> <p>&#160;</p> <p>总结下：</p> <p>jvm上还是用httpclient吧,Dalvik VM上Android2.3(Gingerbread)之后建议httpurlconnection。</p> <p class="read-more">Continue reading <a class="heading" href="/java/2013/02/25/apache-httpclient-e5-8f-8ahttpurlconnection-e7-9a-84-e9-97-ae-e9-a2-98.html" data-flip="title">apache httpclient及httpurlconnection的问题</a></p> </article> <article id="post-java/%E6%95%B0%E6%8D%AE%E5%BA%93/2013/02/25/mysql-8%e5%b0%8f%e6%97%b6%e8%a7%a3%e5%86%b3" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/%E6%95%B0%E6%8D%AE%E5%BA%93/2013/02/25/mysql-8-e5-b0-8f-e6-97-b6-e8-a7-a3-e5-86-b3.html" data-flip="title"> mysql 8小时解决 </a> </h1> <p class="post-date heading"> <time datetime="2013-02-25T17:42:19+08:00">25 Feb 2013</time> in <span>Java</span> / <span>数据库</span> on <span>Mysql</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>以前解决8小时问题通过设置不起作用，后来使用poxool池就可以</p> <p>&#160;</p> <p>这次发现dbcp还是好些，可能还是配置问题： <br /><a href="http://stackoverflow.com/questions/8535433/spring-app-losing-connection-to-mysql-after-8-hours-how-to-properly-configure">http://stackoverflow.com/questions/8535433/spring-app-losing-connection-to-mysql-after-8-hours-how-to-properly-configure</a> <br />从其答案中说是需要配置: <br />testWhileIdle, validationQuery and timeBetweenEvictionRunsMillis <br />这里有个例子 <br />validationQuery = &quot;SELECT 1&quot;&#160; <br />testWhileIdle = &quot;true&quot;&#160;&#160;&#160; <br />timeBetweenEvictionRunsMillis = &quot;3600000&quot;&#160; <br />minEvictableIdleTimeMillis = &quot;18000000&quot; <br />testOnBorrow = &quot;true&quot; <br />有人说 <br />timeBetweenEvictionRunsMillis <br />这个值不能设置&gt;time_out <br />但http://stackoverflow.com/questions/15949/javatomcat-dying-database-connection <br />几个例子都比它大，所以应该是要设置testWhileIdle=true <br />dbcp文档: <br /><a href="http://commons.apache.org/dbcp/configuration.html">http://commons.apache.org/dbcp/configuration.html</a></p> <p class="read-more">Continue reading <a class="heading" href="/java/%E6%95%B0%E6%8D%AE%E5%BA%93/2013/02/25/mysql-8-e5-b0-8f-e6-97-b6-e8-a7-a3-e5-86-b3.html" data-flip="title">mysql 8小时解决</a></p> </article> <article id="post-java/2013/02/23/cannot-be-read-or-is-not-a-valid-zip-file%e9%97%ae%e9%a2%98" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/2013/02/23/cannot-be-read-or-is-not-a-valid-zip-file-e9-97-ae-e9-a2-98.html" data-flip="title"> cannot be read or is not a valid ZIP file问题 </a> </h1> <p class="post-date heading"> <time datetime="2013-02-23T18:38:56+08:00">23 Feb 2013</time> in <span>Java</span> on <span>Maven</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>今天又遇到maven问题:cannot be read or is not a valid ZIP file</p> <p>&#160;</p> <p>工程是导入的，在别的机器上好好地，导入到我的机器上就出了问题。</p> <p>&#160;</p> <p>我的是maven3,仓库是默认的。</p> <p>&#160;</p> <p>打开报错的jar文件，好好地，没什么问题。</p> <p>&#160;</p> <p>最后发现在eclipse里面打开这些包里的类却是报错。</p> <p>&#160;</p> <p>看来还是包没有正确下下来。没办法只好将包从本地仓库中删掉，再更新maven 依赖。终于解决了。解决一个包的问题又出现另外的包同样的错，一个一个同样的解决办法，要是想爽快，干脆将整个本地仓库删掉再更新maven依赖。</p> <p>&#160;</p> <p>你还得感谢它还报了个错，等我运行时，还是发现这类没找到，那类没找到，同样，删吧，更新……</p> <p>&#160;</p> <p>就这样弄环境就花了两个小时，maven就是强。</p> <p>&#160;</p> <p>导入maven工程很容易出现这种情况。</p> <p>&#160;</p> <p>&#160;</p> <p>但最终都是maven这个怪物的问题，<a href="http://kazge.com/wp-content/uploads/2013/02/0073D164.gif"><img style="display: inline" title="0073D164" alt="0073D164" src="/assets/0073D164_thumb.gif" width="24" height="24" /></a></p> <p class="read-more">Continue reading <a class="heading" href="/java/2013/02/23/cannot-be-read-or-is-not-a-valid-zip-file-e9-97-ae-e9-a2-98.html" data-flip="title">cannot be read or is not a valid ZIP file问题</a></p> </article> <article id="post-%E6%95%B0%E6%8D%AE%E5%BA%93/2013/02/22/mysql-%e6%97%b6%e9%97%b4%e5%ad%97%e6%ae%b5%e4%bd%bf%e7%94%a8int%e8%bf%98%e6%98%afdatetime" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/2013/02/22/mysql-e6-97-b6-e9-97-b4-e5-ad-97-e6-ae-b5-e4-bd-bf-e7-94-a8int-e8-bf-98-e6-98-afdatetime.html" data-flip="title"> mysql 时间字段使用int还是datetime … </a> </h1> <p class="post-date heading"> <time datetime="2013-02-22T21:26:06+08:00">22 Feb 2013</time> in <span>数据库</span> on <span>Mysql</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p><font color="#0000ff">注意：这里的int是mysql整形统称， 因为datetime是8字节，所以对应是应由mysql bigint代替,timestamp是4字节,可由mysql int代替,一般java,php时间戳应该是由mysql bigint才能完全存储，mysql int长度不够。</font></p> <p>&#160;</p> <p>今天又纠结数据库里时间存储的问题，以往的经验，时区问题很繁琐，而mysql的date,datetime,timestamp都是和时区设置有关系的。(当然)</p> <p>&#160;</p> <p>我认为一般设计数据库，时间存储的应该是UTC时间，这样便于物理和逻辑上的移植，对于国际化功能的应用更是如此。可以省去许多时区转换的麻烦，可以维持一致性。</p> <p>&#160;</p> <p>网上也有这方面的讨论，大部分赞同int</p> <p>&#160;</p> <p>例如:</p> <h3><a href="http://billauer.co.il/blog/2009/03/mysql-datetime-epoch-unix-time/">Why MySQL’s (SQL) DATETIME can and should be avoided</a></h3> <p>&#160;</p> <p>&#160;</p> <p>&#160;</p> <p>对于性能，</p> <p>下面的这篇文章的测试我认为具有片面性</p> <h4><a href="http://gpshumano.blogs.dri.pt/2009/07/06/mysql-datetime-vs-timestamp-vs-int-performance-and-benchmarking-with-myisam/">MySQL DATETIME vs TIMESTAMP vs INT performance and benchmarking with MyISAM</a></h4> <p>其测试认为int 比datetime慢，但是其测试语句使用了相当多的mysql 日期函数，我们根本就不需要这样做，我们不需要使用数据库的日期函数，只要保证传入数据库的参数是int，像日期比较直接用int比较实际是比datetime要快的。</p> <p>&#160;</p> <p>&#160;</p> <p>参照openfire的mysql设计，发现它根本就没有使用任何datetime,timestamp类型。而是用bigint或是char。</p> <p>&#160;</p> <p>&#160;</p> <p>我的观点：</p> <p>对于应用型数据库，不应该使用datetime。</p> <p>对于需要在sql中嵌入逻辑的例如分析型数据仓库，数据管理员可能会倾向于使用datetime。</p> <p>&#160;</p> <p>&#160;</p> <p>&#160;</p> <p>参见:</p> <p><a title="http://billauer.co.il/blog/2009/03/mysql-datetime-epoch-unix-time/" href="http://billauer.co.il/blog/2009/03/mysql-datetime-epoch-unix-time/">http://billauer.co.il/blog/2009/03/mysql-datetime-epoch-unix-time/</a></p> <p><a title="http://gpshumano.blogs.dri.pt/2009/07/06/mysql-datetime-vs-timestamp-vs-int-performance-and-benchmarking-with-myisam/" href="http://gpshumano.blogs.dri.pt/2009/07/06/mysql-datetime-vs-timestamp-vs-int-performance-and-benchmarking-with-myisam/">http://gpshumano.blogs.dri.pt/2009/07/06/mysql-datetime-vs-timestamp-vs-int-performance-and-benchmarking-with-myisam/</a></p> <p class="read-more">Continue reading <a class="heading" href="/%E6%95%B0%E6%8D%AE%E5%BA%93/2013/02/22/mysql-e6-97-b6-e9-97-b4-e5-ad-97-e6-ae-b5-e4-bd-bf-e7-94-a8int-e8-bf-98-e6-98-afdatetime.html" data-flip="title">mysql 时间字段使用int还是datetime …</a></p> </article> <article id="post-java/%E6%95%B0%E6%8D%AE%E5%BA%93/2013/02/21/java%e4%b8%ad%e4%bd%bf%e7%94%a8p6spy-%e6%89%93%e5%8d%b0sql" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/%E6%95%B0%E6%8D%AE%E5%BA%93/2013/02/21/java-e4-b8-ad-e4-bd-bf-e7-94-a8p6spy-e6-89-93-e5-8d-b0sql.html" data-flip="title"> java中使用P6Spy 打印sql </a> </h1> <p class="post-date heading"> <time datetime="2013-02-21T22:57:13+08:00">21 Feb 2013</time> in <span>Java</span> / <span>数据库</span> on <span>Sql</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>今天才发现原来还有 p6spy <a title="http://sourceforge.net/projects/p6spy" href="http://sourceforge.net/projects/p6spy">http://sourceforge.net/projects/p6spy</a> 这么个东东，相见恨晚，想当年为自己基于jdbc手写了整个数据访问层的时候，还得意可提供完整的sql日志<a href="http://kazge.com/wp-content/uploads/2013/02/0134F62D.gif"><img style="display: inline" title="0134F62D" alt="0134F62D" src="/assets/0134F62D_thumb.gif" width="20" height="20" /></a>。</p> <p>&#160;</p> <p>这里记一下spring配置:</p> <p>&#160;</p> <h5>Maven</h5> <p>首先maven 见<a title="http://mvnrepository.com/artifact/p6spy/p6spy/1.3" href="http://mvnrepository.com/artifact/p6spy/p6spy/1.3">http://mvnrepository.com/artifact/p6spy/p6spy/1.3</a></p> <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:7937ab73-8fdd-4983-8b19-62d68f5c0821" class="wlWriterEditableSmartContent"><pre name="code" class="xml:firstline[1]">&lt;dependency&gt;
	&lt;groupId&gt;p6spy&lt;/groupId&gt;
	&lt;artifactId&gt;p6spy&lt;/artifactId&gt;
	&lt;version&gt;1.3&lt;/version&gt;
&lt;/dependency&gt;
            </pre></div> <h5>配置spring:</h5> <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:04eb79d1-b267-4558-b044-495327ad9950" class="wlWriterEditableSmartContent"><pre name="code" class="xml:firstline[1]">&lt;bean id="orginDataSource"
		class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"&gt;
		&lt;property name="driverClassName" value="${database.jdbc.driverClassName}"/&gt;
		&lt;property name="url" value="${database.jdbc.url}"/&gt;
		&lt;property name="username" value="${database.jdbc.username}"/&gt;
		&lt;property name="password" value="${database.jdbc.password}"/&gt;
				
		&lt;property name="testWhileIdle" value="true"/&gt;
		&lt;property name="timeBetweenEvictionRunsMillis" value="3600000"/&gt;
		&lt;property name="validationQuery" value="SELECT 1"/&gt;
		&lt;property name="minEvictableIdleTimeMillis" value="18000000"/&gt;
		&lt;property name="testOnBorrow" value="true"/&gt;
	&lt;/bean&gt;
	
	&lt;bean id="dataSource" class="com.p6spy.engine.spy.P6DataSource" &gt;
        &lt;constructor-arg&gt;
            &lt;ref local="orginDataSource"/&gt;
        &lt;/constructor-arg&gt;
    &lt;/bean&gt;</pre></div> <p>&#160;</p> <p>&#160;</p> <p>我用的dbcp连接池，加入p6spy还是比较方便的。注意dataSource这个bean才是被注入到程序中的bean,它只是包装了orginDataSource这个bean。另外网上的配置都有destroy-method=&quot;close&quot;这个，我看了下的包，p6spyDataSource这个类根本就没有close方法，不知是版本问题还是怎的。</p> <p>&#160;</p> <h5>最后配置spy.properties</h5> <p><a title="https://code.google.com/p/p6spy-mvn/downloads/list" href="https://code.google.com/p/p6spy-mvn/downloads/list">https://code.google.com/p/p6spy-mvn/downloads/list</a> 这里有例子，直接下下来放在/src/main/resources文件夹中</p> <p>针对你的实际情况修改，这里我需要使用log4j日志</p> <p>&#160;</p> <p>不需要realdriver这个配置,都可以注释掉,因为使用的是包装方式</p> <p>#realdriver=oracle.jdbc.driver.OracleDriver</p> <p>&#160;</p> <p>需要下面的配置</p> <p>module.log=com.p6spy.engine.logging.P6LogFactory</p> <p>appender=com.p6spy.engine.logging.appender.Log4jLogger</p> <p>&#160;</p> <p>#这些配置和log4j是一样的</p> <p>log4j.appender.STDOUT=org.apache.log4j.ConsoleAppender<br /> <br />log4j.appender.STDOUT.layout=org.apache.log4j.PatternLayout </p> <p>log4j.appender.STDOUT.layout.ConversionPattern=p6spy - %m%n</p> <p>&#160;</p> <p>#可以使用系统变量的</p> <p>log4j.appender.ROLLING_FILE=org.apache.log4j.RollingFileAppender<br /> <br />log4j.appender.ROLLING_FILE.File=${conf}/xxx.log&#160;&#160; <br />log4j.appender.ROLLING_FILE.Append=true&#160;&#160; <br />log4j.appender.ROLLING_FILE.MaxFileSize=10000KB&#160;&#160; <br />log4j.appender.ROLLING_FILE.MaxBackupIndex=10&#160; <br />log4j.appender.ROLLING_FILE.layout=org.apache.log4j.PatternLayout&#160;&#160; <br />log4j.appender.ROLLING_FILE.layout.ConversionPattern=%5p [%d{yy-MM-dd HH:mm:ss,SSS}] [%t] - %m%n</p> <p>&#160;</p> <p>log4j.logger.p6spy=INFO,STDOUT,ROLLING_FILE</p> <p>&#160;</p> <p>好了，运行后就会发现类似输出:</p> <p>INFO [13-02-21 14:30:50,906] [main] - 1361428250906|0|0|statement|select * from tbl_xxx where 1=1&#160; and rpt = ? and id = ? and active = ?|select * from tbl_xxx where 1=1&#160; and rpt = 'false' and id = '0' and active = 'true'</p> <p>&#160;</p> <p>可见最后一个是实际的sql语句,不过这样有点麻烦，需要拖动横向滚动条才能看到，还是我的显示屏不够宽哈，<a href="http://kazge.com/wp-content/uploads/2013/02/01417DA2.gif"><img style="display: inline" title="01417DA2" alt="01417DA2" src="/assets/01417DA2_thumb.gif" width="24" height="24" /></a>。</p> <p>&#160;</p> <p>&#160;</p> <p>另外可以使用工具来分析作为性能参考。</p> <p>&#160;</p> <p>&#160;</p> <p>参见:</p> <p><a title="http://swik.net/Spring/Spring%27s+corner/Integrate+P6Spy+with+Spring/vq6" href="http://swik.net/Spring/Spring%27s+corner/Integrate+P6Spy+with+Spring/vq6">http://swik.net/Spring/Spring%27s+corner/Integrate+P6Spy+with+Spring/vq6</a></p> <p><a title="http://www.mkyong.com/hibernate/how-to-display-hibernate-sql-parameter-values-solution/" href="http://www.mkyong.com/hibernate/how-to-display-hibernate-sql-parameter-values-solution/">http://www.mkyong.com/hibernate/how-to-display-hibernate-sql-parameter-values-solution/</a></p> <p><a title="http://www.iteye.com/topic/28880" href="http://www.iteye.com/topic/28880">http://www.iteye.com/topic/28880</a></p> <p class="read-more">Continue reading <a class="heading" href="/java/%E6%95%B0%E6%8D%AE%E5%BA%93/2013/02/21/java-e4-b8-ad-e4-bd-bf-e7-94-a8p6spy-e6-89-93-e5-8d-b0sql.html" data-flip="title">java中使用P6Spy 打印sql</a></p> </article> <h2 class="sr-only">Pagination</h2> <nav class="pagination heading" role="navigation"> <ul> <li class="pagination-item older" > <a rel="next" href="/page-8/">Older</a> </li> <li class="pagination-item newer" > <a rel="prev" href="/page-6/">Newer</a> </li> </ul> </nav> <footer> <hr/> <p>© 2011 - 2017. All rights reserved.</p> <p> <code>Powered by <a href="https://qwtel.com/hydejack/">Hydejack</a> v<span id="_version">6.6.1</span></code> </p> </footer> </main> </div> <div id="_yDrawer"> <div id="_sidebar" class="sidebar"> <div class="sidebar-bg" style="background-color:#4f86aa;background-image:url()"></div> <header class="sidebar-sticky" role="banner"> <div class="sidebar-about"> <img src="https://avatars0.githubusercontent.com/u/4122902?v=4&s=460" class="me" /> </div> <div class="sidebar-about"> <h1><a id="_title" href="/">Ka's Blog</a></h1> <p>Ka’s blog description…</p> </div> <nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span> <ul> <li> <a class="sidebar-nav-item" href="/categories.html">Categories</a> </li> <li> <a class="sidebar-nav-item" href="/archive.html">Archive</a> </li> <li> <a class="sidebar-nav-item" href="/tags.html">Tags</a> </li> <li> <a class="sidebar-nav-item" href="/about.html">About</a> </li> </ul> </nav> <div class="sidebar-social"> <span class="sr-only">Social:</span> <ul> <li> <a href="https://twitter.com/imhazige" title="Twitter"> <span class="icon-twitter"></span> <span class="sr-only">Twitter</span> </a> </li> <li> <a href="https://github.com/imhazige" title="GitHub"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a> </li> <li> <a href="mailto:imhazige@gmail.com" title="Email"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a> </li> <li> <a href="https://imhazige.github.io/myblog/feed.xml" title="RSS"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a> </li> </ul> </div> </header> </div> </div> </div> <!--[if gt IE 9]><!----> <script>loadJSDeferred('/assets/js/hydejack.js?v=6.6.1');</script> <!--<![endif]--> </body>
</html>
