<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v6.6.1 <https://qwtel.com/hydejack/>
--><head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="format-detection" content="telephone=no"> <meta http-equiv="x-ua-compatible" content="ie=edge"> <title>Ka's Blog &middot; Ka's Blog</title> <meta name="description" content="Ka’s blog description… "> <link rel="canonical" href="http://localhost:4000/page-51/"> <link rel="alternate" type="application/atom+xml" title="Ka's Blog Feed" href="http://localhost:4000/feed.xml"> <link rel="apple-touch-icon" href="/apple-touch-icon.png"> <!-- Place favicon.ico in the root directory --> <link rel="stylesheet" href="/assets/style.css"> <link id="_katexJS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.js"> <link id="_katexCSS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css"> <!--[if gt IE 8]><!----> <script> WebFontConfig = { google: { families: 'Roboto+Slab:700|Noto+Sans:400,400i,700,700i'.split('|') }, custom: { families: ['icomoon'], urls: ['/assets/icomoon/style.css'] } }; </script> <!--<![endif]--> <script> !function(n,e){function t(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function o(n,e){n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,n))}}n._loaded=!1,n.loadJSDeferred=function(a,d){function r(){n._loaded=!0;var r=e.createElement("script");r.src=a,d&&(("onload"in r?t:o)(r,d),r.onload||t(r,d));var l=e.getElementsByTagName("script")[0];l.parentNode.insertBefore(r,l)}n._loaded?r():n.addEventListener?n.addEventListener("load",r,!1):n.attachEvent?n.attachEvent("onload",r):n.onload=r}}(window,document); !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); window.disablePushState = false; window.disableDrawer = false; </script> <!--[if lt IE 9]> <script src="/assets/bower_components/html5shiv/dist/html5shiv.min.js"></script> <![endif]--> <!--[if gt IE 8]><!----> <style> article, aside, dialog, figcaption, figure, footer, header, hgroup, main, nav, section { display: block; } mark { background: #FF0; color: #000; } * { box-sizing: border-box; } html, body { margin: 0; padding: 0; } html { font-size: 16px; line-height: 1.75; } body { color: #333; background-color: #fff; overflow-y: scroll; } a { text-decoration: none; } .lead { margin-left: -1rem; margin-right: -1rem; } img, .img { display: block; max-width: 100%; margin-bottom: 1rem; border: none; } img.lead, .img.lead { max-width: calc(100% + 2rem); width: calc(100% + 2rem); } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-weight: bold; text-rendering: optimizeLegibility; } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 { margin: 3rem 0 1rem; line-height: 1.6; } h1, .h1 { font-size: 2rem; line-height: 1.25; } h2, .h2 { font-size: 1.5rem; } h3, .h3 { font-size: 1.17em; } p { margin-top: 0; margin-bottom: 1rem; } p.lead { font-size: 1.25rem; font-weight: 300; padding: 0 1rem; } ul, ol, dl { margin-top: 0; margin-bottom: 1rem; } ul, ol { padding-left: 1.25rem; } hr { position: relative; margin: 1.5rem 0; border: 0; border-top: 1px solid #eee; } .hr { padding-bottom: .5rem; border-bottom: 1px solid #eee; margin-bottom: 1.5rem; } h4, h5, h6, .h4, .h5, .h6 { margin-bottom: 0.5rem; font-size: 1rem; } table { margin-bottom: 1rem; width: 100%; width: calc(100% + 2rem); margin-left: -1rem; border: 1px solid #e5e5e5; border-collapse: collapse; border-spacing: 0; } td, th { padding: .25rem .5rem; border: 1px solid #e5e5e5; } td:first-child, th:first-child { padding-left: 1rem; } td:last-child, th:last-child { padding-right: 1rem; } thead + tbody, tbody + tbody, tfoot { border-top: 3px double #e5e5e5; } tbody tr:nth-child(odd) td, tbody tr:nth-child(odd) th { background-color: #f9f9f9; } footer { margin-bottom: 2rem; } .page, .post { margin-bottom: 3em; } .page li + li, .post li + li { margin-top: .25rem; } .page > header, .post > header { margin-bottom: 2rem; } .page-title, .post-title { margin-top: 0; } .post-date { display: block; margin-top: -0.5rem; margin-bottom: 1rem; color: #9a9a9a; } .related-posts { padding-left: 0; list-style: none; } .related-posts > li, .related-posts > li + li { margin-top: 1rem; } .related-posts > li > small, .related-posts > li + li > small { font-size: 75%; color: #9a9a9a; } .message { margin-bottom: 1rem; padding: 1rem; color: #787878; background-color: #f9f9f9; margin-left: -1rem; margin-right: -1rem; } /* * Global resets * * Update the foundational and global aspects of the page. */ body, main { /* Prevent side-scrolling on mobile */ position: relative; overflow-x: hidden; } @media screen { body::before { content: ''; width: .5rem; background: #e5e5e5; position: absolute; left: 0; top: 0; bottom: 0; } } @media screen and (min-width: 40em) { html { font-size: 17px; } } @media screen and (min-width: 54em) { html { font-size: 16px; } } @media screen and (min-width: 72em) { html { font-size: 17px; } } @media screen and (min-width: 125em) { html { font-size: 18px; } } .sr-only { display: none; } .clearfix, .sidebar-social::after, .clearafter::after { content: ""; display: table; clear: both; } a, .a { position: relative; padding-bottom: .15rem; border-bottom: 1px solid; } .img { overflow: hidden; background-color: #f9f9f9; } .img > img { margin: 0; width: 100%; height: 100%; } .sixteen-nine { position: relative; } .sixteen-nine::before { display: block; content: ""; width: 100%; padding-top: 56.25%; } .sixteen-nine > * { position: absolute; top: 0; left: 0; right: 0; bottom: 0; } h1 + hr, h2 + hr, h3 + hr, h4 + hr, h5 + hr, h6 + hr { margin-top: 0; } .fade-in { animation-duration: 500ms; animation-name: fade-in; animation-fill-mode: forwards; } @keyframes fade-in { from { transform: translateY(-2rem); opacity: 0; } 50% { transform: translateY(-2rem); opacity: 0; } to { transform: translateY(0); opacity: 1; } } .mb6 { margin-bottom: 6rem; } .sidebar { color: rgba(255, 255, 255, 0.75); text-align: left; /* Sidebar links */ } .sidebar::before { /* make sidebar slightly darker to increase text readability (when using a background image) */ content: ""; position: absolute; z-index: 2; top: 0; left: 0; bottom: 0; right: 0; background: linear-gradient(to bottom, rgba(32, 32, 32, 0) 0%, rgba(32, 32, 32, 0.5) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */ } .sidebar a { color: #fff; border-bottom-color: rgba(255, 255, 255, 0.2); } #_yDrawer { position: relative; padding: 1rem 0; } @media screen { #_yDrawer { padding: 2rem 1rem; min-height: 640px; min-height: 100vh; } } @media screen and (min-width: 54em) { #_yDrawer { position: fixed; top: 0; left: 0; bottom: 0; width: 18rem; margin-left: 0; } } @media screen and (min-width: 97.5em) { #_yDrawer { width: calc(50% - 28rem); } } @media screen { #_yDrawer.loaded { min-height: 0; padding: 0; } } .sidebar-bg { position: absolute; top: 0; right: 0; bottom: 0; left: 0; background: #202020 center / cover; } .sidebar-sticky { position: relative; z-index: 3; } @media screen { .sidebar-sticky { position: absolute; right: 2rem; bottom: 1rem; left: auto; max-width: 14rem; } } @media print { .sidebar-sticky { padding: 0 2rem; } } /* About section */ .sidebar-about > h1 { color: #fff; font-size: 2rem; } .sidebar-nav > ul { list-style: none; padding-left: 0; margin-bottom: .5rem; } a.sidebar-nav-item { font-weight: bold; display: block; line-height: 1.75; padding: .25rem 0; border-bottom: 1px solid rgba(255, 255, 255, 0.2); } @media screen { .y-drawer-scrim { z-index: 2; } .y-drawer-content { width: 18rem; left: -17.5rem; z-index: 3; } } @media screen and (min-width: 97.5em) { .y-drawer-content { width: calc(50% - 28rem); } } .sidebar-social { margin-bottom: .5rem; } .sidebar-social > ul { list-style: none; padding-left: 0; margin: 0 -.25rem; } .sidebar-social > ul > li { float: left; margin: 0 .25rem; } .sidebar-social > ul > li > a { display: inline-block; text-align: center; font-size: 1.6rem; line-height: 3rem; width: 3.1249rem; height: 4rem; padding: .5rem 0; } .sidebar-social > ul li + li { margin-top: 0; } .fixed-top { position: fixed; top: 0; left: 0; width: 100%; z-index: 1; } .navbar > .content { padding-top: 0; padding-bottom: 0; min-height: 0; height: 0; } .menu { display: inline-block; padding: 1.75rem 1.5rem; border-bottom: none; margin-left: -1.5rem; color: #9a9a9a !important; } .menu::after { content: "\2630"; } @media screen and (min-width: 54em) { .menu { padding: 1.25rem 1.5rem; position: absolute; left: -9999px; } .menu:focus { position: static; } } .animation-main { pointer-events: none; } .loading { display: none; } @media print { .menu { display: none; } } .animation-main { opacity: 0; will-change: opacity; } .loading { position: absolute; top: 0; right: 0; padding: 5.25rem 4.5rem; transform-origin: top right; transform: scale(0.33); } .content { position: relative; margin-left: auto; margin-right: auto; padding: 5rem 1rem 12rem; } @media screen { .content { max-width: 38rem; padding-left: 1.5rem; min-height: 100vh; } } @media screen and (min-width: 54em) { .content { max-width: 42rem; padding: 4rem 1rem 12rem; margin-left: 22rem; margin-right: 4rem; } } @media screen and (min-width: 72em) { .content { margin-left: 22rem; margin-right: 4rem; } } @media screen and (min-width: 92em) { .content { max-width: 48rem; } } @media screen and (min-width: 97.5em) { .content { margin: auto; } } .me { float: right; width: 6.5rem; height: 6.5rem; margin-left: 1rem; margin-bottom: .5rem; border-radius: 100%; position: relative; } @media screen and (min-width: 40em) { .me { width: 7rem; height: 7rem; } } @media screen and (min-width: 54em) { .me { width: 6.5rem; height: 6.5rem; } } @media screen and (min-width: 60em) { .me { width: 7rem; height: 7rem; } } main > footer { position: absolute; bottom: 0; left: 0; right: 0; padding: 0 1rem; color: #9a9a9a; font-size: smaller; text-align: center; } main > footer > p { margin-bottom: 0; } /* .card, .pagination-item { border-radius: 0!important; } */ /* @media screen { .sidebar-sticky { left: 2rem; max-width: none; } } */ html { font-family: Helvetica, Arial, sans-serif; } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: Helvetica, Arial, sans-serif; } </style> <link id="_stylePreload" rel="preload" as="style" href="/assets/css/hydejack.css?v=6.6.1"> <script>document.getElementById('_stylePreload').onload=function(){this.rel='stylesheet'}</script> <!-- NOTE: These styles interact with JavsScript, so they MUST NOT be changed --> <style id="_pageStyle"> .content a { color: #4f86aa; border-color: rgba(79, 134, 170, 0.2); } .content a:hover { border-color: #4f86aa; } :focus { outline-color: #4f86aa; } ::selection { color: #fff; background: #4f86aa; } ::-moz-selection { color: #fff; background: #4f86aa; } </style> <noscript> <link rel="stylesheet" href="/assets/css/hydejack.css?v=6.6.1"> <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|Noto+Sans:400,400i,700,700i"> <style> html { font-family: 'Noto Sans', Helvetica, Arial, sans-serif } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: 'Roboto Slab', Helvetica, Arial, sans-serif } </style> <link rel="stylesheet" href="/assets/icomoon/style.css"> </noscript> <!--<![endif]--> <!--[if gt IE 8]><!----> <script async src="/assets/bower_components/webfontloader/webfontloader.js"></script> <!--<![endif]--> </head> <body> <div class="navbar fixed-top"> <div class="content"> <span class="sr-only">Jump to:</span> <a id="_menu" class="menu no-hover" href="#_title"> <span class="sr-only">Menu</span> </a> </div> </div> <div id="_yPushState"> <div class="fade-in"> <main id="_main" class="content" role="main" data-color="#4f86aa" data-image=""> <article id="post-java/2011/06/09/%e7%bc%96%e7%a0%81%e4%b8%8e%e6%8e%a7%e5%88%b6%e5%8f%b0" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/2011/06/09/e7-bc-96-e7-a0-81-e4-b8-8e-e6-8e-a7-e5-88-b6-e5-8f-b0.html" data-flip="title"> 编码与控制台 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T21:52:51+08:00">09 Jun 2011</time> in <span>Java</span> on <span>Java</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <div>public void testReadPackageResourceToString()</div> <div>{</div> <p> <div>try</div> <div>{</div> <blockquote class="webkit-indent-blockquote"><p>String s1 = FileUtils.readPackageResourceToString(&quot;co/common/util/iso8859.html&quot;,null,&quot;iso-8859-1&quot;); <div>String s2 = FileUtils.readPackageResourceToString(&quot;co/common/util/utf8.html&quot;,null,&quot;utf-8&quot;);</div> <div>String s3 = FileUtils.readPackageResourceToString(&quot;co/common/util/gbk.html&quot;,null,&quot;gbk&quot;);</div> <div>// you should change the console's encoding to utf-8</div> <div>// System.out.println(new String(s1.getBytes(&quot;utf-8&quot;)));</div> <div>// System.out.println(new String(s2.getBytes(&quot;utf-8&quot;)));</div> <div>// System.out.println(new String(s3.getBytes(&quot;utf-8&quot;)));</div> <div>// </div> <div>byte[] cs = s2.getBytes();//错的</div> <div>byte[] cs1 = new String(s2.getBytes(&quot;utf-8&quot;)).getBytes();//对的</div> <div>byte[] cs2 = new String(s2.getBytes(&quot;utf-8&quot;),&quot;utf-8&quot;).getBytes();//错的</div> <div>byte[] cs3 = s2.getBytes(&quot;utf-8&quot;);//对的</div> <div>byte[] cs4 = new String(s2.getBytes(&quot;utf-8&quot;),&quot;cp1252&quot;).getBytes(); //对的,与二相同</div> <div>System.out.println(&quot;====s2.getBytes()=======&quot;);</div> <div>for (int i = 0 ; i &lt; cs.length ; i++)</div> <div>{</div> <div>System.out.println(cs[i]);</div> <div>}</div> <div>System.out.println(&quot;====new String(s2.getBytes(\&quot;utf-8\&quot;),\&quot;utf-8\&quot;).getBytes();=======&quot;);</div> <div>for (int i = 0 ; i &lt; cs1.length ; i++)</div> <div>{</div> <div>System.out.println(cs1[i]);</div> <div>}</div> <div>System.out.println(&quot;====new String(s2.getBytes(\&quot;utf-8\&quot;),\&quot;utf-8\&quot;).getBytes()=======&quot;);</div> <div>for (int i = 0 ; i &lt; cs2.length ; i++)</div> <div>{</div> <div>System.out.println(cs2[i]);</div> <div>}</div> <div>System.out.println(&quot;====s2.getBytes(\&quot;utf-8\&quot;);=======&quot;);</div> <div>for (int i = 0 ; i &lt; cs3.length ; i++)</div> <div>{</div> <div>System.out.println(cs3[i]);</div> <div>}</div> <div>System.out.println(&quot;====new String(s2.getBytes(\&quot;utf-8\&quot;),\&quot;cp1252\&quot;).getBytes()=======&quot;);</div> <div>for (int i = 0 ; i &lt; cs4.length ; i++)</div> <div>{</div> <div>System.out.println(cs4[i]);</div> <div>}</div> <div>// System.out.println(s2);</div> <div>// System.out.println(new String(s2.getBytes(&quot;utf-8&quot;),&quot;utf-8&quot;));</div> <div>// System.out.println(new String(s2.getBytes()));</div> <div>// System.out.println(new String(s2.getBytes(),&quot;utf-8&quot;));</div> <div>}</div> <div>catch (IOException e)</div> <div>{</div> <div>e.printStackTrace();</div> <div>fail();</div> <div>}</div> </blockquote> <p> <div>}</div> <p> String.getBytes(encoding) 是将字符串编码到指定格式 <br /> <div>new String </div> <h1 class="title_txt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Charset 和 Encoding 的区别是什么？</h1> <div class="blogstory"> <p>在绝大多数情况下，包括某些专业文章中，字符集和编码都统称为编码，这是因为一个字符集往往对应一种编码。但是在程序中，我们来不得半点马虎，我们 应该清楚地知道字符集和编码有什么区别。以 ASP.NET 为例，Response.Charset 和 Response.Output.Encoding（只读）中的 Charset 和 Encoding 有什么区别呢？</p> <p>Charset 是字符集，Encoding 是编码。</p> <ul> <li><span class="key">字符集即字符的集合，规定了在这些集合里面有哪些字符，每一个字符都有一个编号（一个整数），但这只是编号 不是编码。</span></li> <li><span class="key"><span class="key">编码就规定了一个编号如何与二进制交互。</span></span></li> </ul> <p>我们大多数人最先接触到的字符集是 1963 年的 ASCII，其中的每一个字符只需要用一个字节来表示就可以了。但世界上有许多种语言，像亚洲文字，比如中文，常用汉字就几千个，仅用一个字节来表示显然 是不够的，假如我们使用两个字节。</p> <p>那么问题就来了，为什么我们要把两个字节看成是一个汉字的编号呢？为什么我们不把两个字节看成 ASCII 字符集的两个编号呢？为了解决此问题，就得使用编码来标识了。</p> <p>还有一个问题，编号（整数）1234 在字符集 A 中代表“千”，1234 在字符集 B 中代表“一”，那么 1234 究竟代表什么字呢？这就得明确字符集了。</p> <p>浏览器可以自动识别使用哪个字符集，一般说来它们使用 HTTP 头部的 Content-Type 标明的字符集，如果没有向 HTTP 头部发送该信息，一般<span class="caution">参考使用</span> HTML 的 head 标签中的 &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=gb2312&quot; /&gt;，为什么是参考使用呢？因为现在浏览器都比较聪明，如果发现这里用错了，一般会给予纠正。</p> <p>我们做网页时，如果指定的 Charset 是 GB2312，那么就不应该在网页中出现繁体字，因为 GB2312 标准只有几千个简体的中文字。如果我们的网页编码是 UTF-8，我们就不要指定字符集是 GB2312，因为虽然 UTF-8 编码对应的 UTF-8 字符集包含了 GB2312 的字符，但同一个字符在两个字符集中的编号不一样。</p> <p><span class="itemTitle">对于我们中文简体网页，一般来说有两种搭配：</span></p> <ul> <li>一种是字符集是 GB2312，编码使用 ANSI。占用磁盘空间最少，网络传输效率最高。</li> <li>一种是字符集是 UTF-8，编码使用 UTF-8。虽然占用磁盘空间大，传输效率略低，但因为兼容面广，在应用 Ajax 以及包含多种语言文字时使用方便。鉴于此原因，现在许多网页开发工具都默认使用 UTF-8 来保存网页，比如 <a href="http://www.cftea.com/c/2007/06/AFWDWDXU6REXP6G0.asp" target="_blank">Visual Web Developer</a>。</li> </ul></div> <div>在web中</div> <div>response.setContentType(&quot;text/javascript; charset=utf-8&quot;);</div> <div>response.setCharacterEncoding(&quot;utf-8&quot;);</div> <div>Writer out = response.getWriter();<font color="#6aa84f"><b>//要注意这一句不要放在设置编码的语句之前，否则不起作用。</b></font></div> <p class="read-more">Continue reading <a class="heading" href="/java/2011/06/09/e7-bc-96-e7-a0-81-e4-b8-8e-e6-8e-a7-e5-88-b6-e5-8f-b0.html" data-flip="title">编码与控制台</a></p> </article> <article id="post-web%E5%89%8D%E7%AB%AF/2011/06/09/javascript-call%e5%92%8capply%e6%9c%80%e5%9f%ba%e6%9c%ac%e7%9a%84%e4%bd%9c%e7%94%a8" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/2011/06/09/javascript-call-e5-92-8capply-e6-9c-80-e5-9f-ba-e6-9c-ac-e7-9a-84-e4-bd-9c-e7-94-a8.html" data-flip="title"> javascript call和apply最基本的作用 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T21:52:11+08:00">09 Jun 2011</time> in <span>Web前端</span> on <span>Javascript web 前端</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <div style="background-color: #45818e"> <div>&lt;html&gt;</div> <div>&lt;head&gt;</div> <div>&lt;script language=&quot;javascript&quot;&gt;&#160; </div> <p> <div>function Animal(){&#160; </div> <div>&#160;&#160; this.name = &quot;a&quot;;&#160; </div> <div>&#160;&#160; this.showName = function(){&#160; </div> <div>&#160;&#160;&#160;&#160;&#160;&#160; alert(this.name);&#160; </div> <div>&#160;&#160; }&#160; </div> <div>}&#160; </div> <div>function Cat(){</div> <div>this.name = &quot;c&quot;;</div> <div>Animal.call(this);</div> <div>}&#160; </div> <div>Cat.prototype = new Animal();</div> <div>var cat = new Cat();&#160; </div> <div>cat.showName();&#160;&#160;&#160; <b>//但是alert的是a而不是c,还不是完全的对象继承</b></div> <div>alert(cat instanceof Animal);&#160;&#160; <b>//True</b></div> <p> <div>&#160; </div> <div>&lt;/script&gt;</div> <div>&lt;/head&gt;</div> <div>&lt;body&gt;&lt;/body&gt;</div> <div>&lt;/html&gt;</div> <p> <div>&lt;html&gt;</div> <div>&lt;head&gt;</div> <div>&lt;script language=&quot;javascript&quot;&gt;&#160; </div> <p> <div>function Animal(){&#160; </div> <div>&#160;&#160; this.name = &quot;a&quot;;&#160; </div> <div>&#160;&#160; this.showName = function(){&#160; </div> <div>&#160;&#160;&#160;&#160;&#160;&#160; alert(this.name);&#160; </div> <div>&#160;&#160; }&#160; </div> <div>}&#160; </div> <div>function Cat(){</div> <div>Animal.call(this);<b>//这一句应该在开头，因为这个操作会执行将Animal的属性赋值给Cat的操作,它会覆盖这一句之前的属性</b></div> <div>this.name = &quot;c&quot;;</div> <div>}&#160; </div> <div>Cat.prototype = new Animal();</div> <div>var cat = new Cat();&#160; </div> <div>cat.showName();<b>//alert的是c</b></div> <div>alert(cat instanceof Animal);<b>//True</b></div> <p> <div>&#160; </div> <div>&lt;/script&gt;</div> <div>&lt;/head&gt;</div> <div>&lt;body&gt;&lt;/body&gt;</div> <div>&lt;/html&gt;</div> <p><strong>apply and call</strong> <br />&#160;&#160;&#160; 它们的作用都是将函数绑定到另外一个对象上去运行，两者仅在定义参数方式有所区别： <br />&#160;&#160;&#160;&#160; apply(thisArg,argArray); <br />&#160;&#160;&#160;&#160; call(thisArg[,arg1,arg2…] ]);</p> <p><font color="#ffff00"><b>知道这些也就差不多了</b></font> <br /><b>======================================================================== </p> <p></b> <div><b>详解 http://www.javaeye.com/topic/155109</b></div> <p> <p>领悟 JavaScript 中的面向对象</p> <p>&#160;</p> <p><font color="#ff6600">注：读完本文后请务必接着看完所有回复！</font> </p> <p>JavaScript 是面向对象的。但是不少人对这一点理解得并不全面。 </p> <p>在 JavaScript 中，对象分为两种。一种可以称为“普通对象”，就是我们所普遍理解的那些：数字、日期、用户自定义的对象（如：{}）等等。 </p> <p>还有一种，称 为“方法对象”，就是我们通常定义的 function。你可能觉得奇怪：方法就是方法，怎么成了对象了？但是在 JavaScript 中，方法的确是被当成对象来处理的。下面是一个简单的例子： </p> <div class="dp-highlighter"> <div class="bar"> <div class="tools">Js代码 </div> </p></div> <ol class="dp-c"> <li><span class="keyword">function</span> func() {alert(<span class="string">'Hello!'</span>);}&#160; </li> <li>alert(func.toString());&#160; </li> </ol></div> <p> <font face="Courier New">function func() {alert('Hello!');} alert(func.toString());</font> <br />在这个例子中，func 虽然是作为一个方法定义的，但它自身却包含一个 toString 方法，说明 func 在这里是被当成一个对象来处理的。更准确的说，func 是一个“方法对象”。下面是例子的继续： </p> <div class="dp-highlighter"> <div class="bar"> <div class="tools">Js代码 </div> </p></div> <ol class="dp-c"> <li>func.name = “I am func.”;&#160; </li> <li>alert(func.name);&#160; </li> </ol></div> <p> <font face="Courier New">func.name = “I am func.”; alert(func.name);</font> <br />我们可以任意的为 func 设置属性，这更加证明了 func 就是一个对象。那么方法对象和普通对象的区别在哪里呢？首先方法对象当然是可以执行的，在它后面加上一对括号，就是执行这个方法对象了。 </p> <div class="dp-highlighter"> <div class="bar"> <div class="tools">Js代码 </div> </p></div> <ol class="dp-c"> <li>func();&#160; </li> </ol></div> <p> <font face="Courier New">func();</font> <br />所以，方法对象具有二重性。一方面它可以被执行，另一方面它完全可以被当成一个普通对象来使用。这意味着什么呢？这意味着方法对象是可以完全独 立于其他对象存在的。这一点我们可以同 Java 比较一下。在 Java 中，方法必须在某一个类中定义，而不能单独存在。而 JavaScript 中就不需要。 </p> <p>方法对象独立于其他方法，就意味着它能够被任意的引用和传递。下面是一个例子： </p> <div class="dp-highlighter"> <div class="bar"> <div class="tools">Js代码 </div> </p></div> <ol class="dp-c"> <li><span class="keyword">function</span> invoke(f) {&#160; </li> <li>&#160;&#160;&#160; f();&#160; </li> <li>}&#160; </li> <li>invoke(func);&#160; </li> </ol></div> <p> <font face="Courier New">function invoke(f) { f(); } invoke(func);</font> <br />将一个方法对象 func 传递给另一个方法对象 invoke，让后者在适当的时候执行 func。这就是所谓的“回调”了。另外，方法对象的这种特殊性，也使得 this 关键字不容易把握。这方面相关文章不少，这里不赘述了。 </p> <p>除 了可以被执行以外，方法对象还有一个特殊的功用，就是它可以通过 new 关键字来创建普通对象。 </p> <p>话说每一个方法对象被创建时，都会自动 的拥有一个叫 prototype 的属性。这个属性并无什么特别之处，它和其他的属性一样可以访问，可以赋值。不过当我们用 new 关键字来创建一个对象的时候，prototype 就起作用了：它的值（也是一个对象）所包含的所有属性，都会被复制到新创建的那个对象上去。下面是一个例子： </p> <div class="dp-highlighter"> <div class="bar"> <div class="tools">Js代码 </div> </p></div> <ol class="dp-c"> <li>func.prototype.name=”prototype of func”;&#160; </li> <li><span class="keyword">var</span> f = <span class="keyword">new</span> func();&#160; </li> <li>alert(f.name);&#160; </li> </ol></div> <p> <font face="Courier New">func.prototype.name=”prototype of func”; var f = new func(); alert(f.name);</font> <br />执行的过程中会弹出两个对话框，后一个对话框表示 f 这个新建的对象从 func.prototype 那里拷贝了 name 属性。而前一个对话框则表示 func 被作为方法执行了一遍。你可能会问了，为什么这个时候要还把 func 执行一遍呢？其实这个时候执行 func，就是起“构造函数”的作用。为了形象的说明，我们重新来一遍： </p> <div class="dp-highlighter"> <div class="bar"> <div class="tools">Js代码 </div> </p></div> <ol class="dp-c"> <li><span class="keyword">function</span> func() {&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">this</span>.name=”name has been changed.”&#160; </li> <li>}&#160; </li> <li>func.prototype.name=”prototype of func”;&#160; </li> <li><span class="keyword">var</span> f = <span class="keyword">new</span> func();&#160; </li> <li>alert(f.name);&#160; </li> </ol></div> <p> <font face="Courier New">function func() { this.name=”name has been changed.” } func.prototype.name=”prototype of func”; var f = new func(); alert(f.name);</font> <br />你就会发现 f 的 name 属性不再是&quot;prototype of func&quot;，而是被替换成了&quot;name has been changed&quot;。这就是 func 这个对象方法所起到的“构造函数”的作用。所以，在 JavaScript 中，用 new 关键字创建对象是执行了下面三个步骤的： <br /> <ol> <li>创建一个新的普通对象； </li> <li>将方 法对象的 prototype 属性的所有属性复制到新的普通对象中去。 </li> <li>以新的普通对象作为上下文来执行方法对象。 </li> </ol> <p>对 于“new func()”这样的语句，可以描述为“从 func 创建一个新对象”。总之，prototype 这个属性的唯一特殊之处，就是在创建新对象的时候了。</p> <p>那么我们就可以利用这一点。比如有两个方法对象 A 和 B，既然从 A 创建的新对象包含了所有 A.prototype 的属性，那么我将它赋给 B.prototype，那么从 B 创建的新对象不也有同样的属性了？写成代码就是这样：</p> <p>&#160;</p> <div class="dp-highlighter"> <div class="bar"> <div class="tools">Js代码 </div> </p></div> <ol class="dp-c"> <li>A.prototype.hello = <span class="keyword">function</span>(){alert(<span class="string">'Hello!'</span>);}&#160; </li> <li>B.prototype = <span class="keyword">new</span> A();&#160; </li> <li><span class="keyword">new</span> B().hello();&#160; </li> </ol></div> <p> <font face="Courier New">A.prototype.hello = function(){alert('Hello!');} B.prototype = new A(); new B().hello();</font> <br />这就是 JavaScript 的所谓“继承”了，其实质就是属性的拷贝，这里利用了 prototype 来实现。如果不用 prototype，那就用循环了，效果是一样的。所谓“多重继承”，自然就是到处拷贝了。 </p> <p>JavaScript 中面向对象的原理，就是上面这些了。自始至终我都没提到“类”的概念，因为 JavaScript 本来就没有“类”这个东西。面向对象可以没有类吗？当然可以。先有类，然后再有对象，这本来就不合理，因为类本来是从对象中归纳出来的，先有对象再有类， 这才合理。像下面这样的： </p> <div class="dp-highlighter"> <div class="bar"> <div class="tools">Js代码 </div> </p></div> <ol class="dp-c"> <li><span class="keyword">var</span> o = {}; <span class="comment">// 我 发现了一个东西。</span>&#160; </li> <li>o.eat = <span class="keyword">function</span>(){<span class="keyword">return</span>&#160;<span class="string">&quot;I am eating.&quot;</span>}&#160; <span class="comment">// 我发现它会吃；</span>&#160; </li> <li>o.sleep = <span class="keyword">function</span>(){<span class="keyword">return</span>&#160;<span class="string">&quot;ZZZzzz...&quot;</span>}&#160; <span class="comment">// 我 发现它会睡；</span>&#160; </li> <li>o.talk = <span class="keyword">function</span>(){<span class="keyword">return</span>&#160;<span class="string">&quot;Hi!&quot;</span>} <span class="comment">// 我发现它 会说话；</span>&#160; </li> <li>o.think = <span class="keyword">function</span>(){<span class="keyword">return</span>&#160;<span class="string">&quot;Hmmm...&quot;</span>} <span class="comment">// 我 发现它还会思考。</span>&#160; </li> <li>&#160; </li> <li><span class="keyword">var</span> Human = <span class="keyword">new</span> Function(); <span class="comment">// 我决定给它起名叫“人”。</span>&#160; </li> <li>Human.prototype = o; <span class="comment">// 这个东西就代表了所有“人”的概念。</span>&#160; </li> <li>&#160; </li> <li><span class="keyword">var</span> h = <span class="keyword">new</span> Human(); <span class="comment">// 当我发现其他同它一样的东西，</span>&#160; </li> <li>alert(h.talk()) <span class="comment">// 我就知道它也是“人”了！</span>&#160; </li> </ol></div> <p> <font face="Courier New">var o = {}; // 我发现了一个东西。 o.eat = function(){return &quot;I am eating.&quot;} // 我发现它会吃； o.sleep = function(){return &quot;ZZZzzz...&quot;} // 我发现它会睡； o.talk = function(){return &quot;Hi!&quot;} // 我发现它会说话； o.think = function(){return &quot;Hmmm...&quot;} // 我发现它还会思考。 var Human = new Function(); // 我决定给它起名叫“人”。 Human.prototype = o; // 这个东西就代表了所有“人”的概念。 var h = new Human(); // 当我发现其他同它一样的东西， alert(h.talk()) // 我就知道它也是“人”了！</font> <p>&#160;</p> <p>================================================================================= <div>/**</div> <div>作者认为第三种理解较正确，见最后</div> <div>**/</div> <div class="blog_title"> <h3>j<a href="http://yangsp1.javaeye.com/blog/499264">avaScript prototype整理（网上的三种理解）</a></h3> </p></div> <div class="blog_content">prototype属性，只有function对象中才具有的显式属性； </p> <p>网上三种理解： <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 1：通过构造函数创建的普通对象，通过其constructor属性引用它的构造函数对象，从而间接引用（拥有）了构造对象中的prototype对象； </p> <p>如图：<img class="magplus" title="点击查看原始大小图片" src="/assets/bcc49472-57dd-34c6-8d3a-f7667bcbe080.jpg" width="700" height="400" /> </p> <p>此观点的文章：&#160;&#160; 参看 jimichan的文章：<a href="http://jimichan.javaeye.com/blog/119815" target="_blank">详解 javascript类继承机制的原理 </a>中的： <font color="#00ff00">“（说成间接的是因为每个object 都有一个 constructor 属性指向它的构造函数）。” <br />非常感谢在此问题上，作者对我的回信；如有冒犯，敬请原谅；</font> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 2：构造函数创建对象时，copy prototype中的属性和代码给所创建的对象。从而使创建的对象拥有了prototype中的所有功能和属性； </p> <p>如图：<img class="magplus" title="点击查看原始大小图片" src="/assets/ea864896-ea56-3498-9c7b-33b12af23899.jpg" width="700" height="572" /> </p> <p>此观点的文章：&#160;&#160; 参看 yiding_he的文章：<a href="http://www.javaeye.com/topic/155109" target="_blank">领悟 JavaScript 中的面向对象</a> 中的：&#160; <font color="#00ff00">“ 在 JavaScript 中，用 new 关键字创建对象是执行了下面三个步骤的： </p> <p>&#160;&#160; 1. 创建一个新的普通对象； <br />&#160;&#160; 2. 将方法对象的 prototype 属性的所有属性复制到新的普通对象中去。 <br />&#160;&#160; 3. 以新的普通对象作为上下文来执行方法对象。”</font> <br /><font color="#0000ff">此观点在回贴中被 xieye反对</font> </p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 3：构造函数在创建对象时，把构造函数中的prototype引用赋给创建的普通对象；也就是说由构造函数创建的对象，都有一个指针指向 prototype对象； </p> <p>如图：<img class="magplus" title="点击查看原始大小图片" src="/assets/b9f6b9fe-6f09-3179-aaee-d5876f10535d.jpg" width="700" height="581" /> </p> <p>此观点的文章：&#160;&#160; 参看 李站的文章：<a href="http://www.cnblogs.com/leadzen/archive/2008/02/25/1073404.html" target="_blank">悟透javascript</a>中的<font color="#00ff00">&quot; 我们已经知道，用 var anObject = new aFunction() 形式创建对象的过程实际上可以分为三步：第一步是建立一个新对象；第二步将该对象内置的原型对象设置为构造函数prototype引用的那个原型对象；第 三步就是将该对象作为this参数调用构造函数，完成成员设置等初始化工作。对象建立之后，对象上的任何访问和操作都只与对象自身及其原型链上的那串对象 有关，与构造函数再扯不上关系了&quot;&#160;&#160; 以及&#160; “语法甘露 中的：上面代码的最后一句证明，新创建的对象的constructor属性返回的是Object函数。其实新建的对象自己及其原型里没有 constructor属性，那返回的只是最顶层原型对象的构造函数，即Object。” <br /></font> </p> <p>综上所述：根据贴子：<a href="http://www.javaeye.com/topic/155109" target="_blank">领悟 JavaScript 中的面向对象</a> 中作者 afcn0的回贴<font color="#ffff00"> “其实还有补充,就是如果构造函数返回object类型,那new对象无效,prototype问题是楼主还不 太了解prototype继承方式,__proto__属性,以及isPrototypeOf方法所至 ” </font>的提示，查阅了文章：<a href="http://bbs.cnw.com.cn/archiver/tid-209757.html" target="_blank">javascript 中的继承</a> </p> <div class="dp-highlighter"> <div class="bar"> <div class="tools">Html 代码 </div> </p></div> <ol class="dp-xml"> <li>此文中提 到：<span class="attribute">jane</span> = <span class="attribute-value">new</span> Engineer(&quot;Doe, Jane&quot;, [&quot;navigator&quot;, &quot;javascript&quot;], &quot;belau&quot;);&#160; </li> <li>&#160; </li> <li>调用这句时，都发生了什么:&#160; </li> <li>&#160; </li> <li>1 当js看见 new操作符，它创建一个新的普通对象,并且设置它的__proto__ 属性为Engineer.prototype。&#160; </li> <li>&#160; </li> <li>2 new 操作符传递这个新的对象作为Engineer 构造器的this的值。&#160; </li> <li>&#160; </li> <li>其实最主要做的事就是上面的两件，剩下的都是很简单的函数调用.&#160; </li> </ol></div> <p>根据上文的提示作了简单测试： <br /> <div class="dp-highlighter"> <div class="bar"> <div class="tools">Javascript 代码 </div> </p></div> <ol class="dp-c"> <li><span class="keyword">function</span> person(name,b){&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">this</span>.name=name;&#160; </li> <li>}&#160; </li> <li>&#160; </li> <li>person.prototype.sayHello=<span class="keyword">function</span>(a){&#160; </li> <li>&#160;&#160;&#160; <span class="comment">//alert(&quot;hello,i am &quot;+this.name);</span>&#160; </li> <li>&#160;&#160;&#160; alert(<span class="keyword">this</span>==a);&#160; </li> <li>&#160;&#160;&#160; }&#160; </li> <li>&#160; </li> <li>&#160; </li> <li><span class="keyword">function</span> employee(name, salary)&#160; </li> <li>{&#160; </li> <li>&#160;&#160;&#160; person.call(<span class="keyword">this</span>, name);&#160;&#160;&#160; <span class="comment">//调用上层构造函数</span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">this</span>.salary = salary;&#160;&#160;&#160;&#160;&#160;&#160; <span class="comment">//扩展的成员</span>&#160; </li> <li>};&#160; </li> <li>&#160; </li> <li><span class="keyword">var</span> p=<span class="keyword">new</span> person(<span class="string">&quot;yangsp&quot;</span>,p);&#160; </li> <li><span class="comment">//p.sayHello(p);</span>&#160; </li> <li><span class="comment">//alert(p.constructor);</span>&#160; </li> <li>&#160; </li> <li><span class="comment">//下面两句验证了普通对象中确有_proto_属性，且引用的是prototype对象；（在ff下调试，ie下不 可）；</span>&#160; </li> <li>alert(p.__proto__==person);&#160; </li> <li>alert(p.__proto__==person.prototype))&#160; </li> <li>&#160; </li> <li><span class="comment">//alert(&quot;p有prototype属性吗? &quot;+p.prototype);&#160;&#160;&#160; //表明普通对象中没有 prototype属性;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span>&#160; </li> </ol></div> <p>总结： <div class="dp-highlighter"> <div class="bar"> <div class="tools">Html 代码 </div> </p></div> <ol class="dp-xml"> <li>比较赞同 第三种理解；&#160; </li> <li>&#160;&#160;&#160;&#160;&#160; 即：prototype是function对象中专有的属 性。&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; _proto_是普通对象的隐式属性，在new的时候，会指向 prototype所指的对象；&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 普通对象中的constructor属性指向构造 函数，因此一个用构造函数创建的对象可能有两种方式关联到prototype.但继承应该是根据_proto_关联到prototype属性；&#160; </li> </ol></div> <p>另外：<a href="http://interglacial.com/javascript_spec/a-4.html#a-4.3.3" target="_blank">ecma-262</a>中提到：every object created by that constructor has an implicit reference to the prototype (called the object's prototype) associated with its constructor 以及其图示；不敢肯定它的implicit reference间接还是隐式链接； </div> </p></div> <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/2011/06/09/javascript-call-e5-92-8capply-e6-9c-80-e5-9f-ba-e6-9c-ac-e7-9a-84-e4-bd-9c-e7-94-a8.html" data-flip="title">javascript call和apply最基本的作用</a></p> </article> <article id="post-web%E5%89%8D%E7%AB%AF/2011/06/09/%e6%a0%b7%e5%bc%8f%e8%a1%a8hack-%e5%8c%ba%e5%88%abie%e5%92%8c%e9%9d%9eie%e6%b5%8f%e8%a7%88%e5%99%a8" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/2011/06/09/e6-a0-b7-e5-bc-8f-e8-a1-a8hack-e5-8c-ba-e5-88-abie-e5-92-8c-e9-9d-9eie-e6-b5-8f-e8-a7-88-e5-99-a8.html" data-flip="title"> 样式表hack-区别IE和非IE浏览器 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T21:48:25+08:00">09 Jun 2011</time> in <span>Web前端</span> on <span>Web html css 前端</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p><font face="verdana,helvetica,arial"><font color="#303030"><b>只看第一个就差不多了:</b></font></font></p> <p><b> <br /></b></p> <p><font face="verdana,helvetica,arial"><font color="#303030"><b>1.区别IE和非IE浏览器</b> </font></font></p> <div style="background-color: #eeeeee"><b><font size="2"><font color="#800000">#tip </font><font color="#000000">{</font> <br /><font color="#ff0000">background</font><font color="#000000">:</font><font color="#0000ff">blue</font><font color="#000000">;</font>&#160;<font color="#008000">/*非IE</font><font color="#008000"> 背景藍色</font><font color="#008000">*/</font> <br /><font color="#ff0000">background</font><font color="#000000">:</font><font color="#0000ff">red \9</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">IE6、IE7、IE8背景紅色</font><font color="#008000">*/</font> <br /><font color="#000000">}</font> </font></b></div> <p> <b> <br />2.区别IE6,IE7,IE8,FF </b> <div><b>【区别符号】：「\9」、「*」、「_」 <br />【示例】： <br /></b> <div style="background-color: #eeeeee"><b><font size="2"><font color="#800000">#tip </font><font color="#000000">{</font> <br /><font color="#ff0000">background</font><font color="#000000">:</font><font color="#0000ff">blue</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">Firefox 背景变蓝色</font><font color="#008000">*/</font> <br /><font color="#ff0000">background</font><font color="#000000">:</font><font color="#0000ff">red \9</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">IE8 背景变红色</font><font color="#008000">*/</font> <br /><font color="#ff0000">*background</font><font color="#000000">:</font><font color="#0000ff">black</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">IE7 背景变黑色</font><font color="#008000">*/</font> <br /><font color="#ff0000">_background</font><font color="#000000">:</font><font color="#0000ff">orange</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">IE6 背景变橘色</font><font color="#008000">*/</font> <br /><font color="#000000">}</font> </font></b></div> <p> <b>【说明】：因为IE系列浏览器可读「\9」，而IE6和IE7可读「*」(米字号)，另外IE6可辨识「_」(底线)，因此可以依照顺序写下来，就会让浏 览器正确的读取到自己看得懂得CSS语法，所以就可以有效区分IE各版本和非IE浏览器(像是Firefox、Opera、Google Chrome、Safari等)。</b></div> <p> <b> <br />3.区别IE6、IE7、Firefox (方法 1) </b> <div><b>【区别符号】：「*」、「_」 <br />【示例】： <br /></b> <div style="background-color: #eeeeee"><b><font size="2"><font color="#800000">#tip </font><font color="#000000">{</font> <br /><font color="#ff0000">background</font><font color="#000000">:</font><font color="#0000ff">blue</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">Firefox背景变蓝色</font><font color="#008000">*/</font> <br /><font color="#ff0000">*background</font><font color="#000000">:</font><font color="#0000ff">black</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">IE7 背景变黑色</font><font color="#008000">*/</font> <br /><font color="#ff0000">_background</font><font color="#000000">:</font><font color="#0000ff">orange</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">IE6 背景变橘色</font><font color="#008000">*/</font> <br /><font color="#000000">}</font> </font></b></div> <p> <b>【说明】：IE7和IE6可读「*」(米字号)，IE6又可以读「_」(底线)，但是IE7却无法读取「_」，至于Firefox(非IE浏览器)则完全 无法辨识「*」和「_」，因此就可以透过这样的差异性来区分IE6、IE7、Firefox</b></div> <p> <b> <br />4.区别IE6、IE7、Firefox (方法 2) </b> <div><b>【区别符号】：「*」、「!important」 <br />【示例】： <br /></b> <div style="background-color: #eeeeee"><b><font size="2"><font color="#800000">#tip </font><font color="#000000">{</font> <br /><font color="#ff0000">background</font><font color="#000000">:</font><font color="#0000ff">blue</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">Firefox 背景变蓝色</font><font color="#008000">*/</font> <br /><font color="#ff0000">*background</font><font color="#000000">:</font><font color="#0000ff">green !important</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">IE7 背景变绿色</font><font color="#008000">*/</font> <br /><font color="#ff0000">*background</font><font color="#000000">:</font><font color="#0000ff">orange</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">IE6 背景变橘色</font><font color="#008000">*/</font> <br /><font color="#000000">}</font> </font></b></div> <p> <b>【说明】：IE7可以辨识「*」和「!important」，但是IE6只可以辨识「*」，却无法辨识「!important」，至于Firefox可以 读取「!important」但不能辨识「*」因此可以透过这样的差异来有效区隔IE6、IE7、Firefox。</b></div> <p> <b> <br />5.区别IE7、Firefox </b> <div><b>【区别符号】：「*」、「!important」 <br />【示例】： <br /></b> <div style="background-color: #eeeeee"><b><font size="2"><font color="#800000">#tip </font><font color="#000000">{</font> <br /><font color="#ff0000">background</font><font color="#000000">:</font><font color="#0000ff">blue</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">Firefox 背景变蓝色</font><font color="#008000">*/</font> <br /><font color="#ff0000">*background</font><font color="#000000">:</font><font color="#0000ff">green !important</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">IE7 背景变绿色</font><font color="#008000">*/</font> <br /><font color="#000000">}</font> </font></b></div> <p> <b>【说明】：因为Firefox可以辨识「!important」但却无法辨识「*」，而IE7则可以同时看懂「*」、「!important」，因此可以 两个辨识符号来区隔IE7和Firefox。</b></div> <p> <b> <br />6.区别IE6、IE7 (方法 1) </b> <div><b>【区别符号】：「*」、「_」 <br />【示例】： <br /></b> <div style="background-color: #eeeeee"><b><font size="2"><font color="#800000">#tip </font><font color="#000000">{</font> <br /><font color="#ff0000">*background</font><font color="#000000">:</font><font color="#0000ff">black</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">IE7 背景变黑色</font><font color="#008000">*/</font> <br /><font color="#ff0000">_background</font><font color="#000000">:</font><font color="#0000ff">orange</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">IE6 背景变橘色</font><font color="#008000">*/</font> <br /><font color="#000000">}</font> </font></b></div> <p> <b>【说明】：IE7和IE6都可以辨识「*」(米字号)，但IE6可以辨识「_」(底线)，IE7却无法辨识，透过IE7无法读取「_」的特性就能轻鬆区隔 IE6和IE7之间的差异。</b></div> <p> <b> <br />7.区别IE6、IE7 (方法 2) </b> <div><b>【区别符号】：「!important」 <br />【示例】： <br /></b> <div style="background-color: #eeeeee"><b><font size="2"><font color="#800000">#tip </font><font color="#000000">{</font> <br /><font color="#ff0000">background</font><font color="#000000">:</font><font color="#0000ff">black !important</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">IE7 背景变黑色</font><font color="#008000">*/</font> <br /><font color="#ff0000">background</font><font color="#000000">:</font><font color="#0000ff">orange</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">IE6 背景变橘色</font><font color="#008000">*/</font> <br /><font color="#000000">}</font> </font></b></div> <p> <b>【说明】：因为IE7可读取「!important;」但IE6却不行，而CSS的读取步骤是从上到下，因此IE6读取时因无法辨识 「!important」而直接跳到下一行读取CSS，所以背景色会呈现橘色。</b></div> <p> <b> <br />8.区别IE6、Firefox </b> <div><b>【区别符号】：「_」 <br />【示例】： <br /></b> <div style="background-color: #eeeeee"><b><font size="2"><font color="#800000">#tip </font><font color="#000000">{</font> <br /><font color="#ff0000">background</font><font color="#000000">:</font><font color="#0000ff">black</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">Firefox 背景变黑色</font><font color="#008000">*/</font> <br /><font color="#ff0000">_background</font><font color="#000000">:</font><font color="#0000ff">orange</font><font color="#000000">;</font>&#160;<font color="#008000">/*</font><font color="#008000">IE6 背景变橘色</font><font color="#008000">*/</font> <br /><font color="#000000">}</font> </font></b></div> <p> <b>【说明】：因为IE6可以辨识「_」(底线)，但是Firefox却不行，因此可以透过这样的差异来区隔Firefox和IE6，有效达成CSS hack。</b></div> <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/2011/06/09/e6-a0-b7-e5-bc-8f-e8-a1-a8hack-e5-8c-ba-e5-88-abie-e5-92-8c-e9-9d-9eie-e6-b5-8f-e8-a7-88-e5-99-a8.html" data-flip="title">样式表hack-区别IE和非IE浏览器</a></p> </article> <article id="post-web/web%E5%89%8D%E7%AB%AF/2011/06/09/%e3%80%90%e8%bd%ac%e3%80%91%e4%bb%80%e4%b9%88%e6%98%afcookie" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web/web%E5%89%8D%E7%AB%AF/2011/06/09/e3-80-90-e8-bd-ac-e3-80-91-e4-bb-80-e4-b9-88-e6-98-afcookie.html" data-flip="title"> 【转】什么是Cookie </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T21:43:16+08:00">09 Jun 2011</time> in <span>Web</span> / <span>Web前端</span> on <span>Javascript web 前端</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>当微软还没有推出IE8的时候，老实说，我就不喜欢这个浏览器。这不是来自于我对微软的偏见（这个公司确实非常伟大），而是来自于我对<a href="http://www.jzxue.com/tag/cookie/" target="_blank">Cookie</a>这个美好事 物的无比忠诚。但是，IE8的出现，让我们的美好蒙上一层厚厚的阴影。不过，当一切还没有变得非常严重之前，让我们先来了解一下Cookie是什么，它对 于我们的意义，以及我们为什么需要捍卫它。</p> <ul> <li> <h2>什么是Cookie以及Cookie的作用</h2> </li> </ul> <p> Cookie是在你浏览网页的时候，网站服务器放在客户端（Client End，就是你的电脑）里面的一个小小的TXT文件。这个文件里面存储了一些与你访问的这个网站有关的一些东西，当你下一次访问这个网站的时 候，Cookie就会记住你上次访问时候的一些状态或者设置，让服务器针对性的发送页面的相关内容。Cookie里面包含的信息并没有一个标准的格式，各 个网站服务器的规范都可能不同，但一般会包括：所访问网站的域名（domain name），访问开始的时间，访问者的IP地址等客户端信息，访问者关于这个网站的一些设置等等。比如，你设置的诸如Google一个页面要显示几条搜索 结果之类的信息，即使你不登录你的Google账号，你下次访问时也能够保存下来，这就是上次你访问时把相关信息放入了Cookie的效果。如果是在线购 物网站，还记录了一些你的购物车，储物架以及你的账户名等信息。另外有些网站则会通过Cookie把你的登录账号和密码记下来，这样你下次打开浏览器就会 自动登录。</p></p> <p> 当然，如果你在系统文件夹中打开Cookie的TXT文件，你并不会看到这些信息而只能看到一串乱七八糟的字符，因为为了安全起 见，Cookie的内容一般都是加密的，只有对应的服务器才能读懂。另外，由于Cookie只是TXT文件，而不是程序，更不是病毒，不能自己运行，不会 对操作系统和其他任何计算机程序产生影响，也不会通过互联网传播，因此它对互联网安全实际上不构成威胁。</p> <p> 对于网站分析而言，Cookie的作用在于帮助<b>嵌入代码类的</b>网站分析工具记录网站的访问（Visit）和访 问者（Unique Visitor）的信息，没有Cookie就无法实现相关监测。而通过服务器端Log来进行网站分析的软件则不需要Cookie也能实现相关分析，因此 Cookie只对嵌入代码类工具有效。那些你耳熟能详的工具——Google Analytics、Omniture、HBX、WebTrends(嵌入代码版)等等，都需要在网站访问者的电脑上放置Cookie才能实现监测。</p> <ul> <li> <h2>Cookie的数量和时效</h2> </li> </ul> <p> Cookie的数量是指一个网站可以在客户端放置Cookie的个数。一个网站并不是只能放置一个Cookie在客户端，而是根据需要，会放置 多个不同的Cookie。<b>对网站分析工具而言，帮助监测Visit的Cookie和帮助监测Unique Visitor的Cookie就不能是一个，而应该分开设置</b>。对每一个网站（域）而言，不同浏览器能够支持的最多Cookie数是不同 的。IE7和FireFox3.0支持每个网站50个Cookie，而Opera则支持30个。无论是30还是50，基本都够用了。</p> <p> Cookie的时效（expiration）是另一个非常重要的概念，也是Cookie的重要属性之一。任何Cookie都是有时效的，有些 Cookie的有效时间很短，有些Cookie则在浏览器关闭的同时自动失效，而有些则是号称”永久Cookie”。其实，Cookie的时效是在服务器 端人为设置的，可以设置为1秒，也可以设置10年，也可以设置在浏览器关闭的同时失效，完全根据不同情况的需要。永久Cookie就是指那些时效很长的 Cookie，但不是真的永久。</p> <p> Cookie的时效性对于网站分析监测意义重大。Visit的监测依赖于Cookie的时效。例如，Google Analytics对Visit的Cookie设置了两个时效，一个是30分钟，另一个是浏览器关闭时。这就意味着，如果Visit Cookie在30分钟内没有更新，这个Cookie就失效了——这就是为什么我们说Visit这个度量衡量的是间隔不超过30分钟的页面浏览过程，如果 两次页面浏览之间的时间超过了30分钟，那么Visit计数会被增加1。另外，如果你打开一个网站，看了一会儿就关掉浏览器，那么当你再次打开浏览器重新 开这个网站的时候，即使两次浏览没有超过30分钟，也会被计算为一个新的Visit，原因就是Visit Cookie浏览器关闭时效结束的设置起的作用。</p> <p> Unique Visitor也依赖于Cookie的时效。如果这个Cookie的时间设定为2天失效，那么你今明两天都访问同一个网站，Unique Visitor只会记录为从0增加到1；而如果你第三天又来，那么Unique Visitor就会再增加计数一次，共计2次。除了Visit和Unique Visitor外，Return visitor、Frequency等等度量当然也依赖于Cookie的时效。</p> <ul> <li> <h2>1st party cookie和3rd party cookie</h2> </li> </ul> <p>&#160; 第一方Cookie和第三方Cookie其实是一个 非常简单的概念，但是我在百度上随便搜索了一些解释，好像都不是很清楚，也不是很准确。实际上，所谓第一方和第三方的说法，是用来确定Cookie的归属 的，这个归属是指Cookie中记录的域（domain）。举个例子：如果你访问我的这个网站www.chinawebanalytics.cn的时候， 我的网站在你的电脑上设置了一个Cookie，里面的记录的域名也是www.chinawebanalytics.cn，那么这个Cookie就是第一方 的，归你访问的网站www.chinawebanalytics.cn所有。而如果你访问网站www.chinawebanalytics.cn时，在你 的计算机中设置的Cookie的域名是www.omd.com，那么这个Cookie就是第三方Cookie，归www.omd.com所有。</p> <p> 对于网站分析而言，这个概念是非常重要的。例如，你会问Google Analytics使用的Cookie是1st party的，还是3rd party的。答案是第一方的。首先，Google Analytics在每个被监测网站上的Cookie都是由我们熟悉的监测javascript代码所创建的（是的，javascript也可以创建 Cookie，知道这点就够了，不需要深挖），其次，这个被创建的cookie的域不是analytics.google.com，而是被监测网站自己的 域。因此，虽然这个Cookie实际上是在Google Analytics的帮助下建立的，而且也为Google Analytics所用（反而不能被“被监测网站”直接利用），它仍然是第一方Cookie。</p> <p> 所以，第一方Cookie并不一定需要由某个网站自己的服务器给自己建立，别的网站也能为它建立；而且，第一方Cookie也不一定是能由某个 网站自己读取的，它完全可能由第三方读取。<b>第一方和第三方的唯一区别只是：Cookie中的域名是否和被访问网站的域一样，是就是第一 方，否就是第三方。</b></p> <p> 这真的是一个容易混淆的概念，希望看了我上面的内容您弄清楚了。</p> <p> <b>网站分析和所有的互联网广告的监测，都会更喜欢第三方Cookie</b>。原因是，第三方Cookie可以用来监 测跨网站的访问者行为。例如，DoubleClick使用的就是第三方Cookie，这个公司会为你打开的所有载有DoubleClick广告的页面建立 同一个（仅一个）域为DoubleClick的Cookie，这样，只要你打开了这些网页，无论它们是否属于同一网站，你的浏览广告的行为 DoubleClick都能知道。但是第一方Cookie就不行了，因为第一方Cookie得用被监测网站的域，这样多个网站就会有多个不同的 Cookie，跨网站浏览行为就无法监测了。</p> <p> 对于大多数浏览器而言，第三方Cookie是被默认关闭的，原因在于人们在讨论 Cookie涉及的隐私问题时，倾向于认为第三方Cookie极 大的获取了人们的行为隐私，并由此产生了对第三方Cookie普遍的不信任和误解。但事实上，所有的Cookie都不会泄露任何关于浏览者个人的隐私信 息，它捕捉的仅仅只是浏览行为本身，第三方Cookie也不例外。而如果所有人都愿意接受第三方cookie，那么网站分析能够给出的分析和优化方案会更 多。但可惜，因为第三方Cookie被普遍禁用，因此利用第三方Cookie的监测工具并不多，只有监测网络广告的工具才会坚持使用第三方Cookie。</p> <ul> <li> <h2>没有Cookie，还能监测到什么？</h2> </li> </ul> <p> 由于第三方Cookie不受欢迎，很少有网站分析工具会采用它。而如果完全没有Cookie，那么网站分析工具几乎无法工作。但实际上，如果没 有Cookie，还是能监测到一点儿东西的。这个东西是PV。因为PV的监测只要引发javascript监测代码就可以，跟cookie无关。例如，在 Omniture中，如果某个客户端禁用cookie，Omniture还是会记录这个客户端贡献的PV，但完全无法记录Visit，这就会使这个工具监 测的PV/Visit会比实际值略大。说点儿题外话：在没有Cookie的时候，Omniture会退而求其次用访问者客户端IP地址来辨别不同的 Visitor（Unique Visitor），这样禁用cookie后unique visitor其实还能监测，但由于visit不能监测了，因此有可能在Omniture中出现Unique Visitor大于Visit的情况。</p> <p><img hspace="10" alt="" vspace="10" align="left" src="/assets/0051303.jpg" /></p> <p> <b>没了Cookie，除了PV，其他的度量基本上就获得不了数据了，所以我会认为没有Cookie，我们什么都没了。</b>或 者Visitor和Visitor所在的地理位置还能通过IP地址获得，但众所周知的原因，这个数据是非常不精确的，我们需要Cookie。</p> <p> 那么，你会问，多少客户端会禁用Cookie呢？我没有精确的数字，但我认为第一方Cookie应该会有大概80%的用户正在使用，只有20% 左右会禁用它。而第三方Cookie，由于是默认不开启的，因此我估计顶多只有20%的人在使用它。</p> <p> 随着IE8的出现，肯定会进一步降低Cookie的使用率，这也将进一步降低网站分析数据的样本数量。我<b>不认为</b>这 会降低网站分析工具在描述定性问题时的准确性（定性问题例如Bounce Rate，例如Time on site，以及Returning visitor和New visitor的比例），但在描述定量问题时会出现误差，或者更确切地说会偏小。如果随着Cookie禁用比例的增加，超过50%的人都禁用的话，那么网 站分析的原有方法论就会有麻烦了。不过，我肯定不相信Cookie禁用比例会有剧烈的上升，我很乐观——Cookie带给人们的方便远远要比一些不足一提 的隐私问题要多的多要大的多。禁用Cookie更多只是心理的慰藉（其实大多数时候一定只是心理上的感觉，而没有什么实际的对安全和隐私的帮助），但带来 的不方便则会直接影响你的浏览体验。</p> <p> 因此，无论是为了我们的专业本身，还是为了让浏览网页的用户有更好的体验，或是为了让网站本身能够创造更多的便利化应用，我们都有足够的理由支 持Cookie，反对微软的IE8色情浏览模式，捍卫我们应该捍卫的——这代表着智慧和进步。Eric Peterson写给总统奥巴马的那封公开信值得看看，这代表着我们所有网站分析从业者的最强烈呼声。</p> <p class="read-more">Continue reading <a class="heading" href="/web/web%E5%89%8D%E7%AB%AF/2011/06/09/e3-80-90-e8-bd-ac-e3-80-91-e4-bb-80-e4-b9-88-e6-98-afcookie.html" data-flip="title">【转】什么是Cookie</a></p> </article> <article id="post-web%E5%89%8D%E7%AB%AF/2011/06/09/javascript-%e6%89%93%e5%8d%b0" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/2011/06/09/javascript-e6-89-93-e5-8d-b0.html" data-flip="title"> javascript 打印 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T21:38:54+08:00">09 Jun 2011</time> in <span>Web前端</span> on <span>Javascript web 前端</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>javascript 打印 <br />使用iframe,写入类容，window.print打印,这个很简便。[测试sfari,firefox,ie,chrome都支持，opera不支持] <br />&lt;html&gt; <br />&#160;&#160;&#160; &lt;head&gt; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;style &gt; <br />body { <br />&#160;&#160;&#160; background-color: blue; <br />&#160;&#160;&#160; background-color: red \9; <br />} <br />&lt;/style&gt; <br />&#160;&#160;&#160; &lt;script type=&quot;text/javascript&quot;&gt; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; function pt(){ <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; var ifa=document.getElementById('ifa'); <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; var doc=ifa.contentWindow.document; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; doc.write('ssssss'); <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; doc.close(); <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ifa.contentWindow.print(); <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; } <br />&#160;&#160;&#160; &lt;/script&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160; &lt;/head&gt; <br />&#160;&#160;&#160; &lt;body&gt;blabla <br />&#160;&#160;&#160; &lt;a onclick=&quot;pt();&quot; href=&quot;#&quot;&gt;print&lt;/a&gt; <br />&#160;&#160;&#160; &lt;iframe id=&quot;ifa&quot; &gt;&lt;/iframe&gt; <br />&#160;&#160;&#160; &lt;/body&gt; <br />&lt;/html&gt; <br />但是要注意iframe的内容应该本页同域，否则有权限限制。 <div>ie有问题,iframe打印不是iframe那个页面的内容而是iframe所在页面的内容。</div> <div>解决办法，针对ie使用document.execCommand('print');即可</div> <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/2011/06/09/javascript-e6-89-93-e5-8d-b0.html" data-flip="title">javascript 打印</a></p> </article> <article id="post-web%E5%89%8D%E7%AB%AF/2011/06/09/javascript-typeof-%e5%92%8cinstanceof%e7%9a%84%e5%8c%ba%e5%88%ab" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/2011/06/09/javascript-typeof-e5-92-8cinstanceof-e7-9a-84-e5-8c-ba-e5-88-ab.html" data-flip="title"> JavaScript typeof 和instanceof的区别 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T21:38:00+08:00">09 Jun 2011</time> in <span>Web前端</span> on <span>Javascript web 前端</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>JavaScript typeof 和instanceof的区别 <div>a instanceof b </div> <div>a必须是一个b类实例才会返回true</div> <div>如果a是个原始类型则会是false</div> <div>&quot;ss&quot; instanceof String //false</div> <div>而typeof只会返回&quot;number,&quot; &quot;string,&quot; &quot;boolean,&quot; &quot;object,&quot; &quot;function,&quot; 和 &quot;undefined&quot;</div> <p>跟详细的理解见<a title="http://kazge.com/archives/468.html" href="http://kazge.com/archives/468.html">http://kazge.com/archives/468.html</a></p> <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/2011/06/09/javascript-typeof-e5-92-8cinstanceof-e7-9a-84-e5-8c-ba-e5-88-ab.html" data-flip="title">JavaScript typeof 和instanceof的区别</a></p> </article> <article id="post-java/2011/06/09/java-%e7%b1%bb%e5%88%9d%e5%a7%8b%e5%8c%96%e9%a1%ba%e5%ba%8f" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/2011/06/09/java-e7-b1-bb-e5-88-9d-e5-a7-8b-e5-8c-96-e9-a1-ba-e5-ba-8f.html" data-flip="title"> java 类初始化顺序 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T21:36:28+08:00">09 Jun 2011</time> in <span>Java</span> on <span>Java</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <div class="postTitle">&#160;</div> <div class="postText">我们大家都知道，对于静态变量、静态初始化块、变量、初始化块、构造器，它们的初始化顺序依次是（静态变量、静态初始化块）&gt;（变量、初始化 块）&gt;构造器。我们也可以通过下面的测试代码来验证这一点： <br /> <div class="dp-highlighter"> <div class="bar"> <div class="tools">Java代码 </div> </p></div> <ol class="dp-j"> <li><span class="keyword">public</span>&#160;<span class="keyword">class</span> InitialOrderTest {&#160;&#160; </li> <li>&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 静态变量 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span>&#160;<span class="keyword">static</span> String staticField = <span class="string">&quot; 静态变量&quot;</span>;&#160;&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 变量 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span> String field = <span class="string">&quot;变量&quot;</span>;&#160;&#160; </li> <li>&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 静态初始化块 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">static</span> {&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(staticField);&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(<span class="string">&quot;静态初始化块&quot;</span>);&#160;&#160; </li> <li>&#160;&#160;&#160; }&#160;&#160; </li> <li>&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 初始化块 </span>&#160; </li> <li>&#160;&#160;&#160; {&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(field);&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(<span class="string">&quot;初始 化块&quot;</span>);&#160;&#160; </li> <li>&#160;&#160;&#160; }&#160;&#160; </li> <li>&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 构造器 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span> InitialOrderTest() {&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(<span class="string">&quot;构造 器&quot;</span>);&#160;&#160; </li> <li>&#160;&#160;&#160; }&#160;&#160; </li> <li>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span>&#160;<span class="keyword">static</span>&#160;<span class="keyword">void</span> main(String[] args) {&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="keyword">new</span> InitialOrderTest();&#160;&#160; </li> <li>&#160;&#160;&#160; }&#160;&#160; </li> <li>}&#160; </li> </ol></div> <p> 运行以上代码，我们会得到如下的输出结果： <br /> <ol> <li>静态变量 </li> <li>静态初始化块 </li> <li>变量 </li> <li>初始化块 </li> <li>构造器 </li> </ol> <p>这与上文中说的完全符合。那么对于继承情况下又会怎样呢？我们仍然以一段测试代码来获取最终结果： <br /> <div class="dp-highlighter"> <div class="bar"> <div class="tools">Java代码 <a title="复制代码" href="http://zangweiren.javaeye.com/blog/208122#"><img alt="复制代码" src="/assets/icon_copy.gif" /></a></div> </p></div> <ol class="dp-j"> <li><span class="keyword">class</span> Parent {&#160;&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 静态变量 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span>&#160;<span class="keyword">static</span> String p_StaticField = <span class="string">&quot;父类--静态变量&quot;</span>;&#160;&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 变量 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span> String p_Field = <span class="string">&quot;父类--变量&quot;</span>;&#160;&#160; </li> <li>&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 静态初始化块 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">static</span> {&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(p_StaticField);&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(<span class="string">&quot;父类--静态初始化块&quot;</span>);&#160;&#160; </li> <li>&#160;&#160;&#160; }&#160;&#160; </li> <li>&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 初始化块 </span>&#160; </li> <li>&#160;&#160;&#160; {&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(p_Field);&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(<span class="string">&quot;父类 --初始化块&quot;</span>);&#160;&#160; </li> <li>&#160;&#160;&#160; }&#160;&#160; </li> <li>&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 构造器 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span> Parent() {&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(<span class="string">&quot;父类 --构造器&quot;</span>);&#160;&#160; </li> <li>&#160;&#160;&#160; }&#160;&#160; </li> <li>}&#160;&#160; </li> <li>&#160; </li> <li><span class="keyword">public</span>&#160;<span class="keyword">class</span> SubClass <span class="keyword">extends</span> Parent {&#160;&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 静态变量 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span>&#160;<span class="keyword">static</span> String s_StaticField = <span class="string">&quot;子类--静态变量&quot;</span>;&#160;&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 变量 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span> String s_Field = <span class="string">&quot;子类--变量&quot;</span>;&#160;&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 静态初始化块 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">static</span> {&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(s_StaticField);&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(<span class="string">&quot;子类--静态初始化块&quot;</span>);&#160;&#160; </li> <li>&#160;&#160;&#160; }&#160;&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 初始化块 </span>&#160; </li> <li>&#160;&#160;&#160; {&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(s_Field);&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(<span class="string">&quot;子类 --初始化块&quot;</span>);&#160;&#160; </li> <li>&#160;&#160;&#160; }&#160;&#160; </li> <li>&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 构造器 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span> SubClass() {&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(<span class="string">&quot;子类 --构造器&quot;</span>);&#160;&#160; </li> <li>&#160;&#160;&#160; }&#160;&#160; </li> <li>&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 程序入口 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span>&#160;<span class="keyword">static</span>&#160;<span class="keyword">void</span> main(String[] args) {&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="keyword">new</span> SubClass();&#160;&#160; </li> <li>&#160;&#160;&#160; }&#160;&#160; </li> <li>}&#160;&#160; </li> </ol></div> <p> 运行一下上面的代码，结果马上呈现在我们的眼前： <br /> <ol> <li>父类--静态变量 </li> <li>父类--静态初始化块 </li> <li>子类--静态变量 </li> <li>子类--静态初始化块 </li> <li>父类--变量 </li> <li>父类--初始化块 </li> <li>父类--构造器 </li> <li>子类--变量 </li> <li>子类--初始化块 </li> <li>子类--构造器 </li> </ol> <p>现在，结果已经不言自明了。大家可能会注意到一点，那就是，并不是父类完全初始化完毕后才进行子类的初始化，实际上子类的静态变量和静态初始化块的初始化 是在父类的变量、初始化块和构造器初始化之前就完成了。 </p> <p>那么对于静态变量和静态初始化块之间、变量和初始化块之间的先后顺序又是怎样呢？是否静态变量总是先于静态初始化块，变量总是先于初始化块就被初始化了 呢？实际上这取决于它们在类中出现的先后顺序。我们以静态变量和静态初始化块为例来进行说明。 </p> <p>同样，我们还是写一个类来进行测试： <br /> <div class="dp-highlighter"> <div class="bar"> <div class="tools">Java代码 </div> </p></div> <ol class="dp-j"> <li><span class="keyword">public</span>&#160;<span class="keyword">class</span> TestOrder {&#160;&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 静态变量 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span>&#160;<span class="keyword">static</span> TestA a = <span class="keyword">new</span> TestA();&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 静态初始化块 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">static</span> {&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(<span class="string">&quot;静态 初始化块&quot;</span>);&#160;&#160; </li> <li>&#160;&#160;&#160; }&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160; </li> <li>&#160;&#160;&#160; <span class="comment">// 静态变量 </span>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span>&#160;<span class="keyword">static</span> TestB b = <span class="keyword">new</span> TestB();&#160;&#160; </li> <li>&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span>&#160;<span class="keyword">static</span>&#160;<span class="keyword">void</span> main(String[] args) {&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="keyword">new</span> TestOrder();&#160;&#160; </li> <li>&#160;&#160;&#160; }&#160;&#160; </li> <li>}&#160;&#160; </li> <li>&#160; </li> <li><span class="keyword">class</span> TestA {&#160;&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span> TestA() {&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(<span class="string">&quot;Test--A&quot;</span>);&#160;&#160; </li> <li>&#160;&#160;&#160; }&#160;&#160; </li> <li>}&#160;&#160; </li> <li>&#160; </li> <li><span class="keyword">class</span> TestB {&#160;&#160; </li> <li>&#160;&#160;&#160; <span class="keyword">public</span> TestB() {&#160;&#160; </li> <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.out.println(<span class="string">&quot;Test--B&quot;</span>);&#160;&#160; </li> <li>&#160;&#160;&#160; }&#160;&#160; </li> <li>}&#160; </li> </ol></div> <p> 运行上面的代码，会得到如下的结果： <br /> <ol> <li>Test--A </li> <li>静态初始化块 </li> <li>Test--B </li> </ol> <p> <div><font color="#0000ff">这也不要太纠结。</font></div> <div><font color="#0000ff">下面的写法会产生递归。</font></div> <div>public class A</div> <div>{</div> <div>static{</div> <div>a = new A(&quot;static block&quot;);</div> <div>}</div> <div>final static A a;</div> <div>static A aa = new A(&quot;static init&quot;);</div> <div>// A ma = new A(&quot;inner init&quot;);//这里在实例化变量时又实例自己的对象，递归</div> <div>{</div> <div>new A(&quot;inner block&quot;);//这里在实例化变量时又实例自己的对象，递归</div> <div>}</div> <div>public A()</div> <div>{</div> <div>// TODO Auto-generated constructor stub</div> <div>}</div> <div>public A(String i)</div> <div>{</div> <div>System.out.println(i);</div> <div>}</div> <div>public static void main(String[] args)</div> <div>{</div> <p> <div>}</div> <div>}</div> <p></div> <p>这里顺便温习一下构造函数的继承问题：</p> <p>创建一个子类的对象实例的时候，必先调用父类的无参数的构造函数（默认构造函数），假如父类有带参数的构造函数，那么系统将不会给它创建无参数的构造函数，这时，子类在实例化的时候，因为找不到父类的默认构造函数，编译器将会报错，但如果在子类的构造函数中指定用父类的带参数的构造函数的时候，或者在父类中加一个无参数的构造函数，就不会报错。</p> <p class="read-more">Continue reading <a class="heading" href="/java/2011/06/09/java-e7-b1-bb-e5-88-9d-e5-a7-8b-e5-8c-96-e9-a1-ba-e5-ba-8f.html" data-flip="title">java 类初始化顺序</a></p> </article> <article id="post-web%E5%89%8D%E7%AB%AF/2011/06/09/extjsver3-1-0-enter%e9%94%ae%e5%8f%91%e9%80%81%e8%b7%a8%e6%b5%8f%e8%a7%88%e5%99%a8%e8%a7%a3%e5%86%b3-%e7%ad%89%e7%9b%b8%e5%85%b3%e9%97%ae%e9%a2%98" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/2011/06/09/extjsver3-1-0-enter-e9-94-ae-e5-8f-91-e9-80-81-e8-b7-a8-e6-b5-8f-e8-a7-88-e5-99-a8-e8-a7-a3-e5-86-b3-e7-ad-89-e7-9b-b8-e5-85-b3-e9-97-ae-e9-a2-98.html" data-flip="title"> Extjs[ver<=3.1.0] enter键发送跨浏览器解决 等相关问题 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T21:34:07+08:00">09 Jun 2011</time> in <span>Web前端</span> on <span>Extjs</span>, <span>Javascript web 前端</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>聊天程序，enter键要发送同时清空编辑区: <br />Extjs textarea, <br />发现发送了后清空文本框后还是有个回车: <br />在chat里面的原因是截获事件后没有取消事件冒泡，导致先清空文本，最后残留的回车应该是事件冒泡产生的。 <br />在ie里面设置event.keyCode = 8;[退格]即可 <br />在火狐里面使用Ext包装的eventObject.preventDefault即可 </p> <div>==============================================</div> <div>一下直接看源码可以分析出：</div> <div>Ext panel要让它可拖动，可用draggable属性，但是如果没有设置panel的floating=true,则拖动后结束后还是会归原，可将 panel样式设置position:absolute即可.[这是wcsa里面出现的情况]，另一种是没有header(没有设置title),</div> <div>见下注释:</div> <p> <div>extDialog = new Ext.Panel({</div> <div>style : 'z-index:' + (Ext.WindowMgr.zseed - 20),</div> <div>width : 760,</div> <div>height : 532,</div> <div>layout : 'border',</div> <div>tbar : _tbar,//toolbar作为伪header,没有设置header</div> <div>floating : true,//</div> <div>renderTo : Ext.getBody(),</div> <div>x : x,</div> <div>y : y,</div> <div>items : [_rightpnl, chatpanel, southpnl]</div> <div>});</div> <p> <div>extDialog.on('show', function() {//由于要取toolbar的el属性，故在render之后才可以</div> <div>extDialog.dd = new Ext.Panel.DD(extDialog, {//draggleble是普通的配置文档上的copy</div> <div>insertProxy : false,</div> <p> <div>onDrag : function(e) {</div> <div>var pel = this.proxy.getEl();</div> <div>this.x = pel.getLeft(true);</div> <div>this.y = pel.getTop(true);</div> <div>},</div> <p> <div>endDrag : function(e) {</div> <div>this.panel.setPosition(this.x, this.y);</div> <div>}</div> <div>});</div> <div>extDialog.body.setStyle('cursor', '');//由于没有header,将body的cursor设置为了move,所以还原</div> <div>_tbar.el.setStyle('cursor', 'move');//设置toolbar的cursor为move</div> <div>extDialog.dd.setHandleElId(_tbar.el.dom.id);//这个是必要的，chat里面遇到的问题是利民的textarea得不到焦点（鼠标点击没反应），就是因为默认DD没有header,将整个body设置成了handler</div> <div>});</div> <p> 这个解决方案在ie6下有问题，整个Extjs层无法点击，最后还是改用window来做就没问题。 <br /> <div>=======================</div> <div>chat里面遇到，右侧要写html dialog,发现火狐下再展开原来collapse的panel会导致原来写好的iframe 里面的html是空的，跟踪dom发现这个收缩的panel整个被remove了，再展开时extjs试图还原，对一般的这个没问题，对</div> <div>嵌入iframe则有问题，查看源码估计是展开收缩动画造成的原因，<b><font color="#ff0000">将Panel animCollapse的设置为false</font>就可以了.</b></div> <p> floatable:false,则可以让折叠的panel必须要点按钮才可以展开[borderlayout.region] <br /> <div>extjs3.1.0之前</div> <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/2011/06/09/extjsver3-1-0-enter-e9-94-ae-e5-8f-91-e9-80-81-e8-b7-a8-e6-b5-8f-e8-a7-88-e5-99-a8-e8-a7-a3-e5-86-b3-e7-ad-89-e7-9b-b8-e5-85-b3-e9-97-ae-e9-a2-98.html" data-flip="title">Extjs[ver<=3.1.0] enter键发送跨浏览器解决 等相关问题</a></p> </article> <article id="post-%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/2011/06/09/%e5%87%80%e7%8e%b0%e5%80%bc%e3%80%81%e6%8a%98%e7%8e%b0%e7%8e%87%e3%80%81%e5%86%85%e9%83%a8%e6%94%b6%e7%9b%8a%e7%8e%87%e3%80%81%e6%8a%95%e8%b5%84%e5%88%a9%e6%b6%a6" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/2011/06/09/e5-87-80-e7-8e-b0-e5-80-bc-e3-80-81-e6-8a-98-e7-8e-b0-e7-8e-87-e3-80-81-e5-86-85-e9-83-a8-e6-94-b6-e7-9b-8a-e7-8e-87-e3-80-81-e6-8a-95-e8-b5-84-e5-88-a9-e6-b6-a6.html" data-flip="title"> 净现值、折现率、内部收益率、投资利润 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T21:32:41+08:00">09 Jun 2011</time> in <span>软件工程</span> on <span>资产计算</span>, <span>金融，投资</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <div class="blog_content"> <p><b>NPV：净现值 (</b>Net Present Value <b>)</b></p> <p>&#160;&#160;&#160;&#160;&#160; 投资项目投入使用后的净现金流量，按资本成本或企业要求达到的报酬率折算为现值，减去初始投资以后的余额，叫净现值(net present value,NPV)。（净现值 = <i><font color="#008000">未来报酬的 总现值</font></i> － <i>初始投资</i>）&#160;&#160;&#160;&#160;&#160; </p> <p>&#160;</p> <p>&#160;&#160;&#160;&#160;&#160; <i><font color="#008000">未来报酬的总现值</font></i>计算 方法：</p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 1、计算每年的营业净现金流量。 </p> <p>&#160;&#160;&#160;&#160;&#160;&#160; 2、计算未来报酬的总现值。 </p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; （1）将每年的营业净现金流量折算成现值。</p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 如果每年的NCF相等，则按年金法折成现值；</p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 如果每年的NCF不相等，则先对每年的NCF进行折现，然后加以合计。 </p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; （2）将终结现金流量折算成现值。 </p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; （3）计算未来报酬的总现值。</p> <p>&#160;</p> <p>&#160;&#160;&#160;&#160;&#160; 也就是说净现值大于零则方案可行，且<b>净现值越大，方案越优，投资效益越好。</b></p> <p><b>&#160;&#160;&#160;&#160;&#160; </b>简单的例子说明：<b>&#160; 说白了就是未来可以净赚多少钱。初始投资10块，预计将来赚 12块，则2块就是净现值。</b></p> <p><b>&#160;&#160;&#160;&#160;&#160; <font color="#ff0000"><font color="#ff0000">现值</font> 就是资金当前的价值,</font></b><font color="#000000">也就是说现在手上的这些钱他值多少钱。</font></p> <p><font color="#ff0000"><b>&#160;&#160;&#160;&#160;&#160; </b><font color="#000000">如果存到银行的话</font><b>，净现值就是利息，现值就是本金+利息。</b></font></p> <p>&#160;</p></p> <p><b>净现值=未来报酬总现值-建设投资总额</b></p> <p> <img class="tex" alt="NPV=\sum^{n}_{t=1}\frac{C_t}{(1+r)^t}-C_0" src="/assets/1c1e9919d7fd83491df95a128aefd5e5.png" /></p> <p> 式中：NPV—<a title="净现值" href="http://wiki.mbalib.com/wiki/%E5%87%80%E7%8E%B0%E5%80%BC">净现值</a></p> <p> <span class="texhtml"><i>C</i><sub><i>o</i></sub></span>—初始投资额 </p> <p> <span class="texhtml"><i>C</i><sub><i>t</i></sub></span> —t年<a title="现金流量" href="http://wiki.mbalib.com/wiki/%E7%8E%B0%E9%87%91%E6%B5%81%E9%87%8F">现金流量</a></p> <p> r—<a title="贴现率" href="http://wiki.mbalib.com/wiki/%E8%B4%B4%E7%8E%B0%E7%8E%87">贴现率</a></p> <p> n—投资项目的寿命周期 </p> <p> 如果将初始投资额看做第0年的现金流量，同时考虑到<span class="texhtml">(1 + <i>r</i>)<sup><i>o</i></sup> = 1</span>，则上式可以变换为： </p> <p> <img class="tex" alt="NPV=\sum^{n}_{t=0}\frac{C_t}{(1+r)^t}" src="/assets/1db583b76b163ccb5e03fb69d07051d9.png" /></p> <p> 净现值指标的决策标准是：如果投资项目的净现值大于零，接受该项目；如果投资项目的净现值小于零，放弃该项目；如果有多个互斥的投资项 目相互竞争，选取净现值最大的投资项目。 </p> <p> 项目A、B的净现值均大于零，表明这两个项目均可取。如果二者只能取一个，则应选取项目A。 </p> <p> 如果投资项目除初始投资额外各期现金流量均相等，则可利用年金现值系数表计算，使计算过程简化. </p> <p> 净现值指标考虑了投资项目资金流量的时间价值，较合理地反映了投资项目的真正的经济价值，是一个比较好的投资决策指标。 </p> <p> </p> <p></p> <p><b>DR : 折现率[考试中往往由下面的折现系数求得，一般折现率由银行决定]</b></p> <p><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160; </b>折现率是指将<b>未来有限期预期收益</b>折算成<b>现 值</b>的比率。可以这样简单的理解：由于资金是有时间价值的，今天的一块钱和一年后的块钱在价值是是不能等同的。如何把一年后的一块钱和今 天的一块钱在价值上进行比较呢，那就要把一年后的一块钱折成今天的价值，这叫折现。公式是：PV = C/(1+r)^t&#160;&#160; 其中：PV = 现值（present value），C=期末金额，r=折现率，t=投资期数。</p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160; 举例： <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; 一年后一块钱在今天的价值=一年后的一块钱/（1+折现率）&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; 二年后一块 钱在今天的价值=二年后的一块钱/（1+折现率）^2（注：平方）&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; 三年后一块钱在今天的价值=三年后的一块钱/（1+折现 率）^3（注：立方） <br />依次类推。 <b><font color="#ff0000">在进行折现 时，折现率一般采用当前的市场利率，如同样期限的贷款利率等；或用资金的实际成本作为折现率。</font></b></p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160; 再举例来说，您的投资机会是把钱存银行，存款利率为10%，那么一年以后收到的1元，对您来说其现值为0.909（=1/1.1）；而两年后的1元对您来 说其现值为0.826（=1/1.1^2）。也就是说，现在给您0.909元和1年后给您1元，您认为是相同的，因为您可以把0.909元存入银行，1年 后获得1元；同理，现在给您0.826元，和2年后给您1元并没有什么不同。&#160; <br />&#160;</p></p> <h1>折现系数</h1> <div> <div style="float: right" class="text_pic"><a href="http://baike.baidu.com/image/b258f5c47fcd63b78226ac8c" target="_blank"><img src="/assets/b258f5c47fcd63b78226ac8c.jpg" /></a></div> <p> 【折现系数】 <br /> 又称一次偿付现值因素或复利现值系数，英文为discount factor，指根据折现率和年数计算出来的一个货币单位在不同时间的现值。在折现率不变的情况下，一个货币单位在n年的折现系数为： <br /> R=1/(1+i)n&#160;&#160; (注：此处n为(1+i)的上标) <br /> 式中： <br /> R——折现系数； <br /> i——折现率； <br /> n——年数。 </div></p> <p></p> <p><b>IRR : 内部收益率</b></p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160; 简单的说就是：<b><font color="#ff0000">NPV=0的时候的DR，一般我们比较的是行业的IRR</font></b>。意思就是刚收回成本的时候的折 现率。说得通俗点,内部收益率越高，说明你投入的成本相对地少，但获得的收益却相对地多。</p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160; 比如A、 B两项投资，成本都是10万，经营期都是5年，A每年可获净现金流量3万，B可获4万，通过计算，可以得出A的内部收益率约等于15%，B的约等于 28%，这些，其实通过年金现值系数表就可以看得出来的。 </p> <p>&#160;</p> <p><b>ROI: 投资利润</b></p> <p>&#160;&#160;&#160;&#160;&#160; 年投资利润率=年净利润/投资总额 *100% </p> <p>&#160;&#160;&#160;&#160;&#160; 1、第一年投资利润率: <br />&#160;&#160;&#160;&#160;&#160; 第一年投资利润=1100-220-270-160=450 <br />&#160;&#160;&#160;&#160;&#160; 第一年投资利润率=450/200*100%=225% </p> <p>&#160;&#160;&#160;&#160;&#160; 2、第二年投资利润率: <br />&#160;&#160;&#160;&#160;&#160; 第二年投资利润=2450-530-650-300=970 <br />&#160;&#160;&#160;&#160;&#160; 第二年投资利润率=970/200*100%=485% </p> <p>&#160;&#160;&#160;&#160;&#160; 3、第三年投资利润率: <br />&#160;&#160;&#160;&#160;&#160; 第三年投资利润=5500-900-975-400=3225 <br />&#160;&#160;&#160;&#160;&#160; 第三年投资利润率=3225/200*100%=1612.5%</p> </p></div> <p class="read-more">Continue reading <a class="heading" href="/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/2011/06/09/e5-87-80-e7-8e-b0-e5-80-bc-e3-80-81-e6-8a-98-e7-8e-b0-e7-8e-87-e3-80-81-e5-86-85-e9-83-a8-e6-94-b6-e7-9b-8a-e7-8e-87-e3-80-81-e6-8a-95-e8-b5-84-e5-88-a9-e6-b6-a6.html" data-flip="title">净现值、折现率、内部收益率、投资利润</a></p> </article> <article id="post-java/2011/06/09/%e3%80%90%e9%93%be%e3%80%91%e8%a7%a3%e5%86%b3%e7%94%a8run-jetty-run%e9%94%81%e4%bd%8fcssjs%e6%96%87%e4%bb%b6%e7%9a%84%e9%97%ae%e9%a2%98" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/2011/06/09/e3-80-90-e9-93-be-e3-80-91-e8-a7-a3-e5-86-b3-e7-94-a8run-jetty-run-e9-94-81-e4-bd-8fcssjs-e6-96-87-e4-bb-b6-e7-9a-84-e9-97-ae-e9-a2-98.html" data-flip="title"> 【链】解决用run-jetty-run锁住css,js文件的问题 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T21:31:51+08:00">09 Jun 2011</time> in <span>Java</span> on <span>Web</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p><a title="http://dengyin2000.iteye.com/blog/246774" href="http://dengyin2000.iteye.com/blog/246774">http://dengyin2000.iteye.com/blog/246774</a></p> <p class="read-more">Continue reading <a class="heading" href="/java/2011/06/09/e3-80-90-e9-93-be-e3-80-91-e8-a7-a3-e5-86-b3-e7-94-a8run-jetty-run-e9-94-81-e4-bd-8fcssjs-e6-96-87-e4-bb-b6-e7-9a-84-e9-97-ae-e9-a2-98.html" data-flip="title">【链】解决用run-jetty-run锁住css,js文件的问题</a></p> </article> <h2 class="sr-only">Pagination</h2> <nav class="pagination heading" role="navigation"> <ul> <li class="pagination-item older" > <a rel="next" href="/page-52/">Older</a> </li> <li class="pagination-item newer" > <a rel="prev" href="/page-50/">Newer</a> </li> </ul> </nav> <footer> <hr/> <p>© 2011 - 2017. All rights reserved.</p> <p> <code>Powered by <a href="https://qwtel.com/hydejack/">Hydejack</a> v<span id="_version">6.6.1</span></code> </p> </footer> </main> </div> <div id="_yDrawer"> <div id="_sidebar" class="sidebar"> <div class="sidebar-bg" style="background-color:#4f86aa;background-image:url()"></div> <header class="sidebar-sticky" role="banner"> <div class="sidebar-about"> <img src="https://avatars0.githubusercontent.com/u/4122902?v=4&s=460" class="me" /> </div> <div class="sidebar-about"> <h1><a id="_title" href="/">Ka's Blog</a></h1> <p>Ka’s blog description…</p> </div> <nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span> <ul> <li> <a class="sidebar-nav-item" href="/categories.html">Categories</a> </li> <li> <a class="sidebar-nav-item" href="/archive.html">Archive</a> </li> <li> <a class="sidebar-nav-item" href="/tags.html">Tags</a> </li> <li> <a class="sidebar-nav-item" href="/about.html">About</a> </li> </ul> </nav> <div class="sidebar-social"> <span class="sr-only">Social:</span> <ul> <li> <a href="https://twitter.com/imhazige" title="Twitter"> <span class="icon-twitter"></span> <span class="sr-only">Twitter</span> </a> </li> <li> <a href="https://github.com/imhazige" title="GitHub"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a> </li> <li> <a href="mailto:imhazige@gmail.com" title="Email"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a> </li> <li> <a href="https://imhazige.github.io/myblog/feed.xml" title="RSS"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a> </li> </ul> </div> </header> </div> </div> </div> <!--[if gt IE 9]><!----> <script>loadJSDeferred('/assets/js/hydejack.js?v=6.6.1');</script> <!--<![endif]--> </body>
</html>
