<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v6.6.1 <https://qwtel.com/hydejack/>
--><head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="format-detection" content="telephone=no"> <meta http-equiv="x-ua-compatible" content="ie=edge"> <title>Ka's Blog &middot; Ka's Blog</title> <meta name="description" content="Ka’s blog description… "> <link rel="canonical" href="http://localhost:4000/page-58/"> <link rel="alternate" type="application/atom+xml" title="Ka's Blog Feed" href="http://localhost:4000/feed.xml"> <link rel="apple-touch-icon" href="/apple-touch-icon.png"> <!-- Place favicon.ico in the root directory --> <link rel="stylesheet" href="/assets/style.css"> <link id="_katexJS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.js"> <link id="_katexCSS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css"> <!--[if gt IE 8]><!----> <script> WebFontConfig = { google: { families: 'Roboto+Slab:700|Noto+Sans:400,400i,700,700i'.split('|') }, custom: { families: ['icomoon'], urls: ['/assets/icomoon/style.css'] } }; </script> <!--<![endif]--> <script> !function(n,e){function t(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function o(n,e){n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,n))}}n._loaded=!1,n.loadJSDeferred=function(a,d){function r(){n._loaded=!0;var r=e.createElement("script");r.src=a,d&&(("onload"in r?t:o)(r,d),r.onload||t(r,d));var l=e.getElementsByTagName("script")[0];l.parentNode.insertBefore(r,l)}n._loaded?r():n.addEventListener?n.addEventListener("load",r,!1):n.attachEvent?n.attachEvent("onload",r):n.onload=r}}(window,document); !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); window.disablePushState = false; window.disableDrawer = false; </script> <!--[if lt IE 9]> <script src="/assets/bower_components/html5shiv/dist/html5shiv.min.js"></script> <![endif]--> <!--[if gt IE 8]><!----> <style> article, aside, dialog, figcaption, figure, footer, header, hgroup, main, nav, section { display: block; } mark { background: #FF0; color: #000; } * { box-sizing: border-box; } html, body { margin: 0; padding: 0; } html { font-size: 16px; line-height: 1.75; } body { color: #333; background-color: #fff; overflow-y: scroll; } a { text-decoration: none; } .lead { margin-left: -1rem; margin-right: -1rem; } img, .img { display: block; max-width: 100%; margin-bottom: 1rem; border: none; } img.lead, .img.lead { max-width: calc(100% + 2rem); width: calc(100% + 2rem); } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-weight: bold; text-rendering: optimizeLegibility; } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 { margin: 3rem 0 1rem; line-height: 1.6; } h1, .h1 { font-size: 2rem; line-height: 1.25; } h2, .h2 { font-size: 1.5rem; } h3, .h3 { font-size: 1.17em; } p { margin-top: 0; margin-bottom: 1rem; } p.lead { font-size: 1.25rem; font-weight: 300; padding: 0 1rem; } ul, ol, dl { margin-top: 0; margin-bottom: 1rem; } ul, ol { padding-left: 1.25rem; } hr { position: relative; margin: 1.5rem 0; border: 0; border-top: 1px solid #eee; } .hr { padding-bottom: .5rem; border-bottom: 1px solid #eee; margin-bottom: 1.5rem; } h4, h5, h6, .h4, .h5, .h6 { margin-bottom: 0.5rem; font-size: 1rem; } table { margin-bottom: 1rem; width: 100%; width: calc(100% + 2rem); margin-left: -1rem; border: 1px solid #e5e5e5; border-collapse: collapse; border-spacing: 0; } td, th { padding: .25rem .5rem; border: 1px solid #e5e5e5; } td:first-child, th:first-child { padding-left: 1rem; } td:last-child, th:last-child { padding-right: 1rem; } thead + tbody, tbody + tbody, tfoot { border-top: 3px double #e5e5e5; } tbody tr:nth-child(odd) td, tbody tr:nth-child(odd) th { background-color: #f9f9f9; } footer { margin-bottom: 2rem; } .page, .post { margin-bottom: 3em; } .page li + li, .post li + li { margin-top: .25rem; } .page > header, .post > header { margin-bottom: 2rem; } .page-title, .post-title { margin-top: 0; } .post-date { display: block; margin-top: -0.5rem; margin-bottom: 1rem; color: #9a9a9a; } .related-posts { padding-left: 0; list-style: none; } .related-posts > li, .related-posts > li + li { margin-top: 1rem; } .related-posts > li > small, .related-posts > li + li > small { font-size: 75%; color: #9a9a9a; } .message { margin-bottom: 1rem; padding: 1rem; color: #787878; background-color: #f9f9f9; margin-left: -1rem; margin-right: -1rem; } /* * Global resets * * Update the foundational and global aspects of the page. */ body, main { /* Prevent side-scrolling on mobile */ position: relative; overflow-x: hidden; } @media screen { body::before { content: ''; width: .5rem; background: #e5e5e5; position: absolute; left: 0; top: 0; bottom: 0; } } @media screen and (min-width: 40em) { html { font-size: 17px; } } @media screen and (min-width: 54em) { html { font-size: 16px; } } @media screen and (min-width: 72em) { html { font-size: 17px; } } @media screen and (min-width: 125em) { html { font-size: 18px; } } .sr-only { display: none; } .clearfix, .sidebar-social::after, .clearafter::after { content: ""; display: table; clear: both; } a, .a { position: relative; padding-bottom: .15rem; border-bottom: 1px solid; } .img { overflow: hidden; background-color: #f9f9f9; } .img > img { margin: 0; width: 100%; height: 100%; } .sixteen-nine { position: relative; } .sixteen-nine::before { display: block; content: ""; width: 100%; padding-top: 56.25%; } .sixteen-nine > * { position: absolute; top: 0; left: 0; right: 0; bottom: 0; } h1 + hr, h2 + hr, h3 + hr, h4 + hr, h5 + hr, h6 + hr { margin-top: 0; } .fade-in { animation-duration: 500ms; animation-name: fade-in; animation-fill-mode: forwards; } @keyframes fade-in { from { transform: translateY(-2rem); opacity: 0; } 50% { transform: translateY(-2rem); opacity: 0; } to { transform: translateY(0); opacity: 1; } } .mb6 { margin-bottom: 6rem; } .sidebar { color: rgba(255, 255, 255, 0.75); text-align: left; /* Sidebar links */ } .sidebar::before { /* make sidebar slightly darker to increase text readability (when using a background image) */ content: ""; position: absolute; z-index: 2; top: 0; left: 0; bottom: 0; right: 0; background: linear-gradient(to bottom, rgba(32, 32, 32, 0) 0%, rgba(32, 32, 32, 0.5) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */ } .sidebar a { color: #fff; border-bottom-color: rgba(255, 255, 255, 0.2); } #_yDrawer { position: relative; padding: 1rem 0; } @media screen { #_yDrawer { padding: 2rem 1rem; min-height: 640px; min-height: 100vh; } } @media screen and (min-width: 54em) { #_yDrawer { position: fixed; top: 0; left: 0; bottom: 0; width: 18rem; margin-left: 0; } } @media screen and (min-width: 97.5em) { #_yDrawer { width: calc(50% - 28rem); } } @media screen { #_yDrawer.loaded { min-height: 0; padding: 0; } } .sidebar-bg { position: absolute; top: 0; right: 0; bottom: 0; left: 0; background: #202020 center / cover; } .sidebar-sticky { position: relative; z-index: 3; } @media screen { .sidebar-sticky { position: absolute; right: 2rem; bottom: 1rem; left: auto; max-width: 14rem; } } @media print { .sidebar-sticky { padding: 0 2rem; } } /* About section */ .sidebar-about > h1 { color: #fff; font-size: 2rem; } .sidebar-nav > ul { list-style: none; padding-left: 0; margin-bottom: .5rem; } a.sidebar-nav-item { font-weight: bold; display: block; line-height: 1.75; padding: .25rem 0; border-bottom: 1px solid rgba(255, 255, 255, 0.2); } @media screen { .y-drawer-scrim { z-index: 2; } .y-drawer-content { width: 18rem; left: -17.5rem; z-index: 3; } } @media screen and (min-width: 97.5em) { .y-drawer-content { width: calc(50% - 28rem); } } .sidebar-social { margin-bottom: .5rem; } .sidebar-social > ul { list-style: none; padding-left: 0; margin: 0 -.25rem; } .sidebar-social > ul > li { float: left; margin: 0 .25rem; } .sidebar-social > ul > li > a { display: inline-block; text-align: center; font-size: 1.6rem; line-height: 3rem; width: 3.1249rem; height: 4rem; padding: .5rem 0; } .sidebar-social > ul li + li { margin-top: 0; } .fixed-top { position: fixed; top: 0; left: 0; width: 100%; z-index: 1; } .navbar > .content { padding-top: 0; padding-bottom: 0; min-height: 0; height: 0; } .menu { display: inline-block; padding: 1.75rem 1.5rem; border-bottom: none; margin-left: -1.5rem; color: #9a9a9a !important; } .menu::after { content: "\2630"; } @media screen and (min-width: 54em) { .menu { padding: 1.25rem 1.5rem; position: absolute; left: -9999px; } .menu:focus { position: static; } } .animation-main { pointer-events: none; } .loading { display: none; } @media print { .menu { display: none; } } .animation-main { opacity: 0; will-change: opacity; } .loading { position: absolute; top: 0; right: 0; padding: 5.25rem 4.5rem; transform-origin: top right; transform: scale(0.33); } .content { position: relative; margin-left: auto; margin-right: auto; padding: 5rem 1rem 12rem; } @media screen { .content { max-width: 38rem; padding-left: 1.5rem; min-height: 100vh; } } @media screen and (min-width: 54em) { .content { max-width: 42rem; padding: 4rem 1rem 12rem; margin-left: 22rem; margin-right: 4rem; } } @media screen and (min-width: 72em) { .content { margin-left: 22rem; margin-right: 4rem; } } @media screen and (min-width: 92em) { .content { max-width: 48rem; } } @media screen and (min-width: 97.5em) { .content { margin: auto; } } .me { float: right; width: 6.5rem; height: 6.5rem; margin-left: 1rem; margin-bottom: .5rem; border-radius: 100%; position: relative; } @media screen and (min-width: 40em) { .me { width: 7rem; height: 7rem; } } @media screen and (min-width: 54em) { .me { width: 6.5rem; height: 6.5rem; } } @media screen and (min-width: 60em) { .me { width: 7rem; height: 7rem; } } main > footer { position: absolute; bottom: 0; left: 0; right: 0; padding: 0 1rem; color: #9a9a9a; font-size: smaller; text-align: center; } main > footer > p { margin-bottom: 0; } /* .card, .pagination-item { border-radius: 0!important; } */ /* @media screen { .sidebar-sticky { left: 2rem; max-width: none; } } */ html { font-family: Helvetica, Arial, sans-serif; } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: Helvetica, Arial, sans-serif; } </style> <link id="_stylePreload" rel="preload" as="style" href="/assets/css/hydejack.css?v=6.6.1"> <script>document.getElementById('_stylePreload').onload=function(){this.rel='stylesheet'}</script> <!-- NOTE: These styles interact with JavsScript, so they MUST NOT be changed --> <style id="_pageStyle"> .content a { color: #4f86aa; border-color: rgba(79, 134, 170, 0.2); } .content a:hover { border-color: #4f86aa; } :focus { outline-color: #4f86aa; } ::selection { color: #fff; background: #4f86aa; } ::-moz-selection { color: #fff; background: #4f86aa; } </style> <noscript> <link rel="stylesheet" href="/assets/css/hydejack.css?v=6.6.1"> <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|Noto+Sans:400,400i,700,700i"> <style> html { font-family: 'Noto Sans', Helvetica, Arial, sans-serif } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: 'Roboto Slab', Helvetica, Arial, sans-serif } </style> <link rel="stylesheet" href="/assets/icomoon/style.css"> </noscript> <!--<![endif]--> <!--[if gt IE 8]><!----> <script async src="/assets/bower_components/webfontloader/webfontloader.js"></script> <!--<![endif]--> </head> <body> <div class="navbar fixed-top"> <div class="content"> <span class="sr-only">Jump to:</span> <a id="_menu" class="menu no-hover" href="#_title"> <span class="sr-only">Menu</span> </a> </div> </div> <div id="_yPushState"> <div class="fade-in"> <main id="_main" class="content" role="main" data-color="#4f86aa" data-image=""> <article id="post-c%E8%AF%AD%E8%A8%80/2011/05/30/vc6%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/c%E8%AF%AD%E8%A8%80/2011/05/30/vc6-e5-bc-80-e5-8f-91-e7-8e-af-e5-a2-83.html" data-flip="title"> vc6开发环境 </a> </h1> <p class="post-date heading"> <time datetime="2011-05-30T15:58:52+08:00">30 May 2011</time> in <span>C语言</span> on <span>Vc</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>visual assist <br />快捷键设置： <br />发现tools/custermize/keyborad/category/add-ins里面有visualx的设置，但是都是些没用的。</p> <p class="read-more">Continue reading <a class="heading" href="/c%E8%AF%AD%E8%A8%80/2011/05/30/vc6-e5-bc-80-e5-8f-91-e7-8e-af-e5-a2-83.html" data-flip="title">vc6开发环境</a></p> </article> <article id="post-c%E8%AF%AD%E8%A8%80/2011/05/30/pophunter%e7%90%90%e7%a2%8e" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/c%E8%AF%AD%E8%A8%80/2011/05/30/pophunter-e7-90-90-e7-a2-8e.html" data-flip="title"> pophunter琐碎 </a> </h1> <p class="post-date heading"> <time datetime="2011-05-30T15:57:29+08:00">30 May 2011</time> in <span>C语言</span> on <span>C</span>, <span>Mfc</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">c 数组指针申明方法</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">char *p;//原始类型直接</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Type (*p) [];//申明</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">p = (Type (*) []) long;//转换</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">vc6在win7上有如下毛病:</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">1:添加文件右键菜单不起作用，在网上搜，要装个古怪的插件</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2:要将vc6快捷图标设置为管理员运行，否则有些插件运行不了</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">有些编译不通过时，需要更新sdk:</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">见下文:</span> <br /><a href="http://social.msdn.microsoft.com/forums/en-US/Vsexpressvc/thread/c5c3afad-f4c6-4d27-b471-0291e099a742/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://social.msdn.microsoft.com/forums/en-US/Vsexpressvc/thread/c5c3afad-f4c6-4d27-b471-0291e099a742/</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">下载地址:</span> <br /><a href="http://www.microsoft.com/downloads/en/details.aspx?FamilyId=0BAF2B35-C656-4969-ACE8-E4C0C0716ADB&amp;displaylang=en"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://www.microsoft.com/downloads/en/details.aspx?FamilyId=0BAF2B35-C656-4969-ACE8-E4C0C0716ADB&amp;displaylang=en</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">安装后在tools/options/directories里面添加包含</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">但是我发现include里面由mfc文件夹，lib里面却没有。导致在编译时如果查找inlcude/mfc就会说找不到连接符号，所以就去掉mfc文件夹只包含include文件夹。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">对于win7系统请使用最新sdk</span> <br /><a href="http://www.microsoft.com/downloads/en/details.aspx?FamilyID=6b6c21d2-2006-4afa-9702-529fa782d63b&amp;displaylang=en"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://www.microsoft.com/downloads/en/details.aspx?FamilyID=6b6c21d2-2006-4afa-9702-529fa782d63b&amp;displaylang=en</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">对于web安装来说是不需要选择版本的。如果需要选择，看如下：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">The Windows SDK for Windows 7 and .NET Framework 3.5 SP1: Release Candidate has been released on the Microsoft Download Center in both </span><a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=6db1f17f-5f1e-4e54-a331-c32285cdde0c"><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #0066dd;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ISO</span></a><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> and</span><a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=f75f2ca8-c1e4-4801-9281-2f5f28f12dbd"><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #0066dd;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Web Setup</span></a><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> format.&#160; Web setup allows you to install a specific subset of the SDK you select without having to download the entire SDK; whereas the DVD ISO setup allows you to download the entire SDK to install later. </span> <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">With this release of the SDK, there are 3 ISOs to choose from based on the CPU (x86, x64, or Itanium) platform you are installing on. Each ISO will however allow you to build applications that target all the other CPU platforms.&#160; Thus if you install the x86 ISO (which only installs on x86 platforms), you will be able to create applications targeting x86, x64, and Itanium. [</span><span style="background-color: #ffff00;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">任何版本都可以编译其它平台上的软件</span><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">]</span> <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Which download is right for you?</span> <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">·&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">If your computer is X86, download&#160; GRC1SDK_EN_DVD.iso</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">·&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">If&#160; your computer is X64, download GRC1SDKX_EN_DVD.iso</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">·</span><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #984806;font-size: 13pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">If your computer is IA64, download GRC1SDKIAI_EN_DVD.iso (and send me mail.&#160; I’d love to hear how many folks are actually developing on IA64)</span> <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">--Karin</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">但安装后发现这个sdk不支持vc6,那我只好试试vc2010express了，安装了后又发现express版不带mfc,+_+，没法，只有安装旗舰版了。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none">fatal error LNK1103: debugging information corrupt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none">工程 setting/gernaral/ 去掉build debug infomation复选框</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none">vs2010生成文件确实很大，似乎不用mfc就小些。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none">mfc代码可以用vs2010编码，用vc6生成。但是要改配置：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none">使用unicode生成方式，这样好兼容。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none">vc6 unicode配置:</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">project setting/c,c++/processor definition:加入UNICODE,_UNICODE两项，去掉之前的编码项</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">可以使用_WIN32_WINNT=0x0500制定生成版本(未测试)</span></p> <p><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span><a href="http://kazge.com/wp-content/uploads/2011/05/image00.jpg"><img style="border-bottom: 0px;border-left: 0px;border-top: 0px;border-right: 0px" border="0" alt="image00" src="/assets/image00_thumb.jpg" width="236" height="244" /></a> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">在编译时可能会出现</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">1:cannot open file &quot;uafxcwd.lib&quot;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">这是由于mfc+unicode编码需要uafxcwd.lib库，vc6安装时要选择自定义安装并全选所有组件。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2:LNK2001: unresolved external symbol _WinMain@16</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">这也是mfc+unicode需要制定入口</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">wWinMainCRTStartup</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span><a href="http://kazge.com/wp-content/uploads/2011/05/image01.jpg"><img style="border-bottom: 0px;border-left: 0px;border-top: 0px;border-right: 0px" border="0" alt="image01" src="/assets/image01_thumb.jpg" width="644" height="440" /></a> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">vs2010自动生成的targetver.h里面需要包含的头文件vc6不需要</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">//#include &lt;WinSDKVer.h&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">//#include &lt;SDKDDKVer.h&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">VC乱码&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">VC 中，有时会遇到当字符串资源的属性(String table properties)设置为英文时输入的中文并不能在界面上正确显示，尽管在VC中显示正确。查看.rc文件，可以看到这些资源被放到了英文资源下。那 么如何正确显示呢？现在试着将字符串资源属性改成中文，重新build，可以发现还是不能正确显示。为什么呢？退出VC，打开rc文件，你会发现尽管这些 字符串资源放到了中文资源中，其中的中文字符都变成了乱码，再打开VC你会发现确实变成了乱码。这估计是UNICODE页面映射问题。怎么解决呢？其实很 简单，关闭VC，打开.rc文件，把没变成乱码前的那些字符串拷贝到中文资源中覆盖相应的乱码即可。</span> <br /><a href="http://topic.csdn.net/t/20021212/17/1255874.html"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://topic.csdn.net/t/20021212/17/1255874.html</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">所说的方法（修改code_page）应该也可行，不过没试。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">另外发现Project Settings-Resources-Language设置不起任何作用，这是比较奇怪的一件事。</span> </p> <p> <span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></p> <p class="read-more">Continue reading <a class="heading" href="/c%E8%AF%AD%E8%A8%80/2011/05/30/pophunter-e7-90-90-e7-a2-8e.html" data-flip="title">pophunter琐碎</a></p> </article> <article id="post-java/2011/05/30/%e3%80%90%e8%bd%ac%e3%80%91java-jnlp%e7%bb%84%e4%bb%b6%e6%95%b0%e5%ad%97%e7%ad%be%e5%90%8d%e5%88%b6%e4%bd%9c%e6%ad%a5%e9%aa%a4" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/2011/05/30/e3-80-90-e8-bd-ac-e3-80-91java-jnlp-e7-bb-84-e4-bb-b6-e6-95-b0-e5-ad-97-e7-ad-be-e5-90-8d-e5-88-b6-e4-bd-9c-e6-ad-a5-e9-aa-a4.html" data-flip="title"> JAVA JNLP组件数字签名制作步骤 </a> </h1> <p class="post-date heading"> <time datetime="2011-05-30T15:51:34+08:00">30 May 2011</time> in <span>Java</span> on <span>Java</span>, <span>数字签名</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <h1 id="internal-source-marker_0.8754459735746247"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">=============================================================</span> <br /><span style="background-color: #808080;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">标题：</span><span style="background-color: #808080;font-style: normal;font-family: arial black;color: #ffffff;font-size: 12pt;vertical-align: baseline;font-weight: bold;text-decoration: none">JAVA JNLP组件数字签名制作步骤</span> <br /><span style="background-color: #808080;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">关键字：JNLP 数字签名 java</span> <br /><span style="background-color: #808080;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">作者：iuprg</span> <br /><span style="background-color: #808080;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">2009 5.15</span> <br /><span style="background-color: #808080;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">领域：Java j2ee</span> <br /><span style="background-color: #808080;font-style: normal;font-family: arial black;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">web 页面 JNLP组件下载运行的数字签名</span> <br /><span style="background-color: #808080;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">[本文禁止转载,属于个人笔记]</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">=============================================================</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">这个证书签名需要专门购买，中国的数字签名机构好象还不成熟吧？</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">我这里只讨论自己的证书，也就是匿名的证书。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">为JAR签名需要两个工具：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #339966;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">1。用keytool来创建一个密匙（同时指定时效，多久会过期，默认只给 6个月）</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #339966;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2。用JARSigner用此密匙为JAR签名。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">可以用同一个密匙来为多个JAR签名。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #ff0000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">注意：大小写，签名一致，数字签名过期</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">[谢绝转载，如有刊登请email联系drs163@163.com]</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #3366ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">为 什么JAR要被签名？当用户启动一个Java Network Launching Protocol (JNLP，Java网络加载协议)文件或使用一个applet时，这个JNLP或applet可能请求系统提供一些非一般的访问。比如“文件打开”等进 行这样的请求，就需要签名的JAR。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #3366ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">如果它是匿名的，系统会询问用户是否打算信任JAR的签署者。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #3366ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">1.首先生成签名文件，执行完成后，会在本目录内生成一个.keystore的密钥文件，2kByte大小。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">yourProj是别名 keypass后面是密文密码，keystore密码是存储密码（要改变此文时需要输入确认此密码）【删掉默认的.</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">的</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">keystore就会创建新的】</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">在dos命令提示状态下输入</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">C:\Documents and Settings\Administrator&gt;keytool -genkey -alias yourProj -keypas</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">s yourCompany:Kouling</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">[回车],屏幕提示:</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">输入keystore密码：&#160; yourCompany:yourPassword</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">您的名字与姓氏是什么？</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> [Unknown]：&#160; ChinayourCompany</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">您的组织单位名称是什么？</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> [Unknown]：&#160; ChinayourCompany.com</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">您的组织名称是什么？</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> [Unknown]：&#160; Company</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">您所在的城市或区域名称是什么？</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> [Unknown]：&#160; City</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">您所在的州或省份名称是什么？</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> [Unknown]：&#160; Province</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">该单位的两字母国家代码是什么</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> [Unknown]：&#160; CN</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">CN=ChinayourCompany, OU=ChinayourCompany.com, O=Company, L=City, ST=Province, C=CN 正确</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">吗？</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">[否]：&#160; Y</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">[谢绝转载，如有刊登请email联系drs163@163.com]</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #333399;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">2.为此密钥加 有效期限：7200天，将近20年. [嘿嘿，足够用了吧？ 再也别想6个月]</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #333399;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">输入命令：</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">C:\Documents and Settings\Administrator&gt;keytool -genkey -alias yourProj -keypass yourCompany:Kouling -selfcert -validity 7200</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">屏幕提示：</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">输入keystore密码：&#160; yourCompany:yourPassword</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">注意：-validity 7200 这个就是加时效的参数，7200单位是“天”。</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">检查密钥文件，输入命令：</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">C:\Documents and Settings\Administrator&gt;keytool -list</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">屏幕提示：</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">输入keystore密码：&#160; yourCompany:yourPassword</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Keystore 类型： jks</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Keystore 提供者： SUN</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">您的 keystore 包含 1 输入</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">yourProj, 2009-5-15, keyEntry,</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">认证指纹 (MD5)： D4:9D:C7:3A:91:B4:30:6A:4D:50:F1:7C:E7:F5:B9:49</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">说明已经生成成功完成！</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #333399;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">3.开始为Jar包文件签名</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #333399;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">用JARsigner工具</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #333399;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">切换到项目jar包所在目录</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #333399;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">D:\yourPassword's--works\yourProj\webroot\app 的目录</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #333399;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">输入dir可以看到：</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2009-04-30&#160; 18:37&#160;&#160;&#160; &lt;DIR&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; .</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2009-04-30&#160; 18:37&#160;&#160;&#160; &lt;DIR&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ..</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2009-04-30&#160; 17:55&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 56,317 commons-logging-1.1.jar</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2009-04-30&#160; 18:37&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 550,863 yourCompany-app-v1.0.1.jar</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #333399;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">输入命令 ：</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">jarsigner -verbose -certs commons-logging-1.1.jar yourProj</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #ff0000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">注：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #ff0000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">verbose输出详细信息</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #ff0000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">certs表示验证此jar包时输出证书信息</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">屏幕提示：</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">输入密钥库的口令短语： yourCompany:yourPassword</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">输入 yourProj 的密钥口令： yourCompany:Kouling</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160; 正在添加： META-INF/YOURPROJ.SF</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160; 正在添加： META-INF/YOURPROJ.DSA</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160; 正在添加： org/</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160; 正在添加： org/apache/</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160; 正在添加： org/apache/commons/</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160; 正在添加： org/apache/commons/logging/</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160; 正在添加： org/apache/commons/logging/impl/</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">。。。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">。。。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">接着输入：</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">D:\yourProj\webroot\app&gt;jarsigner -verbose -certs yourCompany-app-v1.0.1.jar yourProj</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">屏幕提示：</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">输入密钥库的口令短语： yourCompany:yourPassword</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">输入 yourProj 的密钥口令： yourCompany:Kouling</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160; 正在添加： META-INF/YOURPROJ.SF</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160; 正在添加： META-INF/YOURPROJ.DSA</span> <br /><span style="background-color: #000000;font-style: normal;font-family: arial;color: #ffffff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160; 正在添加： org/</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #ff0000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">注意：重要签名给yourCompany-app-v1.0.1.jar文件，但它使用了另外的几个commonsxxxx包，也要签名，否则将来使用时会提示签名不一致的错误！</span> <br /><span style="background-color: #ffffff;font-style: normal;font-family: arial;color: #333399;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">4。打开jar包文件的 META-INF目录可以看到</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #008080;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">yourProj.SF</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #008080;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">yourProj.DSA</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">以及被扩充的MANIFEST.MF文件</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">表明已经加入了签名文件</span> <br /><span style="background-color: #808080;font-style: normal;font-family: arial;color: #ff0000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">[完毕]</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">[演示图片]</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">1。签名文件</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2。实际运行时的签名提示图和时效</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">[谢绝转载，如有刊登请email联系drs163@163.com]</span><img src="/assets/HC3lT17gondf1jtHUZmPnOhPNRZJIUGojxBnppwWWiQOyubfTKxJ1MTdRS69ZwlGiKV6kYH9_-woUYkSPVrgEp0PiwCuU-q17o1SKYeUnM1zHKTaQA" width="615" height="452" /><img src="/assets/5ic46PiTni_8uYjyOY8i8u2HMQKTW4OLcjKAF_sgS9fc1ELUQJSvp5QLcfvPvUuwmWQcCpYI9RmEO1mh6fazGPvJ7KtQvtJJk1shQMx7aAA4ro7HHA" width="684" height="426" /> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></h1> <p class="read-more">Continue reading <a class="heading" href="/java/2011/05/30/e3-80-90-e8-bd-ac-e3-80-91java-jnlp-e7-bb-84-e4-bb-b6-e6-95-b0-e5-ad-97-e7-ad-be-e5-90-8d-e5-88-b6-e4-bd-9c-e6-ad-a5-e9-aa-a4.html" data-flip="title">JAVA JNLP组件数字签名制作步骤</a></p> </article> <article id="post-%E6%95%B0%E6%8D%AE%E5%BA%93/2011/05/30/%e3%80%90%e8%bd%ac%e3%80%91%e6%b5%85%e8%b0%88%e6%94%b9%e8%bf%9b%e6%95%b0%e6%8d%ae%e5%ba%93%e5%ba%94%e7%94%a8%e7%b3%bb%e7%bb%9f%e6%80%a7%e8%83%bd%e7%9a%84%e5%b8%b8%e7%94%a8%e7%ad%96%e7%95%a5" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/2011/05/30/e3-80-90-e8-bd-ac-e3-80-91-e6-b5-85-e8-b0-88-e6-94-b9-e8-bf-9b-e6-95-b0-e6-8d-ae-e5-ba-93-e5-ba-94-e7-94-a8-e7-b3-bb-e7-bb-9f-e6-80-a7-e8-83-bd-e7-9a-84-e5-b8-b8-e7-94-a8-e7-ad-96-e7-95-a5.html" data-flip="title"> 【转】浅谈改进数据库应用系统性能的常用策略 </a> </h1> <p class="post-date heading"> <time datetime="2011-05-30T15:47:25+08:00">30 May 2011</time> in <span>数据库</span> on <span>数据库</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> </p> <p><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 22pt;vertical-align: baseline;font-weight: normal;text-decoration: none"><font size="1">注本文版权由文章原作者所有，如果作者认为本转载侵犯了原作者的权利，请与管理员联系 </font><a href="mailto:admin@ig2net.info"><font size="1">admin@ig2net.info</font></a></span></p> <p><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 22pt;vertical-align: baseline;font-weight: normal;text-decoration: none">浅谈改进数据库应用系统性能的常用策略</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">陆兆洁&#160; 南宁经济信息中心</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> </p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">摘要：本文主要简述了改进数据库应用系统性能的常用策略，并从系统层次架构角度分别介绍了在不同领域所采用的方法，本文的侧重点放在解决问题的方法论上，期待能够达到抛砖引玉之效。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">1&#160; 引言</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">数据交互复杂度与频度的提升，导致了数据库在运维、迁移和规模扩展进程中的性能问题。作为一项确保企业IT基础部件健康运营的关键技术，数据库性能优化的实现路径和IT系统管理架构越来越密不可分。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">在数据库成熟应用的时代，数据库的性能优化已经演变为一项相当严密的系统工程。作为企业IT基础设施的核心部件之一，数据库并不是孤立的系统，它与网络、操作系统、存储等硬件系统紧密相连，这种与其他IT部件的多重连接特性决定了数据库性能优化是一门综合技术。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2&#160; 数据库应用系统性能的优化</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">完整的数据库性能优化周期可以分为</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">两个阶段</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">，一是设计与开发阶段，主要负责对数据库逻辑和物理结构的优化设计，使其在满足具体业务需求的前提下，系统性能达到最佳，同时系统开销最小；二是数据库的运行阶段，其优化手段以数据库级、操作系统级、网络级为主。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2.1&#160; 数据库的设计和开发阶段</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">数据库性能下降很大一部分的风险是能够在数据库的设计阶段予以规避的。因此，设计优化也就成为了数据库性能优化技术的源头和方向。由于数据库</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">逻辑结构</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">的不合理、</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">索引</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">设计不合理，开发阶段的技术冲突无法调适，多种因素的累积作用导致了许多数据库系统上线后不久即出现性能故障的案例不在少数。比较生命周期的调优成本与调优收益曲线，性能调优的成本随软件生命周期进程而增加，但调优收益却随软件生命周期进程而减少。在该阶段的具体实现上一般表现为某一类数据库,其性能的改进主要体现在逻辑设计和物理设计上。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2.1.1&#160; 数据库的逻辑设计</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">数据库的逻辑结构是由一些数据库对象组成，如数据库表空间、表、索引、段、视图、存储过程、触发器等。数据库的逻辑存储结构(表空间等)决定了数据库的物理空间是如何被使用的，数据库对象如表、索引等分布在各个表空间中。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">数据库的逻辑配置对数据库性能有很大的影响,因此首先要对数据库中的逻辑对象根据他们的使用方式和物理结构对数据库的影响来进行分类,这种分类包括将系统数据和用户数据分开、一般数据和索引数据分开、低活动表和高活动表分开等等。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">数据库逻辑设计的结果应当符合下面的准则摘要：</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">（1）把以同样方式使用的段类型存储在一起；</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">（2）按照标准使用来设计系统；</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">（3）存在用于例外的分离区域；</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">（4）最小化表空间冲突；</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">（5）将数据字典分离。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">逻辑结构优化用通俗的话来说就是通过增加、减少或调整逻辑结构来提高应用的效率，可以从以下几个方面来精练数据库的逻辑设计:</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: bold;text-decoration: none">1、基本表扩展</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">数据库性能包括存储空间需求量的大小和查询响应时间的长短两个方面。为了优化数据库性能，需要对数据库中的表进行规范化。一般来说，逻辑数据库设计满足第三范式的表结构轻易维护且基本满足实际应用的要求。所以，实际应用中一般都按照</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">第三范式的标准进行规范化</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">，从而保证了数据库的一致性和完整性，设计人员往往会设计过多的表间关联，以尽可能地降低数据冗余。但在实际应用中这种做法有时不利于系统运行性能的优化:如过程从多表获取数据时引发大量的连接操作，在需要部分数据时要扫描整个表等，这都消耗了磁盘的I/O和CPU时间。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">为解决这一问题，在设计表时应同时考虑对某些表进行</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">反规范化</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">，方法有以下几种:一是</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">分割表</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">。分割表可分为水平分割表和垂直分割表两种:水平分割是按照行将一个表分割为多个表，这可以提高每个表的查询速度，但查询、更新时要选择不同的表，统计时要汇总多个表，因此应用程序会更复杂。垂直分割是对于一个列很多的表，若某些列的访问频率远远高于其它列，就可以将主键和这些列作为一个表，将主键和其它列作为另外一个表。通过减少列的宽度，增加了每个数据页的行数，一次I/O就可以扫描更多的行，从而提高了访问每一个表的速度。但是由于造成了多表连接，所以应该在同时查询或更新不同分割表中的列的情况比较少的情况下使用。二是</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">保留冗余列</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">。当两个或多个表在查询中经常需要连接时，可以在其中一个表上增加若干冗余的列，以避免表之间的连接过于频繁，一般在冗余列的数据不经常变动的情况下使用。三是</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">增加派生列</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">。派生列是由表中的其它多个列的计算所得，增加派生列可以减少统计运算，在数据汇总时可以大大缩短运算时间。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">因此，在数据库的设计中，数据应当按两种类别进行组织:频繁访问的数据和频繁修改的数据。</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">对于频繁访问但是不频繁修改的数据，内部设计应当物理不规范化。对于频繁修改但并不频繁访问的数据，内部设计应当物理规范化。</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">有时还需将规范化的表作为逻辑数据库设计的基础，然后再根据整个应用系统的需要，物理地非规范化数据。规范与反规范都是建立在实际的操作基础之上的约束，脱离了实际两者都没有意义。只有把两者合理地结合在一起，才能相互补充，发挥各自的优点。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: bold;text-decoration: none">2、索引的建立</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">创建索引是提高检索效率最有效的方法之一，索引把表中的逻辑值映射到安全的RowID，能快速定位数据的物理地址，可以大大加快数据库的查询速度，一个建有合理索引的数据库应用系统可能比一个没有建立索引的数据库应用系统效率高几十倍，但并不是索引越多越好，在那些经常需要修改的数据列上建立索引，将导致索引B*树的不断重组，造成系统性能的下降和存储空间的浪费。对于一个大型表建立的索引，有时并不能改善数据查询速度，反而会影响整个数据库的性能。这主要是和SGA的数据治理方式有关，Oracle在进行数据块高速缓存治理时，索引数据比普通数据具有更高的驻留权限，在进行空间竞争时，Oracle会先移出普通数据，对建有索引的大型表进行数据查询时，索引数据可能会用完所有的数据块缓存空间，Oracle不得不频繁地进行磁盘读写来获取数据，所以，在对一个大型表进行分区之后，可以根据相应的分区建立分区索引。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2.1.2&#160; 数据库的物理设计</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">数据库物理设计需要对时间效率、空间效率、维护代价和各种用户要求进行权衡,结果会产生多种方案,必须对此进行细致评价,选择一个较优的方案作为数据库的物理结构。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">数据库的数据最终是存储在物理磁盘上的，对数据进行访问就是对这些物理磁盘进行读写，因此对于这些物理存储的优化是系统优化的一个重要部分。对于物理存储结构优化，主要是合理地分配逻辑结构的物理存储地址，这样虽不能减少对物理存储的读写次数，但却可以使这些读写尽量并行，减少磁盘读写竞争，从而提高效率，也可以通过对物理存储进行精密的计算减少不必要的物理存储结构扩充，从而提高系统利用率。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">为了避免数据库文件之间的竞争，在物理设计时，文件应该被放到不同的I／O通道，跨越驱动器的文件分离，避免磁盘争用成为一个“瓶颈”。主要应该注意以下几点技巧：把关键数据文件分布在各个可用的磁盘上，这些文件包括表空间、回滚段或UNDO段、联机重做日志文件、操作系统盘、经常访问的表的数据文件以及经常访问的索引的数据文件；把数据和索引文件分开放置；对于经常连接的表，把它们的数据和索引表空间分开，这样每个表上的信息就不会放在相同的磁盘上；把控制文件的多个备份存储到不同的磁盘和控制器上，以最终实现操作并行化。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">同时，还应将</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">表数据和索引数据分开表空间存储</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">，分别使用独立的表空间。因为假如将表数据和索引数据放在一起，表数据的I/O操作和索引的I/O操作将产生影响系统性能的I/O竞争，降低系统的响应效率。将表数据和索引数据存放在不同的表空间中，并在物理层面将这两个表空间的数据文件放在不同的物理磁盘上，就可以避免这种竞争了。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2.2&#160; 数据库的运行阶段</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">数据库的运行管理主要通过对数据库运行环境进行调整来达到改进性能的目的。在决定进行系统性能调优级时,首先应制定一个完善的调优级方案,先监控系统并分析问题所在,然后根据分析结果每次调整一个参数,再进一步监控系统查看系统性能有无变化,然后做进一步调节。其中有一个重要的原则:每次最好只调节一个参数。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2.2.1&#160; 数据库级参数性能调优</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">一般来说，数据库管理系统(DBMS)中与性能相关的参数都与对系统物理内存的设置有关，换言之，数据库级参数性能优化即是DBMS对系统内存的配置。通常，只要将这些主要参数设置好就会显著改善数据库系统的性能，因此，配置好数据库系统参数，是优化数据库系统运行环境的关键。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">数据库管理系统对系统内存的配置应尽可能实现如下目标：</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">一是减少分页:当系统执行分页时，会将当前没有使用的信息从内存移到硬盘上。这样就可以为当前需要内存的程序分配内存。如果频繁地发生分页，系统性能就会严重降低，从而导致很多程序的执行时间变长。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">二是减少内存交换：当系统执行内存交换时，会将活动进程临时地从内存移到硬盘上，这样另一个活动进程就可以得到所需要的内存。内存交换基于系统循环时间。如果内存交换过于频繁，就会产生大量的磁盘I/O，应用的性能可能会急剧恶化。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">三是扩大高速数据存储内存缓冲区容量：用户的进程对这个内存区发送事务，并且以这里作为高速缓存读取命中的数据，以实现加速的目的。主要包括数据块缓冲、数据字典缓冲、恢复回滚日志缓冲以及SQL共享池等这几个部分摘要。对这些内存缓冲区的合理设置，可以大大加快数据查询速度，提高内存区的命中率。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2.2.2&#160; 操作系统级参数性能调优</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">(1)进行定期的磁盘检查和磁盘空间清理,当系统运行一段时间后,会出现一定的文件错误和磁盘碎片,此时就需要进行磁盘整理。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">(2)自动关闭停止响应的程序,无须进行手工干预。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">(3)调整应用程序优先级,让常用程序拥有较高的优先权,自然运行速度就会快些。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">(4)配置操作系统核心使用更少的内存。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">(5)配置操作系统与DBMS相关的内核参数以便将更多的系统内存留给DBMS使用。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2.2.3&#160; 网络级参数性能调优</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">网络带宽会影响系统性能，减少网络负载，可以改善系统的性能。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">负载均衡将是大型应用高负荷访问和大量并发请求采用的终极解决办法,它提供了一种有效的方法来扩充服务器带宽,增加吞吐量,提高网络的灵活性和可用性。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">对负载均衡的应用,可以从网络的不同层次入手,具体情况要看瓶颈所在,不外乎从传输链路聚合、采用更高层网络交换技术和设置服务器集群策略三个角度实现,一个典型的使用负载均衡的策略就是,在软件或者硬件四层交换的基础上搭建集群,这样的架构成本低、性能高还有很强的扩张性,随时往架构里面增减节点都非常容易。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">3&#160; 结束语</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">在应用丛生、高度分布式的环境中，要总结出一套“放之四海皆准”的数据库性能优化方法论并不容易。但结合企业自身特色的性能优化流程却是有据可循的。同时，数据库性能优化方法还具有浓重的行业色彩。</span></p> <p style="margin-top: 0pt;text-indent: 28pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: normal;text-decoration: none">在对数据库应用系统改进所采取的策略中,前面提到的每个方法可能都会被用到,本文介绍得比较粗浅,具体实现过程中很多细节还需要慢慢熟悉和体会,有时一个很小的参数设置,对于系统性能的影响就会很大,在此仅概而述之,以期达到抛砖引玉之效</span></p> <p> <span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></p> <p class="read-more">Continue reading <a class="heading" href="/%E6%95%B0%E6%8D%AE%E5%BA%93/2011/05/30/e3-80-90-e8-bd-ac-e3-80-91-e6-b5-85-e8-b0-88-e6-94-b9-e8-bf-9b-e6-95-b0-e6-8d-ae-e5-ba-93-e5-ba-94-e7-94-a8-e7-b3-bb-e7-bb-9f-e6-80-a7-e8-83-bd-e7-9a-84-e5-b8-b8-e7-94-a8-e7-ad-96-e7-95-a5.html" data-flip="title">【转】浅谈改进数据库应用系统性能的常用策略</a></p> </article> <article id="post-html5/2011/05/30/%e3%80%90%e8%bd%ac%e3%80%91web%e5%89%8d%e7%ab%af%e5%9c%a8%e7%a7%bb%e5%8a%a8" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/html5/2011/05/30/e3-80-90-e8-bd-ac-e3-80-91web-e5-89-8d-e7-ab-af-e5-9c-a8-e7-a7-bb-e5-8a-a8.html" data-flip="title"> 【转】Web前端在移动 </a> </h1> <p class="post-date heading"> <time datetime="2011-05-30T15:44:03+08:00">30 May 2011</time> in <span>Html5</span> on <span>Javascript web 前端</span>, <span>Web</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> </p> <h1 id="internal-source-marker_0.41015600308515376"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 24pt;vertical-align: baseline;font-weight: bold;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><a href="http://www.cnblogs.com/gzterrytan/archive/2011/02/18/1957398.html"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 24pt;vertical-align: baseline;font-weight: bold;text-decoration: underline">Web前端在移动</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 24pt;vertical-align: baseline;font-weight: bold;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">Web前端的起源</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">Web应用诞生</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">：随着GMail、 Google Map等优秀Web应用出现，Ajax在2004年之后一度成为热门话题。经过几年的发展，一批以Prototype、Dojo、Ext为首的 Ajax+UI的浏览器兼容框架不断出现。UI和Web中间新增了一层以Javascript为核心，专门处理数据传输、Web交互等内容的开发 层，Web前端。Web前端伴随Web应用而诞生，并逐步走来。</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">Web宿主之争</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">：随着RESTful Web Service潮流的发展，后台服务也迅速实现了数据云端化，接口API化。但受IE垄断和发展缓慢的影响，Web前端始终走不出浏览器能力不足和兼容性 问题突出的困局。开发维护浏览器插件、Flash控件等更是无奈的选择。Web前端往往因为需要兼容IE6、IE7、FF、有无插件、有无Flash等情 况付出巨大开发代价。2006年，John Resig的jQuery框架从某个意义上解决了这个问题。我认为最大的突破在于让老旧浏览器适配新的Web标准，满足了开发者开发高效而兼容老旧浏览器 的需要。</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">Web标准化之路</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">：Google 在 2008年推出了Webkit核心的浏览器Chrome（后来也发布了ChromeOS）。随着FireFox，Chrome，Safari，Opera 等浏览器开始对HTML5和CSS3的深入支持以及性能的不断优化，IE市场占有率的持续下滑。Web标准化终于等到了一个发展机遇。2010 年，HTML5和CSS3被Webkit核心的Chrome、Safari绚丽地实现后，IE9也表示全面支持HTML5后。Web标准进入一个高速发展 阶段。随后，浏览器GPU加速也浏览器厂商们所接受。在Web标准化、离线化、硬件化的浪潮中，Web应用逐渐具备了替代桌面应用条件和能力。Web前端 开发也在逐步取代桌面应用客户端开发。</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">移动Web应用背景</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">非智能机时代</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">：Java和WAP是取代短信SP后的第一种移动互联网实现方式。这个年代虽然荒蛮，但很纯真。</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">前智能机时代</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">：HP 把一台WinPPC 的PAD增加电话功能，做成第一台智能手机时。Windows Mobile和S60是这个时代的主角。基于手机系统的客户端应用就是移动互联网应用的最好形式。但是随着系统版本的不断升级，设备的差异不断增大。手机 客户端应用开发同样面临着与Web前端开发一样的兼容性开发效率和维护成本问题。</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">后智能机时代</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">：随着iPhone和 Android(HTC、摩托罗拉、三星等)手机等的热卖，两个电子市场生态链逐步形成。再加上最近诺基亚和微软和合作，电子市场生态链之争拉开帷幕。客 户端应用成为了电子市场生态链的主角。不过随着三方系统的竞争升级，也伴随浏览器的不断优化。先不论WP7，iPhone和Android阵营的浏览器都 是webkit核心的，差异只在于硬件加速能力和设备资源的差异。这恰好也是移动Web应用的发展机遇。</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">移动Web应用开发</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">需求</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">：</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 互联网是个产品线丰富的产业，但不可能对所有产品都投入巨大开发成本。WAP能满足基本使用需求，而客户端应用满足主线产品的高端需求。还有一大片中高端需求无法很好满足。遗憾的是，限于开发成本，用户没有与其高端设备相匹配的非主线产品客户端可用。</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 开发成本无法避免，但可以择优。我们可以通过移动Web应用的方式来次优替代非主线产品客户端。这也是廉价的移动应用实现方式。</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">现状</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">：</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 目前iOS和Android系统的浏览器都是webkit核心的，我们可以开发移动Web应用来满足这块需求。iOS支持硬件加 速，Android系统也能满足基本Webkit的API功能，适宜通过区分iOS来提供差异化服务。iOS的Mobile Safari有足够能力提供webkitTransForm（图形变换，3D变换支持硬件加速）、webkitTransition（CSS3动画）、 SQLite、LocalStorage（离线存储）、 WebSocket（iOS 4.2+）服务。至于Android，因为需要兼容参差的低端设备，还是不建议使用复杂图形变换和CSS3动画，其它能力可以通过判断能否支持来选择使 用。另外多点触摸、重力感应、地理位置还是根据能否支持和需要来使用，主要用于优化用户体验，不影响基本交互方式。</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">未来</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">：</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 移动Web应用的起点比PC Web应用的高，但适用范围较窄。但移动Web应用将成为Web应用的一种延伸，从开发角度来看，应该是殊途同归的。</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">小结</span></h1> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> Javascript的角色从诞生起的页面粘合剂转变成今天的Web应用开发语言，一路走来经过很多波折。有人喜欢他，有人讨厌他，在崇拜和谩 骂中成长过来。将来的路还很长，但迷雾已散去，前途是光明的。当中有无数人的付出汗水，也成就了少数应用的辉煌。不过他仍然是一个工具，为开发者服务，需 要人们一起来优化他，使用他。</span></h1> <p> <span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></p> <p class="read-more">Continue reading <a class="heading" href="/html5/2011/05/30/e3-80-90-e8-bd-ac-e3-80-91web-e5-89-8d-e7-ab-af-e5-9c-a8-e7-a7-bb-e5-8a-a8.html" data-flip="title">【转】Web前端在移动</a></p> </article> <article id="post-%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/2011/05/30/%e6%9e%b6%e6%9e%84%e8%93%9d%e5%9b%be-%e8%bd%af%e4%bb%b6%e6%9e%b6%e6%9e%84-41-%e8%a7%86%e5%9b%be%e6%a8%a1%e5%9e%8b" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/2011/05/30/e6-9e-b6-e6-9e-84-e8-93-9d-e5-9b-be-e8-bd-af-e4-bb-b6-e6-9e-b6-e6-9e-84-41-e8-a7-86-e5-9b-be-e6-a8-a1-e5-9e-8b.html" data-flip="title"> 架构蓝图--软件架构 "4+1" 视图模型 </a> </h1> <p class="post-date heading"> <time datetime="2011-05-30T15:42:32+08:00">30 May 2011</time> in <span>软件工程</span> on <span>Project</span>, <span>架构，工程</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>见维基百科</p> <p>http://en.wikipedia.org/wiki/Software_architecture</p> <p>2005 年 1 月 01 日</p> <blockquote><p>本文基于多个并 发视图的使用情况来说明描述软件密集型系统架构的模型。使用多重视图允许独立地处理各&quot;风险承担人&quot;：最终用户、开发人员、系统工程师、项目经理等所关注 的问题，并且能够独立地处理功能性和非功能性需求。本文分别对五种视图进行了描述，并同时给出了捕获每种视图的表示方法。这些视图使用以架构为中心的、场 景驱动以及迭代开发过程来进行设计。 </p></blockquote> <p><a name="N10033"></a>引言</p> <p>我们已经看到在许多文章和书籍中，作者欲使用单张视图来捕捉所有的系统架构要点。通过仔细地观察这些图例中的方框和箭头， 不难发现作者努力地在单一视图中表达超过其表达限度的蓝图。方框是代表运行的程序吗？或者是代表源代码的程序块吗？或是物理计算机吗？或仅仅是逻辑功能的 分组吗？箭头是表示编译时的依赖关系吗？或者是控制流吗？或是数据流吗？通常它代表了许多事物。是否架构只需要单个的架构样式？有时软件架构的缺陷源于过 早地划分软件或过分的强调软件开发的单个方面：数据工程、运行效率、开发策略和团队组织等。有时架构并不能解决所有&quot;客户&quot;（或者说&quot;风险承担 人&quot;，USC 的命名）所关注的问题。许多作者都提及了这个问题：Garlan &amp; Shaw <a href="http://www.ibm.com/developerworks/cn/rational/r-4p1-view/#resources">1</a>、CMU 的 Abowd &amp; Allen、SEI 的 Clements。作为补充，我们建议使用多个并发的视图来组织软件架构的描述，每个视图仅用来描述一个特定的所关注的方面的集合。 </p> <p><img alt="" src="/assets/blue_rule.gif" width="100%" height="1" /> <br /><img border="0" alt="" src="/assets/c.gif" width="8" height="6" /></p> <p><img alt="" src="/assets/c.gif" width="100%" height="4" /></p> <p><img border="0" alt="" src="/assets/u_bold.gif" width="16" height="16" /> <br /><a href="http://www.ibm.com/developerworks/cn/rational/r-4p1-view/#main"><b>回页首</b></a></p> <p><a name="N10040"></a>架构模型</p> <p>软件架构用来处理软件高层次结构的设计和实施。它以精心选择的形式将若干结构元素进行装配，从而满足系统主要功能和性能需 求，并满足其他非功能性需求，如可靠性、可伸缩性、可移植性和可用性。Perry 和 Wolfe 使用一个精确的公式来表达，该公式由 Boehm 做了进一步修改： </p> <p>软件架构 ＝ {元素，形式，关系/约束}</p> <p>软件架构涉及到抽象、分解和组合、风格和美学。我们用由多个视图或视角组成的模型来描述它。为了最终处理大型的、富有挑战 性的架构，该模型包含五个主要的视图（请对照图 1）：</p> <ul> <li>逻辑视图（Logical View），设计的对象模型（使用面向对象的设计方法时）。 </li> <li>过程视图（Process View），捕捉设计的并发和同步特征。 </li> <li>物理视图（Physical View），描述了软件到硬件的映射，反映了分布式特性。 </li> <li>开发视图（Development View），描述了在开发环境中软件的静态组织结构。</li> </ul> <p>架构的描述，即所做的各种决定，可以围绕着这四个视图来组织，然后由一些用例 （use cases）或场景(scenarios)来说明，从而形成了第五个视图。正如将看到的，实际上软件架构部分从这些场景演进而来，将在下文中讨论。</p> <p><a name="N10063"></a><b>图 1 － &quot;4＋1&quot;视图模型</b> <br /><img border="0" alt="图 1 － &quot;4＋1&quot;视图模型" src="/assets/image002.jpg" width="456" height="322" /></p> <p>我们在每个视图上均独立地应用 Perry &amp; Wolf 的公式，即定义一个所使用的元素集合（组件、容器、连接符），捕获工作形式和模式，并且捕获关系及约束，将架构与某些需求连接起来。每种视图使用自身所特 有的表示法－蓝图（blueprint）来描述，并且架构师可以对每种视图选用特定的架构风格（architectural style），从而允许系统中多种风格并存。</p> <p>我们将轮流的观察这五种视图，展现各个视图的目标：即视图的所关注的问题，相应的架构蓝图的标记方式，描述和管理蓝图的工 具。并以非常简单的形式从 PABX 的设计中，从我们在Alcatel 商业系统（Alcatel Business System）上所做的工作中，以及从航空运输控制系统（Air Traffic Control system）中引出一些例子―旨在描述一下视图的特定及其标记的方式，而不是定义这些系统的架构。 </p> <p>&quot;4+1&quot;视图模型具有相当的&quot;普遍性&quot;，因此可以使用其他的标注方法和工具，也可以采用其他的设计方法，特别是对于逻辑 和过程的分解。但文中指出的这些方法都已经成功的在实践中运用过。 </p> <p><a name="N1007C"></a>逻辑结构</p> <p>面向对象的分解</p> <p>逻辑架构主要支持功能性需求――即在为用户提供服务方面系统所应该提供的功能。系统分解为一系列的关键抽象，（大多数）来 自于问题域，表现为对象或对象类的形式。它们采用抽象、封装和继承的原理。分解并不仅仅是为了功能分析，而且用来识别遍布系统各个部分的通用机制和设计元 素。我们使用 Rational/Booch 方法来表示逻辑架构，借助于类图和类模板的手段 <a href="http://www.ibm.com/developerworks/cn/rational/r-4p1-view/#resources">4</a>。 类图用来显示一个类的集合和它们的逻辑关系：关联、使用、组合、继承等等。相似的类可以划分成类集合。类模板关注于单个类，它们强调主要的类操作，并且识 别关键的对象特征。如果需要定义对象的内部行为，则使用状态转换图或状态图来完成。公共机制或服务可以在类功能 （class utilities）中定义。对于数据驱动程度高的应用程序，可以使用其他形式的逻辑视图，例如 E-R 图，来代替面向对象的方法（OO approach）。 </p> <p>逻辑视图的表示法</p> <p>逻辑视图的标记方法来自 Booch 标记法4。当仅考虑具有架构意义的条目时，这种表示法相当简单。特别是在这种设计级别上，大量的修饰作用不大。我们使用 Rational Rose? 来支持逻辑架构的设计。</p> <p><a name="N10094"></a><b>图 2 － 逻辑蓝图的表示法</b> <br /><img border="0" alt="图 2 － 逻辑蓝图的表示法" src="/assets/image004.jpg" width="444" height="309" /></p> <p>逻辑视图的风格 </p> <p>逻辑视图的风格采用面向对象的风格，其主要的设计准则是试图在整个系统中保持单一的、一致的对象模型，避免就每个场合或过 程产生草率的类和机制的技术说明。</p> <p>逻辑结构蓝图的样例</p> <p>图 3 显示了 Télic PABX 架构中主要的类。 </p> <p><a name="N100B2"></a><b>图 3 － a. Télic PABX 的逻辑蓝图 b.空中交通系统的蓝图</b> <br /><img border="0" alt="图 3 － a. Télic PABX 的逻辑蓝图 b.空中交通系统的蓝图" src="/assets/image006.jpg" width="468" height="269" /></p> <p>PABX 建立终端间的通信连接。终端可以是电话设备、中继线（例如，连接到中央办公室）、连接线（PABX 专线到 PABX 线)、电话专线、数据线、ISDN 等等。不同的线路由不同的接口卡提供支持。线路 controller 对象的职责是在接口卡上对所有的信号进行解码和注入，在特定于接口卡的信号与一致性的小型事件集合之间进行相互转换：开始、停止、数字化等。 controller 对象同时承载所有的实时约束。该类派生出许多子类以满足不同的接口类型。terminal 对象的责任是维持终端的状态，代表线路协调各项服务。例如，它使用 numbering plan 服务来解释拨号。conversation 代表了会话中的一系列终端 。conversation 使用了Translation Service(目录、逻辑物理映射、路由),以及建立终端之间语音路径的Connection Service 。</p> <p>对于一个包含了大量的具有架构重要意义的类的、更大的系统来说，图 3 b 描述了空中交通管理系统的顶层类图，包含 8 个类的种类（例如，类的分组）。</p> <p><a name="N100C8"></a>进程架构</p> <p>过程分解 </p> <p>进程架构考虑一些非功能性的需求，如性能和可用性。它解决并发性、分布性、系统完整性、容错性的问题，以及逻辑视图的主要 抽象如何与进程结构相配合在一起－即在哪个控制线程上，对象的操作被实际执行。</p> <p>进程架构可以在几种层次的抽象上进行描述，每个层次针对不同的问题。在最高的层次上，进程架构可以视为一组独立执行的通信 程序（叫作&quot;processes&quot;）的逻辑网络，它们分布在整个一组硬件资源上，这些资源通过 LAN 或者 WAN 连接起来。多个逻辑网络可能同时并存，共享相同的物理资源。例如，独立的逻辑网络可能用于支持离线系统与在线系统的分离，或者支持软件的模拟版本和测试版 本的共存。</p> <p>进程是构成可执行单元任务的分组。进程代表了可以进行策略控制过程架构的层次（即：开始、恢复、重新配置及关闭）。另外， 进程可以就处理负载的分布式增强或可用性的提高而不断地被重复。</p> <p>软件被划分为一系列单独的任务。任务是独立的控制线程，可以在处理节点上单独地被调度。</p> <p>接着，我们可以区别主要任务、次要任务。主要任务是可以唯一处理的架构元素；次要任务是由于实施原因而引入的局部附加任务 （周期性活动、缓冲、暂停等等）。它们可以作为 Ada Task 或轻量线程来实施。 主要任务的通讯途径是良好定义的交互任务通信机制：基于消息的同步或异步通信服务、远程过程调用、事件广播等。次要任务则以会见或共享内存来通信。在同一 过程或处理节点上，主要任务不应对它们的分配做出任何假定。</p> <p>消息流、过程负载可以基于过程蓝图来进行评估，同样可以使用哑负载来实现&quot;中空&quot;的进程架构，并测量在目标系统上的性能。 正如 Filarey et al. 在他的 Eurocontrol 实验中描述的那样。</p> <p>进程视图的表示法</p> <p>我们所使用的进程视图的表示方法是从Booch最初为 Ada 任务推荐的表示方法扩展而来。同样，用来所使用的表示法关注在架构上具有重要意义的元素。(图 4) </p> <p><a name="N100EB"></a><b>图 4 － 过程蓝图表示法</b> <br /><img border="0" alt="图 4 － 过程蓝图表示法" src="/assets/image008.jpg" width="492" height="270" /></p> <p>我们曾使用来自 TRW 的 Universal Network Architechure Services（UNAS0） 产品来构建并实施过程和任务集合（包扩它们的冗余），使它们融入过程的网络中。UNAS 包含 Software Architect Lifecycle Environment(SALE)工具，它支持上述表示方法。SALE 允许以图形的形式来描述进程架构，包括对可能的交互任务通信路径的规格说明，正是从这些路径中自动生成对应的 Ada 或 C++ 源代码。使用该方法来指定和实施进程架构的优点是易于进行修改而不会对应用软件造成太多的影响。</p> <p>进程视图的风格 </p> <p>许多风格可以适用于进程视图。例如采用 Garlan 和 Shaw 的分类法1,我们可以得到管道和过滤器（Pipes and filters）,或客户端/服务器，以及各种多个客户端/单个服务器和多个客户端/多个服务器的变体。对于更加复杂的系统,可以采用类似于 K.Birman 所描述的ISIS系统中进程组方法以及其它的标注方法和工具。</p> <p>进程蓝图的例子</p> <p><a name="N10109"></a><b>图 5 － Télic PABX 的过程蓝图（部分）</b> <br /><img border="0" alt="图 5 － Télic PABX 的过程蓝图（部分）" src="/assets/image010.jpg" width="576" height="367" /></p> <p>所有的终端由单个的 Termal process 处理，其中 Termal process 由输入队列中的消息进行驱动。Controller 对象在组成控制过程三个任务之中的一项任务上执行：Low cycle rate task 扫描所有的非活动终端(200 ms)，将 High cycle rate task(10 ms)扫描清单中的终端激活，其中 High cycle rate task 检测任何重要的状态变化，将它们传递给 Main controller task，由它来对状态的变更进行解释,并通过向对应的终端发送消息来通信。这里 Controller 过程中的通信通过共享内存来实现。</p> <p><a name="N1011C"></a>开发架构</p> <p>子系统分解</p> <p>开发架构关注软件开发环境下实际模块的组织。软件打包成小的程序块（程序库或子系统），它们可以由一位或几位开发人员来开 发。子系统可以组织成分层结构，每个层为上一层提供良好定义的接口。</p> <p>系统的开发架构用模块和子系统图来表达，显示了&quot;输出&quot;和&quot;输入&quot;关系。完整的开发架构只有当所有软件元素被识别后才能加 以描述。但是，可以列出控制开发架构的规则：分块、分组和可见性。</p> <p>大部分情况下，开发架构考虑的内部需求与以下几项因素有关：开发难度、软件管理、重用性和通用性及由工具集、编程语言所带 来的限制。开发架构视图是各种活动的基础，如：需求分配、团队工作的分配（或团队机构）、成本评估和计划、项目进度的监控、软件重用性、移植性和安全性。 它是建立产品线的基础。</p> <p>开发蓝图的表示方法</p> <p>同样，使用 Booch 方法的变形，仅考虑具有架构意义的项。</p> <p><a name="N10136"></a><b>图 5 － 开发蓝图表示方法</b> <br /><img border="0" alt="图 5 － 开发蓝图表示方法" src="/assets/image012.jpg" width="492" height="252" /></p> <p>来自 Rational 的 Apex 开发环境支持开发架构的定义和实现、和前文描述的分层策略，以及设计规则的实施。Rational Rose 可以在模块和子系统层次上绘制开发蓝图，并支持开发源代码(Ada、C++）进程的正向和反向工程。</p> <p><a name="N10149"></a>开发视图的风格</p> <p>我们推荐使用分层（layered）的风格，定义 4 到 6 个子系统层。每层均具有良好定义的职责。设计规则是某层子系统依赖同一层或低一层的子系统，从而最大程度地减少了具有复杂模块依赖关系的网络的开发量，得 到层次式的简单策略。</p> <p><a name="N10154"></a><b>图 6 － Hughes 空中交通系统（HATS）的 5 个层</b> <br /><img border="0" alt="图 6 － Hughes 空中交通系统（HATS）的 5 个层" src="/assets/image014.jpg" width="528" height="312" /></p> <p>开发架构的例子 </p> <p>图 6 代表了加拿大的 Hughes Aircraft 开发的空中交通控制系统（Air Traffic Control system）产品线的 5 个分层开发组织结构。这是和图 3 b 描述的逻辑架构相对应的开发架构。</p> <p>第一层 和第二层组成了独立于域的覆盖整个产品线的分布式基础设施，并保护其免受不同硬件平台、操作系统或市售产品（如数据库管理系统）的影响。第三层为该基础设 施增加了 ATC 框架，形成一个特定领域的软件架构（domain-specific software architecture）。使用该框架,可以在第四层上构建一个功能选择板。层次 5 则非常依赖于客户和产品,包含了大多数用户接口和外部系统接口。72 个子系统分布于 5 个层次上，每层包含了 10 至 50 个模块，并可以在其他蓝图上表示。</p> <p><a name="N1016D"></a>物理架构</p> <p>软件至硬件的映射</p> <p>物理架构主要关注系统非功能性的需求，如可用性、可靠性（容错性），性能（吞吐量）和可伸缩性。软件在计算机网络或处理节 点上运行，被识别的各种元素（网络、过程、任务和对象），需要被映射至不同的节点；我们希望使用不同的物理配置：一些用于开发和测试，另外一些则用于不同 地点和不同客户的部署。因此软件至节点的映射需要高度的灵活性及对源代码产生最小的影响。</p> <p>物理蓝图的表示法 </p> <p>大型系统中的物理蓝图会变得非常混乱，所以它们可以采用多种形式，有或者没有来自进程视图的映射均可。</p> <p><a name="N10181"></a><b>图 7 － 物理蓝图的表示法</b> <br /><img border="0" alt="图 7 － 物理蓝图的表示法" src="/assets/image016.jpg" width="316" height="142" /></p> <p>TRW 的 UNAS 提供了数据驱动方法将过程架构映射至物理架构，该方法允许大量的映射 的变更而无需修改源代码。</p> <p>物理蓝图的示例</p> <p><a name="N10199"></a><b>图 8 － PABX 的物理蓝图</b> <br /><img border="0" alt="图 8 － PABX 的物理蓝图" src="/assets/image018.jpg" width="424" height="208" /></p> <p>图 8 显示了大型 PABX 可能的硬件配置,而图 9 和图 10 显示了两种不同物理架构上的进程映射，分别对应一个小型和一个大型 PABX。C、F 和 K 是三种不同容量的计算机，支持三种不同的运行要求。</p> <p><a name="N101AE"></a><b>图 9 － 带有过程分配的小型 PABX 物理架构</b> <br /><img border="0" alt="图 9 － 带有过程分配的小型 PABX 物理架构" src="/assets/image020.jpg" width="162" height="153" /> <br /><a name="N101C0"></a><b>图10－显示了过程分配的大型PABX物理蓝图</b> <br /><img border="0" alt="图10－显示了过程分配的大型PABX物理蓝图" src="/assets/image022.jpg" width="480" height="459" /></p> <p><a name="N101D0"></a>场景</p> <p>综合所有的视图 </p> <p>四种视图的元素通过数量比较少的一组重要场景（更常见的是用例）进行无缝协同工作，我们为场景描述相应的脚本（对象之间和 过程之间的交互序列）。正如 Rubin 和 Goldberg 所描述的那样6。</p> <p>在某种意义上场景是最重要的需求抽象，它们的设计使用对象场景图和对象交互图来表示4。 </p> <p>该视图是其他视图的冗余（因此&quot;＋1&quot;），但它起到了两个作用：</p> <ul> <li>作为一项驱动因素来发现架构设计过程中的架构元素，这一点将在下文中讨论。 </li> <li>作为架构设计结束后的一项验证和说明功能，既以视图的角度来说明又作为架构原型测试的出发点。</li> </ul> <p>场景的表示法 </p> <p>场景表示法与组件逻辑视图非常相似（请对照图 2），但它使用过程视图的连接符来表示对象之间的交互（请对照图 4），注意对象实例使用实线来表达。至于逻辑蓝图，我们使用 Rational Rose 来捕获并管理对象场景。</p> <p>场景的例子</p> <p>图 11 显示了小型 PABX 的场景片段。相应的脚本是：</p> <p>1. Joe的电话控制器检测和校验摘机状态的变换,并发送消息唤醒相应的终端对象。</p> <p>2. 终端分配一些资源，并要求控制器发出拨号音。</p> <p>3. 控制器接受拨号并传递给终端。</p> <p>4. 终端使用拨号方案来分析数字流。</p> <p>5. 有效的数字序列被键入,终端开始会话。</p> <p><a name="N10208"></a><b>图 11 － 本地呼叫的初期场景――阶段选择</b> <br /><img border="0" alt="图 11 － 本地呼叫的初期场景――阶段选择" src="/assets/image024.jpg" width="480" height="198" /></p> <p><a name="N10218"></a>视图之间的对应性 </p> <p>各种视图并不是完全是正交的或独立的。视图的元素根据某种设计规则和启发式方法与其他视图中的元素相关联。</p> <p>从逻辑视图到过程视图 </p> <p>我们发现逻辑视架构有几项重要特性：</p> <ul> <li>自主性：对象是主动的、被动的还是被保护的？ <ul> <li>主动对象享有调用其他对象或其自身操作的主动权，并且当其他对象对其进行调用时，具有对其自身 操作的完全控制权。 </li> <li>被动对象不能主动调用任何操作，对其他对象调用自身的操作没有控制。 </li> <li>被保护对象不能主动调用任何操作。但对自身的操作有一定的控制功能。 </li> </ul> </li> <li>持久化：对象是暂时的还是持久化的？它们是否会导致过程或处理器的终止？ </li> <li>依赖性：对象的存在或持久化是否依赖于另一个对象？ </li> <li>分布性：对象的状态或操作是否能被物理架构中的许多节点所访问？或是被进程架构中的几个进程所访问？</li> </ul> <p>在逻辑视图中，我们认为每个对象均是主动的，具有潜在的&quot;并发性&quot;，即与其他对象具有&quot;平行的&quot;行为，我们并不考虑所要达 到的确切并发程度。因此，逻辑结构所考虑的仅是需求的功能性方面。</p> <p>然而，当我们定义进程架构时，由于巨大的开销，为每个对象实施各自的控制线程（例如，Unix 进程或 Ada 任务），在目前的技术状况下是不现实的。此外，如果对象是并发的，那么必须以某种抽象形式来调用它们的操作。</p> <p>另一方面，由于以下几种原因需要多个控制线程。</p> <ul> <li>为了快速响应某类外部触发，包括与时间相关的事件。 </li> <li>为了在一个节点中利用多个 CPU，或者在一个分布式系统中利用多个节点。 </li> <li>为了提高 CPU 的利用率，在某些控制线程被挂起，等待其他活动结束的时候（例如，访问外部对象其他活动对象时），为其他的活动分配 CPU。 </li> <li>为了划分活动的优先级（提高潜在的响应能力）。 </li> <li>为了支持系统的可伸缩性（借助于共享负载的其他过程）。 </li> <li>为了在软件的不同领域分离关注点。 </li> <li>为了提高系统的可用性（通过 Backup 过程）。</li> </ul> <p>我们同时使用两种策略来决定并发的程度和定义所需的过程集合。考虑一系列潜在的物理目标架构。以下两种形式我们可以任选其 一：</p> <ul> <li>从内至外: <br />由逻辑架构开始：定义代理任务，该任务将控制一个类的多个活动对象的单个线程进行多元化处理；同一代理任务还执行持久化处理那些依赖于一个主动对象的对 象；需要相互进行操作的几个类或仅需要少量处理的类共享单个代理。这种聚合会一直进行，直到我们将过程减少到合理的较少数量，而仍允许分布性和对物理资源 的使用。 </li> <li>由外至内: <br />从物理结构开始：识别系统的外部触发；定义处理触发的客户过程和仅提供服务（而非初始化它们）的服务器进程；使用数据完整性和问题的串行化 （serialization）约束来定义正确的服务器设置，并且为客户机与服务器代理分配对象；识别出必须分布哪些对象。 </li> </ul> <p>其结果是将类（和它们的对象）映射至一个任务集合和进程架构中的进程。通常，活动类具有代理任务，也存在一些变形：对于给 定的类，使用多个代理以提高吞吐量，或者多个类映射至单个代理，因为它们的操作并不是频繁地被调用，或者是为了保证执行序列。</p> <p>注意这并不是产生最佳过程架构的线性的、决定性的进程；它需要若干个迭代来得到可接受的折衷。还存在许多其他方法，例如 Birman 等人5 或 Witt 等人7提出的方法。 确切的实施映射的方法不在本文的讨论范围，但我们以一个小的例子来说明一下。</p> <p>图 12 显示了一个小的类集合如何从假想的空中交通控制系统映射至进程。</p> <p>flight 类映射至一个 flight 代理集合：有许多航班等待处理，外部触发的频率很高，响应时间很关键，负载必须分布于多个 CPU。并且，航班处理的持久化和分布性方面都取决于 flight server，为了满足可用性，还是使用 flight server 的一台备份服务器。</p> <p>航班的 profile 和 clearance 总是从属于某个航班,尽管它们是复杂的类,但它们共享 flight 类的进程。航班分布于若干其他进程，特别是对于显示和外部接口。</p> <p>sectorization 类，为 controller 的权限分配建立了空域划分。由于完整性约束，仅能被一个代理处理，但可以与 flight 类共享服务器过程：更新得并不频繁。</p> <p>location 和 arispace 及其他的静态航空信息是受到保护的对象，在几个类中共享，很少被更新；它们被映射至各自的服务器，分布于其他过程。</p> <p><a name="N1028E"></a><b>图 12 － 从逻辑视图到过程视图的映射</b> <br /><img border="0" alt="图 12 － 从逻辑视图到过程视图的映射" src="/assets/image026.jpg" width="540" height="471" /></p> <p>从逻辑视图到开发视图 </p> <p>类通常作为一个模块来实现，例如 Ada 包中可视部分的一个类型。密切相关的类（类的种类）的集合组合到子系统中。子系统的定义必须考虑额外的约束，如团队组织、期望的代码规模（通常每个子系统 为 5 K 或 20 K SLOC）、可重用性和通用性的程度以及严格的分层依据（可视性问题），发布策略和配置管理。所以，通常最后得到的不是与逻辑视图逐一对应的视图。</p> <p>逻辑视图和开发视图非常接近，但具有不同的关注点。我们发现项目规模越大，视图间的差距也越大。例如，如果比较图 3 b 和图 6，则会发现并不存在逐一对应的类的不同种类到层的映射。而如果我们考虑类的种类的&quot;外部接口&quot;－网关种类时，它的实现遍布若干层：通讯协议在第 1 层或以下的层，通用网关机制在第 2 层，而特定的网关在第 5 层子系统。</p> <p>从进程视图到物理视图 </p> <p>进程和进程组以不同的测试和部署配置映射至可用的物理硬件。Birman 在 ISIS 项目中描述了详细的映射模式5。</p> <p>场景主要以所使用类的形式与逻辑视图相关联；而与进程视图的关联则是考虑了一个或多个控制线程的、对象间的交互形式。</p> <p><a name="N102B0"></a>模型的剪裁</p> <p>并不是所有的软件架构都需要&quot;4＋1&quot;视图。无用的视图可以从架构描述中省略，比如： 只有一个处理器，则可以省略物理视图；而如果仅有一个进程或程序，则可以省略过程视图。 对于非常小型的系统，甚至可能逻辑视图与开发视图非常相似，而不需要分开的描述。场景对于所有的情况均适用。</p> <p><a name="N102B9"></a>迭代过程 </p> <p>Witt 等人为设计和架构指出了 4 个阶段：勾画草图、组织、具体化和优化，分成了 12 个 步骤7。他们还指出需要某种程度的反向工程。而我们认为对于大型的项目，该方法太&quot;线性 化&quot;了。在 4 个阶段的末尾，可用于验证架构的内容太少。我们提倡一种更具有迭代性质的方法，即架构先被原形化、测试、估量、分析，然后在一系列的迭代过程中被细化。该 方法除了减少与架构相关的风险之外，对于项目而言还有其他优点：团队合作、培训，加深对架构的理解，深入程序和工具等等（此处提及的是演进的原形，逐渐发 展成为系统，而不是一次性的试验性的原形）。这种迭代方法还能够使需求被细化、成熟化并能够被更好地理解。</p> <p>场景驱动（scenario-driven）的方法</p> <p>系统大多数关键的功能以场景（或 use cases）的形式被捕获。关键意味着：最重要的功能，系统存在的理由，或使用频率最高的功能，或体现了必须减轻的一些重要的技术风险。</p> <p>开始阶段:</p> <ul> <li>基于风险和重要性为某次迭代选择一些场景。场景可能被归纳为对若干用户需求的抽象。 </li> <li>形成&quot;稻草人式的架构&quot;。然后对场景进行&quot;描述&quot;，以识别主要的抽象（类、机制、过程、子系统），如 Rubin 与 Goldberg6 所指出的 ―― 分解成为序列对（对象、操作）。 </li> <li>所发现的架构元素被分布到 4 个蓝图中：逻辑蓝图、进程蓝图、开发蓝图和物理蓝图。 </li> <li>然后实施、测试、度量该架构，这项分析可能检测到一些缺点或潜在的增强要求。 </li> <li>捕获经验教训。</li> </ul> <p>循环阶段:</p> <p>下一个迭代过程开始进行：</p> <ul> <li>重新评估风险， </li> <li>扩展考虑的场景选择板。 </li> <li>选择能减轻风险或提高结构覆盖的额外的少量场景，</li> </ul> <p>然后:</p> <ul> <li>试着在原先的架构中描述这些场景。 </li> <li>发现额外的架构元素，或有时还需要找出适应这些场景所需的重要架构变更。 </li> <li>更新4个主要视图：逻辑视图、进程视图、开发视图和物理视图。 </li> <li>根据变更修订现有的场景。 </li> <li>升级实现工具（架构原型）来支持新的、扩展了的场景集合。 </li> <li>测试。如果可能的话，在实际的目标环境和负载下进行测试。 </li> <li>然后评审这五个视图来检测简洁性、可重用性和通用性的潜在问题。 </li> <li>更新设计准则和基本原理。 </li> <li>捕获经验教训。</li> </ul> <p>终止循环</p> <p>为了实际的系统，初始的架构原型需要进行演进 。较好的情况是在经过 2 次或 3 次迭代之后，结构变得稳定：主要的抽象都已被找到。子系统和过程都已经完成，以及所有的接口都已经实现。接下来则是软件设计的范畴，这个阶段可能也会用到 相似的方法和过程。</p> <p>这些迭代过程的持续时间参差不齐，原因在于：所实施项目的规模，参与项目人员的数量、他们对本领域和方法的熟悉程度，以及 该系统和开发组织的熟悉程度等等。因而较小的项目迭代过程可能持续 2-3 周（例如，10 K SLOC），而大型的项目可能为 6-9 个月（例如，700 K SLOC）。 </p> <p><a name="N10319"></a>架构的文档化</p> <p>架构设计中产生的文档可以归结为两种：</p> <ul> <li>软件架构文档，其结构遵循&quot;4+1&quot;视图（请对照图 13，一个典型的提纲） </li> <li>软件设计准则，捕获了最重要的设计决策。这些决策必须被遵守，以保持系统架构的完整性。 <br /><a name="N1032B"></a><b>图 13 － 软件架构文档提纲</b> <br /><img border="0" alt="图 13 － 软件架构文档提纲" src="/assets/image027.gif" width="174" height="360" /></li> </ul> <p><img alt="" src="/assets/blue_rule.gif" width="100%" height="1" /> <br /><img border="0" alt="" src="/assets/c.gif" width="8" height="6" /></p> <p><img alt="" src="/assets/c.gif" width="100%" height="4" /></p> <p><img border="0" alt="" src="/assets/u_bold.gif" width="16" height="16" /> <br /><a href="http://www.ibm.com/developerworks/cn/rational/r-4p1-view/#main"><b>回页首</b></a></p> <p><a name="N1033D"></a>结束语 </p> <p>无论是否经过一次本地定制的和技术上的调整，&quot;4＋1&quot;视图都能在许多大型项目中成功运用。事实上，它允许不同的&quot;风险承 担人&quot;找出他们就软件架构所关心的问题。系统工程师首先接触物理视图，然后转向进程视图；最终用户、顾客、数据分析专家从逻辑视图入手；项目经理、软件配 置人员则从开发视图来看待&quot;4＋1&quot;视图。 在 Rational 和其他地方，提出并讨论了其他系列视图，例如 Meszaros(BNR)、Hofmeister。Nord 和 Soni(Siemenms)、Emery 和 Hilliard（Mitre），但我们发现其他视图通常可以归入我们所描述的 4 个视图中的一个。例如 Cost&amp;Schedule 视图可以归入开发视图，将一个数据视图归入一个逻辑视图，以及将一个执行视图归入进程视图和物理视图的组合。</p> <p><a name="N10348"></a><b>表 1 － &quot;4＋1&quot;视图模型一览表</b> <br /><img border="0" alt="表 1 － &quot;4＋1&quot;视图模型一览表" src="/assets/table.gif" width="601" height="255" /></p> <p class="read-more">Continue reading <a class="heading" href="/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/2011/05/30/e6-9e-b6-e6-9e-84-e8-93-9d-e5-9b-be-e8-bd-af-e4-bb-b6-e6-9e-b6-e6-9e-84-41-e8-a7-86-e5-9b-be-e6-a8-a1-e5-9e-8b.html" data-flip="title">架构蓝图--软件架构 "4+1" 视图模型</a></p> </article> <article id="post-web/web%E5%89%8D%E7%AB%AF/2011/05/30/%e3%80%90%e8%bd%ac%e3%80%91comet-is-always-better-than-polling" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web/web%E5%89%8D%E7%AB%AF/2011/05/30/e3-80-90-e8-bd-ac-e3-80-91comet-is-always-better-than-polling.html" data-flip="title"> 【转】Comet is Always Better Than Polling </a> </h1> <p class="post-date heading"> <time datetime="2011-05-30T15:41:35+08:00">30 May 2011</time> in <span>Web</span> / <span>Web前端</span> on <span>Javascript web 前端</span>, <span>Web</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <h2 id="internal-source-marker_0.6080792066130787"><a href="http://cometdaily.com/2007/11/06/comet-is-always-better-than-polling/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 18pt;vertical-align: baseline;font-weight: bold;text-decoration: underline">Comet is Always Better Than Polling</span></a></h2> <p> <span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">by</span><a href="http://cometdaily.com/people/greg_wilkins"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">Greg Wilkins</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">November 6th, 2007&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span> <br /> <p style="text-align: justify;margin-top: 0pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></p> <p style="text-align: justify;margin-top: 0pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Comet techniques are advocated when your application needs low latency events to be delivered from the server to the browser. Comet can deliver sub-second latency for messages making possible web applications like chat, games and real-time monitoring of prices and states.</span></p> <p style="text-align: justify;margin-top: 0pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">It is often asserted that for applications that don’t need low latency (e.g. email readers), traditional polling is a better alternative. However, some rudimentary analysis shows this assertion to be wrong, and that Comet techniques can be applied to all required latencies and event rates to provide improved data rates and average latencies.</span></p> <p style="text-align: justify;margin-top: 0pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">For this analysis, I have considered polling vs. the long-polling technique where a server may hold a poll request for a period of time while waiting for events/messages to be delivered to the browser. In order to ensure that we are comparing apples with apples and oranges with oranges, I have compared configurations that provide the same maximum latency. For example, for a maximum latency of 10s, the polling technique must issue a poll every 10s and the average latency is half that. For the Comet technique long polling, a long poll needs to be issued 10s after the last long poll completes, but the server may hold the long poll for up to 300s while waiting for an event.</span></p> <p style="text-align: justify;margin-top: 0pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">The attached spreadsheet contains the calculations, which I have graphed for 1s, 10s and 100s maximum latency for message rates of 1, 10, 100 and 1000 messages per second for 1000 users. The results show that the Comet long polling technique uses less bandwidth than polling in all situations, and uses significantly less bandwidth when the average period between messages is longer than the maximum latency:</span><img src="/assets/dC4zo6qV1PepTCLEWorOvpEHZD2KLSRBw3HaZ2GHIGkGcz_GZfgwbpnSHK-bBHpW8nBOHVByZbSkHKcwS5CS66hxa5MxyjMyrGcJhy8odB-LhLJ9syE" width="800" height="451" /></p> <p style="text-align: justify;margin-top: 0pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Not only does Comet long-polling provide superior data rates, it also provides superior average latency. The Comet technique allows the average latency to be lower than the maximum latency because once the pause between polls is complete, the long poll is ready to respond immediately to events.</span><img src="/assets/AV7lCv_oqKXYHtmpt41pD5R8KYws52Xgn_pW-gXAuBYWAvUryE3TKJmWR19Fzop_qjU8SAW3KBLmxmsTOtPfSOBsFZOPPROnSb3-sDqXyNdaIef9BGI" width="800" height="451" /></p> <p> <span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">This analysis shows that for the worst case, when the message rate is high, load and latency for Comet long-polling are identical to traditional polling, and for most cases the load and latency are significantly better than traditional polling.</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">The calculations for these graphs are in this</span><a href="http://cometdaily.com/wp-content/uploads/2007/11/comet-polling.xls"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">Comet vs Polling spreadsheet</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">. The assumptions made are that all messages are equal in size (150Bytes) and that the message arrival times are randomly but uniformly distributed. A maximum long poll timeout of 240s is assumed. The Y axis of the graphs is logarithmic so larger differences appear smaller.</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></p> <p class="read-more">Continue reading <a class="heading" href="/web/web%E5%89%8D%E7%AB%AF/2011/05/30/e3-80-90-e8-bd-ac-e3-80-91comet-is-always-better-than-polling.html" data-flip="title">【转】Comet is Always Better Than Polling</a></p> </article> <article id="post-voip/2011/05/30/voice-srgs%e8%af%ad%e6%b3%95%e7%9b%b8%e5%85%b3" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/voip/2011/05/30/voice-srgs-e8-af-ad-e6-b3-95-e7-9b-b8-e5-85-b3.html" data-flip="title"> voice srgs语法相关 </a> </h1> <p class="post-date heading"> <time datetime="2011-05-30T15:39:55+08:00">30 May 2011</time> in <span>Voip</span> on <span>Srgs</span>, <span>Voice</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">grxml:使用xml书写srgs的方式</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">abnf:rfc5234规范，</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">现在，几乎每一位新编程语言书籍的作者都使用巴科斯范式来定义编程语言的语法规则。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">例如sql语法帮助也是用这个来描述的。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">然而srgs中的abnf是混合bnf和abnf的语法，例如或|是bnf写法,/被改做为权重, =又是abnf写法,bnf写法是:=</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">-------------------------------------------abnf双模式示例</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">#ABNF 1.0 UTF-8;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">language en;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">mode voice;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">root $basicCmd;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">public $basicCmd = (dtmf-1 | yes) {y} | (dtmf-2 | no) {n};</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">------------------------------------------------------------------------</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">在voice中既然后台具备自然语言处理的能力，就不应该使用tag而应该直接返回所有匹配项。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">$object = [the | a] (window | file | menu);</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">这样的写法用户说了the就会返回the,没说就不会返回the,所以都用[]比较好。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">$object = [the | a] [window | file | menu];</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">--------------------------------------------------------------------------</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">grxml</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">item下面可以有ruleref但不能是rule</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;rule id=&quot;r_3&quot;&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;one-of&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="background-color: #ffff00;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;tag&gt;&lt;![CDATA[Yes]]&gt;&lt;/tag&gt;&#160;&#160;&#160; //可以</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;ruleref uri=&quot;#r_4&quot; /&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;tag&gt;&lt;![CDATA[No]]&gt;&lt;/tag&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;ruleref uri=&quot;#r_5&quot; /&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/one-of&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; &lt;/rule&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">item在下面放one-of是可以的</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;rule id=&quot;r_0&quot;&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;one-of&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;tag&gt;&lt;![CDATA[__QUERY__]]&gt;&lt;/tag&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="background-color: #ffff00;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;item repeat=&quot;1-&quot;&gt;</span> <br /><span style="background-color: #ffff00;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;one-of&gt;</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;what&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;who&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;where&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;how&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;why&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;whom&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/one-of&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item repeat=&quot;0-&quot;&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;one-of&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;is&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;are&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;were&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;does&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;do&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;did&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;will&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;would&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;shall&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;should&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;may&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;might&lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/one-of&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;ruleref special=&quot;GARBAGE&quot; /&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/item&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/one-of&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; &lt;/rule&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></p> <p class="read-more">Continue reading <a class="heading" href="/voip/2011/05/30/voice-srgs-e8-af-ad-e6-b3-95-e7-9b-b8-e5-85-b3.html" data-flip="title">voice srgs语法相关</a></p> </article> <article id="post-java/2011/05/30/applet%e6%b2%99%e7%ae%b1%e6%9d%83%e9%99%90%e9%97%ae%e9%a2%98" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/2011/05/30/applet-e6-b2-99-e7-ae-b1-e6-9d-83-e9-99-90-e9-97-ae-e9-a2-98.html" data-flip="title"> applet沙箱权限问题 </a> </h1> <p class="post-date heading"> <time datetime="2011-05-30T15:37:59+08:00">30 May 2011</time> in <span>Java</span> on <span>Applet</span>, <span>Java</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> </p> <p style="margin-top: 0pt;margin-bottom: 0pt;margin-left: 18pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">官方解释:</span></p> <p style="margin-top: 0pt;margin-bottom: 0pt;margin-left: 18pt"><a href="http://download.oracle.com/javase/6/docs/technotes/guides/plugin/developer_guide/security.html"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://download.oracle.com/javase/6/docs/technotes/guides/plugin/developer_guide/security.html</span></a></p> <ul> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">All </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">unsigned applets</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> are run under the standard applet security model.</span></li> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">If</span><a href="http://download.oracle.com/javase/6/docs/technotes/guides/plugin/developer_guide/rsa_how.html#use"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">usePolicy</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: bold;text-decoration: none">is not defined</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> in the java.policy file, then a </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">signed applet</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> has the AllPermission permission only if Java Plug-in can verify the signers, and the user agrees to granting the AllPermission permission when prompted.</span></li> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">If usePolicy is </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: bold;text-decoration: none">defined</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">, then a </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">signed applet</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> has only the permissions defined in java.policy and no prompting occurs.</span></li> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></li> </ul> <p><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">对于第二点，就是说签了名的一般都是有所有权限的。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">但是还需要如下的处理[</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">这个是必要的</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">]</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">对于签名的applet,</span> <ol> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">AccessController.doPrivileged(new PrivilegedExceptionAction() {&#160; </span></li> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160; public Object run() throws Exception {&#160; </span></li> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160; //you unsafe code&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></li> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; return null;&#160; </span></li> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160; }&#160; </span></li> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">});&#160; </span></li> </ol> <p><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">我们知道Java applet在浏览器中运行时默认情况下是不能访问本地资源的，比如读写客户端电脑上的文件。这是Java的安全沙箱机制，简单说就是有一组安全检查规 则，要通过检查之后才能访问特定资源。不过在企业应用中这种安全机制有时候并不是十分必要，这里我们就讨论一下在企业应用中突破沙箱检查的方案。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; 当然，很多朋友会说，这太简单了，只需要改一下java.policy就可以了，授予程序对所有权限就可以了，就像下面这样：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160; grant {</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; permission java.security.AllPermission;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160; };</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">没错，这样确实可以使客户端applet有权限访问任何资源，但是这个方案有个很实际的问题：java.policy是位于每个客户端电脑的jre 目录下的，如果要修改，那么就需要通知每一个使用该系统的用户，并指导他们做相应操作。这对于搞IT的用户来说是小菜一碟，但对一般业务人员来说却是个额 外的工作，这样的发布方式很难被人认可。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; 另一个方案——对applet进行签名，用户访问时系统会弹出安全提示框，用户如果信任该程序，点击确认就相当于赋予了这个客户端小程序访问本地资源的权限。这是个很典雅的方案，体现了系统安全和对用户权利的尊重！具体做法大致如下：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; 1、编写applet，编译并打成jar包</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; 2、对jar包签名</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160; 这一步首先要产生证书，利用jdk提供的工具，执行类似下面的命令：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; keytool -genkey -keystore d:\mykeys.store -alias test -validity 300</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; 根据系统提示执行完这个命令后会生成一个证书库，上例是：mykeys.store，-validity 300是证书有效期为300天的意思，接下来用这个证书库中的证书给jar包签名，仍然是jdk的工具，命令类似下面：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; jarsigner -keystore d:\mykeys.store d:\applet.jar test</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; 3、把applet.jar发布到应用服务器</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; 这个看似完美的方案实际也有一点问题，很多时候我们并不希望把客户端程序都打到一个jar包里，那么多个jar包就需要分别签名，每次修改完客户端程序， 都要重新打包和签名，不然就只有applet能访问本地资源。我们不想这么麻烦，甚至我们有时都不希望对客户端代码打包，这时候签名就不好实现了。那么如 何解决这个问题呢，看下面这招。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; 既然applet已经被用户授权，那么是否可以在applet里改变安全管理器（SecurityManager）？实验证明是可以的！只需要继承 SecurityManager类，创建自己的安全管理器类，然后覆盖checkPermission方法，允许访问任何资源。在applet的init 方法中调用System.setSecurityManager把安全管理器设置为我们自己的就一切OK了！</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; 至此，我们彻底突破了沙箱检查，而且客户体验很好，完美的方案！</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">代码很简单，类似于下面这样即可：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">[这种解决方法我也加了，没有测试是否必须--好像不起作用，没签名的引用包还是报错]</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">public class MainApplet extends JApplet {</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">private class DefaultSecurityManager extends SecurityManager {</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">@Override</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">public void checkPermission(Permission perm, Object context) {</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">}</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">@Override</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">public void checkPermission(Permission perm) {</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">}</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">}</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">@Override</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">public void init() {</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">super.init();</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">System.setSecurityManager(new DefaultSecurityManager());</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160; }</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">}</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">总结：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">如果有是默认权限之外的代码：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">1：需要签名</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2：需要在applet中</span> <ol start="start"> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">AccessController.doPrivileged(new PrivilegedExceptionAction() {&#160; </span></li> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160; public Object run() throws Exception {&#160; </span></li> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160; //you unsafe code&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></li> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; return null;&#160; </span></li> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160; }&#160; </span></li> <li><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">});&#160; </span></li> </ol> <p><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: normal;text-decoration: none">3:需要用户接受证书</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">在写skype4java applet时遇到的问题都是关于将包内资源dll加载的问题，winp,skype4java的实现都在applet环境下工作不好，我的解决方法是将其复制到tmp目录下再加载即可。</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></p> <p class="read-more">Continue reading <a class="heading" href="/java/2011/05/30/applet-e6-b2-99-e7-ae-b1-e6-9d-83-e9-99-90-e9-97-ae-e9-a2-98.html" data-flip="title">applet沙箱权限问题</a></p> </article> <article id="post-html5/2011/05/30/html5%e8%b5%84%e6%ba%90" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/html5/2011/05/30/html5-e8-b5-84-e6-ba-90.html" data-flip="title"> html5资源 </a> </h1> <p class="post-date heading"> <time datetime="2011-05-30T15:36:53+08:00">30 May 2011</time> in <span>Html5</span> on <span>Hml5</span>, <span>Web html css 前端</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>[标准] <br /> http://dev.w3.org/html5/postmsg/ <br /> http://dev.w3.org/html5/websockets/ <br /> <a href="http://dev.w3.org/html5/eventsource/">http://dev.w3.org/html5/eventsource/</a> <br /> [当前实现] <br /> <a href="http://en.wikipedia.org/wiki/Comparison_of_layout_engines_%28HTML_5%29#Related_specifications">http://en.wikipedia.org/wiki/Comparison_of_layout_engines_%28HTML_5%29#Related_specifications</a> <br /> [game教程] <br /> http://www.brighthub.com/hubfolio/matthew-casperson/blog/archive/2009/06/29/game-development-with-javascript-and-the-canvas-element.aspx <br /> [中文教程] <br /> http://kb.operachina.com/node/190 <br /> [cake框架教程] <br /> http://www.brighthub.com/hubfolio/matthew-casperson/blog/archive/2009/08/24/cake-programming-tutrorials.aspx <br /> gif动画转图片 <br /> <a href="http://share.wglm.net:81/ts/Ulead_GIF_Animator5.0.rar">http://share.wglm.net:81/ts/Ulead_GIF_Animator5.0.rar</a> <br /> 游戏 <br /> <a href="https://github.com/oldj/html5-tower-defense">https://github.com/oldj/html5-tower-defense</a> <br /> websocket的缺陷 <br /> <a href="http://blogs.webtide.com/gregw/entry/websocket_chat">http://blogs.webtide.com/gregw/entry/websocket_chat</a> <br /> 1:经常断线 <br /> 2:不知道是否发送成功 <br /> 3：keepalive <br /> 4:消息重发导致死循环[消息体过大] <br /> 替代物</p> <h4><a href="http://cometdaily.com/2007/11/06/comet-is-always-better-than-polling/">Comet is Always Better Than Polling</a></h4> <p>-----------------------------------------------------------------------------------------------------------------------------</p> <p>&nbsp;</p> <h3>推荐10款非常优秀的HTML5开发工具</h3> <p>2011-10-09 09:37 | 2649次阅读 | 来源：梦想天空的博客 【已有0条评论】<a href="http://sd.csdn.net/a/20111009/305365.html#postcomment">发表评论</a></p> <p>关键词：<a href="http://articles.csdn.net/tags.php?/HTML5">HTML5</a> | 作者：梦想天空 | <cite><a href="http://sd.csdn.net/">收藏这篇资讯</a></cite></p> <p>HTML5发展如火如荼，随着各大浏览器对HTML5技术支持的不断完善以及HTML5技术的不断成熟，未来HTML5必将改变我们创建Web应用程序的方式。今天这篇文章向大家推荐10款优秀的HTML5开发工具，帮助你更高效的编写HTML5应用。</p> <p><strong>1.<a href="http://www.initializr.com/">Initializr</a></strong></p> <p><img alt="推荐10款非常优秀的 HTML5 开发工具" height="396" src="/assets/09493530U-0.png" width="640" /></p> <p>Initializr是制作HTML5网站最好的入门辅助工具，你可以使用提供的特色模板快速生成网站，也可以自定义，Initializr会为你生成代码简洁的可定制的网页模板。</p> <p><strong>2.<a href="http://html5demos.com/">HTML5demos</a></strong></p> <p><img alt="推荐10款非常优秀的 HTML5 开发工具" height="401" src="/assets/0949351E5-1.png" width="639" /></p> <p>想知道你的浏览器是否支持HTML5 Canvas吗？想知道Safari是否可以运行简单的HTML5聊天客户端吗？HTML5demos会告诉你每一个HTML5特性在哪些浏览器中支持。</p> <p><strong>3.<a href="http://html5.org/tools/web-apps-tracker">HTML5 Tracker</a></strong></p> <p><img alt="推荐10款非常优秀的 HTML5 开发工具" height="398" src="/assets/0949352100-2.png" width="637" /></p> <p>想了解HTML5的最新动向吗？使用HTML5 Tracker吧，它可以跟踪HTML5最新修订信息。</p> <p><strong>4.<a href="http://woork.blogspot.com/2009/09/html-5-visual-cheat-sheet-by-woork.html">HTML5 visual cheat sheet</a></strong></p> <p><img alt="推荐10款非常优秀的 HTML5 开发工具" height="384" src="/assets/0949355Y3-3.png" width="614" /></p> <p>想要快速超找一个标签或者属性吗？看看这个非常酷的速查手册吧，每个Web开发人员的必备。</p> <p><strong>5.<a href="http://switchtohtml5.com/">Switch To HTML5</a></strong></p> <p><img alt="推荐10款非常优秀的 HTML5 开发工具" height="402" src="/assets/0949356320-4.png" width="622" /></p> <p>Switch To HTML5是一个基础而有效模板生成工具。如果你开始一个新项目，可以到这里获取免费的HTML5网站模板。</p> <p><strong>6.<a href="http://www.useragentman.com/blog/2010/07/27/cross-browser-html5-forms-using-modernizr-webforms2-and-html5widgets/">Cross browser HTML5 forms</a></strong></p> <p><img alt="推荐10款非常优秀的 HTML5 开发工具" height="399" src="/assets/09493512A-5.png" width="621" /></p> <p>HTML5中的日历，取色板，滑块部件等都是非常棒工具，但是有些浏览器不支持。这个页面将帮助你构建完美的HTML5表单兼容方案。</p> <p><strong>7.<a href="http://html5test.com/">HTML5 Test</a></strong></p> <p><img alt="推荐10款非常优秀的 HTML5 开发工具" height="446" src="/assets/094935A12-6.png" width="652" /></p> <p>你浏览器准备好迎接HTML5革命了吗？HTML5 Test将告诉你。这个网站会为你当前使用的浏览器生成一份对video、audio、canvas等等特性的支持情况的完整报告。</p> <p><strong>8.<a href="http://websitesetup.org/html5-cheat-sheet/">HTML Cheat Sheat</a></strong></p> <p><img alt="" height="372" src="/assets/html5-cheat-sheet.png" width="480" /></p> <p>Canvas元素是HTML5最重要的元素之一，它可以在网页中绘制图形，非常强大。这是一个Canvas元素的详细速查手册。</p> <p><strong>9.<a href="http://www.limejs.com/">Lime JS</a></strong></p> <p><img alt="推荐10款非常优秀的 HTML5 开发工具" height="417" src="/assets/0949355219-8.png" width="603" /></p> <p>LimeJS是一个HTML5游戏开发框架，用于快速构建运行于触屏设备和桌面浏览器的游戏。非常棒，一定要用用试试。</p> <p><strong>10.<a href="http://html5reset.org/">HTML5 Reset</a></strong></p> <p><img alt="推荐10款非常优秀的 HTML5 开发工具" height="466" src="/assets/0949355b6-9.png" width="615" /></p> <p>HTML5 Reset是一组文件，包括HTML、CSS等，用于在开始新项目的时候帮助你节省时间，提供HTML5的空白WordPress模板。</p> <p class="read-more">Continue reading <a class="heading" href="/html5/2011/05/30/html5-e8-b5-84-e6-ba-90.html" data-flip="title">html5资源</a></p> </article> <h2 class="sr-only">Pagination</h2> <nav class="pagination heading" role="navigation"> <ul> <li class="pagination-item older" > <a rel="next" href="/page-59/">Older</a> </li> <li class="pagination-item newer" > <a rel="prev" href="/page-57/">Newer</a> </li> </ul> </nav> <footer> <hr/> <p>© 2011 - 2017. All rights reserved.</p> <p> <code>Powered by <a href="https://qwtel.com/hydejack/">Hydejack</a> v<span id="_version">6.6.1</span></code> </p> </footer> </main> </div> <div id="_yDrawer"> <div id="_sidebar" class="sidebar"> <div class="sidebar-bg" style="background-color:#4f86aa;background-image:url()"></div> <header class="sidebar-sticky" role="banner"> <div class="sidebar-about"> <img src="https://avatars0.githubusercontent.com/u/4122902?v=4&s=460" class="me" /> </div> <div class="sidebar-about"> <h1><a id="_title" href="/">Ka's Blog</a></h1> <p>Ka’s blog description…</p> </div> <nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span> <ul> <li> <a class="sidebar-nav-item" href="/categories.html">Categories</a> </li> <li> <a class="sidebar-nav-item" href="/archive.html">Archive</a> </li> <li> <a class="sidebar-nav-item" href="/tags.html">Tags</a> </li> <li> <a class="sidebar-nav-item" href="/about.html">About</a> </li> </ul> </nav> <div class="sidebar-social"> <span class="sr-only">Social:</span> <ul> <li> <a href="https://twitter.com/imhazige" title="Twitter"> <span class="icon-twitter"></span> <span class="sr-only">Twitter</span> </a> </li> <li> <a href="https://github.com/imhazige" title="GitHub"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a> </li> <li> <a href="mailto:imhazige@gmail.com" title="Email"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a> </li> <li> <a href="https://imhazige.github.io/myblog/feed.xml" title="RSS"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a> </li> </ul> </div> </header> </div> </div> </div> <!--[if gt IE 9]><!----> <script>loadJSDeferred('/assets/js/hydejack.js?v=6.6.1');</script> <!--<![endif]--> </body>
</html>
