<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v6.6.1 <https://qwtel.com/hydejack/>
--><head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="format-detection" content="telephone=no"> <meta http-equiv="x-ua-compatible" content="ie=edge"> <title>Ka's Blog &middot; Ka's Blog</title> <meta name="description" content="Ka’s blog description… "> <link rel="canonical" href="http://localhost:4000/page-48/"> <link rel="alternate" type="application/atom+xml" title="Ka's Blog Feed" href="http://localhost:4000/feed.xml"> <link rel="apple-touch-icon" href="/apple-touch-icon.png"> <!-- Place favicon.ico in the root directory --> <link rel="stylesheet" href="/assets/style.css"> <link id="_katexJS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.js"> <link id="_katexCSS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css"> <!--[if gt IE 8]><!----> <script> WebFontConfig = { google: { families: 'Roboto+Slab:700|Noto+Sans:400,400i,700,700i'.split('|') }, custom: { families: ['icomoon'], urls: ['/assets/icomoon/style.css'] } }; </script> <!--<![endif]--> <script> !function(n,e){function t(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function o(n,e){n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,n))}}n._loaded=!1,n.loadJSDeferred=function(a,d){function r(){n._loaded=!0;var r=e.createElement("script");r.src=a,d&&(("onload"in r?t:o)(r,d),r.onload||t(r,d));var l=e.getElementsByTagName("script")[0];l.parentNode.insertBefore(r,l)}n._loaded?r():n.addEventListener?n.addEventListener("load",r,!1):n.attachEvent?n.attachEvent("onload",r):n.onload=r}}(window,document); !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); window.disablePushState = false; window.disableDrawer = false; </script> <!--[if lt IE 9]> <script src="/assets/bower_components/html5shiv/dist/html5shiv.min.js"></script> <![endif]--> <!--[if gt IE 8]><!----> <style> article, aside, dialog, figcaption, figure, footer, header, hgroup, main, nav, section { display: block; } mark { background: #FF0; color: #000; } * { box-sizing: border-box; } html, body { margin: 0; padding: 0; } html { font-size: 16px; line-height: 1.75; } body { color: #333; background-color: #fff; overflow-y: scroll; } a { text-decoration: none; } .lead { margin-left: -1rem; margin-right: -1rem; } img, .img { display: block; max-width: 100%; margin-bottom: 1rem; border: none; } img.lead, .img.lead { max-width: calc(100% + 2rem); width: calc(100% + 2rem); } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-weight: bold; text-rendering: optimizeLegibility; } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 { margin: 3rem 0 1rem; line-height: 1.6; } h1, .h1 { font-size: 2rem; line-height: 1.25; } h2, .h2 { font-size: 1.5rem; } h3, .h3 { font-size: 1.17em; } p { margin-top: 0; margin-bottom: 1rem; } p.lead { font-size: 1.25rem; font-weight: 300; padding: 0 1rem; } ul, ol, dl { margin-top: 0; margin-bottom: 1rem; } ul, ol { padding-left: 1.25rem; } hr { position: relative; margin: 1.5rem 0; border: 0; border-top: 1px solid #eee; } .hr { padding-bottom: .5rem; border-bottom: 1px solid #eee; margin-bottom: 1.5rem; } h4, h5, h6, .h4, .h5, .h6 { margin-bottom: 0.5rem; font-size: 1rem; } table { margin-bottom: 1rem; width: 100%; width: calc(100% + 2rem); margin-left: -1rem; border: 1px solid #e5e5e5; border-collapse: collapse; border-spacing: 0; } td, th { padding: .25rem .5rem; border: 1px solid #e5e5e5; } td:first-child, th:first-child { padding-left: 1rem; } td:last-child, th:last-child { padding-right: 1rem; } thead + tbody, tbody + tbody, tfoot { border-top: 3px double #e5e5e5; } tbody tr:nth-child(odd) td, tbody tr:nth-child(odd) th { background-color: #f9f9f9; } footer { margin-bottom: 2rem; } .page, .post { margin-bottom: 3em; } .page li + li, .post li + li { margin-top: .25rem; } .page > header, .post > header { margin-bottom: 2rem; } .page-title, .post-title { margin-top: 0; } .post-date { display: block; margin-top: -0.5rem; margin-bottom: 1rem; color: #9a9a9a; } .related-posts { padding-left: 0; list-style: none; } .related-posts > li, .related-posts > li + li { margin-top: 1rem; } .related-posts > li > small, .related-posts > li + li > small { font-size: 75%; color: #9a9a9a; } .message { margin-bottom: 1rem; padding: 1rem; color: #787878; background-color: #f9f9f9; margin-left: -1rem; margin-right: -1rem; } /* * Global resets * * Update the foundational and global aspects of the page. */ body, main { /* Prevent side-scrolling on mobile */ position: relative; overflow-x: hidden; } @media screen { body::before { content: ''; width: .5rem; background: #e5e5e5; position: absolute; left: 0; top: 0; bottom: 0; } } @media screen and (min-width: 40em) { html { font-size: 17px; } } @media screen and (min-width: 54em) { html { font-size: 16px; } } @media screen and (min-width: 72em) { html { font-size: 17px; } } @media screen and (min-width: 125em) { html { font-size: 18px; } } .sr-only { display: none; } .clearfix, .sidebar-social::after, .clearafter::after { content: ""; display: table; clear: both; } a, .a { position: relative; padding-bottom: .15rem; border-bottom: 1px solid; } .img { overflow: hidden; background-color: #f9f9f9; } .img > img { margin: 0; width: 100%; height: 100%; } .sixteen-nine { position: relative; } .sixteen-nine::before { display: block; content: ""; width: 100%; padding-top: 56.25%; } .sixteen-nine > * { position: absolute; top: 0; left: 0; right: 0; bottom: 0; } h1 + hr, h2 + hr, h3 + hr, h4 + hr, h5 + hr, h6 + hr { margin-top: 0; } .fade-in { animation-duration: 500ms; animation-name: fade-in; animation-fill-mode: forwards; } @keyframes fade-in { from { transform: translateY(-2rem); opacity: 0; } 50% { transform: translateY(-2rem); opacity: 0; } to { transform: translateY(0); opacity: 1; } } .mb6 { margin-bottom: 6rem; } .sidebar { color: rgba(255, 255, 255, 0.75); text-align: left; /* Sidebar links */ } .sidebar::before { /* make sidebar slightly darker to increase text readability (when using a background image) */ content: ""; position: absolute; z-index: 2; top: 0; left: 0; bottom: 0; right: 0; background: linear-gradient(to bottom, rgba(32, 32, 32, 0) 0%, rgba(32, 32, 32, 0.5) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */ } .sidebar a { color: #fff; border-bottom-color: rgba(255, 255, 255, 0.2); } #_yDrawer { position: relative; padding: 1rem 0; } @media screen { #_yDrawer { padding: 2rem 1rem; min-height: 640px; min-height: 100vh; } } @media screen and (min-width: 54em) { #_yDrawer { position: fixed; top: 0; left: 0; bottom: 0; width: 18rem; margin-left: 0; } } @media screen and (min-width: 97.5em) { #_yDrawer { width: calc(50% - 28rem); } } @media screen { #_yDrawer.loaded { min-height: 0; padding: 0; } } .sidebar-bg { position: absolute; top: 0; right: 0; bottom: 0; left: 0; background: #202020 center / cover; } .sidebar-sticky { position: relative; z-index: 3; } @media screen { .sidebar-sticky { position: absolute; right: 2rem; bottom: 1rem; left: auto; max-width: 14rem; } } @media print { .sidebar-sticky { padding: 0 2rem; } } /* About section */ .sidebar-about > h1 { color: #fff; font-size: 2rem; } .sidebar-nav > ul { list-style: none; padding-left: 0; margin-bottom: .5rem; } a.sidebar-nav-item { font-weight: bold; display: block; line-height: 1.75; padding: .25rem 0; border-bottom: 1px solid rgba(255, 255, 255, 0.2); } @media screen { .y-drawer-scrim { z-index: 2; } .y-drawer-content { width: 18rem; left: -17.5rem; z-index: 3; } } @media screen and (min-width: 97.5em) { .y-drawer-content { width: calc(50% - 28rem); } } .sidebar-social { margin-bottom: .5rem; } .sidebar-social > ul { list-style: none; padding-left: 0; margin: 0 -.25rem; } .sidebar-social > ul > li { float: left; margin: 0 .25rem; } .sidebar-social > ul > li > a { display: inline-block; text-align: center; font-size: 1.6rem; line-height: 3rem; width: 3.1249rem; height: 4rem; padding: .5rem 0; } .sidebar-social > ul li + li { margin-top: 0; } .fixed-top { position: fixed; top: 0; left: 0; width: 100%; z-index: 1; } .navbar > .content { padding-top: 0; padding-bottom: 0; min-height: 0; height: 0; } .menu { display: inline-block; padding: 1.75rem 1.5rem; border-bottom: none; margin-left: -1.5rem; color: #9a9a9a !important; } .menu::after { content: "\2630"; } @media screen and (min-width: 54em) { .menu { padding: 1.25rem 1.5rem; position: absolute; left: -9999px; } .menu:focus { position: static; } } .animation-main { pointer-events: none; } .loading { display: none; } @media print { .menu { display: none; } } .animation-main { opacity: 0; will-change: opacity; } .loading { position: absolute; top: 0; right: 0; padding: 5.25rem 4.5rem; transform-origin: top right; transform: scale(0.33); } .content { position: relative; margin-left: auto; margin-right: auto; padding: 5rem 1rem 12rem; } @media screen { .content { max-width: 38rem; padding-left: 1.5rem; min-height: 100vh; } } @media screen and (min-width: 54em) { .content { max-width: 42rem; padding: 4rem 1rem 12rem; margin-left: 22rem; margin-right: 4rem; } } @media screen and (min-width: 72em) { .content { margin-left: 22rem; margin-right: 4rem; } } @media screen and (min-width: 92em) { .content { max-width: 48rem; } } @media screen and (min-width: 97.5em) { .content { margin: auto; } } .me { float: right; width: 6.5rem; height: 6.5rem; margin-left: 1rem; margin-bottom: .5rem; border-radius: 100%; position: relative; } @media screen and (min-width: 40em) { .me { width: 7rem; height: 7rem; } } @media screen and (min-width: 54em) { .me { width: 6.5rem; height: 6.5rem; } } @media screen and (min-width: 60em) { .me { width: 7rem; height: 7rem; } } main > footer { position: absolute; bottom: 0; left: 0; right: 0; padding: 0 1rem; color: #9a9a9a; font-size: smaller; text-align: center; } main > footer > p { margin-bottom: 0; } /* .card, .pagination-item { border-radius: 0!important; } */ /* @media screen { .sidebar-sticky { left: 2rem; max-width: none; } } */ html { font-family: Helvetica, Arial, sans-serif; } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: Helvetica, Arial, sans-serif; } </style> <link id="_stylePreload" rel="preload" as="style" href="/assets/css/hydejack.css?v=6.6.1"> <script>document.getElementById('_stylePreload').onload=function(){this.rel='stylesheet'}</script> <!-- NOTE: These styles interact with JavsScript, so they MUST NOT be changed --> <style id="_pageStyle"> .content a { color: #4f86aa; border-color: rgba(79, 134, 170, 0.2); } .content a:hover { border-color: #4f86aa; } :focus { outline-color: #4f86aa; } ::selection { color: #fff; background: #4f86aa; } ::-moz-selection { color: #fff; background: #4f86aa; } </style> <noscript> <link rel="stylesheet" href="/assets/css/hydejack.css?v=6.6.1"> <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|Noto+Sans:400,400i,700,700i"> <style> html { font-family: 'Noto Sans', Helvetica, Arial, sans-serif } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: 'Roboto Slab', Helvetica, Arial, sans-serif } </style> <link rel="stylesheet" href="/assets/icomoon/style.css"> </noscript> <!--<![endif]--> <!--[if gt IE 8]><!----> <script async src="/assets/bower_components/webfontloader/webfontloader.js"></script> <!--<![endif]--> </head> <body> <div class="navbar fixed-top"> <div class="content"> <span class="sr-only">Jump to:</span> <a id="_menu" class="menu no-hover" href="#_title"> <span class="sr-only">Menu</span> </a> </div> </div> <div id="_yPushState"> <div class="fade-in"> <main id="_main" class="content" role="main" data-color="#4f86aa" data-image=""> <article id="post-web%E5%89%8D%E7%AB%AF/2011/06/11/%e3%80%90%e8%bd%ac%e3%80%91%e5%9b%9e%e8%bd%a6%e9%94%ae%e8%a7%a6%e5%8f%91%e8%a1%a8%e5%8d%95%e6%8f%90%e4%ba%a4%e7%9a%84%e9%97%ae%e9%a2%98" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/2011/06/11/e3-80-90-e8-bd-ac-e3-80-91-e5-9b-9e-e8-bd-a6-e9-94-ae-e8-a7-a6-e5-8f-91-e8-a1-a8-e5-8d-95-e6-8f-90-e4-ba-a4-e7-9a-84-e9-97-ae-e9-a2-98.html" data-flip="title"> 【转】回车键触发表单提交的问题 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-11T00:07:32+08:00">11 Jun 2011</time> in <span>Web前端</span> on <span>Javascript web 前端</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p><span><br /> <h3 class="entry-title"><font size="3"><a title="Permalink to 回车键触发表单提交的问题" href="http://wlog.com.cn/?p=1103" rel="bookmark"><u>回车键触发表单提交的问题</u></a></font></h3> <div style="font-family: corbel;margin-left: 0px;margin-right: 0px" class="entry-date">2009年03月24号 – 19:54</div> <div style="margin-left: 0px;margin-right: 0px" class="entry-content"> <p><font size="3">我们有时候希望回车键敲在文本框（input element）里来提交表单（form），但有时候又不希望如此。比如搜索行为，希望输入完关键词之后直接按回车键立即提交表单，而有些复杂表单，可能要避免回车键误操作在未完成表单填写的时候就触发了表单提交。 <br />要控制这些行为，不需要借助JS，浏览器已经帮我们做了这些处理，这里总结几条规则： <br />1、如果表单里有一个type=”submit”的按钮，回车键生效。 <br />2、如果表单里只有一个type=”text”的input，不管按钮是什么type，回车键生效。 <br />3、如果按钮不是用input，而是用button，并且没有加type，IE下默认为type=button，FF默认为type=submit。 <br />4、其他表单元素如textarea、select不影响，radio checkbox不影响触发规则，但本身在FF下会响应回车键，在IE下不响应。 <br />5、type=”image”的input，效果等同于type=”submit”，不知道为什么会设计这样一种type，不推荐使用，应该用CSS添加背景图合适些。 <br />实际应用的时候，要让表单响应回车键很容易，保证表单里有个type=”submit”的按钮就行。<font color="#ff0000">而当只有一个文本框又不希望响应回车键怎么办呢？我的方法有点别扭，就是再写一个无意义的文本框，隐藏起来<span class="writely-comment writely-comment-yellow"> <font color="#000000">但是如果设置了submit tabindex=0,则会提交 </font></span>&#160;</font>。根据第3条规则，我们在用button的时候，尽量显式声明type以使浏览器表现一致。</font></p> </p></div> <p> </span></p> <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/2011/06/11/e3-80-90-e8-bd-ac-e3-80-91-e5-9b-9e-e8-bd-a6-e9-94-ae-e8-a7-a6-e5-8f-91-e8-a1-a8-e5-8d-95-e6-8f-90-e4-ba-a4-e7-9a-84-e9-97-ae-e9-a2-98.html" data-flip="title">【转】回车键触发表单提交的问题</a></p> </article> <article id="post-web/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/2011/06/11/cs%e4%b8%8ebs%e6%9e%b6%e6%9e%84" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/2011/06/11/cs-e4-b8-8ebs-e6-9e-b6-e6-9e-84.html" data-flip="title"> C/S与B/S架构 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-11T00:05:41+08:00">11 Jun 2011</time> in <span>Web</span> / <span>软件工程</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p><font face="&#039;Courier New&#039;"><font size="3"><span style="font-family: verdana, sans-serif"><font size="3">为了区别于传统的C/S模式，才特意将其称为B/S模式。认识到这些结构的特征，对于系统的选型而言是很关键的。&#160; <br />1、系统的性能&#160; <br />在系统的性能方面，B/S占有优势的是其异地浏览和信息采集的灵活性。任何时间、任何地点、任何系统，只要可以使用浏览器上网，就可以使用B/S系统的终端。&#160; <br />不过，采用B/S结构，客户端只能完成浏览、查询、数据输入等简单功能，绝大部分工作由服务器承担，这使得服务器的负担很重。采用C/S结构时，客户端和服务器端都能够处理任务，这虽然对客户机的要求较高，但因此可以减轻服务器的压力。而且，由于客户端使用浏览器，使得网上发布的信息必须是以HTML格式为主，其它格式文件多半是以附件的形式存放。而HTML格式文件（也就是Web页面）不便于编辑修改，给文件管理带来了许多不便。&#160; <br />2、系统的开发&#160; <br />C/S 结构是建立在中间件产品基础之上的，要求应用开发者自己去处理事务管理、消息队列、数据的复制和同步、通信安全等系统级的问题。这对应用开发者提出了较高的要求，而且迫使应用开发者投入很多精力来解决应用程序以外的问题。这使得应用程序的维护、移植和互操作变得复杂。如果客户端是在不同的操作系统上，C/S结构的软件需要开发不同版本的客户端软件。但是，与B/S结构相比，C/S技术发展历史更为“悠久”。从技术成熟度及软件设计、开发人员的掌握水平来看，C/S技术应是更成熟、更可靠的。&#160; <br />3、系统的升级维护&#160; <br />C/S系统的各部分模块中有一部分改变，就要关联到其它模块的变动，使系统升级成本比较大。B/S与C/S处理模式相比，则大大简化了客户端，只要客户端机器能上网就可以。对于B/S而言，开发、维护等几乎所有工作也都集中在服务器端，当企业对网络应用进行升级时，只需更新服务器端的软件就可以，这减轻了异地用户系统维护与升级的成本。如果客户端的软件系统升级比较频繁，那么B/S架构的产品优势明显——所有的升级操作只需要针对服务器进行，这对那些点多面广的应用是很有价值的，例如一些招聘网站就需要采用B/S模式，客户端分散，且应用简单，只需要进行简单的浏览和少量信息的录入。&#160; <br />4、C/S 模式的优点和缺点&#160; <br />★ C/S 模式的优点&#160; <br />● 由于客户端实现与服务器的直接相连，没有中间环节，因此<font color="#0000ff"><b>响应速度快</b></font>。&#160; <br />● <font color="#0000ff"><b>操作界面漂亮</b></font>、形式多样，可以充分满足客户自身的个性化要求。&#160; <br />● C/S结构的管理信息系统具有<font color="#0000ff"><b>较强的事务处理能力</b></font><font color="#0000ff"><b>，能实现复杂的业务流程。 </b></font> <br />★ C/S 模式的缺点&#160; <br />● 需要专门的客户端安装程序，<font color="#ff9900"><b>分布功能弱</b></font>，针对点多面广且不具备网络条件的用户群体，不能够实现快速部署安装和配置。&#160; <br />●<b><font color="#ff9900"> 兼容性差</font></b>，对于不同的开发工具，具有较大的局限性。若采用不同工具，需要重新改写程序。&#160; <br />● <font color="#ff9900"><b>开发成本较高</b></font>，需要具有一定专业水准的技术人员才能完成。&#160; <br />5、B/S模式的优点和缺点&#160; <br />★ B/S 模式的优点&#160; <br />● <font color="#0000ff"><b>具有分布性特点</b></font>，可以随时随地进行查询、浏览等业务处理。&#160; <br />● 业务扩展简单方便，通过增加网页即可增加服务器功能。&#160; <br />● 维护简单方便，只需要改变网页，即可实现所有用户的同步更新。&#160; <br />● 开发简单，共享性强。&#160; <br />★ B/S 模式的缺点&#160; <br />● 个性化特点明显降低，无法实现具有个性化的功能要求。&#160; <br />● 操作是以鼠标为最基本的操作方式，无法满足快速操作的要求。&#160; <br />● 页面动态刷新，<font color="#ff9900"><b>响应速度明显降低。</b></font>&#160; <br />● 无法实现本地分页缓存显示，<b><font color="#ff9900">给数据库访问造成较大的压力</font></b>。&#160; <br />● <font color="#ff9900"><b>功能弱化</b></font>，难以实现传统模式下的特殊功能要求。</font></span></font></font> <div><font face="verdana, sans-serif"><font size="3"> <br /></font></font></div> <div><font face="verdana, sans-serif"><font size="3"> <br /></font></font></div> <div><font face="&#039;Courier New&#039;"><font size="3"><font face="verdana, sans-serif">c/s,b/s混用</font></font></font></div> <div><font face="&#039;Courier New&#039;"><font size="3"><font face="verdana, sans-serif">异地查询，浏览等，功能简单，数据量小，安全要求低的可通过b/s实现。</font></font></font></div> <div><font face="&#039;Courier New&#039;"><font size="3"><font face="verdana, sans-serif">对于数据量大，功能复杂，安全要求高的则使用c/s实现。 <br /></font></font></font> </div> <p class="read-more">Continue reading <a class="heading" href="/web/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/2011/06/11/cs-e4-b8-8ebs-e6-9e-b6-e6-9e-84.html" data-flip="title">C/S与B/S架构</a></p> </article> <article id="post-java/2011/06/11/java%e5%86%85%e5%ad%98%e6%b3%84%e6%bc%8f%e5%86%85%e5%ad%98%e6%b3%84%e6%bc%8f%e5%8e%9f%e5%9b%a0%e5%92%8c%e5%86%85%e5%ad%98%e6%b3%84%e6%bc%8f%e6%a3%80%e6%b5%8b%e5%b7%a5%e5%85%b7" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/2011/06/11/java-e5-86-85-e5-ad-98-e6-b3-84-e6-bc-8f-e5-86-85-e5-ad-98-e6-b3-84-e6-bc-8f-e5-8e-9f-e5-9b-a0-e5-92-8c-e5-86-85-e5-ad-98-e6-b3-84-e6-bc-8f-e6-a3-80-e6-b5-8b-e5-b7-a5-e5-85-b7.html" data-flip="title"> JAVA内存泄漏——内存泄漏原因和内存泄漏检测工具 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-11T00:05:18+08:00">11 Jun 2011</time> in <span>Java</span> on <span>Java</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p><span style="font-family: 宋体, arial, helvetica, sans-serif; color: rgb(51,51,51)"> <p><font size="3">摘要&#160; <br />虽然Java虚拟机(JVM)及其垃圾收集器(garbage collector，GC)负责管理大多数的内存任务，Java软件程序中还是有可能出现内存泄漏。实际上，这在大型项目中 是一个常见的问题。避免内存泄漏的第一步是要弄清楚它是如何发生的。本文介绍了编写Java代码的一些常见的内存泄漏陷阱，以及编写不泄漏代码的一些最佳 实践。一旦发生了内存泄漏，要指出造成泄漏的代码是非常困难的。因此本文还介绍了一种新工具，用来诊断泄漏并指出根本原因。该工具的开销非常小，因此可以 使用它来寻找处于生产中的系统的内存泄漏。</font></p> <p><font size="3">垃圾收集器的作用</font></p> <p><font size="3">虽然垃圾收集器处理了大多数内存管理问题，从而使编程人员的生活变得更轻松了，但是编程人员还是可能犯错而导致出现内存问题。简单地说，GC循 环地跟踪所有来自“根”对象（堆栈对象、静态对象、JNI句柄指向的对象，诸如此类）的引用，并将所有它所能到达的对象标记为活动的。程序只可以操纵这些 对象；其他的对象都被删除了。因为GC使程序不可能到达已被删除的对象，这么做就是安全的。</font></p> <p><font size="3">虽然内存管理可以说是自动化的，但是这并不能使编程人员免受思考内存管理问题之苦。例如，分配（以及释放）内存总会有开销，虽然这种开销对编程人员来说是不可见的。创建了太多对象的程序将会比完成同样的功能而创建的对象却比较少的程序更慢一些（在其他条件相同的情况下）。</font></p> <p><font size="3">而且，与本文更为密切相关的是，如果忘记“释放”先前分配的内存，就可能造成内存泄漏。 如果程序保留对永远不再使用的对象的引用，这些对象将会占用并耗尽内存，这是因为自动化的垃圾收集器无法证明这些对象将不再使用。正如我们先前所说的，如 果存在一个对对象的引用，对象就被定义为活动的，因此不能删除。为了确保能回收对象占用的内存，编程人员必须确保该对象不能到达。这通常是通过将对象字段 设置为null或者从集合(collection)中移除对象而完成的。但是，注意，当局部变量不再使用时，没有必要将其显式地设置为null。对这些变 量的引用将随着方法的退出而自动清除。</font></p> <p><font size="3">概括地说，这就是内存托管语言中的内存泄漏产生的主要原因：保留下来却永远不再使用的对象引用。</font></p> <p><font size="3">典型泄漏</font></p> <p><font size="3">既然我们知道了在Java中确实有可能发生内存泄漏，就让我们来看一些典型的内存泄漏及其原因。</font></p> <p><font size="3">全局集合</font></p> <p><font size="3">在大的应用程序中有某种全局的数据储存库是很常见的，例如一个JNDI树或一个会话表。在这些情况下，必须注意管理储存库的大小。必须有某种机制从储存库中移除不再需要的数据。</font></p> <p><font size="3">这可能有多种方法，但是最常见的一种是周期性运行的某种清除任务。该任务将验证储存库中的数据，并移除任何不再需要的数据。</font></p> <p><font size="3">另一种管理储存库的方法是使用反向链接(referrer)计数。然后集合负责统计集合中每个入口的反向链接的数目。这要求反向链接告诉集合何时会退出入口。当反向链接数目为零时，该元素就可以从集合中移除了。</font></p> <p><font size="3">缓存</font></p> <p><font size="3">缓存是一种数据结构，用于快速查找已经执行的操作的结果。因此，如果一个操作执行起来很慢，对于常用的输入数据，就可以将操作的结果缓存，并在下次调用该操作时使用缓存的数据。</font></p> <p><font size="3">缓存通常都是以动态方式实现的，其中新的结果是在执行时添加到缓存中的。典型的算法是：</font></p> <p><font size="3">检查结果是否在缓存中，如果在，就返回结果。&#160; <br />如果结果不在缓存中，就进行计算。&#160; <br />将计算出来的结果添加到缓存中，以便以后对该操作的调用可以使用。&#160; <br />该算法的问题（或者说是潜在的内存泄漏）出在最后一步。如果调用该操作时有相当多的不同输入，就将有相当多的结果存储在缓存中。很明显这不是正确的方法。</font></p> <p><font size="3">为了预防这种具有潜在破坏性的设计，程序必须确保对于缓存所使用的内存容量有一个上限。因此，更好的算法是：</font></p> <p><font size="3">检查结果是否在缓存中，如果在，就返回结果。&#160; <br />如果结果不在缓存中，就进行计算。&#160; <br />如果缓存所占的空间过大，就移除缓存最久的结果。&#160; <br />将计算出来的结果添加到缓存中，以便以后对该操作的调用可以使用。&#160; <br />通过始终移除缓存最久的结果，我们实际上进行了这样的假设：在将来，比起缓存最久的数据，最近输入的数据更有可能用到。这通常是一个不错的假设。</font></p> <p><font size="3">新算法将确保缓存的容量处于预定义的内存范围之内。确切的范围可能很难计算，因为缓存中的对象在不断变化，而且它们的引用包罗万象。为缓存设置正确的大小是一项非常复杂的任务，需要将所使用的内存容量与检索数据的速度加以平衡。</font></p> <p><font size="3">解决这个问题的另一种方法是使用java.lang.ref.SoftReference类跟踪缓存中的对象。这种方法保证这些引用能够被移除，如果虚拟机的内存用尽而需要更多堆的话。</font></p> <p><font size="3">ClassLoader</font></p> <p><font size="3">Java ClassLoader结构的使用为内存泄漏提供了许多可乘之机。正是该结构本身的复杂性使ClassLoader在内存泄漏方面存在如此多的问题。 ClassLoader的特别之处在于它不仅涉及“常规”的对象引用，还涉及元对象引用，比如：字段、方法和类。这意味着只要有对字段、方法、类或 ClassLoader的对象的引用，ClassLoader就会驻留在JVM中。因为ClassLoader本身可以关联许多类及其静态字段，所以就有 许多内存被泄漏了。</font></p> <p><font size="3">确定泄漏的位置</font></p> <p><font size="3">通常发生内存泄漏的第一个迹象是：在应用程序中出现了OutOfMemoryError。这通常发生在您最不愿意它发生的生产环境中，此时几乎 不能进行调试。有可能是因为测试环境运行应用程序的方式与生产系统不完全相同，因而导致泄漏只出现在生产中。在这种情况下，需要使用一些开销较低的工具来 监控和查找内存泄漏。还需要能够无需重启系统或修改代码就可以将这些工具连接到正在运行的系统上。可能最重要的是，当进行分析时，需要能够断开工具而保持 系统不受干扰。</font></p> <p><font size="3">虽然OutOfMemoryError通常都是内存泄漏的信号，但是也有可能应用程序确实正在使用这么多的内存；对于后者，或者必须增加JVM 可用的堆的数量，或者对应用程序进行某种更改，使它使用较少的内存。但是，在许多情况下，OutOfMemoryError都是内存泄漏的信号。一种查明 方法是不间断地监控GC的活动，确定内存使用量是否随着时间增加。如果确实如此，就可能发生了内存泄漏。</font></p> <p><font size="3">详细输出</font></p> <p><font size="3">有许多监控垃圾收集器活动的方法。而其中使用最广泛的可能是使用-Xverbose:gc选项启动JVM，并观察输出。</font></p> <p><font size="3">[memory ] 10.109-10.235: GC 65536K-&gt;16788K (65536K), 126.000 ms&#160; <br />箭头后面的值（本例中是16788K）是垃圾收集所使用的堆的容量。</font></p> <p><font size="3">控制台</font></p> <p><font size="3">查看连续不断的GC的详细统计信息的输出将是非常乏味的。幸好有这方面的工具。<font class="Apple-style-span" color="#0000ff"><b>JRockit </b></font>Management Console可以显示堆使用量的图示。借助于该图，可以很容易地看出堆使用量是否随时间增加。 <br /><img alt="diyblPic" src="/assets/0.gif" />&#160; <br /><i>Figure 1. The JRockit Management Console</i></font></p> <p><font size="3">甚至可以配置该管理控制台，以便如果发生堆使用量过大的情况（或基于其他的事件），控制台能够向您发送电子邮件。这明显使内存泄漏的查看变得更容易了。</font></p> <p><font size="2">内存泄漏检测工具</font></p> <p><font size="2">还有其他的专门进行内存泄漏检测的工具。JRockit Memory Leak Detector可以用来查看内存泄漏，并可以更深入地查出泄漏的根源。这个强大的工具是紧密集成到JRockit JVM中的，其开销非常小，对虚拟机的堆的访问也很容易。</font></p> <p><font size="2">专业工具的优点</font></p> <p><font size="2">一旦知道确实发生了内存泄漏，就需要更专业的工具来查明为什么会发生泄漏。JVM自己是不会告诉您的。这些专业 工具从JVM获得内存系统信息的方法基本上有两种：JVMTI和字节码技术(byte code instrumentation)。Java虚拟机工具接口(Java Virtual Machine Tools Interface，JVMTI)及其前身Java虚拟机监视程序接口(Java Virtual Machine Profiling Interface，JVMPI)是外部工具与JVM通信并从JVM收集信息的标准化接口。字节码技术是指使用探测器处理字节码以获得工具所需的信息的技 术。</font></p> <p><font size="2">对于内存泄漏检测来说，这两种技术有两个缺点，这使它们不太适合用于生产环境。首先，它们在内存占用和性能降低 方面的开销不可忽略。有关堆使用量的信息必须以某种方式从JVM导出，并收集到工具中进行处理。这意味着要为工具分配内存。信息的导出也影响了JVM的性 能。例如，当收集信息时，垃圾收集器将运行得比较慢。另外一个缺点是需要始终将工具连在JVM上。这是不可能的：将工具连在一个已经启动的JVM上，进行 分析，断开工具，并保持JVM运行。</font></p> <p><font size="2">因为JRockit Memory Leak Detector是集成到JVM中的，就没有这两个缺点了。首先，许多处理和分析工作是 在JVM内部进行的，所以没有必要转换或重新创建任何数据。处理还可以背负(piggyback)在垃圾收集器本身上而进行，这意味着提高了速度。其次， 只要JVM是使用-Xmanagement选项（允许通过远程JMX接口监控和管理JVM）启动的，Memory Leak Detector就可以与运行中的JVM进行连接或断开。当该工具断开时，没有任何东西遗留在JVM中，JVM又将以全速运行代码，正如工具连接之前一 样。</font></p> <p><font size="2">趋势分析</font></p> <p><font size="2">让我们深入地研究一下该工具以及它是如何用来跟踪内存泄漏的。在知道发生内存泄漏之后，第一步是要弄清楚泄漏了 什么数据--哪个类的对象引起了泄漏？JRockit Memory Leak Detector是通过在每次垃圾收集时计算每个类的现有对象的数目来实现这一步的。如果特定类的对象数目随时间而增长（“增长率”），就可能发生了内存 泄漏。</font></p> <p><font size="2"><img alt="diyblPic" src="/assets/1.gif" />&#160; <br />图2. Memory Leak Detector的趋势分析视图</font></p> <p><font size="2">因为泄漏可能像细流一样非常小，所以趋势分析必须运行很长一段时间。在短时间内，可能会发生一些类的局部增长， 而之后它们又会跌落。但是趋势分析的开销很小（最大开销也不过是在每次垃圾收集时将数据包由JRockit发送到Memory Leak Detector）。开销不应该成为任何系统的问题——即使是一个全速运行的生产中的系统。</font></p> <p><font size="2">起初数目会跳跃不停，但是一段时间之后它们就会稳定下来，并显示出哪些类的数目在增长。</font></p> <p><font size="2">找出根本原因</font></p> <p><font size="2">有时候知道是哪些类的对象在泄漏就足以说明问题了。这些类可能只用于代码中的非常有限的部分，对代码进行一次快 速检查就可以显示出问题所在。遗憾地是，很有可能只有这类信息还并不够。例如，常见到泄漏出在类java.lang.String的对象上，但是因为字符 串在整个程序中都使用，所以这并没有多大帮助。</font></p> <p><font size="2">我们想知道的是，另外还有哪些对象与泄漏对象关联？在本例中是String。为什么泄漏的对象还存在？哪些对象 保留了对这些对象的引用？但是能列出的所有保留对String的引用的对象将会非常多，以至于没有什么实际用处。为了限制数据的数量，可以将数据按类分 组，以便可以看出其他哪些对象的类与泄漏对象(String)关联。例如，String在Hashtable中是很常见的，因此我们可能会看到与 String关联的Hashtable数据项对象。由Hashtable数据项倒推，我们最终可以找到与这些数据项有关的Hashtable对象以及 String（如图3所示）。</font></p> <p><font size="2"><img alt="diyblPic" src="/assets/2.gif" />&#160; <br />图3. 在工具中看到的类型图的示例视图</font></p> <p><font size="2">倒推</font></p> <p><font size="2">因为我们仍然是以类的对象而不是单独的对象来看待对象，所以我们不知道是哪个Hashtable在泄漏。如果我 们可以弄清楚系统中所有的Hashtable都有多大，我们就可以假定最大的Hashtable就是正在泄漏的那一个（因为随着时间的流逝它会累积泄漏而 增长得相当大）。因此，一份有关所有Hashtable对象以及它们引用了多少数据的列表，将会帮助我们指出造成泄漏的确切Hashtabl。</font></p></p> <p><font size="3"><font size="2"><img alt="diyblPic" src="/assets/3.gif" />&#160; <br />图4. 界面：Hashtable对象以及它们所引用数据的数量的列表</font></font></p> <p><font size="2"><font size="2">对对象引用数据数目的计算开销非常大（需要以该对象作为根遍历引用图），如果必须对许多对象都这么做，将会花很 多时间。如果了解一点Hashtable的内部实现原理就可以找到一条捷径。Hashtable的内部有一个Hashtable数据项的数组。该数组随着 Hashtable中对象数目的增长而增长。因此，为找出最大的Hashtable，我们只需找出引用Hashtable数据项的最大数组。这样要快很 多。</font></font></p> <p><font size="3"><img alt="diyblPic" src="/assets/4.gif" /><font size="2">&#160; <br /></font></font><font size="2"><font size="2">图5. 界面：最大的Hashtable数据项数组及其大小的清单</font></font></p> <p><font size="2"><font size="2">更进一步</font></font></p> <p><font size="2"><font size="2">当找到发生泄漏的Hashtable实例时，我们可以看到其他哪些实例在引用该Hashtable，并倒推回去看看是哪个Hashtable在泄漏。</font></font></p> <p><font size="2"><img alt="diyblPic" src="/assets/5.gif" /><font size="2">&#160; <br />图 6. 这就是工具中的实例图</font></font></p> <p><font size="2"><font size="2">例如，该Hashtable可能是由MyServer类型的对象在名为activeSessions的字段中引用的。这种信息通常就足以查找源代码以定位问题所在了。</font></font></p> <p><font size="2"><img alt="diyblPic" src="/assets/6.gif" /><font size="2">&#160; <br />图7. 检查对象以及它对其他对象的引用</font></font></p> <p><font size="2"><font size="2">找出分配位置</font></font></p> <p><font size="2"><font size="2">当跟踪内存泄漏问题时，查看对象分配到哪里是很有用的。只知道它们如何与其他对象相关联（即哪些对象引用了它 们）是不够的，关于它们在何处创建的信息也很有用。当然了，您并不想创建应用程序的辅助构件，以打印每次分配的堆栈跟踪(stack trace)。您也不想仅仅为了跟踪内存泄漏而在运行应用程序时将一个分析程序连接到生产环境中。</font></font></p> <p><font size="2"><font size="2">借助于JRockit Memory Leak Detector，应用程序中的代码可以在分配时进行动态添加，以创建堆栈跟踪。这些堆栈跟踪可以在工具中进行累积和分析。只要不启用就不会因该功能而产 生成本，这意味着随时可以进行分配跟踪。当请求分配跟踪时，JRockit 编译器动态插入代码以监控分配，但是只针对所请求的特定类。更好的是，在进行数据分析时，添加的代码全部被移除，代码中没有留下任何会引起应用程序性能降 低的更改。</font></font></p> <p><font size="2"><img alt="diyblPic" src="/assets/7.gif" /><font size="2">&#160; <br />图8. 示例程序执行期间String的分配的堆栈跟踪</font></font></p> <p><font size="2"><font size="2">结束语</font></font></p> <p><font size="2"><font size="2">内存泄漏是难以发现的。本文重点介绍了几种避免内存泄漏的最佳实践，包括要始终记住在数据结构中所放置的内容，以及密切监控内存使用量以发现突然的增长。</font></font></p> <p><font size="2"><font size="2">我们都已经看到了JRockit Memory Leak Detector是如何用于生产中的系统以跟踪内存泄漏的。该工具使用一种三步式的方法来找出泄漏。首先，进行趋势分析，找出是哪个类的对象在泄漏。接下 来，看看有哪些其他的类与泄漏的类的对象相关联。最后，进一步研究单个对象，看看它们是如何互相关联的。也有可能对系统中所有对象分配进行动态的堆栈跟 踪。这些功能以及该工具紧密集成到JVM中的特性使您可以以一种安全而强大的方式跟踪内存泄漏并进行修复</font></font></p> <p><font size="2"></font></p> <p><font color="#0000ff" size="2">我在这里举个例子:</font></p> <p>java.lang.OutOfMemoryError这个错都见过，这就是内存泄露的结果。</p> <p><font size="2">在effective java item6中 讲了如下的例子:</font></p> <div><pre><span style="color: #0000ff">public</span> <span style="color: #0000ff">class</span> Stack {
<span style="color: #0000ff">private</span> Object[] elements;
<span style="color: #0000ff">private</span> <span style="color: #0000ff">int</span> size = 0;
<span style="color: #0000ff">private</span> <span style="color: #0000ff">static</span> <span style="color: #0000ff">final</span> <span style="color: #0000ff">int</span> DEFAULT_INITIAL_CAPACITY = 16;
<span style="color: #0000ff">public</span> Stack() {
elements = <span style="color: #0000ff">new</span> Object[DEFAULT_INITIAL_CAPACITY];
}
<span style="color: #0000ff">public</span> <span style="color: #0000ff">void</span> push(Object e) {
ensureCapacity();
elements[size++] = e;
}
<span style="color: #0000ff">public</span> Object pop() {
<span style="color: #0000ff">if</span> (size == 0)
<span style="color: #0000ff">throw</span> <span style="color: #0000ff">new</span> EmptyStackException();
<span style="color: #0000ff">return</span> elements[—size]; //这里仍存在对pop出去对象的强引用，问题来了
}
<span style="color: #008000">/**
* Ensure space for at least one more element, roughly
* doubling the capacity each time the array needs to grow.
*/</span>
<span style="color: #0000ff">private</span> <span style="color: #0000ff">void</span> ensureCapacity() {
<span style="color: #0000ff">if</span> (elements.length == size)
elements = Arrays.copyOf(elements, 2 * size + 1);
}
}</pre></p></div> <p>应该修改如下:</p> <div><pre><span style="color: #0000ff">public</span> Object pop() {
<span style="color: #0000ff">if</span> (size == 0)
<span style="color: #0000ff">throw</span> <span style="color: #0000ff">new</span> EmptyStackException();
Object result = elements[--size];
elements[size] = <span style="color: #0000ff">null</span>; <span style="color: #008000">// Eliminate obsolete reference</span>
<span style="color: #0000ff">return</span> result;
}</pre></p></div> <p>内存泄露(Memory Leak)还有个名称叫做</p> <p>unintentional object retentions 非故意对象闭留</p> <p></p> <p> </p> <p> <font size="2"></font></p> <p></span></p> <p class="read-more">Continue reading <a class="heading" href="/java/2011/06/11/java-e5-86-85-e5-ad-98-e6-b3-84-e6-bc-8f-e5-86-85-e5-ad-98-e6-b3-84-e6-bc-8f-e5-8e-9f-e5-9b-a0-e5-92-8c-e5-86-85-e5-ad-98-e6-b3-84-e6-bc-8f-e6-a3-80-e6-b5-8b-e5-b7-a5-e5-85-b7.html" data-flip="title">JAVA内存泄漏——内存泄漏原因和内存泄漏检测工具</a></p> </article> <article id="post-web%E5%89%8D%E7%AB%AF/2011/06/11/%e5%9c%a8ie%e4%b8%8b%ef%bc%8cbutton%e6%a0%87%e8%ae%b0%e6%81%90%e6%80%95%e8%bf%98%e5%ad%98%e5%9c%a8%e5%87%a0%e4%b8%aa%e4%b8%8d%e5%a4%a7%e4%b8%8d%e5%b0%8f%e7%9a%84%e9%97%ae%e9%a2%98%e3%80%82" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/2011/06/11/e5-9c-a8ie-e4-b8-8b-ef-bc-8cbutton-e6-a0-87-e8-ae-b0-e6-81-90-e6-80-95-e8-bf-98-e5-ad-98-e5-9c-a8-e5-87-a0-e4-b8-aa-e4-b8-8d-e5-a4-a7-e4-b8-8d-e5-b0-8f-e7-9a-84-e9-97-ae-e9-a2-98-e3-80-82.html" data-flip="title"> 在ie下，<button>标记恐怕还存在几个不大不小的问题。 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-11T00:03:22+08:00">11 Jun 2011</time> in <span>Web前端</span> on <span>Javascript web 前端</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p style="margin-left: 0px;margin-right: 0px"><font size="3">在ie下，&lt;button&gt;标记恐怕还存在几个不大不小的问题。</font></p> <ol style="margin-left: 2em;margin-right: 0px"> <li><font size="2">在一个表单里，如果有一个以上&quot;submit&quot;类型的&lt;button&gt;标签存在，在表单被提交时，不管你点击哪个&lt;button&gt;，所有&lt;button&gt;的值都会被post/get。</font></li> <li><font size="2">&lt;button&gt;的缺省type属性被设置为&quot;button&quot;，但是在A级别浏览器下，应该设置为&quot;submit&quot;才对</font></li> <li><font size="2">如果你用javascript去访问&lt;button&gt;的value属性，IE却返回了&lt;button&gt;的innerHTML属性，很让人恼火。 (可以使用&quot;getAttributeNode&quot;方法来避免.)</font></li> </ol> <p style="margin-left: 0px;margin-right: 0px"><font size="3">例如，一段<a href="http://www.ooso.net/archives/index.php?tag=html">HTML</a>:</font></p> <div class="igBar"><font size="2"><a href="http://www.ooso.net/archives/352#"><b>PLAIN TEXT</b></a></font></div> <div class="syntax_hilite"><font size="2"><span class="langName"><b>CODE:</b></span></font> <div> <div class="code"> <ol style="margin-left: 2em;margin-right: 0px"> <li> <div style="font-weight: normal"><font size="2">&lt;form&gt;</font></div> </li> <li> <div style="font-weight: normal"><font size="2">&lt;button type=<span>&quot;submit&quot;</span> value=<span>&quot;1&quot;</span> name=<span>&quot;action-1&quot;</span>&gt;text <span>1</span>&lt;/button&gt;</font></div> </li> <li> <div style="font-weight: normal"><font size="2">&lt;button type=<span>&quot;submit&quot;</span> value=<span>&quot;2&quot;</span> name=<span>&quot;action-2&quot;</span>&gt;text <span>2</span>&lt;/button&gt;</font></div> </li> <li> <div style="font-weight: normal"><font size="2">&lt;/form&gt;</font></div> </li> </ol></div> </p></div> </p></div> <p style="margin-left: 0px;margin-right: 0px"> <p style="margin-left: 0px;margin-right: 0px"><font size="3">在IE下，上面两个button的数据都会被提交。并且ie会提交这两个button的innerText而不是value。而其它浏览器仅仅提交你点击的那个button。</font></p> <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/2011/06/11/e5-9c-a8ie-e4-b8-8b-ef-bc-8cbutton-e6-a0-87-e8-ae-b0-e6-81-90-e6-80-95-e8-bf-98-e5-ad-98-e5-9c-a8-e5-87-a0-e4-b8-aa-e4-b8-8d-e5-a4-a7-e4-b8-8d-e5-b0-8f-e7-9a-84-e9-97-ae-e9-a2-98-e3-80-82.html" data-flip="title">在ie下，<button>标记恐怕还存在几个不大不小的问题。</a></p> </article> <article id="post-%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/2011/06/11/vv-%e8%af%84%e5%ae%a1%e6%8c%87%e5%8d%97" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/2011/06/11/vv-e8-af-84-e5-ae-a1-e6-8c-87-e5-8d-97.html" data-flip="title"> VV 评审指南 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-11T00:00:21+08:00">11 Jun 2011</time> in <span>软件工程</span> on <span>Vv</span>, <span>管理</span>, <span>软件工程</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <h3 id="sites-page-title-header" align="left">&#160;</h3> <div class="sites-canvas-main"> <div> <table class="sites-layout-name-one-column sites-layout-hbox zeroBorder" cellspacing="0"> <tbody> <tr> <td class="sites-layout-tile sites-tile-name-content-1"> <div dir="ltr"> <p style="text-align: center" align="center"><b><font size="6">评审指南</font></b></p> <p style="margin-left: 10pt"><a name="_Toc111351900"></a><a name="_Toc109812730"></a><a name="_Toc107133411"></a><a name="_Toc106530402"></a><a name="_Toc106530314"></a><a name="_Toc106526364"><font size="3">1.<span><font size="1">&#160;&#160;&#160;&#160;&#160; </font></span></font>目的</a></p> <p style="text-align: left" align="left"><font size="3">指导相关人员进行评审的规范流程,预先发现开发和管理中的问题，以便于处理。</font></p> <p><a name="_Toc111351901"></a><a name="_Toc109812731"></a><a name="_Toc107133412"></a><a name="_Toc106530403"></a><a name="_Toc106530315"><font size="3">2.<span><font size="1">&#160;&#160; </font></span></font>范围</a></p> <p style="text-align: left" align="left"><font size="3">本文档应结合《验证过程文件》使用。</font></p> <p style="text-align: left" align="left"><font size="3">本文档适用于公司内部所有软件项目/产品的评审活动。</font></p> <p style="text-align: left" align="left"><font size="3">同行评审的适用范畴:适用于对项目过程中工作产品的评审，如需求评审、设计评审、技术解决方案评审、程序设计评审、变更评审等。 <br />&#160;&#160;&#160; 管理评审的适用范畴:适用于对项目过程中管理活动的评审，如项目计划评审、里程碑评审、阶段性评审等。</font></p> <p style="text-align: left" align="left"><font size="3">单人评审的适用范畴:适用于工作产品是简单明了的，不可能有很多缺陷，而且也不是非常关键的评审，如代码检查、测试用例评审、测试观点评审、测试报告评审等。</font></p> <p><a name="_Toc111351902"></a><a name="_Toc109812732"></a><a name="_Toc107133413"></a><a name="_Toc106530404"></a><a name="_Toc106530316"><font size="3">3.<span><font size="1">&#160;&#160; </font></span></font>输入</a></p> <p style="text-align: left;margin-left: 24pt" align="left"><font size="3">待评审产品 <br />评审检查表</font></p> <p style="text-align: left" align="left"><font size="3">与评审有关的软件过程及标准</font></p> <p><a name="_Toc111351903"></a><a name="_Toc109812733"></a><a name="_Toc107133414"></a><a name="_Toc106530405"></a><a name="_Toc106530317"><font size="3">4.<span><font size="1">&#160;&#160; </font></span></font>定义</a></p> <p style="text-align: left;margin-left: 84.05pt" align="left"><font size="3">同行评审：Peer Review（简称PR），由软件工作产品创建者的同行们检查该工作产品，识别产品的缺陷，改进产品的不足。</font></p> <p style="text-align: left;margin-left: 84.05pt" align="left"><font size="3">管理评审：由软件项目/产品管理者对项目过程中管理活动进行评估，识别过程缺陷，改进管理活动。</font></p> <p style="text-align: left;margin-left: 84.05pt" align="left"><font size="3">单人评审：由单独一个评审员对简单的工作产品进行评估，识别产品的缺陷，改进产品的不足。</font></p> <p style="text-align: left;margin-left: 84.05pt" align="left"><font size="3">代码检查：检查编写好的程序代码，发现不符合编码规范、不能实现设计要求的的问题，改进代码的质量</font></p> <p style="text-align: left" align="left"><font size="3">PM</font><font size="3">：</font><font size="3">项</font><font size="3">目</font><font size="3">主管（Project Manager）</font></p> <p style="text-align: left" align="left"><font size="3">PL</font><font size="3">：项目经理（Project Leader）</font></p> <p style="text-align: left" align="left"><font size="3">SL</font><font size="3">：项目小组长（Sub- Leader）</font></p> <p style="text-align: left" align="left"><font size="3">QA</font><font size="3">：品质保证人员（Quality <span style="color: black">Assurance</span>）</font></p> <p style="text-align: left" align="left"><font size="3">QC</font><font size="3">：品质控制人员（Quality Control）</font></p> <p style="margin-left: 21pt"><font size="3">&#160;</font></p> <p><a name="_Toc111351904"></a><a name="_Toc109812734"></a><a name="_Toc107133415"></a><a name="_Toc106530406"></a><a name="_Toc106530318"><font size="3">5.<span><font size="1">&#160;&#160; </font></span></font>职责与角色</a></p> <p><a name="_Toc111351905"></a><a name="_Toc109812735"></a><a name="_Toc107133416"></a><a name="_Toc106530407"></a><a name="_Toc106530319">5.1<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span>同行评审中的角色和职责</a></p> <p style="margin-left: 0cm">&#160;</p> <table style="border-bottom-style: none;border-right-style: none;border-top-style: none;border-left-style: none" border="1" cellspacing="0" cellpadding="0"> <tbody> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt solid;border-right: windowtext 1pt solid" valign="top" width="91"> <p style="text-align: center" align="center"><b><font size="3">角&#160; 色</font></b></p> </td> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt;width: 367.15pt;border-top: windowtext 1pt solid;border-right: windowtext 1pt solid" valign="top" width="490"> <p style="text-align: center;margin-left: 21pt" align="center"><b><font size="3">职&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 责</font></b></p> </td> </tr> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" width="91"> <p><font size="3">评审组</font></p> </td> <td style="width: 367.15pt" valign="top" width="490"> <p><font size="3">接受过有关如何进行评审的培训,负责本次正式评审的组织,主持正式评审会议；</font></p> <p><font size="3">保证行动项和建议得到文档化; 跟踪与确认正式评审所提出行动项的落实；</font></p> <p><font size="3">报告评审的结果; 收集和报告同行评审所需数据.</font></p> </td> </tr> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" width="91"> <p><font size="3">项目经理</font></p> </td> <td style="width: 367.15pt" valign="top" width="490"> <p><font size="3">安排评审计划(是项目计划的一部分),并参与所有的主要文件评审. </font></p> </td> </tr> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" width="91"> <p><font size="3">QA</font></p> </td> <td style="width: 367.15pt" valign="top" width="490"> <p><font size="3">协助安排计划类正式评审,保证评审按照评审规程进行.（注：纯技术类评审QA可不参加）。</font></p> </td> </tr> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" width="91"> <p><font size="3">记录员/协调员</font></p> </td> <td style="width: 367.15pt" valign="top" width="490"> <p><font size="3">评审前准备材料；使用评审单,用标准化的形式对评审会议中提出的问题和缺陷进行记录,同时需要记录行动项和建议,并将记录结果的评审单原件交给评审组;将评审单电子文档化后提交给所有评审员.</font></p> </td> </tr> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" width="91"> <p><font size="3">作者</font></p> </td> <td style="width: 367.15pt" valign="top" width="490"> <p><font size="3">宣读作品、可提出初步问题进行评审、快速解决所有确定的问题、保持客观，避免抵抗态度。</font></p> </td> </tr> </tbody> </table> <p>&#160;</p> <p><a name="_Toc111351906"></a><a name="_Toc109812736"></a><a name="_Toc107133417"></a><a name="_Toc106530408"></a><a name="_Toc106530320">5.2<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span>管理评审中的角色和职责</a></p> <p><font size="2">&#160;</font></p> <table style="border-bottom-style: none;border-right-style: none;border-top-style: none;border-left-style: none" border="1" cellspacing="0" cellpadding="0"> <tbody> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt solid;border-right: windowtext 1pt solid" valign="top" width="91"> <p style="text-align: center" align="center"><b><font size="3">角&#160; 色</font></b></p> </td> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt;width: 367.15pt;border-top: windowtext 1pt solid;border-right: windowtext 1pt solid" valign="top" width="490"> <p style="text-align: center;margin-left: 21pt" align="center"><b><font size="3">职&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 责</font></b></p> </td> </tr> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" width="91"> <p><font size="3">项目主管</font></p> </td> <td style="width: 367.15pt" valign="top" width="490"> <p><font size="3">应定期或在遇到重大问题时对项目进展状况、遇到问题、质量管理状况、存在风险进行评审，并主持评审会议。</font></p> </td> </tr> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" width="91"> <p><font size="3">项目经理</font></p> </td> <td style="width: 367.15pt" valign="top" width="490"> <p><font size="3">应定期或在遇到重大问题时对项目进展状况、遇到问题、质量管理状况、存在风险进行评审。</font></p> </td> </tr> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" width="91"> <p><font size="3">QA</font></p> </td> <td style="width: 367.15pt" valign="top" width="490"> <p><font size="3">负责向项目经理报告质量管理的运行状况、对纠正和预防措施执行跟踪和验证。</font></p> </td> </tr> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" width="91"> <p><font size="3">小组负责人</font></p> </td> <td style="width: 367.15pt" valign="top" width="490"> <p><font size="3">负责小组内部状况报告、提供管理评审所需的相关资料；针对评审中提出的问题包括可能出现的问题，负责提出并组织采取纠正和预防措施。</font></p> </td> </tr> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" width="91"> <p><font size="3">记录员/协调员</font></p> </td> <td style="width: 367.15pt" valign="top" width="490"> <p><font size="3">对评审会议中提出的问题和项目情况进行记录,同时需要记录行动项和建议,并将记录结果电子文档化后提交给相关利益者;</font></p> </td> </tr> </tbody> </table> <p style="margin-left: 0cm"><a name="_Toc32476263"></a><a name="_Toc109812737">&#160;</a></p> <p><a name="_Toc111351907">5.3<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span>单人评审中的角色和职责</a></p> <p><font size="2">&#160;</font></p> <table style="border-bottom-style: none;border-right-style: none;border-top-style: none;border-left-style: none" border="1" cellspacing="0" cellpadding="0"> <tbody> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt solid;border-right: windowtext 1pt solid" valign="top" width="91"> <p style="text-align: center" align="center"><b><font size="3">角&#160; 色</font></b></p> </td> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt;width: 367.15pt;border-top: windowtext 1pt solid;border-right: windowtext 1pt solid" valign="top" width="490"> <p style="text-align: center;margin-left: 21pt" align="center"><b><font size="3">职&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 责</font></b></p> </td> </tr> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" width="91"> <p><font size="3">项目经理</font></p> </td> <td style="width: 367.15pt" valign="top" width="490"> <p><font size="3">确定哪些工作产品可进行单人评审，指定评审员。跟踪缺陷直到其得到解决</font></p> </td> </tr> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" width="91"> <p><font size="3">评审员</font></p> </td> <td style="width: 367.15pt" valign="top" width="490"> <p><font size="3">接受过有关如何进行评审的培训,执行评审，保证行动项和建议得到文档化; 跟踪与确认评审所提出行动项的落实；</font></p> <p><font size="3">报告评审的结果; 收集和报告评审所需数据.</font></p> </td> </tr> <tr> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 67.95pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" width="91"> <p><font size="3">作者</font></p> </td> <td style="width: 367.15pt" valign="top" width="490"> <p><font size="3">宣读作品、快速解决所有确定的问题、保持客观，避免抵抗态度。记录评审结果。</font></p> </td> </tr> </tbody> </table> <p style="margin-left: 0cm">&#160;</p> <p><a name="_Toc111351908"></a><a name="_Toc109812738"><font size="3">6.<span><font size="1">&#160;&#160; </font></span></font>入口准则</a></p> <p style="margin-left: 63pt"><span style="font-family: wingdings"><font size="3">Ø<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></span><font size="3">评审组长被任命。</font></p> <p style="margin-left: 63pt"><span style="font-family: wingdings"><font size="3">Ø<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></span><font size="3">评审在相关计划中被定义。</font></p> <p style="margin-left: 63pt"><span style="font-family: wingdings"><font size="3">Ø<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></span><font size="3">被评审的产品准备就绪。</font></p> <p style="margin-left: 63pt"><span style="font-family: wingdings"><font size="3">Ø<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></span><font size="3">评审员经过评审规程的培训。</font></p> <p style="margin-left: 63pt"><span style="font-family: wingdings"><font size="3">Ø<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></span><font size="3">评审员应经过被评审问题的技能的培训。</font></p> <p style="margin-left: 63pt"><span style="font-family: wingdings"><font size="3">Ø<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></span><font size="3">协调员应当受过如何执行评审的正式培训，或者应当参加几次评审的经验。</font></p> <p style="margin-left: 63pt"><span style="font-family: wingdings"><font size="3">Ø<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></span><font size="3">《项目计划》已经制定。</font></p> <p><a name="_Toc111351909"></a><a name="_Toc109812739"></a><a name="_Toc107133419"></a><a name="_Toc106530410"></a><a name="_Toc106530322"><font size="3">7.<span><font size="1">&#160;&#160; </font></span></font>评审准则</a></p> <p><a name="_Toc111351910"></a><a name="_Toc109812740"></a><a name="_Toc107133420"></a><a name="_Toc106530411"></a><a name="_Toc106530323">7.1<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span>同行评审准则</a></p> <p style="margin-left: 60pt"><font size="3">1）</font><font size="3">评审产品，而不是评审设计者（不能使设计者有任何压力）；</font></p> <p style="margin-left: 60pt"><font size="3">2）</font><font size="3">会场要有良好的气氛； </font></p> <p style="margin-left: 60pt"><font size="3">3）</font><font size="3">限制争论与反驳（评审会不是为了解决问题，而是为了发现问题）； </font></p> <p style="margin-left: 60pt"><font size="3">4）</font><font size="3">指明问题范围，而不是解决提到的问题； </font></p> <p style="margin-left: 60pt"><font size="3">5）</font><font size="3">展示记录（最好有黑板，将问题随时写在黑板上）； </font></p> <p style="margin-left: 60pt"><font size="3">6）</font><font size="3">组评审时会议人数应在5-9人为佳；</font></p> <p style="margin-left: 60pt"><font size="3">7）</font><font size="3">组评审时评审员中应包括被评审产品作者的同行。（例如对程序设计文档的评审，评审员中应包括其他程序设计人员）；</font></p> <p style="margin-left: 60pt"><font size="3">8）</font><font size="3">组评审时评审员中应包括被评审产品的上下游相关人员。（例如对程序设计文档的评审，评审员中应包括详细设计人员和后续的编码人员）；</font></p> <p style="margin-left: 60pt"><font size="3">9）</font><font size="3">坚持会前准备工作； </font></p> <p style="margin-left: 60pt"><font size="3">10）<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font><font size="3">对全部评审人员进行必要的培训； </font></p> <p><a name="_Toc111351911"></a><a name="_Toc109812741"></a><a name="_Toc107133421"></a><a name="_Toc106530412"></a><a name="_Toc106530324">7.2<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span>管理评审准则</a></p> <p style="margin-left: 60pt"><font size="3">1）</font><font size="3">评审产品，而不是评审设计者（不能使设计者有任何压力）；</font></p> <p style="margin-left: 60pt"><font size="3">2）</font><font size="3">指明问题范围，而不是解决提到的问题；</font></p> <p style="margin-left: 60pt"><font size="3">3）</font><font size="3">评审人员接受过关于评审的必要的培训；</font></p> <p style="margin-left: 60pt"><font size="3">4）</font><font size="3">评审人员在被评审产品领域具有丰富经验；</font></p> <p><a name="_Toc111351912"></a><a name="_Toc109812742">7.3<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span>单人评审准则</a></p> <p style="margin-left: 60pt"><font size="3">1）</font><font size="3">评价项目总体情况和进展状况；</font></p> <p style="margin-left: 60pt"><font size="3">2）</font><font size="3">评价小组内部的进度和人员状况；</font></p> <p style="margin-left: 60pt"><font size="3">3）</font><font size="3">评价项目质量控制情况；</font></p> <p style="margin-left: 60pt"><font size="3">4）</font><font size="3">评价项目进展中遇到的问题并提出解决办法；</font></p> <p style="margin-left: 60pt"><font size="3">5）</font><font size="3">评价项目当前存在的风险；</font></p> <p style="margin-left: 60pt"><font size="3">6）</font><font size="3">评价其他情况（视项目阶段而定）</font></p> <p><a name="_Toc111351913"></a><a name="_Toc109812743"></a><a name="_Toc107133423"></a><a name="_Toc106530414"></a><a name="_Toc106530326"><font size="3">8.<span><font size="1">&#160;&#160; </font></span></font>评审步骤</a></p> <p><a name="_Toc111351914"></a><a name="_Toc109812744"></a><a name="_Toc107133424"></a><a name="_Toc106530415"></a><a name="_Toc106530327">8.1<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span>同行评审</a></p> <p style="margin-left: 21pt"><font size="3">步骤一:制定评审计划 <br />&#160;&#160;&#160; 项目经理在项目策划阶段制定评审计划. <br />步骤二:评审准备 <br />&#160;&#160;&#160; 1、按照项目计划,在评审会议的一天前(该时间越长越好),由项目经理识别必须参与评审的评审员、并指定记录员、评审会议主持人，然后通知相关利益者。在通常情况下，与项目整体相关的评审，主持人为PL；对于各个模块的评审，主持人为SL。 </font></p> <p style="margin-left: 21pt"><font size="3">2</font><font size="3">、需要提前进行申请的，应至少提前半天向SL提出评审申请（同时要提交需要评审的工作产品）。SL根据项目的进度计划，确定评审会议的具体时间。 <br />&#160;&#160;&#160; 3、由项目经理指定相应的评审员，确定评审相关输入,并确定准备就绪的准则. <br />&#160;&#160;&#160; 4、在评审会议的前一天将评审通知、待评审材料以及相关的参考资料发给每个评审员,以保证评审员有足够的时间来预审文件. 预定会议的场所等，评审通知的分发可采取邮件等形式。 <br />&#160;&#160;&#160; 5、如果决定取消或推迟会议,需要重新通知所有相关利益者.</font></p> <p style="margin-left: 21pt"><font size="3">6.</font><font size="3">各评审员依据《评审检查表》对待评审材料进行预审。预审中发现的问题写入《评审检查表》对应的检查点后“备注”栏，如过发现的问题与对应的检查点无关，可在检查表下方填写。 <br />步骤三:评审会议</font></p> <p style="margin-left: 21pt"><font size="2">&#160;&#160;&#160; </font><font size="3">由主评审人掌握会议节奏和主持会议.</font></p> <p style="margin-left: 21pt"><font size="3">1</font><font size="3">、评审工作产品的担当者，对工作产品进行讲解，对评审组成员提出的问题进行解答。</font></p> <p style="margin-left: 21pt"><font size="3">2</font><font size="3">、对评审中提出的每一个问题必须要有明确的结论。</font></p> <p style="margin-left: 21pt"><font size="3">3</font><font size="3">、确定问题的修改者和确认者。修改者需要给出调查问题的时间。 <br />&#160;&#160;&#160; 4、由评审员发现问题,并讨论确认;记录员对评审结果进行记录(包括缺陷,行动项和建议).记录写入《评审记录与报告》，其中发现的缺陷分类应依客户要求进行分类，客户无要求应参考《缺陷分类标准》</font></p> <p style="margin-left: 21pt"><font size="3">5</font><font size="3">、对评审的工作产品依据评审的标准做出结论。</font></p> <p style="margin-left: 21pt"><font size="3">（1）评审的标准（建议：可以按照项目组的规定或者项目组根据情况进行调整）：存在的严重缺陷（问题）≤n个（0 =&lt; n &lt;= 10）时可以认为通过评审。 <br />&#160;&#160;&#160; 6、评审结束前,记录员复述所有缺陷,并由评审员进行缺陷分类. <br />&#160;&#160;&#160; 7、评审完成时,得出结论是否通过评审. 若不通过评审,则确定下一次评审会议的时间.</font></p> <p style="margin-left: 21pt"><font size="3">（1）评审结论的分类：</font></p> <p style="margin-left: 84pt"><span style="font-family: wingdings"><font size="3">l<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></span><font size="3">评审通过</font></p> <p style="margin-left: 84pt"><span style="font-family: wingdings"><font size="3">l<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></span><font size="3">评审不通过，需要重新评审，要确定重新评审的时间</font></p> <p style="margin-left: 84pt"><span style="font-family: wingdings"><font size="3">l<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></span><font size="3">评审通过，但工作产品修改后需要进行Email（或其它方式）确认。</font></p> <p style="margin-left: 21pt"><font size="3">8</font><font size="3">、主评审人指定相关人员收集所有评审资料(评审通知, 评审检查表,评审材料等).</font></p> <p style="margin-left: 21pt"><font size="3">步骤四:对评审结果采取行动 <br />&#160;&#160;&#160; 1、会议记录员整理会议内容，完成评审记录初稿。要求详细记录评审会中发现的问题，及讨论的结论。</font></p> <p style="margin-left: 21pt"><font size="3">2</font><font size="3">、会议记录员将评审记录的初稿提交会议的参与者进行确认。根据确认的情况修订评审记录，确认无误后，将评审记录发与参加会议的人员。 <br />&#160;&#160;&#160; 3、由项目经理指定人员或文件作者对评审结果进行分析、确定问题解决计划、对工作产品进行返工,并记录《评审记录与报告》中返工的信息。</font></p> <p style="margin-left: 21pt"><font size="3">4</font><font size="3">、有《评审记录与报告》不能涵盖的内容需要记录时，由项目经理指定人员撰写《会议纪录》 <br />步骤五:评审结果被跟踪直至完成 <br />&#160;&#160;&#160; 评审结果跟踪处理方式如下：</font></p> <table style="border-bottom-style: none;border-right-style: none;border-top-style: none;margin-left: 26.3pt;border-left-style: none" border="1" cellspacing="0" cellpadding="0"> <tbody> <tr style="height: 14.75pt"> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 156.55pt;height: 14.75pt;border-top: windowtext 1pt solid;border-right: windowtext 1pt solid" valign="top" width="209" colspan="2"> <p style="text-align: center" align="center"><b><font size="3">评审结果</font></b></p> </td> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt;width: 251pt;height: 14.75pt;border-top: windowtext 1pt solid;border-right: windowtext 1pt solid" valign="top" width="335"> <p style="text-align: center" align="center"><b><font size="3">跟踪处理方式</font></b></p> </td> </tr> <tr style="height: 13.05pt"> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 72.85pt;height: 13.05pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" rowspan="2" width="97"> <p>通过</p> </td> <td style="width: 83.7pt;height: 13.05pt" valign="top" width="112"> <p><font size="3">不作修改</font></p> </td> <td style="width: 251pt;height: 13.05pt" valign="top" width="335"> <p><font size="3">无</font></p> </td> </tr> <tr style="height: 38.8pt"> <td style="width: 83.7pt;height: 38.8pt" valign="top" width="112"> <p><font size="3">稍作修改</font></p> </td> <td style="width: 251pt;height: 38.8pt" valign="top" width="335"> <p><font size="3">1</font><font size="3">、由项目经理指定人员或者QC对返工结果进行跟踪直到关闭,并记录《评审记录与报告》中跟踪的信息.</font></p> <p><font size="3">2</font><font size="3">、确认者按照确定的时间对修改的问题进行确认，并将结果及时间填写到《评审记录与报告》中。</font></p> </td> </tr> <tr style="height: 18.2pt"> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 72.85pt;height: 18.2pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" width="97"> <p>不通过</p> </td> <td style="width: 83.7pt;height: 18.2pt" valign="top" width="112"> <p><font size="3">重新修正编制</font></p> </td> <td style="width: 251pt;height: 18.2pt" valign="top" width="335"> <p><font size="3">组织复审</font></p> </td> </tr> </tbody> </table> <p style="margin-left: 21pt"><font size="3"> <br /></font><font size="3">步骤六:提交和归档 <br />&#160;&#160;&#160; 由项目经理指定人员将评审资料交由配置管理员归档.文件提交参见《配置管理指南》</font></p> <p><a name="_Toc111351915"></a><a name="_Toc109812745">8.2<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span>单人评审</a></p> <p><font size="3">考虑到成本，如果工作产品有很多缺陷或比较关键，那么工作产品应该采取上述同行评审会议的形式。但是如果工作产品是简单明了的，不可能有很多缺陷，而且也不是非常关键，则建议采取单人评审的形式。</font></p> <p style="margin-left: 42pt"><font size="3">单人评审的形式类似于同行评审过程：</font></p> <p style="margin-left: 60pt"><font size="3">1．</font><font size="3">和项目经理协商后，作者确定评审员。</font></p> <p style="margin-left: 60pt"><font size="3">2．</font><font size="3">安排了评审后，评审员提前收到评审材料。</font></p> <p style="margin-left: 60pt"><font size="3">3．</font><font size="3">评审员采用检查表独立的评审工作产品并准备和作者的会议。</font></p> <p style="margin-left: 60pt"><font size="3">4．</font><font size="3">评审会议只有两个人参与——作者和评审员，在会议中产生缺陷记录（《评审记录与报告》中）。返工事项和行动项被记录和跟踪，以确保其被解决。</font></p> <p style="margin-left: 21pt"><font size="3">项目经理负责跟踪缺陷直到其得到解决。</font></p> <p style="margin-left: 21pt"><font size="3">代码检查、测试用例评审、测试观点评审、测试报告评审等可采用单人评审的形式。</font></p> <p><a name="_Toc111351916"></a><a name="_Toc109812746"></a><a name="_Toc107133425"></a><a name="_Toc106530416"></a><a name="_Toc106530328">8.3<span><font size="1">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span>管理评审</a></p> <p><font size="3">步骤一:制定评审计划</font></p> <p><font size="3">在项目策划阶段制定评审计划.</font></p> <p><font size="3">步骤二:评审准备</font></p> <p style="margin-left: 41.95pt"><font size="3">1</font><font size="3">、按照项目计划,在评审会议的一天前(该时间越长越好),由项目经理识别必须参与评审的评审员、并指定记录员，然后通知相关利益者。在通常情况下，项目管理评审主持人为PM。&#160;&#160;&#160; <br />2、在评审会议的前一天将评审通知发给每个评审员，评审通知的分发可采取邮件、传真等形式. <br />3、如果决定取消或推迟会议,需要重新通知所有相关利益者.</font></p> <p style="margin-left: 41.95pt"><font size="3">步骤三:评审会议 <br />1、由项目经理掌握会议节奏和主持会议. <br />2、由评审员发现问题,并讨论确认;记录员对评审结果进行记录(包括缺陷,行动项和建议). 记录写入《评审记录与报告》中。 <br />3、评审结束前,记录员复述所有缺陷。</font></p> <p style="margin-left: 41.95pt"><font size="3">步骤四:对评审结果采取行动</font></p> <p style="margin-left: 41.75pt"><font size="3">1</font><font size="3">、会议记录员整理会议内容，完成评审记录初稿。要求详细记录评审会中发现的问题，及讨论的结论。</font></p> <p style="margin-left: 41.65pt"><font size="3">2</font><font size="3">、会议记录员将评审记录的初稿提交会议的参与者进行确认。根据确认的情况修订评审记录，确认无误后，将评审记录发与参加会议的人员。 <br />3、由项目经理指定人员或文件作者对评审结果进行分析、确定问题解决方案和计划。</font></p> <p style="margin-left: 41.65pt"><font size="3">4</font><font size="3">、有《评审记录与报告》不能涵盖的内容需要记录时，由项目经理指定人员撰写《会议纪录》</font></p> <p style="margin-left: 21pt"><font size="3">步骤五:评审结果被跟踪直至完成 <br />&#160;&#160;&#160;&#160;&#160;&#160; 评审结果跟踪处理方式如下：</font></p> <table style="border-bottom-style: none;border-right-style: none;border-top-style: none;margin-left: 26.3pt;border-left-style: none" border="1" cellspacing="0" cellpadding="0"> <tbody> <tr style="height: 14.75pt"> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 156.55pt;height: 14.75pt;border-top: windowtext 1pt solid;border-right: windowtext 1pt solid" valign="top" width="209" colspan="2"> <p style="text-align: center" align="center"><b><font size="3">评审结果</font></b></p> </td> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt;width: 251pt;height: 14.75pt;border-top: windowtext 1pt solid;border-right: windowtext 1pt solid" valign="top" width="335"> <p style="text-align: center" align="center"><b><font size="3">跟踪处理方式</font></b></p> </td> </tr> <tr style="height: 13.05pt"> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 72.85pt;height: 13.05pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" rowspan="2" width="97"> <p>通过</p> </td> <td style="width: 83.7pt;height: 13.05pt" valign="top" width="112"> <p><font size="3">不作修改</font></p> </td> <td style="width: 251pt;height: 13.05pt" valign="top" width="335"> <p><font size="3">无</font></p> </td> </tr> <tr style="height: 38.8pt"> <td style="width: 83.7pt;height: 38.8pt" valign="top" width="112"> <p><font size="3">稍作修改</font></p> </td> <td style="width: 251pt;height: 38.8pt" valign="top" width="335"> <p><font size="3">1</font><font size="3">、由项目经理指定人员或者QC对返工结果进行跟踪直到关闭,并记录《评审记录与报告》中跟踪的信息.</font></p> <p><font size="3">2</font><font size="3">、确认者按照确定的时间对修改的问题进行确认，并将结果及时间填写到《评审记录与报告》中。</font></p> </td> </tr> <tr style="height: 18.2pt"> <td style="border-bottom: windowtext 1pt solid;border-left: windowtext 1pt solid;width: 72.85pt;height: 18.2pt;border-top: windowtext 1pt;border-right: windowtext 1pt solid" valign="top" width="97"> <p>不通过</p> </td> <td style="width: 83.7pt;height: 18.2pt" valign="top" width="112"> <p><font size="3">重新修正编制</font></p> </td> <td style="width: 251pt;height: 18.2pt" valign="top" width="335"> <p><font size="3">组织复审</font></p> </td> </tr> </tbody> </table> <p><font size="3">&#160;</font></p> <p style="margin-left: 41.95pt"><font size="3">步骤六:提交和归档 <br />由项目经理指定人员或者QC将评审资料交由配置管理员归档。</font></p> <p><a name="_Toc111351917"></a><a name="_Toc109812747"><font size="3">9.<span><font size="1">&#160;&#160; </font></span></font>出口准则</a></p> <p><font size="3">评审中发现的所有问题和缺陷都已经得到解决（关闭）。评审结论为“不通过”时要求一定要安排进行复审。</font></p> <p><a name="_Toc111351918"><font size="3">10. </font>裁剪</a></p> <p style="margin-left: 35.2pt"><font size="3">1.<span><font size="1">&#160;&#160;&#160;&#160;&#160; </font></span></font><font size="3">工作产品是否需要进行评审可参考文件《验证确认区分表》</font></p> <p style="margin-left: 35.2pt"><font size="3">2.<span><font size="1">&#160;&#160;&#160;&#160;&#160; </font></span></font><font size="3">评审通常应采用会议评审的形式，如果有特殊原因不能采用会议评审时，需由项目经理、项目主管共同批准认定。其他形式的评审，包括电子Email、网络视频、等方式，基本同样按照上述5.2内容中进行，另需对各联络的信件（电子信件）进行保存，对评审的结果以信件或其他方式通知参与评审的人员。</font></p> <p style="margin-left: 35.2pt"><font size="3">3.<span><font size="1">&#160;&#160;&#160;&#160;&#160; </font></span></font><font size="3">必要时可以采用会签的方式最终确认评审结果，会签时应打印评审报告，由评审员手工签名确认。</font></p> <p><a name="_Toc111351919"></a><a name="_Toc109812749"></a><a name="_Toc107133427"></a><a name="_Toc106530418"></a><a name="_Toc106530330"><font size="3">11. </font>输出</a></p> <p style="text-align: left" align="left"><font size="3">已通过评审的产品 <br />&#160;&#160;&#160; 评审通知,评审检查表,评审报告（评审缺陷列表、评审结论）</font></p> <p><a name="_Toc106530419"></a><a name="_Toc106530331"></a><a name="_Toc111351920"></a><a name="_Toc109812750"><font size="3">12. </font>度量</a></p> <p><font size="3">1</font><font size="3">）评审工作量</font></p> <p><font size="3">2</font><font size="3">）评审发现缺陷数</font></p> <p><font size="3">3</font><font size="3">）被评审产品缺陷率</font></p> </p></div> </td> </tr> </tbody> </table></div> </p></div> <p class="read-more">Continue reading <a class="heading" href="/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/2011/06/11/vv-e8-af-84-e5-ae-a1-e6-8c-87-e5-8d-97.html" data-flip="title">VV 评审指南</a></p> </article> <article id="post-%E6%95%B0%E6%8D%AE%E5%BA%93/2011/06/10/oracle%e5%af%bc%e5%87%ba%e6%95%b0%e6%8d%ae%e5%ba%93%e7%bb%93%e6%9e%84%e5%88%b0powerdesigner" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/2011/06/10/oracle-e5-af-bc-e5-87-ba-e6-95-b0-e6-8d-ae-e5-ba-93-e7-bb-93-e6-9e-84-e5-88-b0powerdesigner.html" data-flip="title"> Oracle导出数据库结构到PowerDesigner </a> </h1> <p class="post-date heading"> <time datetime="2011-06-10T23:59:10+08:00">10 Jun 2011</time> in <span>数据库</span> on <span>Oracle</span>, <span>Powerdesigner</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <h3 id="sites-page-title-header" align="left">&#160;</h3> <div class="sites-canvas-main"> <div> <table class="sites-layout-name-one-column sites-layout-hbox zeroBorder" cellspacing="0"> <tbody> <tr> <td class="sites-layout-tile sites-tile-name-content-1"> <div dir="ltr"> <p>Oracle导出数据库结构到PowerDesigner: </p> <p><b>具体的操作步骤：</b>打开PowerDesigner－》菜单栏 “Database”－》Database Reverse Engineering－》Using an ODBC data source中选择右边的浏览－》connect to an ODBC Data Source－》在Machine data source中选择你配置好的数据源。 </p> <p>（注：如果第一次连接，需要先配置数据源，步骤如下：点击“Add”按钮， </p> <p>－》ODBC数据源管理器－》点击“添加”按钮－》创建新数据源－》选择“Oracle in OraHome92” －》完成。 </p> <p>－》进入“Oracle ODBC Driver Configuration”－》配置数据源名称(Data Source Name)以及监听器(TNS Service Name)－》配置完成后点击右边的“Test Connection”。 </p> <p>－》在弹出框里输入连接数据库的用户名和密码－》点击OK－》提示Connection successful－》OK－》数据源配置成功。 </p> <p>－》退出数据源配置后，在数据源连接对话框中（Connect to an ODBC Data Source）中选择好刚才配置的数据源，然后再次填写用户名和密码。 </p> <p> －》点击connect，就可连接到数据库上。）</p></div> </td> </tr> </tbody> </table></div> </p></div> <p class="read-more">Continue reading <a class="heading" href="/%E6%95%B0%E6%8D%AE%E5%BA%93/2011/06/10/oracle-e5-af-bc-e5-87-ba-e6-95-b0-e6-8d-ae-e5-ba-93-e7-bb-93-e6-9e-84-e5-88-b0powerdesigner.html" data-flip="title">Oracle导出数据库结构到PowerDesigner</a></p> </article> <article id="post-java/web%E5%89%8D%E7%AB%AF/2011/06/10/%e9%9d%92%e8%8f%9c%e9%b8%9f%e6%97%b6%e7%9a%84%e7%ac%94%e8%ae%b0" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/web%E5%89%8D%E7%AB%AF/2011/06/10/e9-9d-92-e8-8f-9c-e9-b8-9f-e6-97-b6-e7-9a-84-e7-ac-94-e8-ae-b0.html" data-flip="title"> 青菜鸟时的笔记 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-10T23:58:18+08:00">10 Jun 2011</time> in <span>Java</span> / <span>Web前端</span> on <span>Java</span>, <span>Javascript</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <h3 id="sites-page-title-header" align="left">&#160;</h3> <div class="sites-canvas-main"> <div> <table class="sites-layout-name-one-column sites-layout-hbox zeroBorder" cellspacing="0"> <tbody> <tr> <td class="sites-layout-tile sites-tile-name-content-1"> <div dir="ltr"> <table style="width: 902pt" class="zeroBorder" border="0" cellspacing="0" cellpadding="0" width="1202"> <tbody> <tr style="height: 14.25pt"> <td style="width: 902pt;height: 14.25pt" height="19" width="1202">EJB创建客户机包含客户接口，EJB项目包含客户机，则在部署时会自动生成实现类，EJB工程不要在ejbmodule里面放代码，不然自动生成会删除</td> </tr> <tr style="height: 42.75pt"> <td style="width: 902pt;height: 42.75pt" height="57" width="1202">log的配置 使用common.logging的话 可在classpath中使用commons-logging.properties配置如下 <br />org.apache.commons.logging.Log=org.apache.commons.logging.impl.Log4JLogger (使用log4j实现) <br />另外，log4j中%l 不如 %c好,%l好像有bug,有时定位不到具体类</td> </tr> <tr style="height: 71.25pt"> <td style="width: 902pt;height: 71.25pt" height="95" width="1202">对于引用工程运行时需要打包的问题，如rcp的打包和ejb的依赖，暂时的方法是： <br />rcp:将所有引用工程的源程序文件夹作为link source包含在编译源码中，这样开发阶段可直接运行，待发布时再分别打包，这样要在build面板中&quot;.&quot;中加入所有link source <br />ejb:除了link source,第三方包可加入源码编译文件夹，这样在eclipse发布时会将这些包发布到服务器，但是是在程序文件夹之下，所以如果不想 <br />发布时直接放在根目录下，还要手动打包发布并修改manifest.mf对应（目前还未找到简便的方法）</td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19"></td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19">checkboxtableviewer选中判断是依据元素equals判断的，所以要注意实现此方法和hashcode</td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19">checkboxtableviewer的静态方法newList会自动生成table,所以要先getTable再操纵这个table</td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19"></td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19">rcp打包问题 使用引用打包总是有问题，手动将引用工程一个个打包才行</td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19">rcp打包乱码，如果使用多语言就好说&#160; 解决：eclipse编译使用ant build.prperties下 javacDefaultEncoding.. = UTF-8</td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19"></td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19">显示不正常往往是layout或size的问题，之前一直不明白的resize不重绘的问题，是由于layout没有设置好，原来toolbar也要 layoutdata.且调用layout是重绘的最好办法。但是我发现如果是filllayout这会自动完成重绘，gridlayout则要在 resize事件中调用layout重绘。</td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19"></td> </tr> <tr style="height: 42.75pt"> <td style="width: 902pt;height: 42.75pt" height="57" width="1202">mysql是在windows下是作为服务运行，启动停止如服务。Windows服务命令:net start 服务名&#160; net stop 服务名 <br />删除时数据文件夹是没有删除的，如果接着又安装mysql,数据文件夹又指向同一文件夹，则密码还是原来的密码，这一点要注意 <br />可将原文件夹删除再装，以免安装时出错</td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19"></td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19">jboss jndi datasource配置:添加-ds.xml配置即可，而hibernate配置需要设置jndi.class(class of the JNDI InitialContextFactory)</td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19"></td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19">hibernate 的excuteUpdate不能保证同步缓存，比较笨拙的方法是session.clear[对于影响较大的数据]，或对单个数据evict可将数据从缓存中detach</td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19"></td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19">mysql4.1insert into select * 语句,使用了*号,但是数据并不是依据列名对应而是依据顺序对应</td> </tr> <tr style="height: 14.25pt"> <td style="height: 14.25pt" height="19"></td> </tr> <tr style="height: 28.5pt"> <td style="width: 902pt;height: 28.5pt" height="38" width="1202"> eclipse 3.3之后的虚拟table updateitem方法当item被replace后是不会调用的，这样有个好处就是结合hibernate分页功能,不用计算页索引 <br />且用户的拖拉操作不一定会连续更新某个范围内的项数，所以直接更新index后面的pagesize个项数比较好。 </td> </tr> </tbody> </table></div> </td> </tr> </tbody> </table></div> </p></div> <p class="read-more">Continue reading <a class="heading" href="/java/web%E5%89%8D%E7%AB%AF/2011/06/10/e9-9d-92-e8-8f-9c-e9-b8-9f-e6-97-b6-e7-9a-84-e7-ac-94-e8-ae-b0.html" data-flip="title">青菜鸟时的笔记</a></p> </article> <article id="post-%E6%95%B0%E6%8D%AE%E5%BA%93/2011/06/10/%e4%bb%80%e4%b9%88%e5%8f%abn1%e6%ac%a1select%e6%9f%a5%e8%af%a2%e9%97%ae%e9%a2%98" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/2011/06/10/e4-bb-80-e4-b9-88-e5-8f-abn1-e6-ac-a1select-e6-9f-a5-e8-af-a2-e9-97-ae-e9-a2-98.html" data-flip="title"> 什么叫n+1次select查询问题? </a> </h1> <p class="post-date heading"> <time datetime="2011-06-10T23:56:54+08:00">10 Jun 2011</time> in <span>数据库</span> on <span>Sql</span>, <span>数据库</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <h3 id="sites-page-title-header" align="left">&#160;</h3> <div class="sites-canvas-main"> <div> <table class="sites-layout-name-one-column sites-layout-hbox zeroBorder" cellspacing="0"> <tbody> <tr> <td class="sites-layout-tile sites-tile-name-content-1"> <div dir="ltr"><b><font color="#0000ff" size="4">我说应该叫1 + N问题</font></b> <br /> <p>在 Session的缓存中存放的是相互关联的对象图。默认情况下，当Hibernate从数据库中加载Customer对象时，会同时加载所有关联的 Order对象。以Customer和Order类为例，假定ORDERS表的CUSTOMER_ID外键允许为null，图1列出了CUSTOMERS 表和ORDERS表中的记录。 </p> <p><img src="/assets/hibernate_essay_8_1.gif" width="604" height="250" /> </p> <p>以下Session的find()方法用于到数据库中检索所有的Customer对象： </p> <p>List customerLists=session.find(&quot;from Customer as c&quot;); </p> <p>运行以上find()方法时，Hibernate将先查询CUSTOMERS表中所有的记录，然后根据每条记录的ID，到ORDERS表中查询有参照关系的记录，Hibernate将依次执行以下select语句： </p> <p>select * from CUSTOMERS; <br />select * from ORDERS where CUSTOMER_ID=1; <br />select * from ORDERS where CUSTOMER_ID=2; <br />select * from ORDERS where CUSTOMER_ID=3; <br />select * from ORDERS where CUSTOMER_ID=4; </p> <p>通过以上5条select语句，Hibernate最后加载了4个Customer对象和5个Order对象，在内存中形成了一幅关联的对象图，参见图2。</p> <p><img src="/assets/hibernate_essay_8_2.gif" width="383" height="275" /> </p> <p>Hibernate在检索与Customer关联的Order对象时，使用了默认的立即检索策略。这种检索策略存在两大不足： </p> <p>（1） select语句的数目太多，需要频繁的访问数据库，会影响检索性能。如果需要查询n个Customer对象，那么必须执行n+1次select查询语句。<font color="#0000ff">这就是经典的n+1次select查询问题。</font>这种检索策略没有利用SQL的连接查询功能，例如以上5条select语句完全可以通过以下1条select语句来完成： </p> <p>select * from CUSTOMERS left outer join ORDERS <br />on CUSTOMERS.ID=ORDERS.CUSTOMER_ID </p> <p>以上select语句使用了SQL的左外连接查询功能，能够在一条select语句中查询出CUSTOMERS表的所有记录，以及匹配的ORDERS表的记录。 </p> <p>（2）在应用逻辑只需要访问Customer对象，而不需要访问Order对象的场合，加载Order对象完全是多余的操作，这些多余的Order对象白白浪费了许多内存空间。 <br />为了解决以上问题，Hibernate提供了其他两种检索策略：延迟检索策略和迫切左外连接检索策略。延迟检索策略能避免多余加载应用程序不需要访问的关联对象，迫切左外连接检索策略则充分利用了SQL的外连接查询功能，能够减少select语句的数目。</p> </p></div> </td> </tr> </tbody> </table></div> </p></div> <p class="read-more">Continue reading <a class="heading" href="/%E6%95%B0%E6%8D%AE%E5%BA%93/2011/06/10/e4-bb-80-e4-b9-88-e5-8f-abn1-e6-ac-a1select-e6-9f-a5-e8-af-a2-e9-97-ae-e9-a2-98.html" data-flip="title">什么叫n+1次select查询问题?</a></p> </article> <article id="post-java/2011/06/10/java%e6%89%a7%e8%a1%8cgroovy%e7%9a%84%e6%96%b9%e5%bc%8f" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/2011/06/10/java-e6-89-a7-e8-a1-8cgroovy-e7-9a-84-e6-96-b9-e5-bc-8f.html" data-flip="title"> java执行groovy的方式 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-10T23:55:30+08:00">10 Jun 2011</time> in <span>Java</span> on <span>Groovy</span>, <span>Java</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <h3 id="sites-page-title-header" align="left">&#160;</h3> <div class="sites-canvas-main"> <div> <table class="sites-layout-name-one-column sites-layout-hbox zeroBorder" cellspacing="0"> <tbody> <tr> <td class="sites-layout-tile sites-tile-name-content-1"> <div dir="ltr"><span>脚本全文（不需要包名匹配，因为这是脚本）：</span> </p> <p>println(&quot;hello!this is a script!&quot;); </p> <p><span>类全文：</span> </p> <p>package co.java; </p> <p>import java.io.File; <br />import java.io.IOException; </p> <p>import org.codehaus.groovy.control.CompilationFailedException; </p> <p>import groovy.lang.GroovyClassLoader; <br />import groovy.lang.Script; <br />import groovy.util.GroovyScriptEngine; </p> <p>public class InvokeGroovyTest <br />{ <br />&#160;&#160;&#160; public static void main(String[] args) <br />&#160;&#160;&#160; { <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; InvokeGroovyTest test = new InvokeGroovyTest(); <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160; test.way1(); <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; test.way2(); <br />&#160;&#160;&#160; } <br />&#160;&#160;&#160; <br />&#160;&#160;&#160; public void way1() <br />&#160;&#160;&#160; { <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; try <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; { <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ClassLoader cl = InvokeGroovyTest.class.getClassLoader(); <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; GroovyClassLoader groovyCl = new GroovyClassLoader(cl); <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Class groovyClass = groovyCl.parseClass(new File(&quot;src/co/java/Script.groovy&quot;)); <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Script sc = (Script)groovyClass.newInstance(); <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; sc.run(); <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; } <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; catch (Exception e) <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; { <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; // TODO Auto-generated catch block <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; e.printStackTrace(); <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; }&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160; } <br />&#160;&#160;&#160; <br />&#160;&#160;&#160; public void way2() <br />&#160;&#160;&#160; { <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; try <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; { <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; GroovyScriptEngine engine = new GroovyScriptEngine(&quot;.&quot;); <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; engine.run(&quot;src/co/java/Script.groovy&quot;, (String)null); <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; } <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; catch (Exception e) <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; { <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; e.printStackTrace(); <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; }&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160; } <br />} </div> </td> </tr> </tbody> </table></div> </p></div> <p class="read-more">Continue reading <a class="heading" href="/java/2011/06/10/java-e6-89-a7-e8-a1-8cgroovy-e7-9a-84-e6-96-b9-e5-bc-8f.html" data-flip="title">java执行groovy的方式</a></p> </article> <article id="post-java/2011/06/10/invaliddestinationexception-mqjms0003-destination-not-understood-or-no-longer-valid" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/2011/06/10/invaliddestinationexception-mqjms0003-destination-not-understood-or-no-longer-valid.html" data-flip="title"> InvalidDestinationException: MQJMS0003: Destination not understood or no longer valid </a> </h1> <p class="post-date heading"> <time datetime="2011-06-10T23:54:58+08:00">10 Jun 2011</time> in <span>Java</span> on <span>J2ee</span>, <span>Java</span>, <span>Jms</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <h3 id="sites-page-title-header" align="left">&#160;</h3> <div class="sites-canvas-main"> <div> <table class="sites-layout-name-one-column sites-layout-hbox zeroBorder" cellspacing="0"> <tbody> <tr> <td class="sites-layout-tile sites-tile-name-content-1"> <div dir="ltr">网上几点总结： <br />①======================================================================================= <br />Question 4: A WSAS administrator notices the following error in the SystemOut.log: </p> <p>javax.jms.InvalidDestinationException: <br />MQJMS0003: Destination not understood or no longer valid. </p> <p>Which of the following could have caused this error? </p> <p>A. The JMS destination requires IIOP protocol for access. The JMS client is using the default JMS message protocol. <br />B. The JMS destination is running on a non-WebSphere environment. <br />C. The JMS destination was accidentally deleted. <br />D. The JNDI binding to the destination was changed. <br />E. The JMS destination is listening on a non standard TCP port. <br />me: http://www-1.ibm.com/support/docview.wss?uid=swg1IY60708 <br />PROBLEM SUMMARY: <br />This problem is caused by using JMS interfaces to access MQ JMS <br />classes (i.e. casting a com.ibm.mq.MQQueue to a <br />javax.jms.Queue). </p> <p>The use of an (instanceof MQQueue) test was returning false <br />when an MQQueue object had been cast as a javax.jms.Queue. The <br />logic then treated this as an invalid object, and threw an <br />InvalidDestinationException. </p> <p>②======================================================================================= <br />MQJMS0003&#160;&#160;&#160; Destination not understood or no longer valid. </p> <p>Explanation: The queue or topic may have become unavailable, the application may be using an incorrect connection for the queue or topic, or the </p> <p>supplied destination is not of the correct type for this method. <br />User Response: Check that WebSphere MQ is still running and the queue manager is available. Check that the right connection is being used for your </p> <p>queue or topic. </p> <p>③======================================================================================= <br />The problem is the IBM class com.ibm.mq.jms.MQSession.createQSender has the following code </p> <p>************************************************************************************************************************************************** <br />if(!(queue instanceof com.ibm.mq.jms.MQQueue)) <br />{ <br />String s1 = &quot;MQJMS0003&quot;; <br />String s3 = ConfigEnvironment.getErrorMessage(s1); <br />s3 = s3 + buildExceptionString(queue); <br />InvalidDestinationException invaliddestinationexception = new InvalidDestinationException(s3, s1); <br />throw invaliddestinationexception; <br />} <br />mqqueue = (com.ibm.mq.jms.MQQueue)queue; <br />mqqueue1 = getServicesMgr().getOutputQueue(mqqueue, this); <br />} <br />************************************************************************************************************************************************** <br />At first all looks straight for ward but there is a bigger problem. </p> <p>instanceOf operator of java would return false for objects of the same class if they are being loaded by different classloaders. </p> <p>In my case i had many webapplications and the Queue object was got by a jndi lookup. Now when first time this code is executed it all works fine </p> <p>for a application but when you start using anohter web application the same code fails and throws the InvalidDestinationException . </p> <p>The reason being the 2 objects on which ibm code is doing instanceof are loaded by different classloaders. </p> <p>The Solution to this problem is delete all the ibm jars (com.ibm.mq.jar and com.ibm.mqjms.jar) from individual web application and add these in </p> <p>the servers lib directory. Now all instances are loaded by the server classloader and not by webappclassloaders . </p> <p>This is a criptic issue which took me 2 days to figure out. </p> <p>wfac错误原因： <br />配置的factory和destination是两个不同的实现,factory指向的是WAS MQ,而queue指向的是sonic MQ,所以出现此报错。 </div> </td> </tr> </tbody> </table></div> </p></div> <p class="read-more">Continue reading <a class="heading" href="/java/2011/06/10/invaliddestinationexception-mqjms0003-destination-not-understood-or-no-longer-valid.html" data-flip="title">InvalidDestinationException: MQJMS0003: Destination not understood or no longer valid</a></p> </article> <h2 class="sr-only">Pagination</h2> <nav class="pagination heading" role="navigation"> <ul> <li class="pagination-item older" > <a rel="next" href="/page-49/">Older</a> </li> <li class="pagination-item newer" > <a rel="prev" href="/page-47/">Newer</a> </li> </ul> </nav> <footer> <hr/> <p>© 2011 - 2017. All rights reserved.</p> <p> <code>Powered by <a href="https://qwtel.com/hydejack/">Hydejack</a> v<span id="_version">6.6.1</span></code> </p> </footer> </main> </div> <div id="_yDrawer"> <div id="_sidebar" class="sidebar"> <div class="sidebar-bg" style="background-color:#4f86aa;background-image:url()"></div> <header class="sidebar-sticky" role="banner"> <div class="sidebar-about"> <img src="https://avatars0.githubusercontent.com/u/4122902?v=4&s=460" class="me" /> </div> <div class="sidebar-about"> <h1><a id="_title" href="/">Ka's Blog</a></h1> <p>Ka’s blog description…</p> </div> <nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span> <ul> <li> <a class="sidebar-nav-item" href="/categories.html">Categories</a> </li> <li> <a class="sidebar-nav-item" href="/archive.html">Archive</a> </li> <li> <a class="sidebar-nav-item" href="/tags.html">Tags</a> </li> <li> <a class="sidebar-nav-item" href="/about.html">About</a> </li> </ul> </nav> <div class="sidebar-social"> <span class="sr-only">Social:</span> <ul> <li> <a href="https://twitter.com/imhazige" title="Twitter"> <span class="icon-twitter"></span> <span class="sr-only">Twitter</span> </a> </li> <li> <a href="https://github.com/imhazige" title="GitHub"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a> </li> <li> <a href="mailto:imhazige@gmail.com" title="Email"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a> </li> <li> <a href="https://imhazige.github.io/myblog/feed.xml" title="RSS"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a> </li> </ul> </div> </header> </div> </div> </div> <!--[if gt IE 9]><!----> <script>loadJSDeferred('/assets/js/hydejack.js?v=6.6.1');</script> <!--<![endif]--> </body>
</html>
