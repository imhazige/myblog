---
layout: post
title: jquery validate 插件
date: 2013-02-26 09:47:09.000000000 +00:00
type: post
published: true
status: publish
categories:
- Web前端
tags:
- bootstrap
- jquery
meta:
  views: '74'
author:
  login: ig2net
  email: ig2net@ig2net.info
  display_name: "农夫一号"
  first_name: ''
  last_name: ''
---
<p>jquery validate plugin是个很不错的验证form的插件，提供许多类型的验证并且UI错误提示。</p>
<p>&#160;</p>
<p>主页:</p>
<p><a title="http://docs.jquery.com/Plugins/Validation" href="http://docs.jquery.com/Plugins/Validation">http://docs.jquery.com/Plugins/Validation</a></p>
<p><a title="http://bassistance.de/jquery-plugins/jquery-plugin-validation/" href="http://bassistance.de/jquery-plugins/jquery-plugin-validation/">http://bassistance.de/jquery-plugins/jquery-plugin-validation/</a></p>
<p>&#160;</p>
<p>配置一个form下面的验证:</p>
<div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:be816d18-2bbe-4f49-b969-c7c59dd1efc7" class="wlWriterEditableSmartContent">
<pre name="code" class="js:firstline[1]">$('#frm').validate({
			rules : {
				username : {
					minlength : 2,
					required : true
				},
				email : {
					required : true,
					email : true
				}
			},
			messages : {
				username : {
//					minlength : jQuery
//							.format("At least {0} characters required!")
					minlength : 'Why your name is so short?'		
				},
				email : {
					required : "We need your email address to send token to you"
				}
			}			
		});</pre>
</div>
<p>&#160;</p>
<p><font color="#0000ff">据我使用的情况,选择子必须是个form,否则报错。</font></p>
<p>上面的例子为name=”username”这个元素指定了最小长度2,必须这两个验证</p>
<p>为name=”email”这个元素指定了必须和email这两个验证。</p>
<p>对应的messages则制定了出错后的显示字符串（如果要支持i18n则需要另外的使用方法。）</p>
<p>&#160;</p>
<p>结合bootstrap使用的例子<a title="http://alittlecode.com/jquery-form-validation-with-styles-from-twitter-bootstrap/" href="http://alittlecode.com/jquery-form-validation-with-styles-from-twitter-bootstrap/">http://alittlecode.com/jquery-form-validation-with-styles-from-twitter-bootstrap/</a></p>
<p>代码中只需要添加如下:</p>
<p>&#160;</p>
<div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:cd442b1f-e241-48f2-8cf5-f746dc933f72" class="wlWriterEditableSmartContent">
<pre name="code" class="js:firstline[1]">highlight : function(element) {
				$(element).closest('.control-group').removeClass('success')
						.addClass('error');
			},
			success : function(element) {
				element.text('OK!').addClass('valid').closest('.control-group')
						.removeClass('error').addClass('success');
			}</pre>
</div>
<p>&#160;</p>
<p>需添加样式:</p>
<div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:191037f5-d11f-4374-a20b-16aad1e47235" class="wlWriterEditableSmartContent">
<pre name="code" class="css:firstline[1]">
label.valid {
	width: 24px;
	height: 24px;
	background: url(../i/valid.png) center center no-repeat;
	display: inline-block;
	text-indent: -9999px;
}

label.error {
	font-weight: bold;
	color: red;
	padding: 2px 8px;
	margin-top: 2px;
	/** here to make the text in the same line of control*/
	display: inline-block;
}</pre>
</div>
<p>注意display: inline-block;这个样式是我加的，其默认的提示文本是放在验证元素下一行，加了这一行后就变成一行了</p>
<p>&#160;</p>
<p>图片资源:</p>
<p><a href="http://kazge.com/wp-content/uploads/2013/02/error.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="error" border="0" alt="error" src="{{ site.baseurl }}/assets/error_thumb.png" width="24" height="24" /></a> <a href="http://kazge.com/wp-content/uploads/2013/02/valid.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; margin-left: 0px; border-left-width: 0px; margin-right: 0px" title="valid" border="0" alt="valid" align="left" src="{{ site.baseurl }}/assets/valid_thumb.png" width="24" height="24" /></a> </p>
<p>&#160;</p>
<p>&#160;</p>
<p>当然html中则<strong>不应该</strong>再添加提示元素了</p>
<div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:812469c5-0cb0-4c63-8c15-c81123a09de7:fc47a9ea-f852-4a7b-9121-19ab7b6cf63b" class="wlWriterEditableSmartContent">
<pre name="code" class="xml:firstline[1]">&lt;span class="help-inline"&gt;Something may have gone wrong&lt;/span&gt;</pre>
</div>
<p>&#160;</p>
<p>实际效果截图:</p>
<p><img src="{{ site.baseurl }}/assets/jquery-form-validate1-300x195.png" /> </p>
<p>&#160;</p>
<p>横排效果</p>
<p><a href="http://kazge.com/wp-content/uploads/2013/02/Snap1.gif"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="Snap1" border="0" alt="Snap1" src="{{ site.baseurl }}/assets/Snap1_thumb.gif" width="536" height="408" /></a> </p>
<p>&#160;</p>
<p>&#160;</p>
<p>使用中发现的问题：</p>
<p>resetForm方法没有重置对应控件的成功/错误状态,虽然移除了提示文本，但是success或error样式任然保留。</p>
<p>url验证对texarea没有trim值，导致有空格的话就验证为错误。</p>
<p>&#160;</p>
<p>&#160;</p>
<p>参见:</p>
<p><a title="http://zhudp-cn.iteye.com/blog/255168" href="http://zhudp-cn.iteye.com/blog/255168">http://zhudp-cn.iteye.com/blog/255168</a></p>
