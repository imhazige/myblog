---
layout: post
title: java json xpath jsonpath
date: 2011-05-26 02:15:38.000000000 +01:00
type: post
published: true
status: publish
categories:
- java
tags:
- java
- javascript web 前端
meta:
  views: '347'
author:
  login: ig2net
  email: ig2net@ig2net.info
  display_name: "农夫一号"
  first_name: ''
  last_name: ''
---
<p>jsonpath和xpath语法不通<a href="http://goessner.net/articles/JsonPath/">http://goessner.net/articles/JsonPath/</a></p>
<p>java实现http://code.google.com/p/json-path/</p>
<p>google 既然搜不到，你猜我是怎么找到的？</p>
<p><strong>XPath</strong>    <br /><strong>JSONPath</strong>    <br /><strong>Description</strong></p>
<p>/    <br />$     <br />the root object/element </p>
<p>.    <br />@     <br />the current object/element </p>
<p>/    <br />. or []     <br />child operator </p>
<p>..    <br />n/a     <br />parent operator </p>
<p>//    <br />..     <br />recursive descent. JSONPath borrows this syntax from E4X. </p>
<p>*    <br />*     <br />wildcard. All objects/elements regardless their names. </p>
<p>@    <br />n/a     <br />attribute access. JSON structures don't have attributes. </p>
<p>[]    <br />[]     <br />subscript operator. XPath uses it to iterate over element collections and for <a href="http://www.w3.org/TR/xpath#predicates">predicates</a>. In Javascript and JSON it is the native array operator. </p>
<p>|    <br />[,]     <br />Union operator in XPath results in a combination of node sets. JSONPath allows alternate names or array indices as a set. </p>
<p>n/a    <br />[start:end:step]     <br />array slice operator borrowed from ES4. </p>
<p>[]    <br />?()     <br />applies a filter (script) expression. </p>
<p>n/a    <br />()     <br />script expression, using the underlying script engine. </p>
<p>()    <br />n/a     <br />grouping in Xpath </p>
<p>XPath has a lot more to offer (Location pathes in not abbreviated syntax, operators and functions) than listed here. Moreover there is a remarkable difference how the subscript operator works in Xpath and JSONPath.</p>
<p>Square brackets in XPath expressions always operate on the <em>node set</em> resulting from the previous path fragment. Indices always start by 1.With JSONPath square brackets operate on the <em>object</em> or <em>array</em> addressed by the previous path fragment. Indices always start by 0. |2007-08-18| e3<a href="http://goessner.net/articles/JsonPath/index.html#e3">#</a>JSONPath examples</p>
<p>Let's practice JSONPath expressions by some more examples. We start with a simple JSON structure built after an XML example representing a bookstore (original <a href="http://coli.lili.uni-bielefeld.de/%7Eandreas/Seminare/sommer02/books.xml">XML file</a>). </p>
<p>{ &quot;store&quot;: { &quot;book&quot;: [ { &quot;category&quot;: &quot;reference&quot;, &quot;author&quot;: &quot;Nigel Rees&quot;, &quot;title&quot;: &quot;Sayings of the Century&quot;, &quot;price&quot;: 8.95 }, { &quot;category&quot;: &quot;fiction&quot;, &quot;author&quot;: &quot;Evelyn Waugh&quot;, &quot;title&quot;: &quot;Sword of Honour&quot;, &quot;price&quot;: 12.99 }, { &quot;category&quot;: &quot;fiction&quot;, &quot;author&quot;: &quot;Herman Melville&quot;, &quot;title&quot;: &quot;Moby Dick&quot;, &quot;isbn&quot;: &quot;0-553-21311-3&quot;, &quot;price&quot;: 8.99 }, { &quot;category&quot;: &quot;fiction&quot;, &quot;author&quot;: &quot;J. R. R. Tolkien&quot;, &quot;title&quot;: &quot;The Lord of the Rings&quot;, &quot;isbn&quot;: &quot;0-395-19395-8&quot;, &quot;price&quot;: 22.99 } ], &quot;bicycle&quot;: { &quot;color&quot;: &quot;red&quot;, &quot;price&quot;: 19.95 } } } </p>
<p><strong>XPath</strong>    <br /><strong>JSONPath</strong>    <br /><strong>Result</strong></p>
<p>/store/book/author   <br />$.store.book[*].author    <br />the authors of all books in the store </p>
<p>//author   <br />$..author    <br />all authors </p>
<p>/store/*   <br />$.store.*    <br />all things in store, which are some books and a red bicycle. </p>
<p>/store//price   <br />$.store..price    <br />the price of everything in the store. </p>
<p>//book[3]   <br />$..book[2]    <br />the third book </p>
<p>//book[last()]   <br />$..book[(@.length-1)]    <br />$..book[-1:]    <br />the last book in order. </p>
<p>//book[position()&lt;3]   <br />$..book[0,1]    <br />$..book[:2]    <br />the first two books </p>
<p>//book[isbn]   <br />$..book[?(@.isbn)]    <br />filter all books with isbn number </p>
<p>//book[price&lt;10]   <br />$..book[?(@.price&lt;10)]    <br />filter all books cheapier than 10 </p>
<p>//*   <br />$..*    <br />all Elements in XML document. All members of JSON structure</p>
