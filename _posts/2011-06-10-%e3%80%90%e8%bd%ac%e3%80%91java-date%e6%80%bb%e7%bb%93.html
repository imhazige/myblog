---
layout: post
title: "【转】java Date总结"
date: 2011-06-10 16:47:34.000000000 +01:00
type: post
published: true
status: publish
categories:
- java
tags:
- java
meta:
  views: '47'
author:
  login: ig2net
  email: ig2net@ig2net.info
  display_name: "农夫一号"
  first_name: ''
  last_name: ''
---
<h3 id="sites-page-title-header" align="left">&#160;</h3>
<div class="sites-canvas-main">
<div>
<table class="sites-layout-name-one-column sites-layout-hbox zeroBorder" cellspacing="0">
<tbody>
<tr>
<td class="sites-layout-tile sites-tile-name-content-1">
<div dir="ltr">
<div><a href="http://www.cnblogs.com/zhuboxingzbx/articles/1151892.html" rel="nofollow">[转]java Date总结</a></div>
<p> 1.计算某一月份的最大天数                </p>
<p>Calendar time=Calendar.getInstance();                <br />time.clear();                <br />time.set(Calendar.YEAR,year); //year 为 int                 <br />time.set(Calendar.MONTH,i-1);//注意,Calendar对象默认一月为0&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />int day=time.getActualMaximum(Calendar.DAY_OF_MONTH);//本月份的天数                <br />注：在使用set方法之前，必须先clear一下，否则很多信息会继承自系统当前时间                </p>
<p>2.Calendar和Date的转化                </p>
<p>(1) Calendar转化为Date                <br />Calendar cal=Calendar.getInstance();                <br />Date date=cal.getTime();                </p>
<p>(2) Date转化为Calendar                <br />Date date=new Date();                <br />Calendar cal=Calendar.getInstance();                <br />cal.setTime(date);                </p>
<p>3.格式化输出日期时间 （这个用的比较多）                </p>
<p>Date date=new Date();                <br />SimpleDateFormat df=new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;);                <br />String time=df.format(date);                <br />System.out.println(time);                </p>
<p>4.计算一年中的第几星期                </p>
<p>(1)计算某一天是一年中的第几星期                <br />Calendar cal=Calendar.getInstance();                <br />cal.set(Calendar.YEAR, 2006);                <br />cal.set(Calendar.MONTH, 8);                <br />cal.set(Calendar.DAY_OF_MONTH, 3);                <br />int weekno=cal.get(Calendar.WEEK_OF_YEAR);                </p>
<p>(2)计算一年中的第几星期是几号                <br />SimpleDateFormat df=new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);                <br />Calendar cal=Calendar.getInstance();                <br />cal.set(Calendar.YEAR, 2006);                <br />cal.set(Calendar.WEEK_OF_YEAR, 1);                <br />cal.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);                <br />System.out.println(df.format(cal.getTime()));                <br />输出:                <br />2006-01-02                </p>
<p>5.add()和roll()的用法(不太常用)                </p>
<p>(1)add()方法                <br />SimpleDateFormat df=new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);                <br />Calendar cal=Calendar.getInstance();                <br />cal.set(Calendar.YEAR, 2006);                <br />cal.set(Calendar.MONTH, 8);                <br />cal.set(Calendar.DAY_OF_MONTH, 3);                <br />cal.add(Calendar.DATE, -4);                <br />Date date=cal.getTime();                <br />System.out.println(df.format(date));                <br />cal.add(Calendar.DATE, 4);                <br />date=cal.getTime();                <br />System.out.println(df.format(date));                <br />输出：                <br />&#160;&#160;&#160; 2006-08-30                <br />&#160;&#160;&#160; 2006-09-03                <br />(2)roll方法                <br />cal.set(Calendar.YEAR, 2006);                <br />cal.set(Calendar.MONTH, 8);                <br />cal.set(Calendar.DAY_OF_MONTH, 3);                <br />cal.roll(Calendar.DATE, -4);                <br />date=cal.getTime();                <br />System.out.println(df.format(date));                <br />cal.roll(Calendar.DATE, 4);                <br />date=cal.getTime();                <br />System.out.println(df.format(date));                <br />输出：                <br />&#160;&#160;&#160; 2006-09-29                <br />&#160;&#160;&#160; 2006-09-03                <br />可见，roll()方法在本月内循环，一般使用add()方法；                </p>
<p>6.计算两个任意时间中间的间隔天数（这个比较常用）                <br />(1)传进Calendar对象                <br />&#160;&#160;&#160; public int getIntervalDays(Calendar startday,Calendar endday)...{&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; if(startday.after(endday))...{                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Calendar cal=startday;                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; startday=endday;                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; endday=cal;                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; }&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; long sl=startday.getTimeInMillis();                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; long el=endday.getTimeInMillis();                <br />&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; long ei=el-sl;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; return (int)(ei/(1000*60*60*24));                <br />&#160;&#160;&#160; }                <br />(2)传进Date对象                </p>
<p>&#160;&#160;&#160; public int getIntervalDays(Date startday,Date endday)...{&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; if(startday.after(endday))...{                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Date cal=startday;                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; startday=endday;                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; endday=cal;                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; }&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; long sl=startday.getTime();                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; long el=endday.getTime();&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; long ei=el-sl;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; return (int)(ei/(1000*60*60*24));                <br />&#160;&#160;&#160; }                <br />(3)改进精确计算相隔天数的方法                <br />&#160;&#160;&#160; public int getDaysBetween (Calendar d1, Calendar d2) ...{                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; if (d1.after(d2)) ...{                 <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; java.util.Calendar swap = d1;                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; d1 = d2;                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; d2 = swap;                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; }                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; int days = d2.get(Calendar.DAY_OF_YEAR) - d1.get(Calendar.DAY_OF_YEAR);                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; int y2 = d2.get(Calendar.YEAR);                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; if (d1.get(Calendar.YEAR) != y2) ...{                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; d1 = (Calendar) d1.clone();                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; do ...{                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; days += d1.getActualMaximum(Calendar.DAY_OF_YEAR);//得到当年的实际天数                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; d1.add(Calendar.YEAR, 1);                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; } while (d1.get(Calendar.YEAR) != y2);                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; }                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; return days;                <br />&#160;&#160;&#160; }                <br />注意：通过上面的方法可以衍生出求任何时间，如要查出邮箱三周之内收到的邮件（得到当前系统时间－再得到三周前时间）用收件的时间去匹配 最好装化成 long去比较                <br />如：1年前日期（注意毫秒的转换）                <br />&#160;&#160; java.util.Date myDate=new java.util.Date();                <br />&#160;&#160; long myTime=(myDate.getTime()/1000)-60*60*24*365;                <br />&#160;&#160; myDate.setTime(myTime*1000);                <br />&#160;&#160; String mDate=formatter.format(myDate);                </p>
<p>7. String 和 Date ，Long 之间相互转换 （最常用）                </p>
<p>字符串转化成时间类型（字符串可以是任意类型，只要和SimpleDateFormat中的格式一致即可）                <br />通常我们取时间跨度的时候，会substring出具体时间－－long－比较                </p>
<p>java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat(&quot;M/dd/yyyy hh:mm:ss a&quot;,java.util.Locale.US);                <br />java.util.Date d = sdf.parse(&quot;5/13/2003 10:31:37 AM&quot;);                <br />long dvalue=d.getTime();                <br />SimpleDateFormat formatter = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);                <br />String mDateTime1=formatter.format(d);                </p>
<p>8. 通过时间求时间                </p>
<p>年月周求日期                <br />SimpleDateFormat formatter2 = new SimpleDateFormat(&quot;yyyy-MM F E&quot;);                <br />java.util.Date date2= formatter2.parse(&quot;2003-05 5 星期五&quot;);                <br />SimpleDateFormat formatter3 = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);                <br />String mydate2=formatter3.format(date2);                </p>
<p>求是星期几                <br />mydate= myFormatter.parse(&quot;2001-1-1&quot;);                <br />SimpleDateFormat formatter4 = new SimpleDateFormat(&quot;E&quot;);                <br />String mydate3=formatter4.format(mydate);                </p>
<p>9. java 和 具体的数据库结合                </p>
<p>在开发web应用中，针对不同的数据库日期类型，我们需要在我们的程序中对日期类型做各种不同的转换。若对应数据库数据是oracle的Date类型，即只需要年月日的，可以选择使用java.sql.Date类型，若对应的是MSsqlserver 数据库的DateTime类型，即需要年月日时分秒的，选择java.sql.Timestamp类型                <br />你可以使用dateFormat定义时间日期的格式，转一个字符串即可                </p>
<p>class Datetest{                <br />*method 将字符串类型的日期转换为一个timestamp（时间戳记java.sql.Timestamp）                <br />*@param dateString 需要转换为timestamp的字符串                <br />*@return dataTime timestamp                </p>
<p>public final static java.sql.Timestamp string2Time(String dateString)                <br />throws java.text.ParseException {                <br />DateFormat dateFormat;                <br />dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd kk:mm:ss.SSS&quot;, Locale.ENGLISH);//设定格式                <br />//dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd kk:mm:ss&quot;, Locale.ENGLISH);                <br />dateFormat.setLenient(false);                <br />java.util.Date timeDate = dateFormat.parse(dateString);//util类型                <br />java.sql.Timestamp dateTime = new java.sql.Timestamp(timeDate.getTime());//Timestamp类型,timeDate.getTime()返回一个long型                <br />return dateTime;                <br />}                </p>
<p>*method 将字符串类型的日期转换为一个Date（java.sql.Date）                <br />*@param dateString 需要转换为Date的字符串                <br />*@return dataTime Date                </p>
<p>public final static java.sql.Date string2Date(String dateString)                <br />throws java.lang.Exception {                <br />DateFormat dateFormat;                <br />dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;, Locale.ENGLISH);                <br />dateFormat.setLenient(false);                <br />java.util.Date timeDate = dateFormat.parse(dateString);//util类型                <br />java.sql.Date dateTime = new java.sql.Date(timeDate.getTime());//sql类型                <br />return dateTime;                <br />}                </p>
<p>public static void main(String[] args){                <br />Date da = new Date();                <br />注意：这个地方da.getTime()得到的是一个long型的值                <br />System.out.println(da.getTime());                </p>
<p>由日期date转换为timestamp                </p>
<p>第一种方法：使用new Timestamp(long)                <br />Timestamp t = new Timestamp(new Date().getTime());                <br />System.out.println(t);                </p>
<p>第二种方法：使用Timestamp(int year,int month,int date,int hour,int minute,int second,int nano)                <br />Timestamp tt = new Timestamp(Calendar.getInstance().get(                <br />&#160;&#160;&#160;&#160;&#160; Calendar.YEAR) - 1900, Calendar.getInstance().get(                <br />&#160;&#160;&#160;&#160;&#160; Calendar.MONTH), Calendar.getInstance().get(                <br />&#160;&#160;&#160;&#160;&#160; Calendar.DATE), Calendar.getInstance().get(                <br />&#160;&#160;&#160;&#160;&#160; Calendar.HOUR), Calendar.getInstance().get(                <br />&#160;&#160;&#160;&#160;&#160; Calendar.MINUTE), Calendar.getInstance().get(                <br />&#160;&#160;&#160;&#160;&#160; Calendar.SECOND), 0);                <br />System.out.println(tt);                </p>
<p>try {                <br />String sToDate = &quot;2005-8-18&quot;;//用于转换成java.sql.Date的字符串                <br />&#160;&#160;&#160;&#160;&#160; String sToTimestamp = &quot;2005-8-18 14:21:12.123&quot;;//用于转换成java.sql.Timestamp的字符串                <br />&#160;&#160;&#160;&#160;&#160; Date date1 = string2Date(sToDate);                <br />&#160;&#160;&#160;&#160;&#160; Timestamp date2 = string2Time(sToTimestamp);                <br />System.out.println(&quot;Date:&quot;+date1.toString());//结果显示                <br />System.out.println(&quot;Timestamp:&quot;+date2.toString());//结果显示                <br />}catch(Exception e) {                <br />e.printStackTrace();                <br />}                <br />}                <br />}&#160; </div>
</td>
</tr>
</tbody>
</table></div>
</p></div>
