---
layout: post
title: pophunter琐碎
date: 2011-05-30 08:57:29.000000000 +01:00
type: post
published: true
status: publish
categories:
- c语言
tags:
- c
- mfc
meta:
  views: '62'
author:
  login: ig2net
  email: ig2net@ig2net.info
  display_name: "农夫一号"
  first_name: ''
  last_name: ''
---
<p><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">c 数组指针申明方法</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">char *p;//原始类型直接</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Type (*p) [];//申明</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">p = (Type (*) []) long;//转换</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">vc6在win7上有如下毛病:</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">1:添加文件右键菜单不起作用，在网上搜，要装个古怪的插件</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2:要将vc6快捷图标设置为管理员运行，否则有些插件运行不了</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">有些编译不通过时，需要更新sdk:</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">见下文:</span>    <br /><a href="http://social.msdn.microsoft.com/forums/en-US/Vsexpressvc/thread/c5c3afad-f4c6-4d27-b471-0291e099a742/"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://social.msdn.microsoft.com/forums/en-US/Vsexpressvc/thread/c5c3afad-f4c6-4d27-b471-0291e099a742/</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">下载地址:</span>    <br /><a href="http://www.microsoft.com/downloads/en/details.aspx?FamilyId=0BAF2B35-C656-4969-ACE8-E4C0C0716ADB&amp;displaylang=en"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://www.microsoft.com/downloads/en/details.aspx?FamilyId=0BAF2B35-C656-4969-ACE8-E4C0C0716ADB&amp;displaylang=en</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">安装后在tools/options/directories里面添加包含</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">但是我发现include里面由mfc文件夹，lib里面却没有。导致在编译时如果查找inlcude/mfc就会说找不到连接符号，所以就去掉mfc文件夹只包含include文件夹。</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">对于win7系统请使用最新sdk</span>    <br /><a href="http://www.microsoft.com/downloads/en/details.aspx?FamilyID=6b6c21d2-2006-4afa-9702-529fa782d63b&amp;displaylang=en"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://www.microsoft.com/downloads/en/details.aspx?FamilyID=6b6c21d2-2006-4afa-9702-529fa782d63b&amp;displaylang=en</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">对于web安装来说是不需要选择版本的。如果需要选择，看如下：</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">The Windows SDK for Windows 7 and .NET Framework 3.5 SP1: Release Candidate has been released on the Microsoft Download Center in both </span><a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=6db1f17f-5f1e-4e54-a331-c32285cdde0c"><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #0066dd;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">ISO</span></a><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> and</span><a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=f75f2ca8-c1e4-4801-9281-2f5f28f12dbd"><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #0066dd;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Web Setup</span></a><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"> format.&#160; Web setup allows you to install a specific subset of the SDK you select without having to download the entire SDK; whereas the DVD ISO setup allows you to download the entire SDK to install later. </span>    <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span>    <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">With this release of the SDK, there are 3 ISOs to choose from based on the CPU (x86, x64, or Itanium) platform you are installing on. Each ISO will however allow you to build applications that target all the other CPU platforms.&#160; Thus if you install the x86 ISO (which only installs on x86 platforms), you will be able to create applications targeting x86, x64, and Itanium. [</span><span style="background-color: #ffff00;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">任何版本都可以编译其它平台上的软件</span><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">]</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span>    <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">Which download is right for you?</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span>    <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">·&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">If your computer is X86, download&#160; GRC1SDK_EN_DVD.iso</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">·&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">If&#160; your computer is X64, download GRC1SDKX_EN_DVD.iso</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">·</span><span style="background-color: transparent;font-style: normal;font-family: verdana;color: #984806;font-size: 13pt;vertical-align: baseline;font-weight: normal;text-decoration: none">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">If your computer is IA64, download GRC1SDKIAI_EN_DVD.iso (and send me mail.&#160; I’d love to hear how many folks are actually developing on IA64)</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span>    <br /><span style="background-color: transparent;font-style: normal;font-family: calibri;color: #984806;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">--Karin</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">但安装后发现这个sdk不支持vc6,那我只好试试vc2010express了，安装了后又发现express版不带mfc,+_+，没法，只有安装旗舰版了。</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none">fatal error LNK1103: debugging information corrupt;</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none">工程 setting/gernaral/ 去掉build debug infomation复选框</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none">vs2010生成文件确实很大，似乎不用mfc就小些。</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none">mfc代码可以用vs2010编码，用vc6生成。但是要改配置：</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none">使用unicode生成方式，这样好兼容。</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 15pt;vertical-align: baseline;font-weight: normal;text-decoration: none">vc6 unicode配置:</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">project setting/c,c++/processor definition:加入UNICODE,_UNICODE两项，去掉之前的编码项</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">可以使用_WIN32_WINNT=0x0500制定生成版本(未测试)</span></p>
<p><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span><a href="http://blog.ureshika.com/wp-content/uploads/2011/05/image00.jpg"><img style="border-bottom: 0px;border-left: 0px;border-top: 0px;border-right: 0px" border="0" alt="image00" src="{{ site.baseurl }}/assets/image00_thumb.jpg" width="236" height="244" /></a>     <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">在编译时可能会出现</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">1:cannot open file &quot;uafxcwd.lib&quot;</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">这是由于mfc+unicode编码需要uafxcwd.lib库，vc6安装时要选择自定义安装并全选所有组件。</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">2:LNK2001: unresolved external symbol _WinMain@16</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">这也是mfc+unicode需要制定入口</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">wWinMainCRTStartup</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span><a href="http://blog.ureshika.com/wp-content/uploads/2011/05/image01.jpg"><img style="border-bottom: 0px;border-left: 0px;border-top: 0px;border-right: 0px" border="0" alt="image01" src="{{ site.baseurl }}/assets/image01_thumb.jpg" width="644" height="440" /></a>     <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">vs2010自动生成的targetver.h里面需要包含的头文件vc6不需要</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">//#include &lt;WinSDKVer.h&gt;</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">//#include &lt;SDKDDKVer.h&gt;</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">VC乱码&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">VC 中，有时会遇到当字符串资源的属性(String table properties)设置为英文时输入的中文并不能在界面上正确显示，尽管在VC中显示正确。查看.rc文件，可以看到这些资源被放到了英文资源下。那 么如何正确显示呢？现在试着将字符串资源属性改成中文，重新build，可以发现还是不能正确显示。为什么呢？退出VC，打开rc文件，你会发现尽管这些 字符串资源放到了中文资源中，其中的中文字符都变成了乱码，再打开VC你会发现确实变成了乱码。这估计是UNICODE页面映射问题。怎么解决呢？其实很 简单，关闭VC，打开.rc文件，把没变成乱码前的那些字符串拷贝到中文资源中覆盖相应的乱码即可。</span>    <br /><a href="http://topic.csdn.net/t/20021212/17/1255874.html"><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000099;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: underline">http://topic.csdn.net/t/20021212/17/1255874.html</span></a><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">所说的方法（修改code_page）应该也可行，不过没试。</span>    <br /><span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none">另外发现Project Settings-Resources-Language设置不起任何作用，这是比较奇怪的一件事。</span>    </p>
<p> <span style="background-color: transparent;font-style: normal;font-family: arial;color: #000000;font-size: 11pt;vertical-align: baseline;font-weight: normal;text-decoration: none"></span></p>
