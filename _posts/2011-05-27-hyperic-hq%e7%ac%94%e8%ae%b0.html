---
layout: post
title: hyperic hq笔记
date: 2011-05-27 01:30:44.000000000 +01:00
type: post
published: true
status: publish
categories:
- java
tags:
- hq
- hyperic
meta:
  views: '1869'
author:
  login: ig2net
  email: ig2net@ig2net.info
  display_name: "农夫一号"
  first_name: ''
  last_name: ''
---
<p class="MsoNormal"><span style="font-family: 宋体;color: black;font-size: 11pt">下载包的时候最好选择版本，它看你下载的平台默认为</span><span style="font-family: arial;color: black;font-size: 11pt" lang="EN-US">win32</span><span style="font-family: 宋体;color: black;font-size: 11pt">的。</span><span lang="EN-US">      <br /><a href="http://sourceforge.net/projects/hyperic-hq/files/"><span style="font-family: arial;color: #000099;font-size: 11pt">http://sourceforge.net/projects/hyperic-hq/files/</span></a>       </p>
<p></span><span style="font-family: 宋体;color: black;font-size: 11pt">在线文档说明安装步骤比较详细</span><span lang="EN-US">      <br /><a href="http://support.hyperic.com/display/DOC/HQ+Documentation"><span style="font-family: arial;color: #000099;font-size: 11pt">http://support.hyperic.com/display/DOC/HQ+Documentation</span></a>       <br /></span><span style="font-family: 宋体;color: black;font-size: 11pt">默认安装的话</span><span style="font-family: arial;color: black;font-size: 11pt" lang="EN-US">(</span><span style="font-family: 宋体;color: black;font-size: 11pt">不带任何参数</span><span style="font-family: arial;color: black;font-size: 11pt" lang="EN-US">)</span><span style="font-family: 宋体;color: black;font-size: 11pt">，就是自带的数据库</span><span style="font-family: arial;color: black" lang="EN-US">postgresql ,</span><span style="font-family: 宋体;color: black">解压缩后的安装</span><span style="font-family: arial;color: black" lang="EN-US">bat</span><span style="font-family: 宋体;color: black">脚本有些古怪，必须直接执行才可以，把它拖到，命令行执行反而不行。</span><span style="font-family: arial;color: black" lang="EN-US">agent</span><span style="font-family: 宋体;color: black">安装后，启动命令在安装目录下</span><span style="font-family: arial;color: black" lang="EN-US">buldles</span><span style="font-family: 宋体;color: black">文件夹下的</span><span style="font-family: arial;color: black" lang="EN-US">bin</span><span style="font-family: 宋体;color: black">里面，而不是安装目录的</span><span style="font-family: arial;color: black" lang="EN-US">bin</span><span style="font-family: 宋体;color: black">下面，搞不懂。</span><span lang="EN-US">      </p>
<p></span><span style="font-family: 宋体;color: black">下载源码</span><span style="font-family: arial;color: black" lang="EN-US">:</span><span lang="EN-US">      <br /><a href="http://hyperic-hq.svn.sourceforge.net/viewvc/hyperic-hq/src/?view=tar"><span style="font-family: arial;color: #000099">http://hyperic-hq.svn.sourceforge.net/viewvc/hyperic-hq/src/?view=tar</span></a>       </p>
<p></span><span style="font-family: 宋体;color: black">稍微看了一下</span><span style="font-family: arial;color: black" lang="EN-US">tomcat </span><span style="font-family: 宋体;color: black">的</span><span style="font-family: arial;color: black" lang="EN-US">plugin</span><span style="font-family: 宋体;color: black">写法，基于</span><span style="font-family: arial;color: black" lang="EN-US">jmx,</span><span style="font-family: 宋体;color: black">要求</span><span style="font-family: arial;color: black" lang="EN-US">tomcat</span><span style="font-family: 宋体;color: black">开放</span><span style="font-family: arial;color: black" lang="EN-US">jmx</span><span style="font-family: 宋体;color: black">服务才行。</span><span lang="EN-US">      <br /></span><span style="font-family: arial;color: black" lang="EN-US">tomcat6</span><span style="font-family: 宋体;color: black">是自动发现了，但是没有发现本机的</span><span style="font-family: arial;color: black" lang="EN-US">tomcat5.5</span><span style="font-family: 宋体;color: black">。</span><span lang="EN-US">      <br /></span><span style="font-family: arial;color: black" lang="EN-US">plugin</span><span style="font-family: 宋体;color: black">分针对</span><span style="font-family: arial;color: black" lang="EN-US">server</span><span style="font-family: 宋体;color: black">的和针对</span><span style="font-family: arial;color: black" lang="EN-US">agent</span><span style="font-family: 宋体;color: black">的。</span><span lang="EN-US">      </p>
<p></span><span style="font-family: arial;color: black" lang="EN-US">HQU--</span><span style="font-family: 宋体;color: black">可认为是服务端</span><span style="font-family: arial;color: black" lang="EN-US">plugin,</span><span style="font-family: 宋体;color: black">用于增加监视器，</span><span style="font-family: arial;color: black" lang="EN-US">UI</span><span style="font-family: 宋体;color: black">界面等。</span><span lang="EN-US">      <br /><a href="http://support.hyperic.com/display/hypcomm/HQU+Documentation"><span style="font-family: arial;color: #000099">http://support.hyperic.com/display/hypcomm/HQU+Documentation</span></a>       <br /></span><span style="font-family: arial;color: black" lang="EN-US">4.5</span><span lang="EN-US">      <br /><a href="http://support.hyperic.com/display/EVO/Introduction+to+Plugin+Development"><span style="font-family: arial;color: #000099;font-size: 11pt">http://support.hyperic.com/display/EVO/Introduction+to+Plugin+Development</span></a>       </p>
<p></span><span style="font-family: 宋体;color: black">如下的文档又说可以放在</span><span style="font-family: arial;color: black" lang="EN-US">agent</span><span style="font-family: 宋体;color: black">目录下面</span><span lang="EN-US">      <br /><a href="http://support.hyperic.com/display/DOC/Plugin+Development+Center"><span style="font-family: arial;color: #000099">http://support.hyperic.com/display/DOC/Plugin+Development+Center</span></a>       </p>
<p></span><span style="font-family: 宋体;color: black">对于</span><span style="font-family: arial;color: black" lang="EN-US">ipf admin</span><span style="font-family: 宋体;color: black">来说，只需要服务端</span><span style="font-family: arial;color: black" lang="EN-US">plugin(JMX)</span><span style="font-family: 宋体;color: black">来监听个机器上开放的</span><span style="font-family: arial;color: black" lang="EN-US">(JVM Managaer)</span><span style="font-family: 宋体;color: black">服务即可。</span><span lang="EN-US">      </p>
<p></span><span style="font-family: 宋体;color: black">使用</span><span style="font-family: arial;color: black" lang="EN-US">pdk:&lt;Agent Directory&gt;/pdk</span><span lang="EN-US">      </p>
<p></span><span style="font-family: 宋体;color: black">这个</span><span style="font-family: arial;color: black" lang="EN-US">Server UI</span><span style="font-family: 宋体;color: black">大概是</span><span style="font-family: arial;color: black" lang="EN-US">struts2</span><span style="font-family: 宋体;color: black">写的，奇慢，又丑，</span><span style="font-family: arial;color: black" lang="EN-US">……</span><span lang="EN-US">      </p>
<p></span><span style="font-family: 宋体;color: black">测试本地</span><span style="font-family: arial;color: black" lang="EN-US">jmx</span><span style="font-family: 宋体;color: black">都没自动发现</span><span lang="EN-US">      </p>
<p></span><span style="font-family: 宋体;color: black">从</span><span style="font-family: arial;color: black" lang="EN-US">Server </span><span style="font-family: 宋体;color: black">下面的</span><span style="font-family: arial;color: black" lang="EN-US">tomcat</span><span style="font-family: 宋体;color: black">的控制说明可知，需要配置</span><span style="font-family: arial;color: black" lang="EN-US">tomcat</span><span style="font-family: 宋体;color: black">才能控制</span><span lang="EN-US">      <br /></span><span style="font-family: arial;color: black;font-size: 8pt" lang="EN-US">To configure Tomcat for JMX monitoring see http://tomcat.apache.org/tomcat-6.0-doc/monitoring.html.</span><span lang="EN-US">      <br /></span><span style="font-family: arial;color: black;font-size: 8pt" lang="EN-US">For a quick down and dirty method follow these instructions,</span><span lang="EN-US">      <br /></span><span style="font-family: arial;color: black;font-size: 8pt" lang="EN-US">in /bin/catalina.sh add:</span><span lang="EN-US">      <br /></span><span style="font-family: arial;color: black;font-size: 8pt" lang="EN-US">[ $1 != &quot;stop&quot; ] &amp;&amp; JAVA_OPTS=&quot;-Dcom.sun.management.jmxremote \</span><span lang="EN-US">      <br /></span><span style="font-family: arial;color: black;font-size: 8pt" lang="EN-US">-Dcom.sun.management.jmxremote.port=6969 \</span><span lang="EN-US">      <br /></span><span style="font-family: arial;color: black;font-size: 8pt" lang="EN-US">-Dcom.sun.management.jmxremote.ssl=false \</span><span lang="EN-US">      <br /></span><span style="font-family: arial;color: black;font-size: 8pt" lang="EN-US">-Dcom.sun.management.jmxremote.authenticate=false $JAVA_OPTS&quot;</span><span lang="EN-US">      <br /></span><span style="font-family: arial;color: black;font-size: 8pt" lang="EN-US">export JAVA_OPTS</span><span lang="EN-US">      <br /></span><span style="font-family: 宋体;color: black;font-size: 14pt">看来还得自己实现</span><span lang="EN-US">      <br /></span><span style="font-family: arial;color: black;font-size: 11pt" lang="EN-US">4.5</span><span style="font-family: 宋体;color: black;font-size: 11pt">的文档</span><span lang="EN-US">      <br /><a href="http://support.hyperic.com/display/EVO/"><span style="font-family: arial;color: #000099;font-size: 11pt">http://support.hyperic.com/display/EVO/</span></a>       <br /></span><span style="font-family: 宋体;color: black;font-size: 11pt">用户手册中说</span><span lang="EN-US">      <br /></span><span style="font-family: arial;color: black;font-size: 11pt" lang="EN-US">jmx</span><span style="font-family: 宋体;color: black;font-size: 11pt">必须自己配置</span><span style="font-family: arial;color: black;font-size: 11pt" lang="EN-US">plugin</span><span lang="EN-US">      </p>
<p></span><span style="font-family: 宋体;color: black">它的文档真是恼火，看半天还是从这里看到一些信息：</span></p>
<p>The 3.0.2 and earlier versions of the MxServerDetector would auto-configure jmx.url using the port defined by the command line argument:    <br />-Dcom.sun.management.jmxremote.port=xxxx</p>
<p>Servers run with just the local connector enabled do not define a port, so the jmx.url ptql query must be manually configured.    <br />This enhancement will auto-configure jmx.url to use the local connector if java is start with -Dcom.sun.management.jmxremote and ptql query is defined as the value like so:     <br />-</p>
<p>Dcom.sun.management.jmxremote=ptql:State.Name.eq=java,Args.*.eq=org.hyperic.MyMainClass</p>
<p>Note: for standalone apps using the &quot;Sun JVM 1.5&quot; server type, server auto-discovery is not enabled by default. It can be turned on by adding the following to agent.properties:    <br /><font color="#0000ff">jmx.sun.discover=true</font></p>
<p><span lang="EN-US"><font color="#ff8040">对于下面这样一段话，我看了n遍不知道什么意思，简直要骂人！</font></span></p>
<p><span lang="EN-US"></span>1. This code provides two methods — of which you must use one — for defining the install (base) path for     <br />the process.     </p>
<pre style="width: 575px;height: 169px"><pre><span style="color: #008000">&lt;!-- derive installpath from JAVA_HOME env prop... --&gt;</span>
</pre>
<pre><span style="color: #0000ff">&lt;</span><span style="color: #800000">property</span> <span style="color: #ff0000">name</span>=<span style="color: #0000ff">&quot;PROC_HOME_ENV&quot;</span> <span style="color: #ff0000">value</span>=<span style="color: #0000ff">&quot;JAVA_HOME&quot;</span><span style="color: #0000ff">/&gt;</span>
</pre>
<pre><span style="color: #008000">&lt;!-- derive installpath from -Dproc.java.home=... --&gt;</span>
</pre>
<pre><span style="color: #0000ff">&lt;</span><span style="color: #800000">property</span> <span style="color: #ff0000">name</span>=<span style="color: #0000ff">&quot;PROC_HOME_PROPERTY&quot;</span> <span style="color: #ff0000">value</span>=<span style="color: #0000ff">&quot;proc.java.home&quot;</span><span style="color: #0000ff">/&gt;</span>
</pre>
<pre></pre>
<p>If using the first method, replace JAVA_HOME with the environmental property of the process. If using the<br />
  <br />second method, replace proc.java.home with the defined name-value pair argument of the process; the </p>
<p>MxServer Detector class uses this variable to perform auto-discovery. </p>
<p>You could instead use a third method: </p>
<p></p>
<pre><pre><span style="color: #0000ff">&lt;</span><span style="color: #800000">property</span> <span style="color: #ff0000">name</span>=<span style="color: #0000ff">&quot;PROC_MAIN_CLASS&quot;</span> <span style="color: #ff0000">value</span>=<span style="color: #0000ff">&quot;proc.java.home&quot;</span><span style="color: #0000ff">/&gt;</span>
</pre>
<pre></pre>
<p>As with PROC_HOME_PROPERTY, this variable tells the MxServerDetector class to autodiscover the process<br />
  <br />with this PTQL: State.Name.eq=java,Args.*.sw=-D&lt;value of proc main class&gt;. </p>
<p>Any of these methods will set the installpath config variable to be the current working directory of the process </p>
<p>in question. And while this is particularly useful for log-tracking and control plugins (which are outside the </p>
<p>scope of this tutorial), this value is also used later [55] in this XML descriptor.</p>
<p><span lang="EN-US"></span></p>
<p class="MsoNormal">
<p><span style="font-family: 宋体;color: black">安装配置手册里面</span><span style="font-family: arial;color: black" lang="EN-US">:</span><span lang="EN-US"><br />
  <br /></span><span style="font-family: arial;color: black" lang="EN-US">agent</span><span style="font-family: 宋体;color: black">向服务端发送数据包。</span><span lang="EN-US"><br />
  <br /></span><span style="font-family: arial;color: black" lang="EN-US">server</span><span style="font-family: 宋体;color: black">向</span><span style="font-family: arial;color: black" lang="EN-US">agent</span><span style="font-family: 宋体;color: black">发送指令。</span><span lang="EN-US"> </p>
<p></span><span style="font-family: arial;color: black" lang="EN-US">agent</span><span style="font-family: 宋体;color: black">第一次连接</span><span style="font-family: arial;color: black" lang="EN-US">server</span><span style="font-family: 宋体;color: black">时会告知向</span><span style="font-family: arial;color: black" lang="EN-US">server</span><span style="font-family: 宋体;color: black">开放的端口，</span><span style="font-family: arial;color: black" lang="EN-US">server</span><span style="font-family: 宋体;color: black">记在</span><span style="font-family: arial;color: black" lang="EN-US">database</span><span style="font-family: 宋体;color: black">里面发起连接。</span><span lang="EN-US"> </p>
<p></span><span style="font-family: 宋体;color: black">手册上说</span><span style="font-family: arial;color: black" lang="EN-US">agent</span><span style="font-family: 宋体;color: black">启动脚本是直接在</span><span style="font-family: arial;color: black" lang="EN-US">agent_home/bin</span><span style="font-family: 宋体;color: black">下的脚本。</span><span lang="EN-US"><br />
  <br /></span><span style="font-family: arial;color: black" lang="EN-US">linux</span><span style="font-family: 宋体;color: black">下面是如此，但是</span><span style="font-family: arial;color: black" lang="EN-US">windows</span><span style="font-family: 宋体;color: black">下似乎要在</span><span style="font-family: arial;color: black" lang="EN-US">bundles</span><span style="font-family: 宋体;color: black">里面的。</span><span lang="EN-US"> </span></p>
<p class="MsoNormal"><span lang="EN-US">如果出现No token file found, waiting for Agent to initialize的提示，说明原来的已经有个agent占用同样的端口运行在，需要停止。[这提示真是很威武] </p>
<p></span><span style="font-family: arial;color: black" lang="EN-US">57</span><span style="font-family: 宋体;color: black">上安装</span><span style="font-family: arial;color: black" lang="EN-US">agent</span><span style="font-family: 宋体;color: black">后，能现实的就只有系统状态，其余都看不到。</span><span lang="EN-US"><br />
    <br /></span><span style="font-family: arial;color: black" lang="EN-US">&#160;&#160;&#160; </span><span lang="EN-US"><br />
    <br /></span><span style="font-family: arial;color: black" lang="EN-US">websphere</span><span style="font-family: 宋体;color: black">似乎是通过对安装路径里的分析来获得属性的。</span><span lang="EN-US"> </p>
<p></span><span style="font-family: arial;color: black" lang="EN-US">api</span><span style="font-family: 宋体;color: black">示例</span><span style="font-family: arial;color: black" lang="EN-US">:</span><span lang="EN-US"><br />
    <br /></span><span style="font-family: arial;color: black" lang="EN-US"><a href="http://svn.hyperic.org/projects/hqapi/trunk/src/org/hyperic/hq/hqapi1/test/">http://svn.hyperic.org/projects/hqapi/trunk/src/org/hyperic/hq/hqapi1/test/</a></span></p>
<p class="MsoNormal"><span style="font-family: arial;color: black" lang="EN-US">不考虑跳过hyperic Server而写自己的jmx监视MBean的原因：</span></p>
<p class="MsoNormal"><span style="font-family: arial;color: black" lang="EN-US">hyperic server 对于weblogic和websphere都有扩展的监控，如果跳过可能以后不好继续使用这方面的功能。</span></p>
<p class="MsoNormal"><span style="font-family: arial;color: black" lang="EN-US">hyperic server还是做了些事情的，跳过它就丢弃了他提供的功能。</span></p>
<p>hyperic的支持非常差，经常搜到的问题没有回复。也需要购买才行吧。</p>
<p><font size="2">测试:</font></p>
<p>对于如下的实例</p>
<p><span style="color: #0000ff">&lt;?</span><span style="color: #800000">xml</span> <span style="color: #ff0000">version</span><span style="color: #0000ff">=&quot;1.0&quot;</span>?<span style="color: #0000ff">&gt;</span> </p>
<p><span style="color: #0000ff">&lt;</span><span style="color: #800000">plugin</span> <span style="color: #ff0000">name</span><span style="color: #0000ff">=&quot;myjmx&quot;</span><span style="color: #0000ff">&gt;</span> </p>
<p><span style="color: #0000ff">&lt;</span><span style="color: #800000">server</span> <span style="color: #ff0000">name</span><span style="color: #0000ff">=&quot;myjmx&quot;</span><span style="color: #0000ff">&gt;</span> </p>
<p><span style="color: #0000ff">&lt;</span><span style="color: #800000">property</span> <span style="color: #ff0000">name</span><span style="color: #0000ff">=&quot;OBJECT_NAME&quot;</span> </p>
<p><span style="color: #ff0000">value</span><span style="color: #0000ff">=&quot;*:type=abc&quot;</span><span style="color: #0000ff">/&gt;</span> </p>
<p><span style="color: #008000">&lt;!-- derive installpath from -Djonas.base=... –&gt;</span> </p>
<p><span style="color: #0000ff"><span style="color: #0000ff"><font color="#808080">line:10</font></span>&lt;</span><span style="color: #800000">property</span> <span style="color: #ff0000">name</span><span style="color: #0000ff">=&quot;PROC_HOME_PROPERTY&quot;</span> <span style="color: #ff0000">value</span><span style="color: #0000ff">=&quot;proc.java.home&quot;</span> <span style="color: #0000ff">/&gt;</span> </p>
<p><span style="color: #0000ff"><font color="#808080">line:11</font></span><span style="color: #0000ff">&lt;</span><span style="color: #800000">property</span> <span style="color: #ff0000">name</span><span style="color: #0000ff">=&quot;PROC_MAIN_CLASS&quot;</span> <span style="color: #ff0000">value</span><span style="color: #0000ff">=&quot;co.ipmc.test.IpfServer&quot;</span><span style="color: #0000ff">/&gt;</span> </p>
<p><span style="color: #008000">&lt;!-- XXX need to support time-stamp format --&gt;</span> </p>
<p><span style="color: #0000ff">&lt;</span><span style="color: #800000">property</span> <span style="color: #ff0000">name</span><span style="color: #0000ff">=&quot;DEFAULT_LOG_FILE&quot;</span> <span style="color: #ff0000">value</span><span style="color: #0000ff">=&quot;logs/my.log&quot;</span> <span style="color: #0000ff">/&gt;</span> </p>
<p><span style="color: #0000ff">&lt;</span><span style="color: #800000">config</span><span style="color: #0000ff">&gt;</span> </p>
<p><span style="color: #0000ff">&lt;</span><span style="color: #800000">option</span> <span style="color: #ff0000">name</span><span style="color: #0000ff">=&quot;jmx.url&quot;</span> <span style="color: #ff0000">description</span><span style="color: #0000ff">=&quot;JMX URL to MBeanServer&quot;</span> </p>
<p><span style="color: #ff0000">default</span><span style="color: #0000ff">=&quot;service:jmx:rmi:///jndi/rmi://localhost:29999/server&quot;</span> <span style="color: #0000ff">/&gt;</span> </p>
<p><span style="color: #0000ff">&lt;</span><span style="color: #800000">option</span> <span style="color: #ff0000">name</span><span style="color: #0000ff">=&quot;process.query&quot;</span> <span style="color: #ff0000">description</span><span style="color: #0000ff">=&quot;PTQL for Java Process&quot;</span> <span style="color: #ff0000">default</span><span style="color: #0000ff">=&quot;State.Name.eq=java,Args.*.sw=proc.java.home&quot;</span><span style="color: #0000ff">/&gt;</span> </p>
<p><span style="color: #0000ff">&lt;/</span><span style="color: #800000">config</span><span style="color: #0000ff">&gt;</span> </p>
<p><span style="color: #0000ff">&lt;</span><span style="color: #800000">properties</span><span style="color: #0000ff">&gt;</span> </p>
<p><span style="color: #0000ff">&lt;</span><span style="color: #800000">property</span> <span style="color: #ff0000">name</span><span style="color: #0000ff">=&quot;serverVersion&quot;</span> <span style="color: #ff0000">description</span><span style="color: #0000ff">=&quot;Server Version&quot;</span> <span style="color: #0000ff">/&gt;</span> </p>
<p><span style="color: #0000ff">&lt;</span><span style="color: #800000">property</span> <span style="color: #ff0000">name</span><span style="color: #0000ff">=&quot;serverVendor&quot;</span> <span style="color: #ff0000">description</span><span style="color: #0000ff">=&quot;Server Vendor&quot;</span> <span style="color: #0000ff">/&gt;</span> </p>
<p><span style="color: #0000ff">&lt;/</span><span style="color: #800000">properties</span><span style="color: #0000ff">&gt;</span> </p>
<p><span style="color: #0000ff">&lt;</span><span style="color: #800000">plugin</span> <span style="color: #ff0000">type</span><span style="color: #0000ff">=&quot;log_track&quot;</span> </p>
<p><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;org.hyperic.hq.product.Log4JLogTrackPlugin&quot;</span> <span style="color: #0000ff">/&gt;</span> </p>
<p><span style="color: #0000ff">&lt;</span><span style="color: #800000">plugin</span> <span style="color: #ff0000">type</span><span style="color: #0000ff">=&quot;autoinventory&quot;</span> </p>
<p><span style="color: #ff0000">class</span><span style="color: #0000ff">=&quot;org.hyperic.hq.product.jmx.MxServerDetector&quot;</span> <span style="color: #0000ff">/&gt;</span> </p>
<p><span style="color: #0000ff">&lt;/</span><span style="color: #800000">server</span><span style="color: #0000ff">&gt;</span> </p>
<p><span style="color: #0000ff">&lt;/</span><span style="color: #800000">plugin</span><span style="color: #0000ff">&gt;</span> </p>
<p></p>
<p>对于10,11行，需要在运行的命令加入参数，如下</p>
<p>java -jar run-test.jar -Dproc.java.home=/usr/java/jdk1.6.0_17 co.ipmc.test.IpfServer</p>
<p>注意，就算run-test.jar包里面已经指明了主类，任然要在命令行里面写出主类。不然就找不到。</p>
<p>最终通过如下命令测试</p>
<p>java -jar bundles/agent-4.5.1/pdk/lib/hq-pdk-4.5.1.jar -Dplugin.include=myjmx -p myjmx -m discover</p>
<p>&#160;</p>
<p>终于发现了这个server了</p></p>
<p>ERROR [Thread-1] [MxServerDetector] 'myjmx 3.0 Linux' measurement plugin not found<br />
  <br />org.hyperic.hq.product.PluginNotFoundException: measurement plugin name=myjmx 3.0 Linux not found </p>
<p>&#160;&#160;&#160; at org.hyperic.hq.product.PluginManager.getPlugin(PluginManager.java:286) </p>
<p>&#160;&#160;&#160; at org.hyperic.hq.product.ServerDetector.mergeConfigDefaults(ServerDetector.java:991) </p>
<p>&#160;&#160;&#160; at org.hyperic.hq.product.ServerDetector.setMeasurementConfig(ServerDetector.java:1024) </p>
<p>&#160;&#160;&#160; at org.hyperic.hq.product.DaemonDetector.newServerResource(DaemonDetector.java:201) </p>
<p>&#160;&#160;&#160; at org.hyperic.hq.product.jmx.MxServerDetector.getServerResource(MxServerDetector.java:323) </p>
<p>&#160;&#160;&#160; at org.hyperic.hq.product.jmx.MxServerDetector.getServerResources(MxServerDetector.java:379) </p>
<p>&#160;&#160;&#160; at org.hyperic.hq.autoinventory.scanimpl.NullScan.scan(NullScan.java:83) </p>
<p>&#160;&#160;&#160; at org.hyperic.hq.autoinventory.Scanner.start(Scanner.java:198) </p>
<p>&#160;&#160;&#160; at org.hyperic.hq.autoinventory.ScanManager.mainRunLoop(ScanManager.java:141) </p>
<p>&#160;&#160;&#160; at org.hyperic.hq.autoinventory.ScanManager.access$000(ScanManager.java:41) </p>
<p>&#160;&#160;&#160; at org.hyperic.hq.autoinventory.ScanManager$1.run(ScanManager.java:107) </p>
<p><font color="#0000ff">1 servers detected </font></p>
<p>Server: SERV myjmx 3.0 [/usr/java/jdk1.6.0_17]<br />
  <br />AIID...../usr/java/jdk1.6.0_17 </p>
<p>config... </p>
<p>product..process.query=State.Name.sw=java,Args.*.eq=co.ipmc.test.IpfServer,Args.*.eq=-Dproc.java.home=/usr/java/jdk1.6.0_17,jmx.url=service:jmx:rmi:///jndi/rmi://localhost:29999/server, </p>
<p>metric... </p>
<p>control..null </p>
<p>Runtime Resource Report...<br />
  <br />Platform=Linux, fqdn=192.168.0.10 (CentOS 5.2) </p>
<p>config... </p>
<p>product..null </p>
<p>metric...platform.log_track.level=Warn,platform.log_track.enable=true,platform.config_track.enable=true, </p>
<p>control..null </p>
<p>cprops...cpuSpeed=8 @ 2128 MHz (8x16),defaultGateway=192.168.0.1,arch=x86_64,ram=16000 MB,vendor=CentOS,vendorVersion=5.2,primaryDNS=192.168.0.1,ip=192.168.122.1,version=2.6.18-92.el5xen, </p>
<p>&#160;&#160; [No services discovered]</p>
<p>然后兴冲冲的去重启agent,不断地刷server,仍然没出来。</p>
<p>什么错也没报。真是很无语，这种东西用起来真吃力呀！</p>
<p>到此为止吧，就算我愚钝不堪，仅为这么个基本的jmx配置就搞这半天，这个工具也太不好用了吧。</p>
<p>总结一下感觉不爽的地方：</p>
<ul>
<li>相关资料稀少，使用者提出的问题鲜有人回答，往往是使用者之间的沟通而没有支持与使用者的沟通。估计使用的人也不多。</li>
<li>官方写的文档这里引用那里，那里引用这里，转的头昏脑胀还是没搞明白，它就是不让你看懂。</li>
<li>HQ server的UI太俗不说，反应非常慢，一个操作要隔几秒钟，按得我手疼。</li>
<li>本机器上安装server后，机器反应速度奇慢，关闭server服务则明显改善，如果再跑上个agent那更不得了。我对其性能持怀疑态度，如果agent所在服务器服务多，再开上个agent那就是雪上加霜，不知这样的监控有多少可评测性。</li>
</ul>
