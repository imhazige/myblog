---
layout: post
title: jms笔记
date: 2011-06-10 16:51:14.000000000 +01:00
type: post
published: true
status: publish
categories:
- java
tags:
- java
- jms
meta:
  views: '33'
author:
  login: ig2net
  email: ig2net@ig2net.info
  display_name: "农夫一号"
  first_name: ''
  last_name: ''
---
<h3 id="sites-page-title-header" align="left">&#160;</h3>
<div class="sites-canvas-main">
<div>
<table class="sites-layout-name-one-column sites-layout-hbox zeroBorder" cellspacing="0">
<tbody>
<tr>
<td class="sites-layout-tile sites-tile-name-content-1">
<div dir="ltr">Publish-and-subscribe模式:topic               <br />一对多,推送消息                <br />Point-to-point模式:queue                <br />只保证一个接收者收到，要求客户端自己查询获取。                <br />依据jms规范，消息总是要保证送达的，中间的如有短线等故障，再次连接后任然可以获得。                </p>
<p>在容器中，不要使用SessionBean或EntityBean作为消息接收者，这关系到线程阻塞问题，标准的方法是使用MessageDriveBean来接收消息。                </p>
<p>MDB是无状态的，事务的。                <br />selector是依据消息属性来选择的，使用sql-92 where 后面的语法.                <br />Acknowledge mode是用以判断消息已发送的模式，Auto-acknowledge 和 Dups-ok-acknowledge。                <br />Auto-acknowledge<a name="entjbeans4-CHP-12-ITERM-3772">是消息一旦发送给MDB就通知</a>                <br />Dups-ok-acknowledge则说明通知时间无所谓并允许重复发送（当JMS认为消息发送失败时）。这种主要是为网络性能考虑，实际上作用不大。                <br />并且这个设置只当bean-managed transactions, or with the container-managed transaction attribute NotSupported 时才起作用，一般都是容器管理的，会忽略这个配置。                </p>
<p>【wsad设置JMS】                <br />需要在设置ConnectionFactory和Queue/Topic                <br />对于Queue要在如下图这里添加。
<div style="text-align: left"><a href="http://blog.ureshika.com/wp-content/uploads/2011/06/jmswsad.png"><img style="border-bottom: 0px;border-left: 0px;border-top: 0px;border-right: 0px" border="0" alt="jms-wsad" src="{{ site.baseurl }}/assets/jmswsad_thumb.png" width="576" height="484" /></a> </div>
<p> 注意createQueueSession(false, 0);虽然一般建议使用true, 但是这里是简单的测试，上下文没有事务，所以如果用true会导致rollback,故此处设为false.                <br />topic一直没试通，配置还是在控制台里面配置才配成功的，但是代码里面又抛异常……                </div>
</td>
</tr>
</tbody>
</table></div>
</p></div>
