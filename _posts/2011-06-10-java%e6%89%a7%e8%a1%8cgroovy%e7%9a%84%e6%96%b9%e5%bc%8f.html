---
layout: post
title: java执行groovy的方式
date: 2011-06-10 16:55:30.000000000 +01:00
type: post
published: true
status: publish
categories:
- java
tags:
- groovy
- java
meta:
  views: '61'
author:
  login: ig2net
  email: ig2net@ig2net.info
  display_name: "农夫一号"
  first_name: ''
  last_name: ''
---
<h3 id="sites-page-title-header" align="left">&#160;</h3>
<div class="sites-canvas-main">
<div>
<table class="sites-layout-name-one-column sites-layout-hbox zeroBorder" cellspacing="0">
<tbody>
<tr>
<td class="sites-layout-tile sites-tile-name-content-1">
<div dir="ltr"><span>脚本全文（不需要包名匹配，因为这是脚本）：</span>                </p>
<p>println(&quot;hello!this is a script!&quot;);                </p>
<p><span>类全文：</span>                </p>
<p>package co.java;                </p>
<p>import java.io.File;                <br />import java.io.IOException;                </p>
<p>import org.codehaus.groovy.control.CompilationFailedException;                </p>
<p>import groovy.lang.GroovyClassLoader;                <br />import groovy.lang.Script;                <br />import groovy.util.GroovyScriptEngine;                </p>
<p>public class InvokeGroovyTest                <br />{                <br />&#160;&#160;&#160; public static void main(String[] args)                <br />&#160;&#160;&#160; {                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; InvokeGroovyTest test = new InvokeGroovyTest();                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />//&#160;&#160;&#160;&#160;&#160;&#160;&#160; test.way1();                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; test.way2();                <br />&#160;&#160;&#160; }                <br />&#160;&#160;&#160; <br />&#160;&#160;&#160; public void way1()                <br />&#160;&#160;&#160; {                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; try                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; {                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ClassLoader cl = InvokeGroovyTest.class.getClassLoader();                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; GroovyClassLoader groovyCl = new GroovyClassLoader(cl);                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Class groovyClass = groovyCl.parseClass(new File(&quot;src/co/java/Script.groovy&quot;));                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Script sc = (Script)groovyClass.newInstance();                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; sc.run();                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; }                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; catch (Exception e)                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; {                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; // TODO Auto-generated catch block                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; e.printStackTrace();                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; }&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160; }                <br />&#160;&#160;&#160; <br />&#160;&#160;&#160; public void way2()                <br />&#160;&#160;&#160; {                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; try                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; {                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; GroovyScriptEngine engine = new GroovyScriptEngine(&quot;.&quot;);                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; engine.run(&quot;src/co/java/Script.groovy&quot;, (String)null);                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; }                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; catch (Exception e)                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; {                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; e.printStackTrace();                <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; }&#160;&#160;&#160;&#160;&#160;&#160;&#160; <br />&#160;&#160;&#160; }                <br />}                </div>
</td>
</tr>
</tbody>
</table></div>
</p></div>
